{"ast":null,"code":"import React,{useEffect,useRef}from\"react\";import L from\"leaflet\";import*as esri from'esri-leaflet';import*as ELG from\"esri-leaflet-geocoder\";import{MapContainer,TileLayer,Marker,Popup}from'react-leaflet';import\"leaflet/dist/leaflet.css\";import\"esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css\";import\"leaflet/dist/leaflet.js\";import\"esri-leaflet-geocoder/dist/esri-leaflet-geocoder.js\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function MapComp(_ref){var center=_ref.center,zoom=_ref.zoom,height=_ref.height,geolocate=_ref.geolocate,searchPlaces=_ref.searchPlaces,marginClass=_ref.marginClass,paddingClass=_ref.paddingClass,scrollWheelZoom=_ref.scrollWheelZoom;var _height=height||\"100vh\";var _center=center||[0,0];var _zoom=zoom||\"3\";var leafletMap=useRef(null);var LayersGroups=null;var map=L.map('map').setView([0,0],3);;var addMarkertoMap=function addMarkertoMap(latlng,draggable,textLocate){LayersGroups.clearLayers();LayersGroups.addLayer(L.marker(latlng,{draggable:draggable}).bindPopup(textLocate).openPopup());map.setView(latlng);};var handleSearchResults=function handleSearchResults(searchControl){searchControl.on(\"results\",function(data){for(var i=data.results.length-1;i>=0;i--){addMarkertoMap(data.results[i].latlng,true,data.text);}});};var onLocationFound=function onLocationFound(e){addMarkertoMap(e.latlng,true);};function onLocationError(e){alert(e.message);}var DisableScrollWheelZoom=function DisableScrollWheelZoom(){if(!scrollWheelZoom){map.scrollWheelZoom.disable();map.on('click',function(){map.scrollWheelZoom.enable();});map.on('mouseout',function(){map.scrollWheelZoom.disable();});}};var handlesMap=function handlesMap(){map.on('locationfound',onLocationFound);map.on('locationerror',onLocationError);DisableScrollWheelZoom();};useEffect(function(){map=leafletMap.current.leafletElement;esri.basemapLayer(\"DarkGray\",{maxNativeZoom:19}).addTo(map);if(map){LayersGroups=new L.LayerGroup().addTo(map);if(geolocate){map.locate({watch:true,enableHighAccuracy:true});handlesMap();}if(searchPlaces){var searchControl=new ELG.Geosearch().addTo(map);handleSearchResults(searchControl);}}},[]);return/*#__PURE__*/_jsxs(MapContainer,{className:\"\".concat(marginClass||'m-0',\" \").concat(paddingClass||'p-0'),style:{height:_height},center:_center,zoom:_zoom,ref:function ref(m){leafletMap.current=m;},children:[/*#__PURE__*/_jsx(TileLayer,{attribution:\"\\xA9 <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors\",url:\"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png\",maxZoom:\"20\"}),/*#__PURE__*/_jsx(\"div\",{className:\"pointer\"})]});}export default MapComp;","map":{"version":3,"sources":["/Users/daltonchichester/Documents/GitHub/360MapController/src/Map.js"],"names":["React","useEffect","useRef","L","esri","ELG","MapContainer","TileLayer","Marker","Popup","MapComp","center","zoom","height","geolocate","searchPlaces","marginClass","paddingClass","scrollWheelZoom","_height","_center","_zoom","leafletMap","LayersGroups","map","setView","addMarkertoMap","latlng","draggable","textLocate","clearLayers","addLayer","marker","bindPopup","openPopup","handleSearchResults","searchControl","on","data","i","results","length","text","onLocationFound","e","onLocationError","alert","message","DisableScrollWheelZoom","disable","enable","handlesMap","current","leafletElement","basemapLayer","maxNativeZoom","addTo","LayerGroup","locate","watch","enableHighAccuracy","Geosearch","m"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport L from \"leaflet\";\nimport * as esri from 'esri-leaflet';\nimport * as ELG from \"esri-leaflet-geocoder\";\nimport { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet'\n\nimport \"leaflet/dist/leaflet.css\";\nimport \"esri-leaflet-geocoder/dist/esri-leaflet-geocoder.css\";\n\nimport \"leaflet/dist/leaflet.js\";\nimport \"esri-leaflet-geocoder/dist/esri-leaflet-geocoder.js\";\n\nfunction MapComp({center, zoom, height, geolocate, searchPlaces, marginClass, paddingClass, scrollWheelZoom}) {\n\n    const _height = height || \"100vh\";\n    const _center = center || [0, 0];\n    const _zoom = zoom || \"3\";\n    const leafletMap = useRef(null);\n    let LayersGroups = null;\n    let map = L.map('map').setView([0, 0], 3);;\n\n    const addMarkertoMap = (latlng, draggable, textLocate) => {\n        LayersGroups.clearLayers();\n        LayersGroups.addLayer(L.marker(latlng, {draggable}).bindPopup(textLocate).openPopup());\n        map.setView(latlng);\n    }\n\n\n    const handleSearchResults = (searchControl) => {\n        searchControl.on(\"results\", function(data) {\n            for (let i = data.results.length - 1; i >= 0; i--) {\n                addMarkertoMap(data.results[i].latlng, true, data.text);\n            }\n        });\n    }\n\n    const onLocationFound = (e) => {\n        addMarkertoMap(e.latlng, true);\n    }\n\n    function onLocationError(e) {\n        alert(e.message);\n    }\n\n    const DisableScrollWheelZoom = () => {\n        if (!scrollWheelZoom) {\n            map.scrollWheelZoom.disable();\n            map.on('click', function() {\n                map.scrollWheelZoom.enable();\n            });\n            map.on('mouseout', function() { \n                map.scrollWheelZoom.disable(); \n            });\n        }\n    }\n\n    const handlesMap= () => {\n        map.on('locationfound', onLocationFound);\n        map.on('locationerror', onLocationError);\n        DisableScrollWheelZoom();\n    }\n\n    useEffect(() => {\n        map = leafletMap.current.leafletElement;\n        esri.basemapLayer(\"DarkGray\", { maxNativeZoom: 19}).addTo(map);\n\n        if (map) {\n            \n            LayersGroups = new L.LayerGroup().addTo(map);\n\n            if (geolocate) {\n                map.locate({watch: true, enableHighAccuracy: true});\n                handlesMap();\n            }\n\n            if (searchPlaces) {\n                const searchControl = new ELG.Geosearch().addTo(map);\n                handleSearchResults(searchControl);\n            }\n        }\n    }, [])\n   \n    return (\n        <MapContainer\n            className={`${marginClass|| 'm-0'} ${paddingClass|| 'p-0'}`}\n            style={{height:_height}}\n            center={_center}\n            zoom= {_zoom} \n            ref={m => {\n                leafletMap.current = m;\n            }}\n        >\n            <TileLayer\n                attribution=\"&copy; <a href='https://osm.org/copyright'>OpenStreetMap</a> contributors\"\n                url={\"https://tiles.stadiamaps.com/tiles/alidade_smooth_dark/{z}/{x}/{y}{r}.png\"}\n                maxZoom=\"20\"\n            />\n            <div className=\"pointer\" />\n        </MapContainer>\n    );\n}\n\nexport default MapComp;"]},"metadata":{},"sourceType":"module"}