/*! For license information please see 2.2576970e.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-controller"]=this["webpackJsonpreact-controller"]||[]).push([[2],[function(t,e,n){(function(e){var n;n="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:{},t.exports=n}).call(this,n(24))},function(t,e,n){!function(t){"use strict";var e="1.7.1";function n(t){var e,n,i,r;for(n=1,i=arguments.length;n<i;n++)for(e in r=arguments[n])t[e]=r[e];return t}var i=Object.create||function(){function t(){}return function(e){return t.prototype=e,new t}}();function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var i,r,o,a;return a=function(){i=!1,r&&(o.apply(n,r),r=!1)},o=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(a,e),i=!0)}}function u(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var n in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?i(t.options):{}),e)t.options[n]=e[n];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"===typeof i&&(i=i(e)),i}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var T=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-T));return T=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||b("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||x!==w)return x.call(window,r(t,e));t.call(e)}function k(t){t&&S.call(window,t)}var C={extend:n,create:i,bind:r,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:x,cancelFn:S,requestAnimFrame:E,cancelAnimFrame:k};function P(){}function I(t){if("undefined"!==typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}P.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},r=e.__super__=this.prototype,o=i(r);for(var a in o.constructor=e,e.prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(e[a]=this[a]);return t.statics&&(n(e,t.statics),delete t.statics),t.includes&&(I(t.includes),n.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=n(i(o.options),t.options)),n(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},e},P.include=function(t){return n(this.prototype,t),this},P.mergeOptions=function(t){return n(this.prototype.options,t),this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"===typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var A={on:function(t,e,n){if("object"===typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"===typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,e,i){if(!this.listens(t,i))return this;var r=n({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"===typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,n({layer:t.target,propagatedFrom:t.target},t),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var M=P.extend(A);function O(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var R=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};function D(t,e,n){return t instanceof O?t:_(t)?new O(t[0],t[1]):void 0===t||null===t?t:"object"===typeof t&&"x"in t&&"y"in t?new O(t.x,t.y):new O(t,e,n)}function N(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function B(t,e){return!t||t instanceof N?t:new N(t,e)}function U(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function z(t,e){return t instanceof U?t:new U(t,e)}function F(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function j(t,e,n){return t instanceof F?t:_(t)&&"object"!==typeof t[0]?3===t.length?new F(t[0],t[1],t[2]):2===t.length?new F(t[0],t[1]):null:void 0===t||null===t?t:"object"===typeof t&&"lat"in t?new F(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new F(t,e,n)}O.prototype={clone:function(){return new O(this.x,this.y)},add:function(t){return this.clone()._add(D(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(D(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new O(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new O(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=R(this.x),this.y=R(this.y),this},distanceTo:function(t){var e=(t=D(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=D(t)).x===this.x&&t.y===this.y},contains:function(t){return t=D(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},N.prototype={extend:function(t){return t=D(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new O((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new O(this.min.x,this.max.y)},getTopRight:function(){return new O(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t="number"===typeof t[0]||t instanceof O?D(t):B(t))instanceof N?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=B(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return o&&a},overlaps:function(t){t=B(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,a=r.y>e.y&&i.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},U.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof F)e=t,n=t;else{if(!(t instanceof U))return t?this.extend(j(t)||z(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new F(e.lat,e.lng),this._northEast=new F(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new U(new F(e.lat-i,e.lng-r),new F(n.lat+i,n.lng+r))},getCenter:function(){return new F((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new F(this.getNorth(),this.getWest())},getSouthEast:function(){return new F(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"===typeof t[0]||t instanceof F||"lat"in t?j(t):z(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof U?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=z(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return o&&a},overlaps:function(t){t=z(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,a=r.lng>e.lng&&i.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=z(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},F.prototype={equals:function(t,e){return!!t&&(t=j(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return Z.distance(this,j(t))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return z([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new F(this.lat,this.lng,this.alt)}};var H={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new N(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new F(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0===i&&0===r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new U(new F(o.lat-i,o.lng-r),new F(a.lat-i,a.lng-r))}},Z=n({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),W=6378137,q={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new O(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new F((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=W*Math.PI;return new N([-t,-t],[t,t])}()};function V(t,e,n,i){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function G(t,e,n,i){return new V(t,e,n,i)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new O((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Y=n({},Z,{code:"EPSG:3857",projection:q,transformation:function(){var t=.5/(Math.PI*q.R);return G(t,.5,-t,.5)}()}),X=n({},Y,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Q(t,e){var n,i,r,o,a,s,u="";for(n=0,r=t.length;n<r;n++){for(i=0,o=(a=t[n]).length;i<o;i++)u+=(i?"L":"M")+(s=a[i]).x+" "+s.y;u+=e?Lt?"z":"x":""}return u||"M0 0"}var $=document.documentElement.style,J="ActiveXObject"in window,tt=J&&!document.addEventListener,et="msLaunchUri"in navigator&&!("documentMode"in document),nt=At("webkit"),it=At("android"),rt=At("android 2")||At("android 3"),ot=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),at=it&&At("Google")&&ot<537&&!("AudioNode"in window),st=!!window.opera,ut=!et&&At("chrome"),lt=At("gecko")&&!nt&&!st&&!J,ct=!ut&&At("safari"),ht=At("phantom"),dt="OTransition"in $,pt=0===navigator.platform.indexOf("Win"),ft=J&&"transition"in $,mt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!rt,gt="MozPerspective"in $,_t=!window.L_DISABLE_3D&&(ft||mt||gt)&&!dt&&!ht,vt="undefined"!==typeof orientation||At("mobile"),yt=vt&&nt,bt=vt&&mt,Tt=!window.PointerEvent&&window.MSPointerEvent,wt=!(!window.PointerEvent&&!Tt),xt=!window.L_NO_TOUCH&&(wt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),St=vt&&st,Et=vt&&lt,kt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ct=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(n){}return t}(),Pt=!!document.createElement("canvas").getContext,Lt=!(!document.createElementNS||!K("svg").createSVGRect),It=!Lt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"===typeof e.adj}catch(n){return!1}}();function At(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var Mt={ie:J,ielt9:tt,edge:et,webkit:nt,android:it,android23:rt,androidStock:at,opera:st,chrome:ut,gecko:lt,safari:ct,phantom:ht,opera12:dt,win:pt,ie3d:ft,webkit3d:mt,gecko3d:gt,any3d:_t,mobile:vt,mobileWebkit:yt,mobileWebkit3d:bt,msPointer:Tt,pointer:wt,touch:xt,mobileOpera:St,mobileGecko:Et,retina:kt,passiveEvents:Ct,canvas:Pt,svg:Lt,vml:It},Ot=Tt?"MSPointerDown":"pointerdown",Rt=Tt?"MSPointerMove":"pointermove",Dt=Tt?"MSPointerUp":"pointerup",Nt=Tt?"MSPointerCancel":"pointercancel",Bt={},Ut=!1;function zt(t,e,n,i){return"touchstart"===e?jt(t,n,i):"touchmove"===e?Vt(t,n,i):"touchend"===e&&Gt(t,n,i),this}function Ft(t,e,n){var i=t["_leaflet_"+e+n];return"touchstart"===e?t.removeEventListener(Ot,i,!1):"touchmove"===e?t.removeEventListener(Rt,i,!1):"touchend"===e&&(t.removeEventListener(Dt,i,!1),t.removeEventListener(Nt,i,!1)),this}function jt(t,e,n){var i=r((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Ze(t),qt(t,e)}));t["_leaflet_touchstart"+n]=i,t.addEventListener(Ot,i,!1),Ut||(document.addEventListener(Ot,Ht,!0),document.addEventListener(Rt,Zt,!0),document.addEventListener(Dt,Wt,!0),document.addEventListener(Nt,Wt,!0),Ut=!0)}function Ht(t){Bt[t.pointerId]=t}function Zt(t){Bt[t.pointerId]&&(Bt[t.pointerId]=t)}function Wt(t){delete Bt[t.pointerId]}function qt(t,e){for(var n in t.touches=[],Bt)t.touches.push(Bt[n]);t.changedTouches=[t],e(t)}function Vt(t,e,n){var i=function(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||qt(t,e)};t["_leaflet_touchmove"+n]=i,t.addEventListener(Rt,i,!1)}function Gt(t,e,n){var i=function(t){qt(t,e)};t["_leaflet_touchend"+n]=i,t.addEventListener(Dt,i,!1),t.addEventListener(Nt,i,!1)}var Yt=Tt?"MSPointerDown":wt?"pointerdown":"touchstart",Xt=Tt?"MSPointerUp":wt?"pointerup":"touchend",Kt="_leaflet_";function Qt(t,e,n){var i,r,o=!1,a=250;function s(t){if(wt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(t.touches.length>1)return;var e=Date.now(),n=e-(i||e);r=t.touches?t.touches[0]:t,o=n>0&&n<=a,i=e}function u(t){if(o&&!r.cancelBubble){if(wt){if("mouse"===t.pointerType)return;var n,a,s={};for(a in r)n=r[a],s[a]=n&&n.bind?n.bind(r):n;r=s}r.type="dblclick",r.button=0,e(r),i=null}}return t[Kt+Yt+n]=s,t[Kt+Xt+n]=u,t[Kt+"dblclick"+n]=e,t.addEventListener(Yt,s,!!Ct&&{passive:!1}),t.addEventListener(Xt,u,!!Ct&&{passive:!1}),t.addEventListener("dblclick",e,!1),this}function $t(t,e){var n=t[Kt+Yt+e],i=t[Kt+Xt+e],r=t[Kt+"dblclick"+e];return t.removeEventListener(Yt,n,!!Ct&&{passive:!1}),t.removeEventListener(Xt,i,!!Ct&&{passive:!1}),t.removeEventListener("dblclick",r,!1),this}var Jt,te,ee,ne,ie,re=Te(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),oe=Te(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ae="webkitTransition"===oe||"OTransition"===oe?oe+"End":"transitionend";function se(t){return"string"===typeof t?document.getElementById(t):t}function ue(t,e){var n=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!n||"auto"===n)&&document.defaultView){var i=document.defaultView.getComputedStyle(t,null);n=i?i[e]:null}return"auto"===n?null:n}function le(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ce(t){var e=t.parentNode;e&&e.removeChild(t)}function he(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function de(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function pe(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function fe(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=ve(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function me(t,e){if(void 0!==t.classList)for(var n=d(e),i=0,r=n.length;i<r;i++)t.classList.add(n[i]);else if(!fe(t,e)){var o=ve(t);_e(t,(o?o+" ":"")+e)}}function ge(t,e){void 0!==t.classList?t.classList.remove(e):_e(t,h((" "+ve(t)+" ").replace(" "+e+" "," ")))}function _e(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function ve(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function ye(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&be(t,e)}function be(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(r){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}function Te(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function we(t,e,n){var i=e||new O(0,0);t.style[re]=(ft?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function xe(t,e){t._leaflet_pos=e,_t?we(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function Se(t){return t._leaflet_pos||new O(0,0)}if("onselectstart"in document)Jt=function(){Oe(window,"selectstart",Ze)},te=function(){De(window,"selectstart",Ze)};else{var Ee=Te(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Jt=function(){if(Ee){var t=document.documentElement.style;ee=t[Ee],t[Ee]="none"}},te=function(){Ee&&(document.documentElement.style[Ee]=ee,ee=void 0)}}function ke(){Oe(window,"dragstart",Ze)}function Ce(){De(window,"dragstart",Ze)}function Pe(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(Le(),ne=t,ie=t.style.outline,t.style.outline="none",Oe(window,"keydown",Le))}function Le(){ne&&(ne.style.outline=ie,ne=void 0,ie=void 0,De(window,"keydown",Le))}function Ie(t){do{t=t.parentNode}while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Ae(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}var Me={TRANSFORM:re,TRANSITION:oe,TRANSITION_END:ae,get:se,getStyle:ue,create:le,remove:ce,empty:he,toFront:de,toBack:pe,hasClass:fe,addClass:me,removeClass:ge,setClass:_e,getClass:ve,setOpacity:ye,testProp:Te,setTransform:we,setPosition:xe,getPosition:Se,disableTextSelection:Jt,enableTextSelection:te,disableImageDrag:ke,enableImageDrag:Ce,preventOutline:Pe,restoreOutline:Le,getSizedParentNode:Ie,getScale:Ae};function Oe(t,e,n,i){if("object"===typeof e)for(var r in e)Ue(t,r,e[r],n);else for(var o=0,a=(e=d(e)).length;o<a;o++)Ue(t,e[o],n,i);return this}var Re="_leaflet_events";function De(t,e,n,i){if("object"===typeof e)for(var r in e)ze(t,r,e[r],n);else if(e)for(var o=0,a=(e=d(e)).length;o<a;o++)ze(t,e[o],n,i);else{for(var s in t[Re])ze(t,s,t[Re][s]);delete t[Re]}return this}function Ne(){if(wt)return!(et||ct)}var Be={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ue(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):"");if(t[Re]&&t[Re][r])return this;var o=function(e){return n.call(i||t,e||window.event)},s=o;wt&&0===e.indexOf("touch")?zt(t,e,o,r):xt&&"dblclick"===e&&!Ne()?Qt(t,o,r):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Be[e]||e,o,!!Ct&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(o=function(e){e=e||window.event,Qe(t,e)&&s(e)},t.addEventListener(Be[e],o,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,o),t[Re]=t[Re]||{},t[Re][r]=o}function ze(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):""),o=t[Re]&&t[Re][r];if(!o)return this;wt&&0===e.indexOf("touch")?Ft(t,e,r):xt&&"dblclick"===e&&!Ne()?$t(t,r):"removeEventListener"in t?t.removeEventListener(Be[e]||e,o,!1):"detachEvent"in t&&t.detachEvent("on"+e,o),t[Re][r]=null}function Fe(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,Ke(t),this}function je(t){return Ue(t,"wheel",Fe),this}function He(t){return Oe(t,"mousedown touchstart dblclick",Fe),Ue(t,"click",Xe),this}function Ze(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function We(t){return Ze(t),Fe(t),this}function qe(t,e){if(!e)return new O(t.clientX,t.clientY);var n=Ae(e),i=n.boundingClientRect;return new O((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Ve=pt&&ut?2*window.devicePixelRatio:lt?window.devicePixelRatio:1;function Ge(t){return et?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Ve:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var Ye={};function Xe(t){Ye[t.type]=!0}function Ke(t){var e=Ye[t.type];return Ye[t.type]=!1,e}function Qe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(i){return!1}return n!==t}var $e={on:Oe,off:De,stopPropagation:Fe,disableScrollPropagation:je,disableClickPropagation:He,preventDefault:Ze,stop:We,getMousePosition:qe,getWheelDelta:Ge,fakeStop:Xe,skipped:Ke,isExternalTarget:Qe,addListener:Oe,removeListener:De},Je=M.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=Se(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),xe(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),tn=M.extend({options:{crs:Y,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(j(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=oe&&_t&&!St&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Oe(this._proxy,ae,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){return e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(j(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=n({animate:i.animate},i.zoom),i.pan=n({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,e),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(_t?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(_t?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof O?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():z(t);var n=D(e.paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"===typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=z(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(e=e||{},!(t=D(t).round()).x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Je,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){me(this._mapPane,"leaflet-pan-anim");var n=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!_t)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=j(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=r.distanceTo(i)||1,c=1.42,h=c*c;function d(t){var e=(u*u-s*s+(t?-1:1)*h*h*l*l)/(2*(t?u:s)*h*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}function m(t){return p(t)/f(t)}var g=d(0);function _(t){return s*(f(g)/f(g+c*t))}function v(t){return s*(f(g)*m(g+c*t)-p(g))/h}function y(t){return 1-Math.pow(1-t,1.5)}var b=Date.now(),T=(d(1)-g)/c,w=n.duration?1e3*n.duration:1e3*T*.8;function x(){var n=(Date.now()-b)/w,o=y(n)*T;n<=1?(this._flyToFrame=E(x,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(v(o)/l)),a),this.getScaleZoom(s/_(o),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),x.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=z(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,z(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n=D((e=e||{}).paddingTopLeft||e.padding||[0,0]),i=D(e.paddingBottomRight||e.padding||[0,0]),r=this.getCenter(),o=this.project(r),a=this.project(t),s=this.getPixelBounds(),u=s.getSize().divideBy(2),l=B([s.min.add(n),s.max.subtract(i)]);if(!l.contains(a)){this._enforcingBounds=!0;var c=o.subtract(a),h=D(a.x+c.x,a.y+c.y);(a.x<l.min.x||a.x>l.max.x)&&(h.x=o.x-c.x,c.x>0?h.x+=u.x-n.x:h.x-=u.x-i.x),(a.y<l.min.y||a.y>l.max.y)&&(h.y=o.y-c.y,c.y>0?h.y+=u.y-n.y:h.y-=u.y-i.y),this.panTo(this.unproject(h),e),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=n({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=e.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=n({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e=new F(t.coords.latitude,t.coords.longitude),n=e.toBounds(2*t.coords.accuracy),i=this._locateOptions;if(i.setView){var r=this.getBoundsZoom(n);this.setView(e,i.maxZoom?Math.min(r,i.maxZoom):r)}var o={latlng:e,bounds:n,timestamp:t.timestamp};for(var a in t.coords)"number"===typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(e){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ce(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ce(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=le("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new U(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=z(t),n=D(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=B(this.project(s,i),this.project(a,i)).getSize(),c=_t?this.options.zoomSnap:1,h=u.x/l.x,d=u.y/l.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new O(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"===typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(j(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(D(t),e)},layerPointToLatLng:function(t){var e=D(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(j(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(j(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(z(t))},distance:function(t,e){return this.options.crs.distance(j(t),j(e))},containerPointToLayerPoint:function(t){return D(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return D(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(D(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(j(t)))},mouseEventToContainerPoint:function(t){return qe(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=se(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Oe(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&_t,me(t,"leaflet-container"+(xt?" leaflet-touch":"")+(kt?" leaflet-retina":"")+(tt?" leaflet-oldie":"")+(ct?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=ue(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),xe(this._mapPane,new O(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(me(t.markerPane,"leaflet-zoom-hide"),me(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){xe(this._mapPane,new O(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){xe(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[a(this._container)]=this;var e=t?De:Oe;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),_t&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=E((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(r&&!Qe(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||s||r||!Qe(o,t)||(i=[this]),i},_handleDOMEvent:function(t){if(this._loaded&&!Ke(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||Pe(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var r=n({},t);r.type="preclick",this._fireDOMEvent(r,r.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e))).length){var o=i[0];"contextmenu"===e&&o.listens(e,!0)&&Ze(t);var a={originalEvent:t};if("keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type){var s=o.getLatLng&&(!o._radius||o._radius<=10);a.containerPoint=s?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),a.layerPoint=this.containerPointToLayerPoint(a.containerPoint),a.latlng=s?o.getLatLng():this.layerPointToLatLng(a.layerPoint)}for(var u=0;u<i.length;u++)if(i[u].fire(e,a,!0),a.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,e))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return Se(this._mapPane)||new O(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return B([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new N(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new N(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=B(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new O(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=_t?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ge(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=le("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=re,n=this._proxy.style[e];we(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ce(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();we(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(E((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,me(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ge(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E((function(){this._moveEnd(!0)}),this))}});function en(t,e){return new tn(t,e)}var nn=P.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return me(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ce(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),rn=function(t){return new nn(t)};tn.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=le("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=le("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ce(this._controlCorners[t]);ce(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var on=nn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return nn.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){me(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(me(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):ge(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ge(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=le("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),He(e),je(e);var i=this._section=le("section",t+"-list");n&&(this._map.on("click",this.collapse,this),it||Oe(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=le("a",t+"-toggle",e);r.href="#",r.title="Layers",xt?(Oe(r,"click",We),Oe(r,"click",this.expand,this)):Oe(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=le("div",t+"-base",i),this._separator=le("div",t+"-separator",i),this._overlaysList=le("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;he(this._baseLayersList),he(this._overlaysList),this._layerControlInputs=[];var t,e,n,i,r=0;for(n=0;n<this._layers.length;n++)i=this._layers[n],this._addItem(i),e=e||i.overlay,t=t||!i.overlay,r+=i.overlay?0:1;return this.options.hideSingleBase&&(t=t&&r>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Oe(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;o>=0;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;r>=0;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),an=function(t,e,n){return new on(t,e,n)},sn=nn.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=le("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=le("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),He(o),Oe(o,"click",We),Oe(o,"click",r,this),Oe(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";ge(this._zoomInButton,e),ge(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&me(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&me(this._zoomInButton,e)}});tn.mergeOptions({zoomControl:!0}),tn.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new sn,this.addControl(this.zoomControl))}));var un=function(t){return new sn(t)},ln=nn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=le("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=le("div",e,n)),t.imperial&&(this._iScale=le("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;r>5280?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1)}}),cn=function(t){return new ln(t)},hn=nn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in t.attributionControl=this,this._container=le("div","leaflet-control-attribution"),He(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});tn.mergeOptions({attributionControl:!0}),tn.addInitHook((function(){this.options.attributionControl&&(new hn).addTo(this)}));var dn=function(t){return new hn(t)};nn.Layers=on,nn.Zoom=sn,nn.Scale=ln,nn.Attribution=hn,rn.layers=an,rn.zoom=un,rn.scale=cn,rn.attribution=dn;var pn=P.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});pn.addTo=function(t,e){return t.addHandler(e,this),this};var fn,mn={Events:A},gn=xt?"touchstart mousedown":"mousedown",_n={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},vn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},yn=M.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Oe(this._dragStartTarget,gn,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(yn._dragging===this&&this.finishDrag(),De(this._dragStartTarget,gn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!fe(this._element,"leaflet-zoom-anim")&&!(yn._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches)&&(yn._dragging=this,this._preventOutline&&Pe(this._element),ke(),Jt(),!this._moving))){this.fire("down");var e=t.touches?t.touches[0]:t,n=Ie(this._element);this._startPoint=new O(e.clientX,e.clientY),this._parentScale=Ae(n),Oe(document,vn[t.type],this._onMove,this),Oe(document,_n[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled)if(t.touches&&t.touches.length>1)this._moved=!0;else{var e=t.touches&&1===t.touches.length?t.touches[0]:t,n=new O(e.clientX,e.clientY)._subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Ze(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=Se(this._element).subtract(n),me(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),me(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,k(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),xe(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in ge(document.body,"leaflet-dragging"),this._lastTarget&&(ge(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),vn)De(document,vn[t],this._onMove,this),De(document,_n[t],this._onUp,this);Ce(),te(),this._moved&&this._moving&&(k(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,yn._dragging=!1}});function bn(t,e){if(!e||!t.length)return t.slice();var n=e*e;return t=xn(t=En(t,n),n)}function Tn(t,e,n){return Math.sqrt(In(t,e,n,!0))}function wn(t,e,n){return In(t,e,n)}function xn(t,e){var n=t.length,i=new(typeof Uint8Array!==void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,Sn(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}function Sn(t,e,n,i,r){var o,a,s,u=0;for(a=i+1;a<=r-1;a++)(s=In(t[a],t[i],t[r],!0))>u&&(o=a,u=s);u>n&&(e[o]=1,Sn(t,e,n,i,o),Sn(t,e,n,o,r))}function En(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)Ln(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}function kn(t,e,n,i,r){var o,a,s,u=i?fn:Pn(t,n),l=Pn(e,n);for(fn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=Pn(a=Cn(t,e,o=u||l,n,r),n),o===u?(t=a,u=s):(e=a,l=s)}}function Cn(t,e,n,i,r){var o,a,s=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new O(o,a,r)}function Pn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function Ln(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i}function In(t,e,n,i){var r,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return l>0&&((r=((t.x-o)*s+(t.y-a)*u)/l)>1?(o=n.x,a=n.y):r>0&&(o+=s*r,a+=u*r)),s=t.x-o,u=t.y-a,i?s*s+u*u:new O(o,a)}function An(t){return!_(t[0])||"object"!==typeof t[0][0]&&"undefined"!==typeof t[0][0]}function Mn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),An(t)}var On={simplify:bn,pointToSegmentDistance:Tn,closestPointOnSegment:wn,clipSegment:kn,_getEdgeIntersection:Cn,_getBitCode:Pn,_sqClosestPointOnSegment:In,isFlat:An,_flat:Mn};function Rn(t,e,n){var i,r,o,a,s,u,l,c,h,d=[1,4,2,8];for(r=0,l=t.length;r<l;r++)t[r]._code=Pn(t[r],e);for(a=0;a<4;a++){for(c=d[a],i=[],r=0,o=(l=t.length)-1;r<l;o=r++)s=t[r],u=t[o],s._code&c?u._code&c||((h=Cn(u,s,c,e,n))._code=Pn(h,e),i.push(h)):(u._code&c&&((h=Cn(u,s,c,e,n))._code=Pn(h,e),i.push(h)),i.push(s));t=i}return t}var Dn={clipPolygon:Rn},Nn={project:function(t){return new O(t.lng,t.lat)},unproject:function(t){return new F(t.y,t.x)},bounds:new N([-180,-90],[180,90])},Bn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new O(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&Math.abs(l)>1e-7;u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new F(s*n,t.x*n/i)}},Un={LonLat:Nn,Mercator:Bn,SphericalMercator:q},zn=n({},Z,{code:"EPSG:3395",projection:Bn,transformation:function(){var t=.5/(Math.PI*Bn.R);return G(t,.5,-t,.5)}()}),Fn=n({},Z,{code:"EPSG:4326",projection:Nn,transformation:G(1/180,1,-1/180,.5)}),jn=n({},H,{projection:Nn,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});H.Earth=Z,H.EPSG3395=zn,H.EPSG3857=Y,H.EPSG900913=X,H.EPSG4326=Fn,H.Simple=jn;var Hn=M.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var n=this.getEvents();e.on(n,this),this.once("remove",(function(){e.off(n,this)}),this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});tn.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?_(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Zn=Hn.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"===typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return a(t)}}),Wn=function(t,e){return new Zn(t,e)},qn=Zn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Zn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Zn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new U;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),Vn=function(t,e){return new qn(t,e)},Gn=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"===typeof i&&(i=[i,i]);var r=D(i),o=D("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return kt&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Yn(t){return new Gn(t)}var Xn=Gn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return Xn.imagePath||(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+Gn.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=le("div","leaflet-default-icon-path",document.body),e=ue(t,"background-image")||ue(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Kn=pn.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new yn(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),me(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ge(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,n=e._map,i=this._marker.options.autoPanSpeed,r=this._marker.options.autoPanPadding,o=Se(e._icon),a=n.getPixelBounds(),s=n.getPixelOrigin(),u=B(a.min._subtract(s).add(r),a.max._subtract(s).subtract(r));if(!u.contains(o)){var l=D((Math.max(u.max.x,o.x)-u.max.x)/(a.max.x-u.max.x)-(Math.min(u.min.x,o.x)-u.min.x)/(a.min.x-u.min.x),(Math.max(u.max.y,o.y)-u.max.y)/(a.max.y-u.max.y)-(Math.min(u.min.y,o.y)-u.min.y)/(a.min.y-u.min.y)).multiplyBy(i);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),xe(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=Se(e._icon),r=e._map.layerPointToLatLng(i);n&&xe(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Qn=Hn.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=j(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),me(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(me(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ce(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ce(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&xe(this._icon,t),this._shadow&&xe(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(me(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Kn)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Kn(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&ye(this._icon,t),this._shadow&&ye(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function $n(t,e){return new Qn(t,e)}var Jn=Hn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),ti=Jn.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=j(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=j(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Jn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new N(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ei(t,e){return new ti(t,e)}var ni=ti.extend({initialize:function(t,e,i){if("number"===typeof e&&(e=n({},i,{radius:e})),p(this,e),this._latlng=j(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new U(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Jn.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,n=this._map,i=n.options.crs;if(i.distance===Z.distance){var r=Math.PI/180,o=this._mRadius/Z.R/r,a=n.project([e+o,t]),s=n.project([e-o,t]),u=a.add(s).divideBy(2),l=n.unproject(u).lat,c=Math.acos((Math.cos(o*r)-Math.sin(e*r)*Math.sin(l*r))/(Math.cos(e*r)*Math.cos(l*r)))/r;(isNaN(c)||0===c)&&(c=o/Math.cos(Math.PI/180*e)),this._point=u.subtract(n.getPixelOrigin()),this._radius=isNaN(c)?0:u.x-n.project([l,t-c]).x,this._radiusY=u.y-a.y}else{var h=i.unproject(i.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(h).x}this._updateBounds()}});function ii(t,e,n){return new ni(t,e,n)}var ri=Jn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=In,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){var h=o(t,e=u[l-1],n=u[l],!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(t=0,e=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,i=0;t<u-1;t++)if(r=s[t],o=s[t+1],(i+=n=r.distanceTo(o))>e)return a=(i-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=j(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new U,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return An(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=An(t),i=0,r=t.length;i<r;i++)n?(e[i]=j(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new O(t,t);this._pxBounds=new N([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof F,a=t.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else{var e,n,i,r,o,a,s,u=this._parts;for(e=0,i=0,r=this._rings.length;e<r;e++)for(n=0,o=(s=this._rings[e]).length;n<o-1;n++)(a=kn(s[n],s[n+1],t,n,!0))&&(u[i]=u[i]||[],u[i].push(a[0]),a[1]===s[n+1]&&n!==o-2||(u[i].push(a[1]),i++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=bn(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&Tn(t,s[r],s[i])<=u)return!0;return!1}});function oi(t,e){return new ri(t,e)}ri._flat=Mn;var ai=ri.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(o=a=s=0,t=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*r,s+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=ri.prototype._convertLatLngs.call(this,t),n=e.length;return n>=2&&e[0]instanceof F&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){ri.prototype._setLatLngs.call(this,t),An(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return An(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new O(e,e);if(t=new N(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=Rn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(u=(e=this._parts[r]).length)-1;o<u;a=o++)n=e[o],i=e[a],n.y>t.y!==i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||ri.prototype._containsPoint.call(this,t,!0)}});function si(t,e){return new ai(t,e)}var ui=qn.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=_(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=li(t,o);return a?(a.feature=gi(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=n({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"===typeof e&&(e=e(t.feature)),t.setStyle(e))}});function li(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||hi;if(!s&&!a)return null;switch(a.type){case"Point":return ci(l,t,n=c(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=c(s[r]),u.push(ci(l,t,n,e));return new qn(u);case"LineString":case"MultiLineString":return i=di(s,"LineString"===a.type?0:1,c),new ri(i,e);case"Polygon":case"MultiPolygon":return i=di(s,"Polygon"===a.type?1:2,c),new ai(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=li({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new qn(u);default:throw new Error("Invalid GeoJSON object.")}}function ci(t,e,n,i){return t?t(e,n):new Qn(n,i&&i.markersInheritOptions&&i)}function hi(t){return new F(t[1],t[0],t[2])}function di(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?di(t[o],e-1,n):(n||hi)(t[o]),r.push(i);return r}function pi(t,e){return e="number"===typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function fi(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?fi(t[o],e-1,n,i):pi(t[o],i));return!e&&n&&r.push(r[0]),r}function mi(t,e){return t.feature?n({},t.feature,{geometry:e}):gi(e)}function gi(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var _i={toGeoJSON:function(t){return mi(this,{type:"Point",coordinates:pi(this.getLatLng(),t)})}};function vi(t,e){return new ui(t,e)}Qn.include(_i),ni.include(_i),ti.include(_i),ri.include({toGeoJSON:function(t){var e=!An(this._latlngs);return mi(this,{type:(e?"Multi":"")+"LineString",coordinates:fi(this._latlngs,e?1:0,!1,t)})}}),ai.include({toGeoJSON:function(t){var e=!An(this._latlngs),n=e&&!An(this._latlngs[0]),i=fi(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),mi(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Zn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),mi(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){if(e.toGeoJSON){var r=e.toGeoJSON(t);if(n)i.push(r.geometry);else{var o=gi(r);"FeatureCollection"===o.type?i.push.apply(i,o.features):i.push(o)}}})),n?mi(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var yi=vi,bi=Hn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=z(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(me(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ce(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&de(this._image),this},bringToBack:function(){return this._map&&pe(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=z(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:le("img");me(e,"leaflet-image-layer"),this._zoomAnimated&&me(e,"leaflet-zoom-animated"),this.options.className&&me(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),(this.options.crossOrigin||""===this.options.crossOrigin)&&(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;we(this._image,n,e)},_reset:function(){var t=this._image,e=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();xe(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){ye(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),Ti=function(t,e,n){return new bi(t,e,n)},wi=bi.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:le("video");if(me(e,"leaflet-image-layer"),this._zoomAnimated&&me(e,"leaflet-zoom-animated"),this.options.className&&me(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=n.length>0?i:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=le("source");s.src=this._url[a],e.appendChild(s)}}}});function xi(t,e,n){return new wi(t,e,n)}var Si=bi.extend({_initImage:function(){var t=this._image=this._url;me(t,"leaflet-image-layer"),this._zoomAnimated&&me(t,"leaflet-zoom-animated"),this.options.className&&me(t,this.options.className),t.onselectstart=l,t.onmousemove=l}});function Ei(t,e,n){return new Si(t,e,n)}var ki=Hn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&ye(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&ye(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(ye(this._container,0),this._removeTimeout=setTimeout(r(ce,void 0,this._container),200)):ce(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=j(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&de(this._container),this},bringToBack:function(){return this._map&&pe(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Hn||(n=e,e=t),e instanceof qn)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"===typeof this._content?this._content(this._source||this):this._content;if("string"===typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=D(this.options.offset),n=this._getAnchor();this._zoomAnimated?xe(this._container,t.add(n)):e=e.add(t).add(n);var i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=i+"px",this._container.style.left=r+"px"}},_getAnchor:function(){return[0,0]}}),Ci=ki.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ki.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Jn||this._source.on("preclick",Fe))},onRemove:function(t){ki.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Jn||this._source.off("preclick",Fe))},getEvents:function(){var t=ki.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=le("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),n=this._wrapper=le("div",t+"-content-wrapper",e);if(this._contentNode=le("div",t+"-content",n),He(e),je(this._contentNode),Oe(e,"contextmenu",Fe),this._tipContainer=le("div",t+"-tip-container",e),this._tip=le("div",t+"-tip",this._tipContainer),this.options.closeButton){var i=this._closeButton=le("a",t+"-close-button",e);i.href="#close",i.innerHTML="&#215;",Oe(i,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&i>r?(e.height=r+"px",me(t,o)):ge(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();xe(this._container,e.add(n))},_adjustPan:function(){if(this.options.autoPan){this._map._panAnim&&this._map._panAnim.stop();var t=this._map,e=parseInt(ue(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,r=new O(this._containerLeft,-n-this._containerBottom);r._add(Se(this._container));var o=t.layerPointToContainerPoint(r),a=D(this.options.autoPanPadding),s=D(this.options.autoPanPaddingTopLeft||a),u=D(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),c=0,h=0;o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h])}},_onCloseButtonClick:function(t){this._close(),We(t)},_getAnchor:function(){return D(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Pi=function(t,e){return new Ci(t,e)};tn.mergeOptions({closePopupOnClick:!0}),tn.include({openPopup:function(t,e,n){return t instanceof Ci||(t=new Ci(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Hn.include({bindPopup:function(t,e){return t instanceof Ci?(p(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new Ci(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(We(t),e instanceof Jn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Li=ki.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ki.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ki.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ki.prototype.getEvents.call(this);return xt&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=le("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n,i=this._map,r=this._container,o=i.latLngToContainerPoint(i.getCenter()),a=i.layerPointToContainerPoint(t),s=this.options.direction,u=r.offsetWidth,l=r.offsetHeight,c=D(this.options.offset),h=this._getAnchor();"top"===s?(e=u/2,n=l):"bottom"===s?(e=u/2,n=0):"center"===s?(e=u/2,n=l/2):"right"===s?(e=0,n=l/2):"left"===s?(e=u,n=l/2):a.x<o.x?(s="right",e=0,n=l/2):(s="left",e=u+2*(c.x+h.x),n=l/2),t=t.subtract(D(e,n,!0)).add(c).add(h),ge(r,"leaflet-tooltip-right"),ge(r,"leaflet-tooltip-left"),ge(r,"leaflet-tooltip-top"),ge(r,"leaflet-tooltip-bottom"),me(r,"leaflet-tooltip-"+s),xe(r,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&ye(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return D(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ii=function(t,e){return new Li(t,e)};tn.include({openTooltip:function(t,e,n){return t instanceof Li||(t=new Li(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Hn.include({bindTooltip:function(t,e){return t instanceof Li?(p(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Li(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),xt&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(me(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(ge(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var Ai=Gn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),n=this.options;if(n.html instanceof Element?(he(e),e.appendChild(n.html)):e.innerHTML=!1!==n.html?n.html:"",n.bgPos){var i=D(n.bgPos);e.style.backgroundPosition=-i.x+"px "+-i.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});function Mi(t){return new Ai(t)}Gn.Default=Xn;var Oi=Hn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:vt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ce(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(de(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(pe(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof O?t:new O(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!tt){ye(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r=this._tiles[i];if(r.current&&r.loaded){var o=Math.min(1,(t-r.loaded)/200);ye(r.el,o),o<1?e=!0:(r.active?n=!0:this._onOpaqueTile(r),r.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=le("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ce(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=le("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),l(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i,i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(e=this._tiles[t]).retain=e.current;for(t in this._tiles)if((e=this._tiles[t]).current&&!e.active){var i=e.coords;this._retainParent(i.x,i.y,i.z,i.z-5)||this._retainChildren(i.x,i.y,i.z,i.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ce(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new O(+r,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),a>i&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new O(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e);r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r);var o=this.options.updateWhenZooming&&r!==this._tileZoom;i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();_t?we(t.el,r,i):xe(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new N(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,u=new N(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new O(c.x,c.y))||(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1)this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p=new O(d,h);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:a.push(p)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return z(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new U(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new O(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ce(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){me(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,tt&&this.options.opacity<1&&ye(t,this.options.opacity),it&&!rt&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&E(r(this._tileReady,this,t,null,o)),xe(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(ye(n.el,0),k(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(me(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),tt||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new O(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new N(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Ri(t){return new Oi(t)}var Di=Oi.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&kt&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"===typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),it||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Oe(n,"load",r(this._tileOnLoad,this,e,n)),Oe(n,"error",r(this._tileOnError,this,e,n)),(this.options.crossOrigin||""===this.options.crossOrigin)&&(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var e={r:kt?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return g(this._url,n(e,this.options))},_tileOnLoad:function(t,e){tt?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=y,ce(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return at||e.el.setAttribute("src",y),Oi.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return Oi.prototype._tileReady.call(this,t,e,n)}});function Ni(t,e){return new Di(t,e)}var Bi=Di.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=n({},this.defaultWmsParams);for(var r in e)r in this.options||(i[r]=e[r]);var o=(e=p(this,e)).detectRetina&&kt?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Di.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=B(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,a=(this._wmsVersion>=1.3&&this._crs===Fn?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=Di.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,e){return n(this.wmsParams,t),e||this.redraw(),this}});function Ui(t,e){return new Bi(t,e)}Di.WMS=Bi,Ni.wms=Ui;var zi=Hn.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&me(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=Se(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-n).add(i).add(r).subtract(a);_t?we(this._container,s,n):xe(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new N(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Fi=zi.extend({getEvents:function(){var t=zi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){zi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Oe(t,"mousemove",this._onMouseMove,this),Oe(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Oe(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,ce(this._container),De(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){zi.prototype._update.call(this);var t=this._bounds,e=this._container,n=t.getSize(),i=kt?2:1;xe(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",kt&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){zi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[a(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"===typeof t.options.dashArray){var e,n,i=t.options.dashArray.split(/[, ]+/),r=[];for(n=0;n<i.length;n++){if(e=Number(i[n]),isNaN(e))return;r.push(e)}t.options._dashArray=r}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var n=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),r=(Math.max(Math.round(t._radiusY),1)||i)/i;1!==r&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!==r&&n.restore(),this._fillStroke(n,t)}},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&("click"!==t.type&&"preclick"===t.type||!this._map._draggableMoved(e))&&(n=e);n&&(Xe(t),this._fireEvent([n],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(ge(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(me(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;n&&(n.prev=i,i?i.next=n:n&&(this._drawFirst=n),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))}},_bringToBack:function(t){var e=t._order;if(e){var n=e.next,i=e.prev;i&&(i.next=n,n?n.prev=i:i&&(this._drawLast=i),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}});function ji(t){return Pt?new Fi(t):null}var Hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),Zi={_initContainer:function(){this._container=le("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(zi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Hi("shape");me(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ce(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e||(e=t._stroke=Hi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=_(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n||(n=t._fill=Hi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){de(t._container)},_bringToBack:function(t){pe(t._container)}},Wi=It?Hi:K,qi=zi.extend({getEvents:function(){var t=zi.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Wi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Wi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ce(this._container),De(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){zi.prototype._update.call(this);var t=this._bounds,e=t.getSize(),n=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),xe(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Wi("path");t.options.className&&me(e,t.options.className),t.options.interactive&&me(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ce(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,Q(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){de(t._path)},_bringToBack:function(t){pe(t._path)}});function Vi(t){return Lt||It?new qi(t):null}It&&qi.include(Zi),tn.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this._createRenderer()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ji(t)||Vi(t)}});var Gi=ai.extend({initialize:function(t,e){ai.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=z(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Yi(t,e){return new Gi(t,e)}qi.create=Wi,qi.pointsToPath=Q,ui.geometryToLayer=li,ui.coordsToLatLng=hi,ui.coordsToLatLngs=di,ui.latLngToCoords=pi,ui.latLngsToCoords=fi,ui.getFeature=mi,ui.asFeature=gi,tn.mergeOptions({boxZoom:!0});var Xi=pn.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Oe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){De(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ce(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Jt(),ke(),this._startPoint=this._map.mouseEventToContainerPoint(t),Oe(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=le("div","leaflet-zoom-box",this._container),me(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new N(this._point,this._startPoint),n=e.getSize();xe(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ce(this._box),ge(this._container,"leaflet-crosshair")),te(),Ce(),De(document,{contextmenu:We,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0);var e=new U(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});tn.addInitHook("addHandler","boxZoom",Xi),tn.mergeOptions({doubleClickZoom:!0});var Ki=pn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});tn.addInitHook("addHandler","doubleClickZoom",Ki),tn.mergeOptions({dragging:!0,inertia:!rt,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Qi=pn.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new yn(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}me(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ge(this._map._container,"leaflet-grab"),ge(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=z(this._map.options.maxBounds);this._offsetLimit=B(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,n=e.options,i=!n.inertia||this._times.length<2;if(e.fire("dragend",t),i)e.fire("moveend");else{this._prunePositions(+new Date);var r=this._lastPos.subtract(this._positions[0]),o=(this._lastTime-this._times[0])/1e3,a=n.easeLinearity,s=r.multiplyBy(a/o),u=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,u),c=s.multiplyBy(l/u),h=l/(n.inertiaDeceleration*a),d=c.multiplyBy(-h/2).round();d.x||d.y?(d=e._limitOffset(d,e.options.maxBounds),E((function(){e.panBy(d,{duration:h,easeLinearity:a,noMoveStart:!0,animate:!0})}))):e.fire("moveend")}}});tn.addInitHook("addHandler","dragging",Qi),tn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var $i=pn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Oe(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),De(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(i,n)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,n,i=this._panKeys={},r=this.keyCodes;for(e=0,n=r.left.length;e<n;e++)i[r.left[e]]=[-1*t,0];for(e=0,n=r.right.length;e<n;e++)i[r.right[e]]=[t,0];for(e=0,n=r.down.length;e<n;e++)i[r.down[e]]=[0,t];for(e=0,n=r.up.length;e<n;e++)i[r.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,n,i=this._zoomKeys={},r=this.keyCodes;for(e=0,n=r.zoomIn.length;e<n;e++)i[r.zoomIn[e]]=t;for(e=0,n=r.zoomOut.length;e<n;e++)i[r.zoomOut[e]]=-t},_addHooks:function(){Oe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){De(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=D(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}We(t)}}});tn.addInitHook("addHandler","keyboard",$i),tn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ji=pn.extend({addHooks:function(){Oe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){De(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=Ge(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),We(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,a=t._limitZoom(e+(this._delta>0?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});tn.addInitHook("addHandler","scrollWheelZoom",Ji),tn.mergeOptions({tap:!0,tapTolerance:15});var tr=pn.extend({addHooks:function(){Oe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){De(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Ze(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new O(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&me(n,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Oe(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),De(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],n=e.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&ge(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new O(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!xt||wt&&!ct||tn.addInitHook("addHandler","tap",tr),tn.mergeOptions({touchZoom:xt&&!rt,bounceAtZoomLimits:!0});var er=pn.extend({addHooks:function(){me(this._map._container,"leaflet-touch-zoom"),Oe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ge(this._map._container,"leaflet-touch-zoom"),De(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(n.add(i)._divideBy(2))),this._startDist=n.distanceTo(i),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),Oe(document,"touchmove",this._onTouchMove,this),Oe(document,"touchend",this._onTouchEnd,this),Ze(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&o>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1===o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(s,this,!0),Ze(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),De(document,"touchmove",this._onTouchMove,this),De(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});tn.addInitHook("addHandler","touchZoom",er),tn.BoxZoom=Xi,tn.DoubleClickZoom=Ki,tn.Drag=Qi,tn.Keyboard=$i,tn.ScrollWheelZoom=Ji,tn.Tap=tr,tn.TouchZoom=er,t.version=e,t.Control=nn,t.control=rn,t.Browser=Mt,t.Evented=M,t.Mixin=mn,t.Util=C,t.Class=P,t.Handler=pn,t.extend=n,t.bind=r,t.stamp=a,t.setOptions=p,t.DomEvent=$e,t.DomUtil=Me,t.PosAnimation=Je,t.Draggable=yn,t.LineUtil=On,t.PolyUtil=Dn,t.Point=O,t.point=D,t.Bounds=N,t.bounds=B,t.Transformation=V,t.transformation=G,t.Projection=Un,t.LatLng=F,t.latLng=j,t.LatLngBounds=U,t.latLngBounds=z,t.CRS=H,t.GeoJSON=ui,t.geoJSON=vi,t.geoJson=yi,t.Layer=Hn,t.LayerGroup=Zn,t.layerGroup=Wn,t.FeatureGroup=qn,t.featureGroup=Vn,t.ImageOverlay=bi,t.imageOverlay=Ti,t.VideoOverlay=wi,t.videoOverlay=xi,t.SVGOverlay=Si,t.svgOverlay=Ei,t.DivOverlay=ki,t.Popup=Ci,t.popup=Pi,t.Tooltip=Li,t.tooltip=Ii,t.Icon=Gn,t.icon=Yn,t.DivIcon=Ai,t.divIcon=Mi,t.Marker=Qn,t.marker=$n,t.TileLayer=Di,t.tileLayer=Ni,t.GridLayer=Oi,t.gridLayer=Ri,t.SVG=qi,t.svg=Vi,t.Renderer=zi,t.Canvas=Fi,t.canvas=ji,t.Path=Jn,t.CircleMarker=ti,t.circleMarker=ei,t.Circle=ni,t.circle=ii,t.Polyline=ri,t.polyline=oi,t.Polygon=ai,t.polygon=si,t.Rectangle=Gi,t.rectangle=Yi,t.Map=tn,t.map=en;var nr=window.L;t.noConflict=function(){return window.L=nr,this},window.L=t}(e)},function(t,e,n){(function(e){var i,r="undefined"!==typeof e?e:"undefined"!==typeof window?window:{},o=n(52);"undefined"!==typeof document?i=document:(i=r["__GLOBAL_DOCUMENT_CACHE@4"])||(i=r["__GLOBAL_DOCUMENT_CACHE@4"]=o),t.exports=i}).call(this,n(24))},function(t,e,n){var i=n(25);t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}},function(t,e,n){"use strict";t.exports=n(45)},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(t){if(t&&"object"===typeof t){var e=t.which||t.keyCode||t.charCode;e&&(t=e)}if("number"===typeof t)return a[t];var n,o=String(t);return(n=i[o.toLowerCase()])?n:(n=r[o.toLowerCase()])||(1===o.length?o.charCodeAt(0):void 0)}n.isEventKey=function(t,e){if(t&&"object"===typeof t){var n=t.which||t.keyCode||t.charCode;if(null===n||void 0===n)return!1;if("string"===typeof e){var o;if(o=i[e.toLowerCase()])return o===n;if(o=r[e.toLowerCase()])return o===n}else if("number"===typeof e)return e===n;return!1}};var i=(e=t.exports=n).code=e.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},r=e.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(o=97;o<123;o++)i[String.fromCharCode(o)]=o-32;for(var o=48;o<58;o++)i[o-48]=o;for(o=1;o<13;o++)i["f"+o]=o+111;for(o=0;o<10;o++)i["numpad "+o]=o+96;var a=e.names=e.title={};for(o in i)a[i[o]]=o;for(var s in r)i[s]=r[s]},function(t,e,n){"use strict";t.exports=n(67)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s}));var i=n(4),r=1,o=Object(i.createContext)(null),a=o.Provider;function s(){var t=Object(i.useContext)(o);if(null==t)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}},function(t,e){function n(){return t.exports=n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},n.apply(this,arguments)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return oc}));n(29);var i,r,o=n(4),a=n.n(o);n(30),n(31),n(32),n(33),n(34);var s=(r=i=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this,n));return i.renderImage=function(t){var e=i.props.children,n=[].concat(e),r=[];Array.isArray(n)&&n.map((function(t){switch(t.props.type){case"info":return r.push({id:Math.random().toString(36).substr(2,9),type:t.props.type,pitch:t.props.pitch?t.props.pitch:10,yaw:t.props.yaw?t.props.yaw:10,text:t.props.text?t.props.text:"",URL:t.props.URL?t.props.URL:""});case"custom":return r.push({id:Math.random().toString(36).substr(2,9),pitch:t.props.pitch?t.props.pitch:10,yaw:t.props.yaw?t.props.yaw:10,cssClass:t.props.cssClass?t.props.cssClass:"tooltipcss",createTooltipFunc:t.props.tooltip?t.props.tooltip:i.hotspotTooltip,createTooltipArgs:t.props.tooltipArg?t.props.tooltipArg:{},clickHandlerFunc:t.props.handleClick?t.props.handleClick:i.handleClickHotspot,clickHandlerArgs:t.props.handleClickArg?t.props.handleClickArg:{name:"test"}});default:return[]}}));var o={type:"equirectangular",panorama:i.props.image,haov:i.props.haov,vaov:i.props.vaov,vOffset:i.props.vOffset,yaw:i.props.yaw,pitch:i.props.pitch,hfov:i.props.hfov,minHfov:i.props.minHfov,maxHfov:i.props.maxHfov,minPitch:i.props.minPitch,maxPitch:i.props.maxPitch,minYaw:i.props.minYaw,maxYaw:i.props.maxYaw,autoRotate:i.props.autoRotate,compass:i.props.compass,preview:i.props.preview,previewTitle:i.props.previewTitle,previewAuthor:i.props.previewAuthor,author:i.props.author,title:i.props.title,autoLoad:i.props.autoLoad,orientationOnByDefault:i.props.orientationOnByDefault,showZoomCtrl:i.props.showZoomCtrl,keyboardZoom:i.props.keyboardZoom,mouseZoom:i.props.mouseZoom,draggable:i.props.draggable,disableKeyboardCtrl:i.props.disableKeyboardCtrl,showFullscreenCtrl:i.props.showFullscreenCtrl,showControls:i.props.showControls,hotSpotDebug:i.props.hotspotDebug,hotSpots:r,onRender:i.props.onRender};Object.keys(o).forEach((function(t){return""===o[t]&&delete o[t]})),"update"===t&&i.panorama.destroy(),i.panorama=pannellum.viewer(i.props.id?i.props.id:i.state.id,o),i.panorama.on("load",i.props.onLoad),i.panorama.on("scenechange",i.props.onScenechange),i.panorama.on("scenechangefadedone",i.props.onScenechangefadedone),i.panorama.on("error",i.props.onError),i.panorama.on("errorcleared",i.props.onErrorcleared),i.panorama.on("mousedown",i.props.onMousedown),i.panorama.on("mouseup",i.props.onMouseup),i.panorama.on("touchstart",i.props.onTouchstart),i.panorama.on("touchend",i.props.onTouchend)},i.componentDidMount=function(){i.renderImage("mount")},i.handleClickHotspot=function(t,e){console.log("hotspot clicked",e.name)},i.hotspotTooltip=function(t,e){t.setAttribute("id","textInfo");var n=document.createElement("div");n.classList.add("hotspot");var i=document.createElement("div");i.classList.add("out");var r=document.createElement("div");r.classList.add("in"),document.createElement("div").classList.add("image"),t.appendChild(n),n.appendChild(r),n.appendChild(i)},i.getViewer=function(){return i.panorama},i.forceRender=function(){i.renderImage("update")},i.state={id:Math.random().toString(36).substr(2,9)},i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidUpdate=function(t,e,n){t.image===this.props.image&&t.width===this.props.width&&t.height===this.props.height&&t.compass===this.props.compass&&t.title===this.props.title&&t.author===this.props.author&&t.preview===this.props.preview&&t.previewTitle===this.props.previewTitle&&t.previewAuthor===this.props.previewAuthor&&t.showZoomCtrl===this.props.showZoomCtrl&&t.showFullscreenCtrl===this.props.showFullscreenCtrl&&t.showControls===this.props.showControls&&t.children.length===this.props.children.length||this.renderImage("update"),t.maxYaw===this.props.maxYaw&&t.minYaw===this.props.minYaw&&t.maxPitch===this.props.maxPitch&&t.minPitch===this.props.minPitch&&t.maxHfov===this.props.maxHfov&&t.minHfov===this.props.minHfov||(this.panorama.setYawBounds([this.props.minYaw,this.props.maxYaw]),this.panorama.setPitchBounds([this.props.minPitch,this.props.maxPitch]),this.panorama.setHfovBounds([this.props.minHfov,this.props.maxHfov])),t.yaw!==this.props.yaw&&this.panorama.setYaw(this.props.yaw),t.pitch!==this.props.pitch&&this.panorama.setPitch(this.props.pitch),t.hfov!==this.props.hfov&&this.panorama.setHfov(this.props.hfov)},e.prototype.render=function(){var t=this,e=this.props,n={width:e.width,height:e.height};return a.a.createElement("div",{id:this.props.id?this.props.id:this.state.id,style:n,ref:function(e){return t.imageNode=e}})},e}(o.PureComponent),i.defaultProps={children:[],width:"100%",height:"400px",image:"",haov:360,vaov:180,vOffset:0,yaw:0,pitch:0,hfov:100,minHfov:50,maxHfov:150,minPitch:-90,maxPitch:90,minYaw:-180,maxYaw:180,autoRotate:0,compass:!1,preview:"",previewTitle:"",previewAuthor:"",title:"",author:"",autoLoad:!1,orientationOnByDefault:!1,showZoomCtrl:!0,keyboardZoom:!0,mouseZoom:!0,draggable:!0,disableKeyboardCtrl:!1,showFullscreenCtrl:!0,showControls:!0,onLoad:function(){},onScenechange:function(){},onScenechangefadedone:function(){},onError:function(){},onErrorcleared:function(){},onMousedown:function(){},onMouseup:function(){},onTouchstart:function(){},onTouchend:function(){},hotspotDebug:!1,onRender:null},r);s.propTypes={},s.Hotspot=function(){},s.Hotspot=function(){};var u,l=s,c=n(0),h=n.n(c),d=n(2),p=n.n(d),f=n(9),m=n.n(f),g=n(5),_=n.n(g),v=n(3),y=n.n(v),b=n(37),T=n.n(b),w=n(6),x=n.n(w),S=n(26),E=n.n(S),k=n(27),C=n.n(k),P=n(38),L=n.n(P),I=n(39),A=n.n(I),M=n(28),O=n.n(M),R="http://example.com",D=function(t,e){if(/^[a-z]+:/i.test(e))return e;/^data:/.test(t)&&(t=h.a.location&&h.a.location.href||"");var n="function"===typeof h.a.URL,i=/^\/\//.test(t),r=!h.a.location&&!/\/\//i.test(t);if(n?t=new h.a.URL(t,h.a.location||R):/\/\//i.test(t)||(t=O.a.buildAbsoluteURL(h.a.location&&h.a.location.href||"",t)),n){var o=new URL(e,t);return r?o.href.slice(R.length):i?o.href.slice(o.protocol.length):o.href}return O.a.buildAbsoluteURL(t,e)},N=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(n,1),n>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var n=e.length,i=0;i<n;++i)e[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=e.length,a=0;a<o;++a)e[a].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}(),B=n(18),U=function(t){function e(){var e;return(e=t.call(this)||this).buffer="",e}return y()(e,t),e.prototype.push=function(t){var e;for(this.buffer+=t,e=this.buffer.indexOf("\n");e>-1;e=this.buffer.indexOf("\n"))this.trigger("data",this.buffer.substring(0,e)),this.buffer=this.buffer.substring(e+1)},e}(N),z=String.fromCharCode(9),F=function(t){var e=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),n={};return e[1]&&(n.length=parseInt(e[1],10)),e[2]&&(n.offset=parseInt(e[2],10)),n},j=function(t){for(var e,n=t.split(new RegExp('(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))')),i={},r=n.length;r--;)""!==n[r]&&((e=/([^=]*)=(.*)/.exec(n[r]).slice(1))[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),i[e[0]]=e[1]);return i},H=function(t){function e(){var e;return(e=t.call(this)||this).customParsers=[],e.tagMappers=[],e}y()(e,t);var n=e.prototype;return n.push=function(t){var e,n,i=this;0!==(t=t.trim()).length&&("#"===t[0]?this.tagMappers.reduce((function(e,n){var i=n(t);return i===t?e:e.concat([i])}),[t]).forEach((function(t){for(var r=0;r<i.customParsers.length;r++)if(i.customParsers[r].call(i,t))return;if(0===t.indexOf("#EXT"))if(t=t.replace("\r",""),e=/^#EXTM3U/.exec(t))i.trigger("data",{type:"tag",tagType:"m3u"});else{if(e=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))return n={type:"tag",tagType:"inf"},e[1]&&(n.duration=parseFloat(e[1])),e[2]&&(n.title=e[2]),void i.trigger("data",n);if(e=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"targetduration"},e[1]&&(n.duration=parseInt(e[1],10)),void i.trigger("data",n);if(e=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))return n={type:"tag",tagType:"version"},e[1]&&(n.version=parseInt(e[1],10)),void i.trigger("data",n);if(e=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"media-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void i.trigger("data",n);if(e=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))return n={type:"tag",tagType:"discontinuity-sequence"},e[1]&&(n.number=parseInt(e[1],10)),void i.trigger("data",n);if(e=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))return n={type:"tag",tagType:"playlist-type"},e[1]&&(n.playlistType=e[1]),void i.trigger("data",n);if(e=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(t))return n=m()(F(e[1]),{type:"tag",tagType:"byterange"}),void i.trigger("data",n);if(e=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))return n={type:"tag",tagType:"allow-cache"},e[1]&&(n.allowed=!/NO/.test(e[1])),void i.trigger("data",n);if(e=/^#EXT-X-MAP:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"map"},e[1]){var o=j(e[1]);o.URI&&(n.uri=o.URI),o.BYTERANGE&&(n.byterange=F(o.BYTERANGE))}i.trigger("data",n)}else if(e=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t)){if(n={type:"tag",tagType:"stream-inf"},e[1]){if(n.attributes=j(e[1]),n.attributes.RESOLUTION){var a=n.attributes.RESOLUTION.split("x"),s={};a[0]&&(s.width=parseInt(a[0],10)),a[1]&&(s.height=parseInt(a[1],10)),n.attributes.RESOLUTION=s}n.attributes.BANDWIDTH&&(n.attributes.BANDWIDTH=parseInt(n.attributes.BANDWIDTH,10)),n.attributes["PROGRAM-ID"]&&(n.attributes["PROGRAM-ID"]=parseInt(n.attributes["PROGRAM-ID"],10))}i.trigger("data",n)}else{if(e=/^#EXT-X-MEDIA:?(.*)$/.exec(t))return n={type:"tag",tagType:"media"},e[1]&&(n.attributes=j(e[1])),void i.trigger("data",n);if(e=/^#EXT-X-ENDLIST/.exec(t))i.trigger("data",{type:"tag",tagType:"endlist"});else if(e=/^#EXT-X-DISCONTINUITY/.exec(t))i.trigger("data",{type:"tag",tagType:"discontinuity"});else{if(e=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(t))return n={type:"tag",tagType:"program-date-time"},e[1]&&(n.dateTimeString=e[1],n.dateTimeObject=new Date(e[1])),void i.trigger("data",n);if(e=/^#EXT-X-KEY:?(.*)$/.exec(t))return n={type:"tag",tagType:"key"},e[1]&&(n.attributes=j(e[1]),n.attributes.IV&&("0x"===n.attributes.IV.substring(0,2).toLowerCase()&&(n.attributes.IV=n.attributes.IV.substring(2)),n.attributes.IV=n.attributes.IV.match(/.{8}/g),n.attributes.IV[0]=parseInt(n.attributes.IV[0],16),n.attributes.IV[1]=parseInt(n.attributes.IV[1],16),n.attributes.IV[2]=parseInt(n.attributes.IV[2],16),n.attributes.IV[3]=parseInt(n.attributes.IV[3],16),n.attributes.IV=new Uint32Array(n.attributes.IV))),void i.trigger("data",n);if(e=/^#EXT-X-START:?(.*)$/.exec(t))return n={type:"tag",tagType:"start"},e[1]&&(n.attributes=j(e[1]),n.attributes["TIME-OFFSET"]=parseFloat(n.attributes["TIME-OFFSET"]),n.attributes.PRECISE=/YES/.test(n.attributes.PRECISE)),void i.trigger("data",n);if(e=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out-cont"},e[1]?n.data=e[1]:n.data="",void i.trigger("data",n);if(e=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-out"},e[1]?n.data=e[1]:n.data="",void i.trigger("data",n);if(e=/^#EXT-X-CUE-IN:?(.*)?$/.exec(t))return n={type:"tag",tagType:"cue-in"},e[1]?n.data=e[1]:n.data="",void i.trigger("data",n);if((e=/^#EXT-X-SKIP:(.*)$/.exec(t))&&e[1])return(n={type:"tag",tagType:"skip"}).attributes=j(e[1]),n.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(n.attributes["SKIPPED-SEGMENTS"]=parseInt(n.attributes["SKIPPED-SEGMENTS"],10)),n.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(n.attributes["RECENTLY-REMOVED-DATERANGES"]=n.attributes["RECENTLY-REMOVED-DATERANGES"].split(z)),void i.trigger("data",n);if((e=/^#EXT-X-PART:(.*)$/.exec(t))&&e[1])return(n={type:"tag",tagType:"part"}).attributes=j(e[1]),["DURATION"].forEach((function(t){n.attributes.hasOwnProperty(t)&&(n.attributes[t]=parseFloat(n.attributes[t]))})),["INDEPENDENT","GAP"].forEach((function(t){n.attributes.hasOwnProperty(t)&&(n.attributes[t]=/YES/.test(n.attributes[t]))})),n.attributes.hasOwnProperty("BYTERANGE")&&(n.attributes.byterange=F(n.attributes.BYTERANGE)),void i.trigger("data",n);if((e=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(t))&&e[1])return(n={type:"tag",tagType:"server-control"}).attributes=j(e[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach((function(t){n.attributes.hasOwnProperty(t)&&(n.attributes[t]=parseFloat(n.attributes[t]))})),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach((function(t){n.attributes.hasOwnProperty(t)&&(n.attributes[t]=/YES/.test(n.attributes[t]))})),void i.trigger("data",n);if((e=/^#EXT-X-PART-INF:(.*)$/.exec(t))&&e[1])return(n={type:"tag",tagType:"part-inf"}).attributes=j(e[1]),["PART-TARGET"].forEach((function(t){n.attributes.hasOwnProperty(t)&&(n.attributes[t]=parseFloat(n.attributes[t]))})),void i.trigger("data",n);if((e=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(t))&&e[1])return(n={type:"tag",tagType:"preload-hint"}).attributes=j(e[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach((function(t){if(n.attributes.hasOwnProperty(t)){n.attributes[t]=parseInt(n.attributes[t],10);var e="BYTERANGE-LENGTH"===t?"length":"offset";n.attributes.byterange=n.attributes.byterange||{},n.attributes.byterange[e]=n.attributes[t],delete n.attributes[t]}})),void i.trigger("data",n);if((e=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(t))&&e[1])return(n={type:"tag",tagType:"rendition-report"}).attributes=j(e[1]),["LAST-MSN","LAST-PART"].forEach((function(t){n.attributes.hasOwnProperty(t)&&(n.attributes[t]=parseInt(n.attributes[t],10))})),void i.trigger("data",n);i.trigger("data",{type:"tag",data:t.slice(4)})}}}else i.trigger("data",{type:"comment",text:t.slice(1)})})):this.trigger("data",{type:"uri",uri:t}))},n.addParser=function(t){var e=this,n=t.expression,i=t.customType,r=t.dataParser,o=t.segment;"function"!==typeof r&&(r=function(t){return t}),this.customParsers.push((function(t){if(n.exec(t))return e.trigger("data",{type:"custom",data:r(t),customType:i,segment:o}),!0}))},n.addTagMapper=function(t){var e=t.expression,n=t.map;this.tagMappers.push((function(t){return e.test(t)?n(t):t}))},e}(N),Z=function(t){var e={};return Object.keys(t).forEach((function(n){var i;e[(i=n,i.toLowerCase().replace(/-(\w)/g,(function(t){return t[1].toUpperCase()})))]=t[n]})),e},W=function(t){var e=t.serverControl,n=t.targetDuration,i=t.partTargetDuration;if(e){var r="#EXT-X-SERVER-CONTROL",o="holdBack",a="partHoldBack",s=n&&3*n,u=i&&2*i;n&&!e.hasOwnProperty(o)&&(e[o]=s,this.trigger("info",{message:r+" defaulting HOLD-BACK to targetDuration * 3 ("+s+")."})),s&&e[o]<s&&(this.trigger("warn",{message:r+" clamping HOLD-BACK ("+e[o]+") to targetDuration * 3 ("+s+")"}),e[o]=s),i&&!e.hasOwnProperty(a)&&(e[a]=3*i,this.trigger("info",{message:r+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+e[a]+")."})),i&&e[a]<u&&(this.trigger("warn",{message:r+" clamping PART-HOLD-BACK ("+e[a]+") to partTargetDuration * 2 ("+u+")."}),e[a]=u)}},q=function(t){function e(){var e;(e=t.call(this)||this).lineStream=new U,e.parseStream=new H,e.lineStream.pipe(e.parseStream);var n,i,r=_()(e),o=[],a={},s=!1,u=function(){},l={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},c=0;e.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var h=0,d=0;return e.on("end",(function(){a.uri||!a.parts&&!a.preloadHints||(!a.map&&n&&(a.map=n),!a.key&&i&&(a.key=i),a.timeline||"number"!==typeof c||(a.timeline=c),e.manifest.preloadSegment=a)})),e.parseStream.on("data",(function(t){var e,p;({tag:function(){({version:function(){t.version&&(this.manifest.version=t.version)},"allow-cache":function(){this.manifest.allowCache=t.allowed,"allowed"in t||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in t&&(a.byterange=e,e.length=t.length,"offset"in t||(t.offset=h)),"offset"in t&&(a.byterange=e,e.offset=t.offset),h=e.offset+e.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),t.duration>0&&(a.duration=t.duration),0===t.duration&&(a.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=o},key:function(){if(t.attributes)if("NONE"!==t.attributes.METHOD)if(t.attributes.URI){if("com.apple.streamingkeydelivery"===t.attributes.KEYFORMAT)return this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:t.attributes});if("urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"===t.attributes.KEYFORMAT){return-1===["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"].indexOf(t.attributes.METHOD)?void this.trigger("warn",{message:"invalid key method provided for Widevine"}):("SAMPLE-AES-CENC"===t.attributes.METHOD&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),"data:text/plain;base64,"!==t.attributes.URI.substring(0,23)?void this.trigger("warn",{message:"invalid key URI provided for Widevine"}):t.attributes.KEYID&&"0x"===t.attributes.KEYID.substring(0,2)?(this.manifest.contentProtection=this.manifest.contentProtection||{},void(this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:t.attributes.KEYFORMAT,keyId:t.attributes.KEYID.substring(2)},pssh:Object(B.a)(t.attributes.URI.split(",")[1])})):void this.trigger("warn",{message:"invalid key ID provided for Widevine"}))}t.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),i={method:t.attributes.METHOD||"AES-128",uri:t.attributes.URI},"undefined"!==typeof t.attributes.IV&&(i.iv=t.attributes.IV)}else this.trigger("warn",{message:"ignoring key declaration without URI"});else i=null;else this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){isFinite(t.number)?this.manifest.mediaSequence=t.number:this.trigger("warn",{message:"ignoring invalid media sequence: "+t.number})},"discontinuity-sequence":function(){isFinite(t.number)?(this.manifest.discontinuitySequence=t.number,c=t.number):this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+t.number})},"playlist-type":function(){/VOD|EVENT/.test(t.playlistType)?this.manifest.playlistType=t.playlistType:this.trigger("warn",{message:"ignoring unknown playlist type: "+t.playlist})},map:function(){n={},t.uri&&(n.uri=t.uri),t.byterange&&(n.byterange=t.byterange),i&&(n.key=i)},"stream-inf":function(){this.manifest.playlists=o,this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes?(a.attributes||(a.attributes={}),m()(a.attributes,t.attributes)):this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||l,t.attributes&&t.attributes.TYPE&&t.attributes["GROUP-ID"]&&t.attributes.NAME){var n=this.manifest.mediaGroups[t.attributes.TYPE];n[t.attributes["GROUP-ID"]]=n[t.attributes["GROUP-ID"]]||{},e=n[t.attributes["GROUP-ID"]],(p={default:/yes/i.test(t.attributes.DEFAULT)}).default?p.autoselect=!0:p.autoselect=/yes/i.test(t.attributes.AUTOSELECT),t.attributes.LANGUAGE&&(p.language=t.attributes.LANGUAGE),t.attributes.URI&&(p.uri=t.attributes.URI),t.attributes["INSTREAM-ID"]&&(p.instreamId=t.attributes["INSTREAM-ID"]),t.attributes.CHARACTERISTICS&&(p.characteristics=t.attributes.CHARACTERISTICS),t.attributes.FORCED&&(p.forced=/yes/i.test(t.attributes.FORCED)),e[t.attributes.NAME]=p}else this.trigger("warn",{message:"ignoring incomplete or missing media group"})},discontinuity:function(){c+=1,a.discontinuity=!0,this.manifest.discontinuityStarts.push(o.length)},"program-date-time":function(){"undefined"===typeof this.manifest.dateTimeString&&(this.manifest.dateTimeString=t.dateTimeString,this.manifest.dateTimeObject=t.dateTimeObject),a.dateTimeString=t.dateTimeString,a.dateTimeObject=t.dateTimeObject},targetduration:function(){!isFinite(t.duration)||t.duration<0?this.trigger("warn",{message:"ignoring invalid target duration: "+t.duration}):(this.manifest.targetDuration=t.duration,W.call(this,this.manifest))},start:function(){t.attributes&&!isNaN(t.attributes["TIME-OFFSET"])?this.manifest.start={timeOffset:t.attributes["TIME-OFFSET"],precise:t.attributes.PRECISE}:this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"})},"cue-out":function(){a.cueOut=t.data},"cue-out-cont":function(){a.cueOutCont=t.data},"cue-in":function(){a.cueIn=t.data},skip:function(){this.manifest.skip=Z(t.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",t.attributes,["SKIPPED-SEGMENTS"])},part:function(){var e=this;s=!0;var n=this.manifest.segments.length,i=Z(t.attributes);a.parts=a.parts||[],a.parts.push(i),i.byterange&&(i.byterange.hasOwnProperty("offset")||(i.byterange.offset=d),d=i.byterange.offset+i.byterange.length);var r=a.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+r+" for segment #"+n,t.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach((function(t,n){t.hasOwnProperty("lastPart")||e.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+n+" lacks required attribute(s): LAST-PART"})}))},"server-control":function(){var e=this.manifest.serverControl=Z(t.attributes);e.hasOwnProperty("canBlockReload")||(e.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),W.call(this,this.manifest),e.canSkipDateranges&&!e.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var e=this.manifest.segments.length,n=Z(t.attributes),i=n.type&&"PART"===n.type;a.preloadHints=a.preloadHints||[],a.preloadHints.push(n),n.byterange&&(n.byterange.hasOwnProperty("offset")||(n.byterange.offset=i?d:0,i&&(d=n.byterange.offset+n.byterange.length)));var r=a.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+r+" for segment #"+e,t.attributes,["TYPE","URI"]),n.type)for(var o=0;o<a.preloadHints.length-1;o++){var s=a.preloadHints[o];s.type&&(s.type===n.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+r+" for segment #"+e+" has the same TYPE "+n.type+" as preload hint #"+o}))}},"rendition-report":function(){var e=Z(t.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(e);var n=this.manifest.renditionReports.length-1,i=["LAST-MSN","URI"];s&&i.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+n,t.attributes,i)},"part-inf":function(){this.manifest.partInf=Z(t.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",t.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),W.call(this,this.manifest)}}[t.tagType]||u).call(r)},uri:function(){a.uri=t.uri,o.push(a),this.manifest.targetDuration&&!("duration"in a)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),a.duration=this.manifest.targetDuration),i&&(a.key=i),a.timeline=c,n&&(a.map=n),d=0,a={}},comment:function(){},custom:function(){t.segment?(a.custom=a.custom||{},a.custom[t.customType]=t.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[t.customType]=t.data)}})[t.type].call(r)})),e}y()(e,t);var n=e.prototype;return n.warnOnMissingAttributes_=function(t,e,n){var i=[];n.forEach((function(t){e.hasOwnProperty(t)||i.push(t)})),i.length&&this.trigger("warn",{message:t+" lacks required attribute(s): "+i.join(", ")})},n.push=function(t){this.lineStream.push(t)},n.end=function(){this.lineStream.push("\n"),this.trigger("end")},n.addParser=function(t){this.parseStream.addParser(t)},n.addTagMapper=function(t){this.parseStream.addTagMapper(t)},e}(N),V={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},G=["video","audio","text"],Y=["Video","Audio","Text"],X=function(t){return t?t.replace(/avc1\.(\d+)\.(\d+)/i,(function(t,e,n){return"avc1."+("00"+Number(e).toString(16)).slice(-2)+"00"+("00"+Number(n).toString(16)).slice(-2)})):t},K=function(t){void 0===t&&(t="");var e=t.split(","),n=[];return e.forEach((function(t){var e;t=t.trim(),G.forEach((function(i){var r=V[i].exec(t.toLowerCase());if(r&&!(r.length<=1)){e=i;var o=t.substring(0,r[1].length),a=t.replace(o,"");n.push({type:o,details:a,mediaType:i})}})),e||n.push({type:t,details:"",mediaType:"unknown"})})),n},Q=function(t){return void 0===t&&(t=""),V.audio.test(t.trim().toLowerCase())},$=function(t){if(t&&"string"===typeof t){var e,n=t.toLowerCase().split(",").map((function(t){return X(t.trim())})),i="video";1===n.length&&Q(n[0])?i="audio":1===n.length&&(void 0===(e=n[0])&&(e=""),V.text.test(e.trim().toLowerCase()))&&(i="application");var r="mp4";return n.every((function(t){return V.mp4.test(t)}))?r="mp4":n.every((function(t){return V.webm.test(t)}))?r="webm":n.every((function(t){return V.ogg.test(t)}))&&(r="ogg"),i+"/"+r+';codecs="'+t+'"'}},J=function(t){return void 0===t&&(t=""),h.a.MediaSource&&h.a.MediaSource.isTypeSupported&&h.a.MediaSource.isTypeSupported($(t))||!1},tt=function(t){return void 0===t&&(t=""),t.toLowerCase().split(",").every((function(t){t=t.trim();for(var e=0;e<Y.length;e++){if(V["muxer"+Y[e]].test(t))return!0}return!1}))},et="mp4a.40.2",nt=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,it=/^application\/dash\+xml/i,rt=function(t){return nt.test(t)?"hls":it.test(t)?"dash":"application/vnd.videojs.vhs+json"===t?"vhs-json":null},ot=n(40),at=function(t){return!!t&&"object"===typeof t},st=function t(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.reduce((function(e,n){return"object"!==typeof n||Object.keys(n).forEach((function(i){Array.isArray(e[i])&&Array.isArray(n[i])?e[i]=e[i].concat(n[i]):at(e[i])&&at(n[i])?e[i]=t(e[i],n[i]):e[i]=n[i]})),e}),{})},ut=function(t){return t.reduce((function(t,e){return t.concat(e)}),[])},lt=function(t){if(!t.length)return[];for(var e=[],n=0;n<t.length;n++)e.push(t[n]);return e},ct="INVALID_NUMBER_OF_PERIOD",ht="DASH_EMPTY_MANIFEST",dt="DASH_INVALID_XML",pt="NO_BASE_URL",ft="SEGMENT_TIME_UNSPECIFIED",mt="UNSUPPORTED_UTC_TIMING_SCHEME",gt=function(t){var e=t.baseUrl,n=void 0===e?"":e,i=t.source,r=void 0===i?"":i,o=t.range,a=void 0===o?"":o,s=t.indexRange,u=void 0===s?"":s,l={uri:r,resolvedUri:D(n||"",r)};if(a||u){var c=(a||u).split("-"),h=parseInt(c[0],10),d=parseInt(c[1],10);l.byterange={length:d-h+1,offset:h}}return l},_t=function(t){return t&&"number"!==typeof t&&(t=parseInt(t,10)),isNaN(t)?null:t},vt={static:function(t){var e=t.duration,n=t.timescale,i=void 0===n?1:n,r=t.sourceDuration,o=t.periodDuration,a=_t(t.endNumber),s=e/i;return"number"===typeof a?{start:0,end:a}:"number"===typeof o?{start:0,end:o/s}:{start:0,end:r/s}},dynamic:function(t){var e=t.NOW,n=t.clientOffset,i=t.availabilityStartTime,r=t.timescale,o=void 0===r?1:r,a=t.duration,s=t.start,u=void 0===s?0:s,l=t.minimumUpdatePeriod,c=void 0===l?0:l,h=t.timeShiftBufferDepth,d=void 0===h?1/0:h,p=_t(t.endNumber),f=(e+n)/1e3,m=i+u,g=f+c-m,_=Math.ceil(g*o/a),v=Math.floor((f-m-d)*o/a),y=Math.floor((f-m)*o/a);return{start:Math.max(0,v),end:"number"===typeof p?p:Math.min(_,y)}}},yt=function(t){var e=t.type,n=t.duration,i=t.timescale,r=void 0===i?1:i,o=t.periodDuration,a=t.sourceDuration,s=vt[e](t),u=function(t,e){for(var n=[],i=t;i<e;i++)n.push(i);return n}(s.start,s.end).map(function(t){return function(e,n){var i=t.duration,r=t.timescale,o=void 0===r?1:r,a=t.periodIndex,s=t.startNumber;return{number:(void 0===s?1:s)+e,duration:i/o,timeline:a,time:n*i}}}(t));if("static"===e){var l=u.length-1,c="number"===typeof o?o:a;u[l].duration=c-n/r*l}return u},bt=function(t){var e=t.baseUrl,n=t.initialization,i=void 0===n?{}:n,r=t.sourceDuration,o=t.indexRange,a=void 0===o?"":o,s=t.duration;if(!e)throw new Error(pt);var u=gt({baseUrl:e,source:i.sourceURL,range:i.range}),l=gt({baseUrl:e,source:e,indexRange:a});if(l.map=u,s){var c=yt(t);c.length&&(l.duration=c[0].duration,l.timeline=c[0].timeline)}else r&&(l.duration=r,l.timeline=0);return l.number=0,[l]},Tt=function(t,e,n){for(var i=t.sidx.map?t.sidx.map:null,r=t.sidx.duration,o=t.timeline||0,a=t.sidx.byterange,s=a.offset+a.length,u=e.timescale,l=e.references.filter((function(t){return 1!==t.referenceType})),c=[],h=t.endList?"static":"dynamic",d=s+e.firstOffset,p=0;p<l.length;p++){var f=e.references[p],m=f.referencedSize,g=f.subsegmentDuration,_=bt({baseUrl:n,timescale:u,timeline:o,periodIndex:o,duration:g,sourceDuration:r,indexRange:d+"-"+(d+m-1),type:h})[0];i&&(_.map=i),c.push(_),d+=m}return t.segments=c,t},wt=function(t){return t&&t.uri+"-"+function(t){var e=t.offset+t.length-1;return t.offset+"-"+e}(t.byterange)},xt=function(t){var e;return(e=t.reduce((function(t,e){var n,i=e.attributes.id+(e.attributes.lang||"");return t[i]?(e.segments[0]&&(e.segments[0].discontinuity=!0),(n=t[i].segments).push.apply(n,e.segments),e.attributes.contentProtection&&(t[i].attributes.contentProtection=e.attributes.contentProtection)):t[i]=e,t}),{}),Object.keys(e).map((function(t){return e[t]}))).map((function(t){var e,n;return t.discontinuityStarts=(e=t.segments,n="discontinuity",e.reduce((function(t,e,i){return e[n]&&t.push(i),t}),[])),t}))},St=function(t,e){var n=wt(t.sidx),i=n&&e[n]&&e[n].sidx;return i&&Tt(t,i,t.sidx.resolvedUri),t},Et=function(t,e){if(void 0===e&&(e={}),!Object.keys(e).length)return t;for(var n in t)t[n]=St(t[n],e);return t},kt=function(t){var e,n=t.attributes,i=t.segments,r=t.sidx,o={attributes:(e={NAME:n.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:n.width,height:n.height},CODECS:n.codecs,BANDWIDTH:n.bandwidth},e["PROGRAM-ID"]=1,e),uri:"",endList:"static"===n.type,timeline:n.periodIndex,resolvedUri:"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1};return n.contentProtection&&(o.contentProtection=n.contentProtection),r&&(o.sidx=r),o},Ct=function(t){var e=t.attributes;return"video/mp4"===e.mimeType||"video/webm"===e.mimeType||"video"===e.contentType},Pt=function(t){var e=t.attributes;return"audio/mp4"===e.mimeType||"audio/webm"===e.mimeType||"audio"===e.contentType},Lt=function(t){var e=t.attributes;return"text/vtt"===e.mimeType||"text"===e.contentType},It=function(t,e,n){var i;if(void 0===n&&(n={}),!t.length)return{};var r=t[0].attributes,o=r.sourceDuration,a=r.type,s=r.suggestedPresentationDelay,u=r.minimumUpdatePeriod,l=xt(t.filter(Ct)).map(kt),c=xt(t.filter(Pt)),h=t.filter(Lt),d=t.map((function(t){return t.attributes.captionServices})).filter(Boolean),p={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:o,playlists:Et(l,n)};u>=0&&(p.minimumUpdatePeriod=1e3*u),e&&(p.locations=e),"dynamic"===a&&(p.suggestedPresentationDelay=s);var f=0===p.playlists.length;return c.length&&(p.mediaGroups.AUDIO.audio=function(t,e,n){var i;void 0===e&&(e={}),void 0===n&&(n=!1);var r=t.reduce((function(t,r){var o=r.attributes.role&&r.attributes.role.value||"",a=r.attributes.lang||"",s=r.attributes.label||"main";if(a&&!r.attributes.label){var u=o?" ("+o+")":"";s=""+r.attributes.lang+u}t[s]||(t[s]={language:a,autoselect:!0,default:"main"===o,playlists:[],uri:""});var l=St(function(t,e){var n,i=t.attributes,r=t.segments,o=t.sidx,a={attributes:(n={NAME:i.id,BANDWIDTH:i.bandwidth,CODECS:i.codecs},n["PROGRAM-ID"]=1,n),uri:"",endList:"static"===i.type,timeline:i.periodIndex,resolvedUri:"",targetDuration:i.duration,segments:r,mediaSequence:r.length?r[0].number:1};return i.contentProtection&&(a.contentProtection=i.contentProtection),o&&(a.sidx=o),e&&(a.attributes.AUDIO="audio",a.attributes.SUBTITLES="subs"),a}(r,n),e);return t[s].playlists.push(l),"undefined"===typeof i&&"main"===o&&((i=r).default=!0),t}),{});return i||(r[Object.keys(r)[0]].default=!0),r}(c,n,f)),h.length&&(p.mediaGroups.SUBTITLES.subs=function(t,e){return void 0===e&&(e={}),t.reduce((function(t,n){var i=n.attributes.lang||"text";return t[i]||(t[i]={language:i,default:!1,autoselect:!1,playlists:[],uri:""}),t[i].playlists.push(St(function(t){var e,n=t.attributes,i=t.segments;"undefined"===typeof i&&(i=[{uri:n.baseUrl,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",duration:n.sourceDuration,number:0}],n.duration=n.sourceDuration);var r=((e={NAME:n.id,BANDWIDTH:n.bandwidth})["PROGRAM-ID"]=1,e);return n.codecs&&(r.CODECS=n.codecs),{attributes:r,uri:"",endList:"static"===n.type,timeline:n.periodIndex,resolvedUri:n.baseUrl||"",targetDuration:n.duration,segments:i,mediaSequence:i.length?i[0].number:1}}(n),e)),t}),{})}(h,n)),d.length&&(p.mediaGroups["CLOSED-CAPTIONS"].cc=d.reduce((function(t,e){return e?(e.forEach((function(e){var n=e.channel,i=e.language;t[i]={autoselect:!1,default:!1,instreamId:n,language:i},e.hasOwnProperty("aspectRatio")&&(t[i].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(t[i].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(t[i]["3D"]=e["3D"])})),t):t}),{})),p},At=function(t,e,n){var i=t.NOW,r=t.clientOffset,o=t.availabilityStartTime,a=t.timescale,s=void 0===a?1:a,u=t.start,l=void 0===u?0:u,c=t.minimumUpdatePeriod,h=(i+r)/1e3+(void 0===c?0:c)-(o+l);return Math.ceil((h*s-e)/n)},Mt=function(t,e){for(var n=t.type,i=t.minimumUpdatePeriod,r=void 0===i?0:i,o=t.media,a=void 0===o?"":o,s=t.sourceDuration,u=t.timescale,l=void 0===u?1:u,c=t.startNumber,h=void 0===c?1:c,d=t.periodIndex,p=[],f=-1,m=0;m<e.length;m++){var g=e[m],_=g.d,v=g.r||0,y=g.t||0;f<0&&(f=y),y&&y>f&&(f=y);var b=void 0;if(v<0){var T=m+1;b=T===e.length?"dynamic"===n&&r>0&&a.indexOf("$Number$")>0?At(t,f,_):(s*l-f)/_:(e[T].t-f)/_}else b=v+1;for(var w=h+p.length+b,x=h+p.length;x<w;)p.push({number:x,duration:_/l,time:f,timeline:d}),f+=_,x++}return p},Ot=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,Rt=function(t,e){return t.replace(Ot,function(t){return function(e,n,i,r){if("$$"===e)return"$";if("undefined"===typeof t[n])return e;var o=""+t[n];return"RepresentationID"===n?o:(r=i?parseInt(r,10):1,o.length>=r?o:""+new Array(r-o.length+1).join("0")+o)}}(e))},Dt=function(t,e){var n={RepresentationID:t.id,Bandwidth:t.bandwidth||0},i=t.initialization,r=void 0===i?{sourceURL:"",range:""}:i,o=gt({baseUrl:t.baseUrl,source:Rt(r.sourceURL,n),range:r.range});return function(t,e){return t.duration||e?t.duration?yt(t):Mt(t,e):[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodIndex}]}(t,e).map((function(e){n.Number=e.number,n.Time=e.time;var i=Rt(t.media||"",n),r=t.timescale||1,a=t.presentationTimeOffset||0,s=t.periodStart+(e.time-a)/r;return{uri:i,timeline:e.timeline,duration:e.duration,resolvedUri:D(t.baseUrl||"",i),map:o,number:e.number,presentationTime:s}}))},Nt=function(t,e){var n=t.duration,i=t.segmentUrls,r=void 0===i?[]:i,o=t.periodStart;if(!n&&!e||n&&e)throw new Error(ft);var a,s=r.map((function(e){return function(t,e){var n=t.baseUrl,i=t.initialization,r=void 0===i?{}:i,o=gt({baseUrl:n,source:r.sourceURL,range:r.range}),a=gt({baseUrl:n,source:e.media,range:e.mediaRange});return a.map=o,a}(t,e)}));return n&&(a=yt(t)),e&&(a=Mt(t,e)),a.map((function(e,n){if(s[n]){var i=s[n],r=t.timescale||1,a=t.presentationTimeOffset||0;return i.timeline=e.timeline,i.duration=e.duration,i.number=e.number,i.presentationTime=o+(e.time-a)/r,i}})).filter((function(t){return t}))},Bt=function(t){var e,n,i=t.attributes,r=t.segmentInfo;r.template?(n=Dt,e=st(i,r.template)):r.base?(n=bt,e=st(i,r.base)):r.list&&(n=Nt,e=st(i,r.list));var o={attributes:i};if(!n)return o;var a=n(e,r.segmentTimeline);if(e.duration){var s=e,u=s.duration,l=s.timescale,c=void 0===l?1:l;e.duration=u/c}else a.length?e.duration=a.reduce((function(t,e){return Math.max(t,Math.ceil(e.duration))}),0):e.duration=0;return o.attributes=e,o.segments=a,r.base&&e.indexRange&&(o.sidx=a[0],o.segments=[]),o},Ut=function(t,e){return lt(t.childNodes).filter((function(t){return t.tagName===e}))},zt=function(t){return t.textContent.trim()},Ft=function(t){var e=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/.exec(t);if(!e)return 0;var n=e.slice(1),i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],u=n[5];return 31536e3*parseFloat(i||0)+2592e3*parseFloat(r||0)+86400*parseFloat(o||0)+3600*parseFloat(a||0)+60*parseFloat(s||0)+parseFloat(u||0)},jt={mediaPresentationDuration:function(t){return Ft(t)},availabilityStartTime:function(t){return/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/.test(e=t)&&(e+="Z"),Date.parse(e)/1e3;var e},minimumUpdatePeriod:function(t){return Ft(t)},suggestedPresentationDelay:function(t){return Ft(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return Ft(t)},start:function(t){return Ft(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var e=parseInt(t,10);return isNaN(e)?Ft(t):e},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Ht=function(t){return t&&t.attributes?lt(t.attributes).reduce((function(t,e){var n=jt[e.name]||jt.DEFAULT;return t[e.name]=n(e.value),t}),{}):{}},Zt={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},Wt=function(t,e){return e.length?ut(t.map((function(t){return e.map((function(e){return D(t,zt(e))}))}))):t},qt=function(t){var e=Ut(t,"SegmentTemplate")[0],n=Ut(t,"SegmentList")[0],i=n&&Ut(n,"SegmentURL").map((function(t){return st({tag:"SegmentURL"},Ht(t))})),r=Ut(t,"SegmentBase")[0],o=n||e,a=o&&Ut(o,"SegmentTimeline")[0],s=n||r||e,u=s&&Ut(s,"Initialization")[0],l=e&&Ht(e);l&&u?l.initialization=u&&Ht(u):l&&l.initialization&&(l.initialization={sourceURL:l.initialization});var c={template:l,segmentTimeline:a&&Ut(a,"S").map((function(t){return Ht(t)})),list:n&&st(Ht(n),{segmentUrls:i,initialization:Ht(u)}),base:r&&st(Ht(r),{initialization:Ht(u)})};return Object.keys(c).forEach((function(t){c[t]||delete c[t]})),c},Vt=function(t,e,n){return function(i){var r,o=Ht(i),a=Wt(e,Ut(i,"BaseURL")),s=Ut(i,"Role")[0],u={role:Ht(s)},l=st(t,o,u),c=Ut(i,"Accessibility")[0],h="urn:scte:dash:cc:cea-608:2015"===(r=Ht(c)).schemeIdUri?r.value.split(";").map((function(t){var e,n;if(n=t,/^CC\d=/.test(t)){var i=t.split("=");e=i[0],n=i[1]}else/^CC\d$/.test(t)&&(e=t);return{channel:e,language:n}})):"urn:scte:dash:cc:cea-708:2015"===r.schemeIdUri?r.value.split(";").map((function(t){var e={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(t)){var n=t.split("="),i=n[0],r=n[1],o=void 0===r?"":r;e.channel=i,e.language=t,o.split(",").forEach((function(t){var n=t.split(":"),i=n[0],r=n[1];"lang"===i?e.language=r:"er"===i?e.easyReader=Number(r):"war"===i?e.aspectRatio=Number(r):"3D"===i&&(e["3D"]=Number(r))}))}else e.language=t;return e.channel&&(e.channel="SERVICE"+e.channel),e})):void 0;h&&(l=st(l,{captionServices:h}));var d=Ut(i,"Label")[0];if(d&&d.childNodes.length){var p=d.childNodes[0].nodeValue.trim();l=st(l,{label:p})}var f=Ut(i,"ContentProtection").reduce((function(t,e){var n=Ht(e),i=Zt[n.schemeIdUri];if(i){t[i]={attributes:n};var r=Ut(e,"cenc:pssh")[0];if(r){var o=zt(r),a=o&&Object(B.a)(o);t[i].pssh=a}}return t}),{});Object.keys(f).length&&(l=st(l,{contentProtection:f}));var m=qt(i),g=Ut(i,"Representation"),_=st(n,m);return ut(g.map(function(t,e,n){return function(i){var r=Ut(i,"BaseURL"),o=Wt(e,r),a=st(t,Ht(i)),s=qt(i);return o.map((function(t){return{segmentInfo:st(n,s),attributes:st(a,{baseUrl:t})}}))}}(l,a,_)))}},Gt=function(t,e){return function(n,i){var r=Wt(e,Ut(n.node,"BaseURL")),o=parseInt(n.attributes.id,10),a=h.a.isNaN(o)?i:o,s=st(t,{periodIndex:a,periodStart:n.attributes.start});"number"===typeof n.attributes.duration&&(s.periodDuration=n.attributes.duration);var u=Ut(n.node,"AdaptationSet"),l=qt(n.node);return ut(u.map(Vt(s,r,l)))}},Yt=function(t){if(""===t)throw new Error(ht);var e,n,i=new ot.DOMParser;try{n=(e=i.parseFromString(t,"application/xml"))&&"MPD"===e.documentElement.tagName?e.documentElement:null}catch(r){}if(!n||n&&n.getElementsByTagName("parsererror").length>0)throw new Error(dt);return n},Xt=function(t,e){void 0===e&&(e={});var n=function(t,e){void 0===e&&(e={});var n=e,i=n.manifestUri,r=void 0===i?"":i,o=n.NOW,a=void 0===o?Date.now():o,s=n.clientOffset,u=void 0===s?0:s,l=Ut(t,"Period");if(!l.length)throw new Error(ct);var c=Ut(t,"Location"),h=Ht(t),d=Wt([r],Ut(t,"BaseURL"));h.type=h.type||"static",h.sourceDuration=h.mediaPresentationDuration||0,h.NOW=a,h.clientOffset=u,c.length&&(h.locations=c.map(zt));var p=[];return l.forEach((function(t,e){var n=Ht(t),i=p[e-1];n.start=function(t){var e=t.attributes,n=t.priorPeriodAttributes,i=t.mpdType;return"number"===typeof e.start?e.start:n&&"number"===typeof n.start&&"number"===typeof n.duration?n.start+n.duration:n||"static"!==i?null:0}({attributes:n,priorPeriodAttributes:i?i.attributes:null,mpdType:h.type}),p.push({node:t,attributes:n})})),{locations:h.locations,representationInfo:ut(p.map(Gt(h,d)))}}(Yt(t),e),i=n.representationInfo.map(Bt);return It(i,n.locations,e.sidxMapping)},Kt=function(t){return function(t){var e=Ut(t,"UTCTiming")[0];if(!e)return null;var n=Ht(e);switch(n.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":n.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":n.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":n.method="DIRECT",n.value=Date.parse(n.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(mt)}return n}(Yt(t))},Qt=n(41),$t=n.n(Qt),Jt=function(t){return t instanceof Uint8Array?t:(Array.isArray(t)||(e=t,ArrayBuffer.isView(e))||t instanceof ArrayBuffer||(t="number"!==typeof t||"number"===typeof t&&t!==t?0:[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0));var e},te=h.a.BigInt||Number,ee=[te("0x1"),te("0x100"),te("0x10000"),te("0x1000000"),te("0x100000000"),te("0x10000000000"),te("0x1000000000000"),te("0x100000000000000"),te("0x10000000000000000")],ne=(function(){var t=new Uint16Array([65484]),e=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);255===e[0]||e[0]}(),function(t,e){var n=void 0===e?{}:e,i=n.signed,r=void 0!==i&&i,o=n.le,a=void 0!==o&&o;t=Jt(t);var s=a?"reduce":"reduceRight",u=(t[s]?t[s]:Array.prototype[s]).call(t,(function(e,n,i){var r=a?i:Math.abs(i+1-t.length);return e+te(n)*ee[r]}),te(0));if(r){var l=ee[t.length]/te(2)-te(1);(u=te(u))>l&&(u-=l,u-=l,u-=te(2))}return Number(u)}),ie=function(t,e){var n=(void 0===e?{}:e).le,i=void 0!==n&&n;("bigint"!==typeof t&&"number"!==typeof t||"number"===typeof t&&t!==t)&&(t=0),t=te(t);for(var r,o=(r=t,Math.ceil(function(t){return t.toString(2).length}(r)/8)),a=new Uint8Array(new ArrayBuffer(o)),s=0;s<o;s++){var u=i?s:Math.abs(s+1-a.length);a[u]=Number(t/ee[s]&te(255)),t<0&&(a[u]=Math.abs(~a[u]),a[u]-=0===s?1:2)}return a},re=function(t){if(!t)return"";t=Array.prototype.slice.call(t);var e=String.fromCharCode.apply(null,Jt(t));try{return decodeURIComponent(escape(e))}catch(n){}return e},oe=function(t,e){if("string"!==typeof t&&t&&"function"===typeof t.toString&&(t=t.toString()),"string"!==typeof t)return new Uint8Array;e||(t=unescape(encodeURIComponent(t)));for(var n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return n},ae=function(t,e,n){var i=void 0===n?{}:n,r=i.offset,o=void 0===r?0:r,a=i.mask,s=void 0===a?[]:a;t=Jt(t);var u=(e=Jt(e)).every?e.every:Array.prototype.every;return e.length&&t.length-o>=e.length&&u.call(e,(function(e,n){return e===(s[n]?s[n]&t[o+n]:t[o+n])}))},se=Jt([73,68,51]),ue=function t(e,n){return void 0===n&&(n=0),(e=Jt(e)).length-n<10||!ae(e,se,{offset:n})?n:(n+=function(t,e){void 0===e&&(e=0);var n=(t=Jt(t))[e+5],i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return(16&n)>>4?i+20:i+10}(e,n),t(e,n))},le=(new Uint8Array([79,112,117,115,72,101,97,100]),function(t){return"string"===typeof t?oe(t):t}),ce=function(t){t=Jt(t);for(var e=[],n=0;t.length>n;){var i=t[n],r=0,o=0,a=t[++o];for(o++;128&a;)r=(127&a)<<7,a=t[o],o++;r+=127&a;for(var s=0;s<u.length;s++){var l=u[s],c=l.id,h=l.parser;if(i===c){e.push(h(t.subarray(o,o+r)));break}}n+=r+o}return e};u=[{id:3,parser:function(t){var e={tag:3,id:t[0]<<8|t[1],flags:t[2],size:3,dependsOnEsId:0,ocrEsId:0,descriptors:[],url:""};if(128&e.flags&&(e.dependsOnEsId=t[e.size]<<8|t[e.size+1],e.size+=2),64&e.flags){var n=t[e.size];e.url=re(t.subarray(e.size+1,e.size+1+n)),e.size+=n}return 32&e.flags&&(e.ocrEsId=t[e.size]<<8|t[e.size+1],e.size+=2),e.descriptors=ce(t.subarray(e.size))||[],e}},{id:4,parser:function(t){return{tag:4,oti:t[0],streamType:t[1],bufferSize:t[2]<<16|t[3]<<8|t[4],maxBitrate:t[5]<<24|t[6]<<16|t[7]<<8|t[8],avgBitrate:t[9]<<24|t[10]<<16|t[11]<<8|t[12],descriptors:ce(t.subarray(13))}}},{id:5,parser:function(t){return{tag:5,bytes:t}}},{id:6,parser:function(t){return{tag:6,bytes:t}}}];var he=function t(e,n,i){void 0===i&&(i=!1),n=function(t){return Array.isArray(t)?t.map((function(t){return le(t)})):[le(t)]}(n),e=Jt(e);var r=[];if(!n.length)return r;for(var o=0;o<e.length;){var a=(e[o]<<24|e[o+1]<<16|e[o+2]<<8|e[o+3])>>>0,s=e.subarray(o+4,o+8);if(0===a)break;var u=o+a;if(u>e.length){if(i)break;u=e.length}var l=e.subarray(o+8,u);ae(s,n[0])&&(1===n.length?r.push(l):r.push.apply(r,t(l,n.slice(1),i))),o=u}return r},de={EBML:Jt([26,69,223,163]),DocType:Jt([66,130]),Segment:Jt([24,83,128,103]),SegmentInfo:Jt([21,73,169,102]),Tracks:Jt([22,84,174,107]),Track:Jt([174]),TrackNumber:Jt([215]),DefaultDuration:Jt([35,227,131]),TrackEntry:Jt([174]),TrackType:Jt([131]),FlagDefault:Jt([136]),CodecID:Jt([134]),CodecPrivate:Jt([99,162]),VideoTrack:Jt([224]),AudioTrack:Jt([225]),Cluster:Jt([31,67,182,117]),Timestamp:Jt([231]),TimestampScale:Jt([42,215,177]),BlockGroup:Jt([160]),BlockDuration:Jt([155]),Block:Jt([161]),SimpleBlock:Jt([163])},pe=[128,64,32,16,8,4,2,1],fe=function(t,e,n,i){void 0===n&&(n=!0),void 0===i&&(i=!1);var r=function(t){for(var e=1,n=0;n<pe.length&&!(t&pe[n]);n++)e++;return e}(t[e]),o=t.subarray(e,e+r);return n&&((o=Array.prototype.slice.call(t,e,e+r))[0]^=pe[r-1]),{length:r,value:ne(o,{signed:i}),bytes:o}},me=function t(e){return"string"===typeof e?e.match(/.{1,2}/g).map((function(e){return t(e)})):"number"===typeof e?ie(e):e},ge=function t(e,n,i){if(i>=n.length)return n.length;var r=fe(n,i,!1);if(ae(e.bytes,r.bytes))return i;var o=fe(n,i+r.length);return t(e,n,i+o.length+o.value+r.length)},_e=function t(e,n){n=function(t){return Array.isArray(t)?t.map((function(t){return me(t)})):[me(t)]}(n),e=Jt(e);var i=[];if(!n.length)return i;for(var r=0;r<e.length;){var o=fe(e,r,!1),a=fe(e,r+o.length),s=r+o.length+a.length;127===a.value&&(a.value=ge(o,e,s),a.value!==e.length&&(a.value-=s));var u=s+a.value>e.length?e.length:s+a.value,l=e.subarray(s,u);ae(n[0],o.bytes)&&(1===n.length?i.push(l):i=i.concat(t(l,n.slice(1)))),r+=o.length+a.length+l.length}return i},ve=Jt([0,0,0,1]),ye=Jt([0,0,1]),be=Jt([0,0,3]),Te=function(t){for(var e=[],n=1;n<t.length-2;)ae(t.subarray(n,n+3),be)&&(e.push(n+2),n++),n++;if(0===e.length)return t;var i=t.length-e.length,r=new Uint8Array(i),o=0;for(n=0;n<i;o++,n++)o===e[0]&&(o++,e.shift()),r[n]=t[o];return r},we=function(t,e,n,i){void 0===i&&(i=1/0),t=Jt(t),n=[].concat(n);for(var r,o=0,a=0;o<t.length&&(a<i||r);){var s=void 0;if(ae(t.subarray(o),ve)?s=4:ae(t.subarray(o),ye)&&(s=3),s){if(a++,r)return Te(t.subarray(r,o));var u=void 0;"h264"===e?u=31&t[o+s]:"h265"===e&&(u=t[o+s]>>1&63),-1!==n.indexOf(u)&&(r=o+s),o+=s+("h264"===e?1:2)}else o++}return t.subarray(0,0)},xe={webm:Jt([119,101,98,109]),matroska:Jt([109,97,116,114,111,115,107,97]),flac:Jt([102,76,97,67]),ogg:Jt([79,103,103,83]),ac3:Jt([11,119]),riff:Jt([82,73,70,70]),avi:Jt([65,86,73]),wav:Jt([87,65,86,69]),"3gp":Jt([102,116,121,112,51,103]),mp4:Jt([102,116,121,112]),fmp4:Jt([115,116,121,112]),mov:Jt([102,116,121,112,113,116]),moov:Jt([109,111,111,118]),moof:Jt([109,111,111,102])},Se={aac:function(t){var e=ue(t);return ae(t,[255,16],{offset:e,mask:[255,22]})},mp3:function(t){var e=ue(t);return ae(t,[255,2],{offset:e,mask:[255,6]})},webm:function(t){var e=_e(t,[de.EBML,de.DocType])[0];return ae(e,xe.webm)},mkv:function(t){var e=_e(t,[de.EBML,de.DocType])[0];return ae(e,xe.matroska)},mp4:function(t){return!Se["3gp"](t)&&!Se.mov(t)&&(!(!ae(t,xe.mp4,{offset:4})&&!ae(t,xe.fmp4,{offset:4}))||(!(!ae(t,xe.moof,{offset:4})&&!ae(t,xe.moov,{offset:4}))||void 0))},mov:function(t){return ae(t,xe.mov,{offset:4})},"3gp":function(t){return ae(t,xe["3gp"],{offset:4})},ac3:function(t){var e=ue(t);return ae(t,xe.ac3,{offset:e})},ts:function(t){if(t.length<189&&t.length>=1)return 71===t[0];for(var e=0;e+188<t.length&&e<188;){if(71===t[e]&&71===t[e+188])return!0;e+=1}return!1},flac:function(t){var e=ue(t);return ae(t,xe.flac,{offset:e})},ogg:function(t){return ae(t,xe.ogg)},avi:function(t){return ae(t,xe.riff)&&ae(t,xe.avi,{offset:8})},wav:function(t){return ae(t,xe.riff)&&ae(t,xe.wav,{offset:8})},h264:function(t){return function(t,e,n){return we(t,"h264",e,n)}(t,7,3).length},h265:function(t){return function(t,e,n){return we(t,"h265",e,n)}(t,[32,33],3).length}},Ee=Object.keys(Se).filter((function(t){return"ts"!==t&&"h264"!==t&&"h265"!==t})).concat(["ts","h264","h265"]);Ee.forEach((function(t){var e=Se[t];Se[t]=function(t){return e(Jt(t))}}));for(var ke,Ce=Se,Pe=function(t){t=Jt(t);for(var e=0;e<Ee.length;e++){var n=Ee[e];if(Ce[n](t))return n}return""},Le=n(14),Ie="7.15.4",Ae={},Me=function(t,e){return Ae[t]=Ae[t]||[],e&&(Ae[t]=Ae[t].concat(e)),Ae[t]},Oe=function(t,e){var n=Me(t).indexOf(e);return!(n<=-1)&&(Ae[t]=Ae[t].slice(),Ae[t].splice(n,1),!0)},Re={prefixed:!0},De=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],Ne=De[0],Be=0;Be<De.length;Be++)if(De[Be][1]in p.a){ke=De[Be];break}if(ke){for(var Ue=0;Ue<ke.length;Ue++)Re[Ne[Ue]]=ke[Ue];Re.prefixed=ke[0]!==Ne[0]}var ze=[];var Fe=function t(e){var n,i="info",r=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];n("log",i,e)};return n=function(t,e){return function(n,i,r){var o=e.levels[i],a=new RegExp("^("+o+")$");if("log"!==n&&r.unshift(n.toUpperCase()+":"),r.unshift(t+":"),ze){ze.push([].concat(r));var s=ze.length-1e3;ze.splice(0,s>0?s:0)}if(h.a.console){var u=h.a.console[n];u||"debug"!==n||(u=h.a.console.info||h.a.console.log),u&&o&&a.test(n)&&u[Array.isArray(r)?"apply":"call"](h.a.console,r)}}}(e,r),r.createLogger=function(n){return t(e+": "+n)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:i},r.level=function(t){if("string"===typeof t){if(!r.levels.hasOwnProperty(t))throw new Error('"'+t+'" in not a valid log level');i=t}return i},(r.history=function(){return ze?[].concat(ze):[]}).filter=function(t){return(ze||[]).filter((function(e){return new RegExp(".*"+t+".*").test(e[0])}))},r.history.clear=function(){ze&&(ze.length=0)},r.history.disable=function(){null!==ze&&(ze.length=0,ze=null)},r.history.enable=function(){null===ze&&(ze=[])},r.error=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n("error",i,e)},r.warn=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n("warn",i,e)},r.debug=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return n("debug",i,e)},r}("VIDEOJS"),je=Fe.createLogger,He=Object.prototype.toString,Ze=function(t){return Ve(t)?Object.keys(t):[]};function We(t,e){Ze(t).forEach((function(n){return e(t[n],n)}))}function qe(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];return Object.assign?m.a.apply(void 0,[t].concat(n)):(n.forEach((function(e){e&&We(e,(function(e,n){t[n]=e}))})),t)}function Ve(t){return!!t&&"object"===typeof t}function Ge(t){return Ve(t)&&"[object Object]"===He.call(t)&&t.constructor===Object}function Ye(t,e){if(!t||!e)return"";if("function"===typeof h.a.getComputedStyle){var n;try{n=h.a.getComputedStyle(t)}catch(i){return""}return n?n.getPropertyValue(e)||n[e]:""}return""}var Xe=h.a.navigator&&h.a.navigator.userAgent||"",Ke=/AppleWebKit\/([\d.]+)/i.exec(Xe),Qe=Ke?parseFloat(Ke.pop()):null,$e=/iPod/i.test(Xe),Je=function(){var t=Xe.match(/OS (\d+)_/i);return t&&t[1]?t[1]:null}(),tn=/Android/i.test(Xe),en=function(){var t=Xe.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!t)return null;var e=t[1]&&parseFloat(t[1]),n=t[2]&&parseFloat(t[2]);return e&&n?parseFloat(t[1]+"."+t[2]):e||null}(),nn=tn&&en<5&&Qe<537,rn=/Firefox/i.test(Xe),on=/Edg/i.test(Xe),an=!on&&(/Chrome/i.test(Xe)||/CriOS/i.test(Xe)),sn=function(){var t=Xe.match(/(Chrome|CriOS)\/(\d+)/);return t&&t[2]?parseFloat(t[2]):null}(),un=function(){var t=/MSIE\s(\d+)\.\d/.exec(Xe),e=t&&parseFloat(t[1]);return!e&&/Trident\/7.0/i.test(Xe)&&/rv:11.0/.test(Xe)&&(e=11),e}(),ln=/Safari/i.test(Xe)&&!an&&!tn&&!on,cn=/Windows/i.test(Xe),hn=Boolean(yn()&&("ontouchstart"in h.a||h.a.navigator.maxTouchPoints||h.a.DocumentTouch&&h.a.document instanceof h.a.DocumentTouch)),dn=/iPad/i.test(Xe)||ln&&hn&&!/iPhone/i.test(Xe),pn=/iPhone/i.test(Xe)&&!dn,fn=pn||dn||$e,mn=(ln||fn)&&!an,gn=Object.freeze({__proto__:null,IS_IPOD:$e,IOS_VERSION:Je,IS_ANDROID:tn,ANDROID_VERSION:en,IS_NATIVE_ANDROID:nn,IS_FIREFOX:rn,IS_EDGE:on,IS_CHROME:an,CHROME_VERSION:sn,IE_VERSION:un,IS_SAFARI:ln,IS_WINDOWS:cn,TOUCH_ENABLED:hn,IS_IPAD:dn,IS_IPHONE:pn,IS_IOS:fn,IS_ANY_SAFARI:mn});function _n(t){return"string"===typeof t&&Boolean(t.trim())}function vn(t){if(t.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function yn(){return p.a===h.a.document}function bn(t){return Ve(t)&&1===t.nodeType}function Tn(){try{return h.a.parent!==h.a.self}catch(t){return!0}}function wn(t){return function(e,n){if(!_n(e))return p.a[t](null);_n(n)&&(n=p.a.querySelector(n));var i=bn(n)?n:p.a;return i[t]&&i[t](e)}}function xn(t,e,n,i){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n={});var r=p.a.createElement(t);return Object.getOwnPropertyNames(e).forEach((function(t){var n=e[t];-1!==t.indexOf("aria-")||"role"===t||"type"===t?(Fe.warn("Setting attributes in the second argument of createEl()\nhas been deprecated. Use the third argument instead.\ncreateEl(type, properties, attributes). Attempting to set "+t+" to "+n+"."),r.setAttribute(t,n)):"textContent"===t?Sn(r,n):r[t]===n&&"tabIndex"!==t||(r[t]=n)})),Object.getOwnPropertyNames(n).forEach((function(t){r.setAttribute(t,n[t])})),i&&Zn(r,i),r}function Sn(t,e){return"undefined"===typeof t.textContent?t.innerText=e:t.textContent=e,t}function En(t,e){e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}function kn(t,e){return vn(e),t.classList?t.classList.contains(e):(n=e,new RegExp("(^|\\s)"+n+"($|\\s)")).test(t.className);var n}function Cn(t,e){return t.classList?t.classList.add(e):kn(t,e)||(t.className=(t.className+" "+e).trim()),t}function Pn(t,e){return t?(t.classList?t.classList.remove(e):(vn(e),t.className=t.className.split(/\s+/).filter((function(t){return t!==e})).join(" ")),t):(Fe.warn("removeClass was called with an element that doesn't exist"),null)}function Ln(t,e,n){var i=kn(t,e);if("function"===typeof n&&(n=n(t,e)),"boolean"!==typeof n&&(n=!i),n!==i)return n?Cn(t,e):Pn(t,e),t}function In(t,e){Object.getOwnPropertyNames(e).forEach((function(n){var i=e[n];null===i||"undefined"===typeof i||!1===i?t.removeAttribute(n):t.setAttribute(n,!0===i?"":i)}))}function An(t){var e={},n=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(t&&t.attributes&&t.attributes.length>0)for(var i=t.attributes,r=i.length-1;r>=0;r--){var o=i[r].name,a=i[r].value;"boolean"!==typeof t[o]&&-1===n.indexOf(","+o+",")||(a=null!==a),e[o]=a}return e}function Mn(t,e){return t.getAttribute(e)}function On(t,e,n){t.setAttribute(e,n)}function Rn(t,e){t.removeAttribute(e)}function Dn(){p.a.body.focus(),p.a.onselectstart=function(){return!1}}function Nn(){p.a.onselectstart=function(){return!0}}function Bn(t){if(t&&t.getBoundingClientRect&&t.parentNode){var e=t.getBoundingClientRect(),n={};return["bottom","height","left","right","top","width"].forEach((function(t){void 0!==e[t]&&(n[t]=e[t])})),n.height||(n.height=parseFloat(Ye(t,"height"))),n.width||(n.width=parseFloat(Ye(t,"width"))),n}}function Un(t){if(!t||t&&!t.offsetParent)return{left:0,top:0,width:0,height:0};for(var e=t.offsetWidth,n=t.offsetHeight,i=0,r=0;t.offsetParent&&t!==p.a[Re.fullscreenElement];)i+=t.offsetLeft,r+=t.offsetTop,t=t.offsetParent;return{left:i,top:r,width:e,height:n}}function zn(t,e){var n={x:0,y:0};if(fn)for(var i=t;i&&"html"!==i.nodeName.toLowerCase();){var r=Ye(i,"transform");if(/^matrix/.test(r)){var o=r.slice(7,-1).split(/,\s/).map(Number);n.x+=o[4],n.y+=o[5]}else if(/^matrix3d/.test(r)){var a=r.slice(9,-1).split(/,\s/).map(Number);n.x+=a[12],n.y+=a[13]}i=i.parentNode}var s={},u=Un(e.target),l=Un(t),c=l.width,h=l.height,d=e.offsetY-(l.top-u.top),p=e.offsetX-(l.left-u.left);return e.changedTouches&&(p=e.changedTouches[0].pageX-l.left,d=e.changedTouches[0].pageY+l.top,fn&&(p-=n.x,d-=n.y)),s.y=1-Math.max(0,Math.min(1,d/h)),s.x=Math.max(0,Math.min(1,p/c)),s}function Fn(t){return Ve(t)&&3===t.nodeType}function jn(t){for(;t.firstChild;)t.removeChild(t.firstChild);return t}function Hn(t){return"function"===typeof t&&(t=t()),(Array.isArray(t)?t:[t]).map((function(t){return"function"===typeof t&&(t=t()),bn(t)||Fn(t)?t:"string"===typeof t&&/\S/.test(t)?p.a.createTextNode(t):void 0})).filter((function(t){return t}))}function Zn(t,e){return Hn(e).forEach((function(e){return t.appendChild(e)})),t}function Wn(t,e){return Zn(jn(t),e)}function qn(t){return void 0===t.button&&void 0===t.buttons||(0===t.button&&void 0===t.buttons||("mouseup"===t.type&&0===t.button&&0===t.buttons||0===t.button&&1===t.buttons))}var Vn,Gn=wn("querySelector"),Yn=wn("querySelectorAll"),Xn=Object.freeze({__proto__:null,isReal:yn,isEl:bn,isInFrame:Tn,createEl:xn,textContent:Sn,prependTo:En,hasClass:kn,addClass:Cn,removeClass:Pn,toggleClass:Ln,setAttributes:In,getAttributes:An,getAttribute:Mn,setAttribute:On,removeAttribute:Rn,blockTextSelection:Dn,unblockTextSelection:Nn,getBoundingClientRect:Bn,findPosition:Un,getPointerPosition:zn,isTextNode:Fn,emptyEl:jn,normalizeContent:Hn,appendContent:Zn,insertContent:Wn,isSingleLeftClick:qn,$:Gn,$$:Yn}),Kn=!1,Qn=function(){if(!1!==Vn.options.autoSetup){var t=Array.prototype.slice.call(p.a.getElementsByTagName("video")),e=Array.prototype.slice.call(p.a.getElementsByTagName("audio")),n=Array.prototype.slice.call(p.a.getElementsByTagName("video-js")),i=t.concat(e,n);if(i&&i.length>0)for(var r=0,o=i.length;r<o;r++){var a=i[r];if(!a||!a.getAttribute){$n(1);break}void 0===a.player&&null!==a.getAttribute("data-setup")&&Vn(a)}else Kn||$n(1)}};function $n(t,e){yn()&&(e&&(Vn=e),h.a.setTimeout(Qn,t))}function Jn(){Kn=!0,h.a.removeEventListener("load",Jn)}yn()&&("complete"===p.a.readyState?Jn():h.a.addEventListener("load",Jn));var ti,ei=function(t){var e=p.a.createElement("style");return e.className=t,e},ni=function(t,e){t.styleSheet?t.styleSheet.cssText=e:t.textContent=e},ii=3;function ri(){return ii++}h.a.WeakMap||(ti=function(){function t(){this.vdata="vdata"+Math.floor(h.a.performance&&h.a.performance.now()||Date.now()),this.data={}}var e=t.prototype;return e.set=function(t,e){var n=t[this.vdata]||ri();return t[this.vdata]||(t[this.vdata]=n),this.data[n]=e,this},e.get=function(t){var e=t[this.vdata];if(e)return this.data[e];Fe("We have no data for this element",t)},e.has=function(t){return t[this.vdata]in this.data},e.delete=function(t){var e=t[this.vdata];e&&(delete this.data[e],delete t[this.vdata])},t}());var oi,ai=h.a.WeakMap?new WeakMap:new ti;function si(t,e){if(ai.has(t)){var n=ai.get(t);0===n.handlers[e].length&&(delete n.handlers[e],t.removeEventListener?t.removeEventListener(e,n.dispatcher,!1):t.detachEvent&&t.detachEvent("on"+e,n.dispatcher)),Object.getOwnPropertyNames(n.handlers).length<=0&&(delete n.handlers,delete n.dispatcher,delete n.disabled),0===Object.getOwnPropertyNames(n).length&&ai.delete(t)}}function ui(t,e,n,i){n.forEach((function(n){t(e,n,i)}))}function li(t){if(t.fixed_)return t;function e(){return!0}function n(){return!1}if(!t||!t.isPropagationStopped||!t.isImmediatePropagationStopped){var i=t||h.a.event;for(var r in t={},i)"layerX"!==r&&"layerY"!==r&&"keyLocation"!==r&&"webkitMovementX"!==r&&"webkitMovementY"!==r&&("returnValue"===r&&i.preventDefault||(t[r]=i[r]));if(t.target||(t.target=t.srcElement||p.a),t.relatedTarget||(t.relatedTarget=t.fromElement===t.target?t.toElement:t.fromElement),t.preventDefault=function(){i.preventDefault&&i.preventDefault(),t.returnValue=!1,i.returnValue=!1,t.defaultPrevented=!0},t.defaultPrevented=!1,t.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),t.cancelBubble=!0,i.cancelBubble=!0,t.isPropagationStopped=e},t.isPropagationStopped=n,t.stopImmediatePropagation=function(){i.stopImmediatePropagation&&i.stopImmediatePropagation(),t.isImmediatePropagationStopped=e,t.stopPropagation()},t.isImmediatePropagationStopped=n,null!==t.clientX&&void 0!==t.clientX){var o=p.a.documentElement,a=p.a.body;t.pageX=t.clientX+(o&&o.scrollLeft||a&&a.scrollLeft||0)-(o&&o.clientLeft||a&&a.clientLeft||0),t.pageY=t.clientY+(o&&o.scrollTop||a&&a.scrollTop||0)-(o&&o.clientTop||a&&a.clientTop||0)}t.which=t.charCode||t.keyCode,null!==t.button&&void 0!==t.button&&(t.button=1&t.button?0:4&t.button?1:2&t.button?2:0)}return t.fixed_=!0,t}var ci=["touchstart","touchmove"];function hi(t,e,n){if(Array.isArray(e))return ui(hi,t,e,n);ai.has(t)||ai.set(t,{});var i=ai.get(t);if(i.handlers||(i.handlers={}),i.handlers[e]||(i.handlers[e]=[]),n.guid||(n.guid=ri()),i.handlers[e].push(n),i.dispatcher||(i.disabled=!1,i.dispatcher=function(e,n){if(!i.disabled){e=li(e);var r=i.handlers[e.type];if(r)for(var o=r.slice(0),a=0,s=o.length;a<s&&!e.isImmediatePropagationStopped();a++)try{o[a].call(t,e,n)}catch(u){Fe.error(u)}}}),1===i.handlers[e].length)if(t.addEventListener){var r=!1;(function(){if("boolean"!==typeof oi){oi=!1;try{var t=Object.defineProperty({},"passive",{get:function(){oi=!0}});h.a.addEventListener("test",null,t),h.a.removeEventListener("test",null,t)}catch(e){}}return oi})()&&ci.indexOf(e)>-1&&(r={passive:!0}),t.addEventListener(e,i.dispatcher,r)}else t.attachEvent&&t.attachEvent("on"+e,i.dispatcher)}function di(t,e,n){if(ai.has(t)){var i=ai.get(t);if(i.handlers){if(Array.isArray(e))return ui(di,t,e,n);var r=function(t,e){i.handlers[e]=[],si(t,e)};if(void 0!==e){var o=i.handlers[e];if(o)if(n){if(n.guid)for(var a=0;a<o.length;a++)o[a].guid===n.guid&&o.splice(a--,1);si(t,e)}else r(t,e)}else for(var s in i.handlers)Object.prototype.hasOwnProperty.call(i.handlers||{},s)&&r(t,s)}}}function pi(t,e,n){var i=ai.has(t)?ai.get(t):{},r=t.parentNode||t.ownerDocument;if("string"===typeof e?e={type:e,target:t}:e.target||(e.target=t),e=li(e),i.dispatcher&&i.dispatcher.call(t,e,n),r&&!e.isPropagationStopped()&&!0===e.bubbles)pi.call(null,r,e,n);else if(!r&&!e.defaultPrevented&&e.target&&e.target[e.type]){ai.has(e.target)||ai.set(e.target,{});var o=ai.get(e.target);e.target[e.type]&&(o.disabled=!0,"function"===typeof e.target[e.type]&&e.target[e.type](),o.disabled=!1)}return!e.defaultPrevented}function fi(t,e,n){if(Array.isArray(e))return ui(fi,t,e,n);var i=function i(){di(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||ri(),hi(t,e,i)}function mi(t,e,n){var i=function i(){di(t,e,i),n.apply(this,arguments)};i.guid=n.guid=n.guid||ri(),hi(t,e,i)}var gi,_i=Object.freeze({__proto__:null,fixEvent:li,on:hi,off:di,trigger:pi,one:fi,any:mi}),vi=30,yi=function(t,e,n){e.guid||(e.guid=ri());var i=e.bind(t);return i.guid=n?n+"_"+e.guid:e.guid,i},bi=function(t,e){var n=h.a.performance.now();return function(){var i=h.a.performance.now();i-n>=e&&(t.apply(void 0,arguments),n=i)}},Ti=function(){};Ti.prototype.allowedEvents_={},Ti.prototype.on=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},hi(this,t,e),this.addEventListener=n},Ti.prototype.addEventListener=Ti.prototype.on,Ti.prototype.off=function(t,e){di(this,t,e)},Ti.prototype.removeEventListener=Ti.prototype.off,Ti.prototype.one=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},fi(this,t,e),this.addEventListener=n},Ti.prototype.any=function(t,e){var n=this.addEventListener;this.addEventListener=function(){},mi(this,t,e),this.addEventListener=n},Ti.prototype.trigger=function(t){var e=t.type||t;"string"===typeof t&&(t={type:e}),t=li(t),this.allowedEvents_[e]&&this["on"+e]&&this["on"+e](t),pi(this,t)},Ti.prototype.dispatchEvent=Ti.prototype.trigger,Ti.prototype.queueTrigger=function(t){var e=this;gi||(gi=new Map);var n=t.type||t,i=gi.get(this);i||(i=new Map,gi.set(this,i));var r=i.get(n);i.delete(n),h.a.clearTimeout(r);var o=h.a.setTimeout((function(){0===i.size&&(i=null,gi.delete(e)),e.trigger(t)}),0);i.set(n,o)};var wi=function(t){return"function"===typeof t.name?t.name():"string"===typeof t.name?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},xi=function(t){return t instanceof Ti||!!t.eventBusEl_&&["on","one","off","trigger"].every((function(e){return"function"===typeof t[e]}))},Si=function(t){return"string"===typeof t&&/\S/.test(t)||Array.isArray(t)&&!!t.length},Ei=function(t,e,n){if(!t||!t.nodeName&&!xi(t))throw new Error("Invalid target for "+wi(e)+"#"+n+"; must be a DOM node or evented object.")},ki=function(t,e,n){if(!Si(t))throw new Error("Invalid event type for "+wi(e)+"#"+n+"; must be a non-empty string or array.")},Ci=function(t,e,n){if("function"!==typeof t)throw new Error("Invalid listener for "+wi(e)+"#"+n+"; must be a function.")},Pi=function(t,e,n){var i,r,o,a=e.length<3||e[0]===t||e[0]===t.eventBusEl_;return a?(i=t.eventBusEl_,e.length>=3&&e.shift(),r=e[0],o=e[1]):(i=e[0],r=e[1],o=e[2]),Ei(i,t,n),ki(r,t,n),Ci(o,t,n),{isTargetingSelf:a,target:i,type:r,listener:o=yi(t,o)}},Li=function(t,e,n,i){Ei(t,t,e),t.nodeName?_i[e](t,n,i):t[e](n,i)},Ii={on:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=Pi(this,n,"on"),o=r.isTargetingSelf,a=r.target,s=r.type,u=r.listener;if(Li(a,"on",s,u),!o){var l=function(){return t.off(a,s,u)};l.guid=u.guid;var c=function(){return t.off("dispose",l)};c.guid=u.guid,Li(this,"on","dispose",l),Li(a,"on","dispose",c)}},one:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=Pi(this,n,"one"),o=r.isTargetingSelf,a=r.target,s=r.type,u=r.listener;if(o)Li(a,"one",s,u);else{var l=function e(){t.off(a,s,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];u.apply(null,i)};l.guid=u.guid,Li(a,"one",s,l)}},any:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var r=Pi(this,n,"any"),o=r.isTargetingSelf,a=r.target,s=r.type,u=r.listener;if(o)Li(a,"any",s,u);else{var l=function e(){t.off(a,s,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];u.apply(null,i)};l.guid=u.guid,Li(a,"any",s,l)}},off:function(t,e,n){if(!t||Si(t))di(this.eventBusEl_,t,e);else{var i=t,r=e;Ei(i,this,"off"),ki(r,this,"off"),Ci(n,this,"off"),n=yi(this,n),this.off("dispose",n),i.nodeName?(di(i,r,n),di(i,"dispose",n)):xi(i)&&(i.off(r,n),i.off("dispose",n))}},trigger:function(t,e){Ei(this.eventBusEl_,this,"trigger");var n=t&&"string"!==typeof t?t.type:t;if(!Si(n)){var i="Invalid event type for "+wi(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(!t)throw new Error(i);(this.log||Fe).error(i)}return pi(this.eventBusEl_,t,e)}};function Ai(t,e){void 0===e&&(e={});var n=e.eventBusKey;if(n){if(!t[n].nodeName)throw new Error('The eventBusKey "'+n+'" does not refer to an element.');t.eventBusEl_=t[n]}else t.eventBusEl_=xn("span",{className:"vjs-event-bus"});return qe(t,Ii),t.eventedCallbacks&&t.eventedCallbacks.forEach((function(t){t()})),t.on("dispose",(function(){t.off(),[t,t.el_,t.eventBusEl_].forEach((function(t){t&&ai.has(t)&&ai.delete(t)})),h.a.setTimeout((function(){t.eventBusEl_=null}),0)})),t}var Mi={state:{},setState:function(t){var e,n=this;return"function"===typeof t&&(t=t()),We(t,(function(t,i){n.state[i]!==t&&((e=e||{})[i]={from:n.state[i],to:t}),n.state[i]=t})),e&&xi(this)&&this.trigger({changes:e,type:"statechanged"}),e}};function Oi(t,e){return qe(t,Mi),t.state=qe({},t.state,e),"function"===typeof t.handleStateChanged&&xi(t)&&t.on("statechanged",t.handleStateChanged),t}var Ri=function(t){return"string"!==typeof t?t:t.replace(/./,(function(t){return t.toLowerCase()}))},Di=function(t){return"string"!==typeof t?t:t.replace(/./,(function(t){return t.toUpperCase()}))};function Ni(){for(var t={},e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach((function(e){e&&We(e,(function(e,n){Ge(e)?(Ge(t[n])||(t[n]={}),t[n]=Ni(t[n],e)):t[n]=e}))})),t}var Bi=function(){function t(){this.map_={}}var e=t.prototype;return e.has=function(t){return t in this.map_},e.delete=function(t){var e=this.has(t);return delete this.map_[t],e},e.set=function(t,e){return this.map_[t]=e,this},e.forEach=function(t,e){for(var n in this.map_)t.call(e,this.map_[n],n,this)},t}(),Ui=h.a.Map?h.a.Map:Bi,zi=function(){function t(){this.set_={}}var e=t.prototype;return e.has=function(t){return t in this.set_},e.delete=function(t){var e=this.has(t);return delete this.set_[t],e},e.add=function(t){return this.set_[t]=1,this},e.forEach=function(t,e){for(var n in this.set_)t.call(e,n,n,this)},t}(),Fi=h.a.Set?h.a.Set:zi,ji=function(){function t(t,e,n){if(!t&&this.play?this.player_=t=this:this.player_=t,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ni({},this.options_),e=this.options_=Ni(this.options_,e),this.id_=e.id||e.el&&e.el.id,!this.id_){var i=t&&t.id&&t.id()||"no_player";this.id_=i+"_component_"+ri()}this.name_=e.name||null,e.el?this.el_=e.el:!1!==e.createEl&&(this.el_=this.createEl()),!1!==e.evented&&(Ai(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),Oi(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Fi,this.setIntervalIds_=new Fi,this.rafIds_=new Fi,this.namedRafs_=new Ui,this.clearingTimersOnDispose_=!1,!1!==e.initChildren&&this.initChildren(),this.ready(n),!1!==e.reportTouchActivity&&this.enableTouchActivity()}var e=t.prototype;return e.dispose=function(){if(!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var t=this.children_.length-1;t>=0;t--)this.children_[t].dispose&&this.children_[t].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&this.el_.parentNode.removeChild(this.el_),this.el_=null),this.player_=null}},e.isDisposed=function(){return Boolean(this.isDisposed_)},e.player=function(){return this.player_},e.options=function(t){return t?(this.options_=Ni(this.options_,t),this.options_):this.options_},e.el=function(){return this.el_},e.createEl=function(t,e,n){return xn(t,e,n)},e.localize=function(t,e,n){void 0===n&&(n=t);var i=this.player_.language&&this.player_.language(),r=this.player_.languages&&this.player_.languages(),o=r&&r[i],a=i&&i.split("-")[0],s=r&&r[a],u=n;return o&&o[t]?u=o[t]:s&&s[t]&&(u=s[t]),e&&(u=u.replace(/\{(\d+)\}/g,(function(t,n){var i=e[n-1],r=i;return"undefined"===typeof i&&(r=t),r}))),u},e.handleLanguagechange=function(){},e.contentEl=function(){return this.contentEl_||this.el_},e.id=function(){return this.id_},e.name=function(){return this.name_},e.children=function(){return this.children_},e.getChildById=function(t){return this.childIndex_[t]},e.getChild=function(t){if(t)return this.childNameIndex_[t]},e.getDescendant=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e=e.reduce((function(t,e){return t.concat(e)}),[]);for(var i=this,r=0;r<e.length;r++)if(!(i=i.getChild(e[r]))||!i.getChild)return;return i},e.addChild=function(e,n,i){var r,o;if(void 0===n&&(n={}),void 0===i&&(i=this.children_.length),"string"===typeof e){o=Di(e);var a=n.componentClass||o;n.name=o;var s=t.getComponent(a);if(!s)throw new Error("Component "+a+" does not exist");if("function"!==typeof s)return null;r=new s(this.player_||this,n)}else r=e;if(r.parentComponent_&&r.parentComponent_.removeChild(r),this.children_.splice(i,0,r),r.parentComponent_=this,"function"===typeof r.id&&(this.childIndex_[r.id()]=r),(o=o||r.name&&Di(r.name()))&&(this.childNameIndex_[o]=r,this.childNameIndex_[Ri(o)]=r),"function"===typeof r.el&&r.el()){var u=null;this.children_[i+1]&&(this.children_[i+1].el_?u=this.children_[i+1].el_:bn(this.children_[i+1])&&(u=this.children_[i+1])),this.contentEl().insertBefore(r.el(),u)}return r},e.removeChild=function(t){if("string"===typeof t&&(t=this.getChild(t)),t&&this.children_){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===t){e=!0,this.children_.splice(n,1);break}if(e){t.parentComponent_=null,this.childIndex_[t.id()]=null,this.childNameIndex_[Di(t.name())]=null,this.childNameIndex_[Ri(t.name())]=null;var i=t.el();i&&i.parentNode===this.contentEl()&&this.contentEl().removeChild(t.el())}}},e.initChildren=function(){var e=this,n=this.options_.children;if(n){var i,r=this.options_,o=t.getComponent("Tech");(i=Array.isArray(n)?n:Object.keys(n)).concat(Object.keys(this.options_).filter((function(t){return!i.some((function(e){return"string"===typeof e?t===e:t===e.name}))}))).map((function(t){var i,r;return"string"===typeof t?r=n[i=t]||e.options_[i]||{}:(i=t.name,r=t),{name:i,opts:r}})).filter((function(e){var n=t.getComponent(e.opts.componentClass||Di(e.name));return n&&!o.isTech(n)})).forEach((function(t){var n=t.name,i=t.opts;if(void 0!==r[n]&&(i=r[n]),!1!==i){!0===i&&(i={}),i.playerOptions=e.options_.playerOptions;var o=e.addChild(n,i);o&&(e[n]=o)}}))}},e.buildCSSClass=function(){return""},e.ready=function(t,e){if(void 0===e&&(e=!1),t)return this.isReady_?void(e?t.call(this):this.setTimeout(t,1)):(this.readyQueue_=this.readyQueue_||[],void this.readyQueue_.push(t))},e.triggerReady=function(){this.isReady_=!0,this.setTimeout((function(){var t=this.readyQueue_;this.readyQueue_=[],t&&t.length>0&&t.forEach((function(t){t.call(this)}),this),this.trigger("ready")}),1)},e.$=function(t,e){return Gn(t,e||this.contentEl())},e.$$=function(t,e){return Yn(t,e||this.contentEl())},e.hasClass=function(t){return kn(this.el_,t)},e.addClass=function(t){Cn(this.el_,t)},e.removeClass=function(t){Pn(this.el_,t)},e.toggleClass=function(t,e){Ln(this.el_,t,e)},e.show=function(){this.removeClass("vjs-hidden")},e.hide=function(){this.addClass("vjs-hidden")},e.lockShowing=function(){this.addClass("vjs-lock-showing")},e.unlockShowing=function(){this.removeClass("vjs-lock-showing")},e.getAttribute=function(t){return Mn(this.el_,t)},e.setAttribute=function(t,e){On(this.el_,t,e)},e.removeAttribute=function(t){Rn(this.el_,t)},e.width=function(t,e){return this.dimension("width",t,e)},e.height=function(t,e){return this.dimension("height",t,e)},e.dimensions=function(t,e){this.width(t,!0),this.height(e)},e.dimension=function(t,e,n){if(void 0!==e)return null!==e&&e===e||(e=0),-1!==(""+e).indexOf("%")||-1!==(""+e).indexOf("px")?this.el_.style[t]=e:this.el_.style[t]="auto"===e?"":e+"px",void(n||this.trigger("componentresize"));if(!this.el_)return 0;var i=this.el_.style[t],r=i.indexOf("px");return-1!==r?parseInt(i.slice(0,r),10):parseInt(this.el_["offset"+Di(t)],10)},e.currentDimension=function(t){var e=0;if("width"!==t&&"height"!==t)throw new Error("currentDimension only accepts width or height value");if(e=Ye(this.el_,t),0===(e=parseFloat(e))||isNaN(e)){var n="offset"+Di(t);e=this.el_[n]}return e},e.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},e.currentWidth=function(){return this.currentDimension("width")},e.currentHeight=function(){return this.currentDimension("height")},e.focus=function(){this.el_.focus()},e.blur=function(){this.el_.blur()},e.handleKeyDown=function(t){this.player_&&(t.stopPropagation(),this.player_.handleKeyDown(t))},e.handleKeyPress=function(t){this.handleKeyDown(t)},e.emitTapEvents=function(){var t,e=0,n=null;this.on("touchstart",(function(i){1===i.touches.length&&(n={pageX:i.touches[0].pageX,pageY:i.touches[0].pageY},e=h.a.performance.now(),t=!0)})),this.on("touchmove",(function(e){if(e.touches.length>1)t=!1;else if(n){var i=e.touches[0].pageX-n.pageX,r=e.touches[0].pageY-n.pageY;Math.sqrt(i*i+r*r)>10&&(t=!1)}}));var i=function(){t=!1};this.on("touchleave",i),this.on("touchcancel",i),this.on("touchend",(function(i){(n=null,!0===t)&&(h.a.performance.now()-e<200&&(i.preventDefault(),this.trigger("tap")))}))},e.enableTouchActivity=function(){if(this.player()&&this.player().reportUserActivity){var t,e=yi(this.player(),this.player().reportUserActivity);this.on("touchstart",(function(){e(),this.clearInterval(t),t=this.setInterval(e,250)}));var n=function(n){e(),this.clearInterval(t)};this.on("touchmove",e),this.on("touchend",n),this.on("touchcancel",n)}},e.setTimeout=function(t,e){var n,i=this;return t=yi(this,t),this.clearTimersOnDispose_(),n=h.a.setTimeout((function(){i.setTimeoutIds_.has(n)&&i.setTimeoutIds_.delete(n),t()}),e),this.setTimeoutIds_.add(n),n},e.clearTimeout=function(t){return this.setTimeoutIds_.has(t)&&(this.setTimeoutIds_.delete(t),h.a.clearTimeout(t)),t},e.setInterval=function(t,e){t=yi(this,t),this.clearTimersOnDispose_();var n=h.a.setInterval(t,e);return this.setIntervalIds_.add(n),n},e.clearInterval=function(t){return this.setIntervalIds_.has(t)&&(this.setIntervalIds_.delete(t),h.a.clearInterval(t)),t},e.requestAnimationFrame=function(t){var e,n=this;return this.supportsRaf_?(this.clearTimersOnDispose_(),t=yi(this,t),e=h.a.requestAnimationFrame((function(){n.rafIds_.has(e)&&n.rafIds_.delete(e),t()})),this.rafIds_.add(e),e):this.setTimeout(t,1e3/60)},e.requestNamedAnimationFrame=function(t,e){var n=this;if(!this.namedRafs_.has(t)){this.clearTimersOnDispose_(),e=yi(this,e);var i=this.requestAnimationFrame((function(){e(),n.namedRafs_.has(t)&&n.namedRafs_.delete(t)}));return this.namedRafs_.set(t,i),t}},e.cancelNamedAnimationFrame=function(t){this.namedRafs_.has(t)&&(this.cancelAnimationFrame(this.namedRafs_.get(t)),this.namedRafs_.delete(t))},e.cancelAnimationFrame=function(t){return this.supportsRaf_?(this.rafIds_.has(t)&&(this.rafIds_.delete(t),h.a.cancelAnimationFrame(t)),t):this.clearTimeout(t)},e.clearTimersOnDispose_=function(){var t=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",(function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach((function(e){var n=e[0],i=e[1];t[n].forEach((function(e,n){return t[i](n)}))})),t.clearingTimersOnDispose_=!1})))},t.registerComponent=function(e,n){if("string"!==typeof e||!e)throw new Error('Illegal component name, "'+e+'"; must be a non-empty string.');var i,r=t.getComponent("Tech"),o=r&&r.isTech(n),a=t===n||t.prototype.isPrototypeOf(n.prototype);if(o||!a)throw i=o?"techs must be registered using Tech.registerTech()":"must be a Component subclass",new Error('Illegal component, "'+e+'"; '+i+".");e=Di(e),t.components_||(t.components_={});var s=t.getComponent("Player");if("Player"===e&&s&&s.players){var u=s.players,l=Object.keys(u);if(u&&l.length>0&&l.map((function(t){return u[t]})).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return t.components_[e]=n,t.components_[Ri(e)]=n,n},t.getComponent=function(e){if(e&&t.components_)return t.components_[e]},t}();function Hi(t,e,n,i){return function(t,e,n){if("number"!==typeof e||e<0||e>n)throw new Error("Failed to execute '"+t+"' on 'TimeRanges': The index provided ("+e+") is non-numeric or out of bounds (0-"+n+").")}(t,i,n.length-1),n[i][e]}function Zi(t){var e;return e=void 0===t||0===t.length?{length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:{length:t.length,start:Hi.bind(null,"start",0,t),end:Hi.bind(null,"end",1,t)},h.a.Symbol&&h.a.Symbol.iterator&&(e[h.a.Symbol.iterator]=function(){return(t||[]).values()}),e}function Wi(t,e){return Array.isArray(t)?Zi(t):void 0===t||void 0===e?Zi():Zi([[t,e]])}function qi(t,e){var n,i,r=0;if(!e)return 0;t&&t.length||(t=Wi(0,0));for(var o=0;o<t.length;o++)n=t.start(o),(i=t.end(o))>e&&(i=e),r+=i-n;return r/e}function Vi(t){if(t instanceof Vi)return t;"number"===typeof t?this.code=t:"string"===typeof t?this.message=t:Ve(t)&&("number"===typeof t.code&&(this.code=t.code),qe(this,t)),this.message||(this.message=Vi.defaultMessages[this.code]||"")}ji.prototype.supportsRaf_="function"===typeof h.a.requestAnimationFrame&&"function"===typeof h.a.cancelAnimationFrame,ji.registerComponent("Component",ji),Vi.prototype.code=0,Vi.prototype.message="",Vi.prototype.status=null,Vi.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Vi.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var Gi=0;Gi<Vi.errorTypes.length;Gi++)Vi[Vi.errorTypes[Gi]]=Gi,Vi.prototype[Vi.errorTypes[Gi]]=Gi;function Yi(t){return void 0!==t&&null!==t&&"function"===typeof t.then}function Xi(t){Yi(t)&&t.then(null,(function(t){}))}var Ki=function(t){return["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce((function(e,n,i){return t[n]&&(e[n]=t[n]),e}),{cues:t.cues&&Array.prototype.map.call(t.cues,(function(t){return{startTime:t.startTime,endTime:t.endTime,text:t.text,id:t.id}}))})},Qi=function(t){var e=t.$$("track"),n=Array.prototype.map.call(e,(function(t){return t.track}));return Array.prototype.map.call(e,(function(t){var e=Ki(t.track);return t.src&&(e.src=t.src),e})).concat(Array.prototype.filter.call(t.textTracks(),(function(t){return-1===n.indexOf(t)})).map(Ki))},$i=function(t,e){return t.forEach((function(t){var n=e.addRemoteTextTrack(t).track;!t.src&&t.cues&&t.cues.forEach((function(t){return n.addCue(t)}))})),e.textTracks()},Ji=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handleKeyDown_=function(t){return i.handleKeyDown(t)},i.close_=function(t){return i.close(t)},i.opened_=i.hasBeenOpened_=i.hasBeenFilled_=!1,i.closeable(!i.options_.uncloseable),i.content(i.options_.content),i.contentEl_=xn("div",{className:"vjs-modal-dialog-content"},{role:"document"}),i.descEl_=xn("p",{className:"vjs-modal-dialog-description vjs-control-text",id:i.el().getAttribute("aria-describedby")}),Sn(i.descEl_,i.description()),i.el_.appendChild(i.descEl_),i.el_.appendChild(i.contentEl_),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},n.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-modal-dialog vjs-hidden "+t.prototype.buildCSSClass.call(this)},n.label=function(){return this.localize(this.options_.label||"Modal Window")},n.description=function(){var t=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(t+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),t},n.open=function(){if(!this.opened_){var t=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!t.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&t.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=t.controls(),t.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},n.opened=function(t){return"boolean"===typeof t&&this[t?"open":"close"](),this.opened_},n.close=function(){if(this.opened_){var t=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&t.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&t.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},n.closeable=function(t){if("boolean"===typeof t){var e=this.closeable_=!!t,n=this.getChild("closeButton");if(e&&!n){var i=this.contentEl_;this.contentEl_=this.el_,n=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=i,this.on(n,"close",this.close_)}!e&&n&&(this.off(n,"close",this.close_),this.removeChild(n),n.dispose())}return this.closeable_},n.fill=function(){this.fillWith(this.content())},n.fillWith=function(t){var e=this.contentEl(),n=e.parentNode,i=e.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,n.removeChild(e),this.empty(),Wn(e,t),this.trigger("modalfill"),i?n.insertBefore(e,i):n.appendChild(e);var r=this.getChild("closeButton");r&&n.appendChild(r.el_)},n.empty=function(){this.trigger("beforemodalempty"),jn(this.contentEl()),this.trigger("modalempty")},n.content=function(t){return"undefined"!==typeof t&&(this.content_=t),this.content_},n.conditionalFocus_=function(){var t=p.a.activeElement,e=this.player_.el_;this.previouslyActiveEl_=null,(e.contains(t)||e===t)&&(this.previouslyActiveEl_=t,this.focus())},n.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},n.handleKeyDown=function(t){if(t.stopPropagation(),x.a.isEventKey(t,"Escape")&&this.closeable())return t.preventDefault(),void this.close();if(x.a.isEventKey(t,"Tab")){for(var e,n=this.focusableEls_(),i=this.el_.querySelector(":focus"),r=0;r<n.length;r++)if(i===n[r]){e=r;break}p.a.activeElement===this.el_&&(e=0),t.shiftKey&&0===e?(n[n.length-1].focus(),t.preventDefault()):t.shiftKey||e!==n.length-1||(n[0].focus(),t.preventDefault())}},n.focusableEls_=function(){var t=this.el_.querySelectorAll("*");return Array.prototype.filter.call(t,(function(t){return(t instanceof h.a.HTMLAnchorElement||t instanceof h.a.HTMLAreaElement)&&t.hasAttribute("href")||(t instanceof h.a.HTMLInputElement||t instanceof h.a.HTMLSelectElement||t instanceof h.a.HTMLTextAreaElement||t instanceof h.a.HTMLButtonElement)&&!t.hasAttribute("disabled")||t instanceof h.a.HTMLIFrameElement||t instanceof h.a.HTMLObjectElement||t instanceof h.a.HTMLEmbedElement||t.hasAttribute("tabindex")&&-1!==t.getAttribute("tabindex")||t.hasAttribute("contenteditable")}))},e}(ji);Ji.prototype.options_={pauseOnOpen:!0,temporary:!0},ji.registerComponent("ModalDialog",Ji);var tr=function(t){function e(e){var n;void 0===e&&(e=[]),(n=t.call(this)||this).tracks_=[],Object.defineProperty(_()(n),"length",{get:function(){return this.tracks_.length}});for(var i=0;i<e.length;i++)n.addTrack(e[i]);return n}y()(e,t);var n=e.prototype;return n.addTrack=function(t){var e=this,n=this.tracks_.length;""+n in this||Object.defineProperty(this,n,{get:function(){return this.tracks_[n]}}),-1===this.tracks_.indexOf(t)&&(this.tracks_.push(t),this.trigger({track:t,type:"addtrack",target:this})),t.labelchange_=function(){e.trigger({track:t,type:"labelchange",target:e})},xi(t)&&t.addEventListener("labelchange",t.labelchange_)},n.removeTrack=function(t){for(var e,n=0,i=this.length;n<i;n++)if(this[n]===t){(e=this[n]).off&&e.off(),this.tracks_.splice(n,1);break}e&&this.trigger({track:e,type:"removetrack",target:this})},n.getTrackById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===t){e=r;break}}return e},e}(Ti);for(var er in tr.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"},tr.prototype.allowedEvents_)tr.prototype["on"+er]=null;var nr=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].enabled=!1)},ir=function(t){function e(e){var n;void 0===e&&(e=[]);for(var i=e.length-1;i>=0;i--)if(e[i].enabled){nr(e,e[i]);break}return(n=t.call(this,e)||this).changing_=!1,n}y()(e,t);var n=e.prototype;return n.addTrack=function(e){var n=this;e.enabled&&nr(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){n.changing_||(n.changing_=!0,nr(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},n.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},e}(tr),rr=function(t,e){for(var n=0;n<t.length;n++)Object.keys(t[n]).length&&e.id!==t[n].id&&(t[n].selected=!1)},or=function(t){function e(e){var n;void 0===e&&(e=[]);for(var i=e.length-1;i>=0;i--)if(e[i].selected){rr(e,e[i]);break}return(n=t.call(this,e)||this).changing_=!1,Object.defineProperty(_()(n),"selectedIndex",{get:function(){for(var t=0;t<this.length;t++)if(this[t].selected)return t;return-1},set:function(){}}),n}y()(e,t);var n=e.prototype;return n.addTrack=function(e){var n=this;e.selected&&rr(this,e),t.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){n.changing_||(n.changing_=!0,rr(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},n.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},e}(tr),ar=function(t){function e(){return t.apply(this,arguments)||this}y()(e,t);var n=e.prototype;return n.addTrack=function(e){var n=this;t.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);-1===["metadata","chapters"].indexOf(e.kind)&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},n.removeTrack=function(e){t.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},e}(tr),sr=function(){function t(t){void 0===t&&(t=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var e=0,n=t.length;e<n;e++)this.addTrackElement_(t[e])}var e=t.prototype;return e.addTrackElement_=function(t){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),-1===this.trackElements_.indexOf(t)&&this.trackElements_.push(t)},e.getTrackElementByTrack_=function(t){for(var e,n=0,i=this.trackElements_.length;n<i;n++)if(t===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},e.removeTrackElement_=function(t){for(var e=0,n=this.trackElements_.length;e<n;e++)if(t===this.trackElements_[e]){this.trackElements_[e].track&&"function"===typeof this.trackElements_[e].track.off&&this.trackElements_[e].track.off(),"function"===typeof this.trackElements_[e].off&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},t}(),ur=function(){function t(e){t.prototype.setCues_.call(this,e),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var e=t.prototype;return e.setCues_=function(t){var e=this.length||0,n=0,i=t.length;this.cues_=t,this.length_=t.length;var r=function(t){""+t in this||Object.defineProperty(this,""+t,{get:function(){return this.cues_[t]}})};if(e<i)for(n=e;n<i;n++)r.call(this,n)},e.getCueById=function(t){for(var e=null,n=0,i=this.length;n<i;n++){var r=this[n];if(r.id===t){e=r;break}}return e},t}(),lr={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},cr={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},hr={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},dr={disabled:"disabled",hidden:"hidden",showing:"showing"},pr=function(t){function e(e){var n;void 0===e&&(e={}),n=t.call(this)||this;var i={id:e.id||"vjs_track_"+ri(),kind:e.kind||"",language:e.language||""},r=e.label||"",o=function(t){Object.defineProperty(_()(n),t,{get:function(){return i[t]},set:function(){}})};for(var a in i)o(a);return Object.defineProperty(_()(n),"label",{get:function(){return r},set:function(t){t!==r&&(r=t,this.trigger("labelchange"))}}),n}return y()(e,t),e}(Ti),fr=function(t){var e=["protocol","hostname","port","pathname","search","hash","host"],n=p.a.createElement("a");n.href=t;for(var i={},r=0;r<e.length;r++)i[e[r]]=n[e[r]];return"http:"===i.protocol&&(i.host=i.host.replace(/:80$/,"")),"https:"===i.protocol&&(i.host=i.host.replace(/:443$/,"")),i.protocol||(i.protocol=h.a.location.protocol),i.host||(i.host=h.a.location.host),i},mr=function(t){if(!t.match(/^https?:\/\//)){var e=p.a.createElement("a");e.href=t,t=e.href}return t},gr=function(t){if("string"===typeof t){var e=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/.exec(t);if(e)return e.pop().toLowerCase()}return""},_r=function(t,e){void 0===e&&(e=h.a.location);var n=fr(t);return(":"===n.protocol?e.protocol:n.protocol)+n.host!==e.protocol+e.host},vr=Object.freeze({__proto__:null,parseUrl:fr,getAbsoluteURL:mr,getFileExtension:gr,isCrossOrigin:_r}),yr=function(t,e){var n=new h.a.WebVTT.Parser(h.a,h.a.vttjs,h.a.WebVTT.StringDecoder()),i=[];n.oncue=function(t){e.addCue(t)},n.onparsingerror=function(t){i.push(t)},n.onflush=function(){e.trigger({type:"loadeddata",target:e})},n.parse(t),i.length>0&&(h.a.console&&h.a.console.groupCollapsed&&h.a.console.groupCollapsed("Text Track parsing errors for "+e.src),i.forEach((function(t){return Fe.error(t)})),h.a.console&&h.a.console.groupEnd&&h.a.console.groupEnd()),n.flush()},br=function(t,e){var n={uri:t},i=_r(t);i&&(n.cors=i);var r="use-credentials"===e.tech_.crossOrigin();r&&(n.withCredentials=r),E()(n,yi(this,(function(t,n,i){if(t)return Fe.error(t,n);e.loaded_=!0,"function"!==typeof h.a.WebVTT?e.tech_&&e.tech_.any(["vttjsloaded","vttjserror"],(function(t){if("vttjserror"!==t.type)return yr(i,e);Fe.error("vttjs failed to load, stopping trying to process "+e.src)})):yr(i,e)})))},Tr=function(t){function e(e){var n;if(void 0===e&&(e={}),!e.tech)throw new Error("A tech was not provided.");var i=Ni(e,{kind:hr[e.kind]||"subtitles",language:e.language||e.srclang||""}),r=dr[i.mode]||"disabled",o=i.default;"metadata"!==i.kind&&"chapters"!==i.kind||(r="hidden"),(n=t.call(this,i)||this).tech_=i.tech,n.cues_=[],n.activeCues_=[],n.preload_=!1!==n.tech_.preloadTextTracks;var a=new ur(n.cues_),s=new ur(n.activeCues_),u=!1,l=yi(_()(n),(function(){this.tech_.isReady_&&!this.tech_.isDisposed()&&(this.activeCues=this.activeCues,u&&(this.trigger("cuechange"),u=!1))}));return n.tech_.one("dispose",(function(){n.tech_.off("timeupdate",l)})),"disabled"!==r&&n.tech_.on("timeupdate",l),Object.defineProperties(_()(n),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return r},set:function(t){dr[t]&&r!==t&&(r=t,this.preload_||"disabled"===r||0!==this.cues.length||br(this.src,this),this.tech_.off("timeupdate",l),"disabled"!==r&&this.tech_.on("timeupdate",l),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?a:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(0===this.cues.length)return s;for(var t=this.tech_.currentTime(),e=[],n=0,i=this.cues.length;n<i;n++){var r=this.cues[n];(r.startTime<=t&&r.endTime>=t||r.startTime===r.endTime&&r.startTime<=t&&r.startTime+.5>=t)&&e.push(r)}if(u=!1,e.length!==this.activeCues_.length)u=!0;else for(var o=0;o<e.length;o++)-1===this.activeCues_.indexOf(e[o])&&(u=!0);return this.activeCues_=e,s.setCues_(this.activeCues_),s},set:function(){}}}),i.src?(n.src=i.src,n.preload_||(n.loaded_=!0),(n.preload_||"subtitles"!==i.kind&&"captions"!==i.kind)&&br(n.src,_()(n))):n.loaded_=!0,n}y()(e,t);var n=e.prototype;return n.addCue=function(t){var e=t;if(h.a.vttjs&&!(t instanceof h.a.vttjs.VTTCue)){for(var n in e=new h.a.vttjs.VTTCue(t.startTime,t.endTime,t.text),t)n in e||(e[n]=t[n]);e.id=t.id,e.originalCue_=t}for(var i=this.tech_.textTracks(),r=0;r<i.length;r++)i[r]!==this&&i[r].removeCue(e);this.cues_.push(e),this.cues.setCues_(this.cues_)},n.removeCue=function(t){for(var e=this.cues_.length;e--;){var n=this.cues_[e];if(n===t||n.originalCue_&&n.originalCue_===t){this.cues_.splice(e,1),this.cues.setCues_(this.cues_);break}}},e}(pr);Tr.prototype.allowedEvents_={cuechange:"cuechange"};var wr=function(t){function e(e){var n;void 0===e&&(e={});var i=Ni(e,{kind:cr[e.kind]||""});n=t.call(this,i)||this;var r=!1;return Object.defineProperty(_()(n),"enabled",{get:function(){return r},set:function(t){"boolean"===typeof t&&t!==r&&(r=t,this.trigger("enabledchange"))}}),i.enabled&&(n.enabled=i.enabled),n.loaded_=!0,n}return y()(e,t),e}(pr),xr=function(t){function e(e){var n;void 0===e&&(e={});var i=Ni(e,{kind:lr[e.kind]||""});n=t.call(this,i)||this;var r=!1;return Object.defineProperty(_()(n),"selected",{get:function(){return r},set:function(t){"boolean"===typeof t&&t!==r&&(r=t,this.trigger("selectedchange"))}}),i.selected&&(n.selected=i.selected),n}return y()(e,t),e}(pr),Sr=function(t){function e(e){var n,i;void 0===e&&(e={}),n=t.call(this)||this;var r=new Tr(e);return n.kind=r.kind,n.src=r.src,n.srclang=r.language,n.label=r.label,n.default=r.default,Object.defineProperties(_()(n),{readyState:{get:function(){return i}},track:{get:function(){return r}}}),i=0,r.addEventListener("loadeddata",(function(){i=2,n.trigger({type:"load",target:_()(n)})})),n}return y()(e,t),e}(Ti);Sr.prototype.allowedEvents_={load:"load"},Sr.NONE=0,Sr.LOADING=1,Sr.LOADED=2,Sr.ERROR=3;var Er={audio:{ListClass:ir,TrackClass:wr,capitalName:"Audio"},video:{ListClass:or,TrackClass:xr,capitalName:"Video"},text:{ListClass:ar,TrackClass:Tr,capitalName:"Text"}};Object.keys(Er).forEach((function(t){Er[t].getterName=t+"Tracks",Er[t].privateName=t+"Tracks_"}));var kr={remoteText:{ListClass:ar,TrackClass:Tr,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:sr,TrackClass:Sr,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Cr=m()({},Er,kr);kr.names=Object.keys(kr),Er.names=Object.keys(Er),Cr.names=[].concat(kr.names).concat(Er.names);var Pr=function(t){function e(e,n){var i;return void 0===e&&(e={}),void 0===n&&(n=function(){}),e.reportTouchActivity=!1,(i=t.call(this,null,e,n)||this).onDurationChange_=function(t){return i.onDurationChange(t)},i.trackProgress_=function(t){return i.trackProgress(t)},i.trackCurrentTime_=function(t){return i.trackCurrentTime(t)},i.stopTrackingCurrentTime_=function(t){return i.stopTrackingCurrentTime(t)},i.disposeSourceHandler_=function(t){return i.disposeSourceHandler(t)},i.hasStarted_=!1,i.on("playing",(function(){this.hasStarted_=!0})),i.on("loadstart",(function(){this.hasStarted_=!1})),Cr.names.forEach((function(t){var n=Cr[t];e&&e[n.getterName]&&(i[n.privateName]=e[n.getterName])})),i.featuresProgressEvents||i.manualProgressOn(),i.featuresTimeupdateEvents||i.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach((function(t){!1===e["native"+t+"Tracks"]&&(i["featuresNative"+t+"Tracks"]=!1)})),!1===e.nativeCaptions||!1===e.nativeTextTracks?i.featuresNativeTextTracks=!1:!0!==e.nativeCaptions&&!0!==e.nativeTextTracks||(i.featuresNativeTextTracks=!0),i.featuresNativeTextTracks||i.emulateTextTracks(),i.preloadTextTracks=!1!==e.preloadTextTracks,i.autoRemoteTextTracks_=new Cr.text.ListClass,i.initTrackListeners(),e.nativeControlsForTouch||i.emitTapEvents(),i.constructor&&(i.name_=i.constructor.name||"Unknown Tech"),i}y()(e,t);var n=e.prototype;return n.triggerSourceset=function(t){var e=this;this.isReady_||this.one("ready",(function(){return e.setTimeout((function(){return e.triggerSourceset(t)}),1)})),this.trigger({src:t,type:"sourceset"})},n.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},n.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},n.trackProgress=function(t){this.stopTrackingProgress(),this.progressInterval=this.setInterval(yi(this,(function(){var t=this.bufferedPercent();this.bufferedPercent_!==t&&this.trigger("progress"),this.bufferedPercent_=t,1===t&&this.stopTrackingProgress()})),500)},n.onDurationChange=function(t){this.duration_=this.duration()},n.buffered=function(){return Wi(0,0)},n.bufferedPercent=function(){return qi(this.buffered(),this.duration_)},n.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},n.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},n.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},n.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval((function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})}),250)},n.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.dispose=function(){this.clearTracks(Er.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),t.prototype.dispose.call(this)},n.clearTracks=function(t){var e=this;(t=[].concat(t)).forEach((function(t){for(var n=e[t+"Tracks"]()||[],i=n.length;i--;){var r=n[i];"text"===t&&e.removeRemoteTextTrack(r),n.removeTrack(r)}}))},n.cleanupAutoTextTracks=function(){for(var t=this.autoRemoteTextTracks_||[],e=t.length;e--;){var n=t[e];this.removeRemoteTextTrack(n)}},n.reset=function(){},n.crossOrigin=function(){},n.setCrossOrigin=function(){},n.error=function(t){return void 0!==t&&(this.error_=new Vi(t),this.trigger("error")),this.error_},n.played=function(){return this.hasStarted_?Wi(0,0):Wi()},n.play=function(){},n.setScrubbing=function(){},n.scrubbing=function(){},n.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},n.initTrackListeners=function(){var t=this;Er.names.forEach((function(e){var n=Er[e],i=function(){t.trigger(e+"trackchange")},r=t[n.getterName]();r.addEventListener("removetrack",i),r.addEventListener("addtrack",i),t.on("dispose",(function(){r.removeEventListener("removetrack",i),r.removeEventListener("addtrack",i)}))}))},n.addWebVttScript_=function(){var t=this;if(!h.a.WebVTT)if(p.a.body.contains(this.el())){if(!this.options_["vtt.js"]&&Ge(C.a)&&Object.keys(C.a).length>0)return void this.trigger("vttjsloaded");var e=p.a.createElement("script");e.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",e.onload=function(){t.trigger("vttjsloaded")},e.onerror=function(){t.trigger("vttjserror")},this.on("dispose",(function(){e.onload=null,e.onerror=null})),h.a.WebVTT=!0,this.el().parentNode.appendChild(e)}else this.ready(this.addWebVttScript_)},n.emulateTextTracks=function(){var t=this,e=this.textTracks(),n=this.remoteTextTracks(),i=function(t){return e.addTrack(t.track)},r=function(t){return e.removeTrack(t.track)};n.on("addtrack",i),n.on("removetrack",r),this.addWebVttScript_();var o=function(){return t.trigger("texttrackchange")},a=function(){o();for(var t=0;t<e.length;t++){var n=e[t];n.removeEventListener("cuechange",o),"showing"===n.mode&&n.addEventListener("cuechange",o)}};a(),e.addEventListener("change",a),e.addEventListener("addtrack",a),e.addEventListener("removetrack",a),this.on("dispose",(function(){n.off("addtrack",i),n.off("removetrack",r),e.removeEventListener("change",a),e.removeEventListener("addtrack",a),e.removeEventListener("removetrack",a);for(var t=0;t<e.length;t++){e[t].removeEventListener("cuechange",o)}}))},n.addTextTrack=function(t,e,n){if(!t)throw new Error("TextTrack kind is required but was not provided");return function(t,e,n,i,r){void 0===r&&(r={});var o=t.textTracks();r.kind=e,n&&(r.label=n),i&&(r.language=i),r.tech=t;var a=new Cr.text.TrackClass(r);return o.addTrack(a),a}(this,t,e,n)},n.createRemoteTextTrack=function(t){var e=Ni(t,{tech:this});return new kr.remoteTextEl.TrackClass(e)},n.addRemoteTextTrack=function(t,e){var n=this;void 0===t&&(t={});var i=this.createRemoteTextTrack(t);return!0!==e&&!1!==e&&(Fe.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),e=!0),this.remoteTextTrackEls().addTrackElement_(i),this.remoteTextTracks().addTrack(i.track),!0!==e&&this.ready((function(){return n.autoRemoteTextTracks_.addTrack(i.track)})),i},n.removeRemoteTextTrack=function(t){var e=this.remoteTextTrackEls().getTrackElementByTrack_(t);this.remoteTextTrackEls().removeTrackElement_(e),this.remoteTextTracks().removeTrack(t),this.autoRemoteTextTracks_.removeTrack(t)},n.getVideoPlaybackQuality=function(){return{}},n.requestPictureInPicture=function(){var t=this.options_.Promise||h.a.Promise;if(t)return t.reject()},n.disablePictureInPicture=function(){return!0},n.setDisablePictureInPicture=function(){},n.setPoster=function(){},n.playsinline=function(){},n.setPlaysinline=function(){},n.overrideNativeAudioTracks=function(){},n.overrideNativeVideoTracks=function(){},n.canPlayType=function(){return""},e.canPlayType=function(){return""},e.canPlaySource=function(t,n){return e.canPlayType(t.type)},e.isTech=function(t){return t.prototype instanceof e||t instanceof e||t===e},e.registerTech=function(t,n){if(e.techs_||(e.techs_={}),!e.isTech(n))throw new Error("Tech "+t+" must be a Tech");if(!e.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!e.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return t=Di(t),e.techs_[t]=n,e.techs_[Ri(t)]=n,"Tech"!==t&&e.defaultTechOrder_.push(t),n},e.getTech=function(t){if(t)return e.techs_&&e.techs_[t]?e.techs_[t]:(t=Di(t),h.a&&h.a.videojs&&h.a.videojs[t]?(Fe.warn("The "+t+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),h.a.videojs[t]):void 0)},e}(ji);Cr.names.forEach((function(t){var e=Cr[t];Pr.prototype[e.getterName]=function(){return this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName]}})),Pr.prototype.featuresVolumeControl=!0,Pr.prototype.featuresMuteControl=!0,Pr.prototype.featuresFullscreenResize=!1,Pr.prototype.featuresPlaybackRate=!1,Pr.prototype.featuresProgressEvents=!1,Pr.prototype.featuresSourceset=!1,Pr.prototype.featuresTimeupdateEvents=!1,Pr.prototype.featuresNativeTextTracks=!1,Pr.withSourceHandlers=function(t){t.registerSourceHandler=function(e,n){var i=t.sourceHandlers;i||(i=t.sourceHandlers=[]),void 0===n&&(n=i.length),i.splice(n,0,e)},t.canPlayType=function(e){for(var n,i=t.sourceHandlers||[],r=0;r<i.length;r++)if(n=i[r].canPlayType(e))return n;return""},t.selectSourceHandler=function(e,n){for(var i=t.sourceHandlers||[],r=0;r<i.length;r++)if(i[r].canHandleSource(e,n))return i[r];return null},t.canPlaySource=function(e,n){var i=t.selectSourceHandler(e,n);return i?i.canHandleSource(e,n):""};["seekable","seeking","duration"].forEach((function(t){var e=this[t];"function"===typeof e&&(this[t]=function(){return this.sourceHandler_&&this.sourceHandler_[t]?this.sourceHandler_[t].apply(this.sourceHandler_,arguments):e.apply(this,arguments)})}),t.prototype),t.prototype.setSource=function(e){var n=t.selectSourceHandler(e,this.options_);n||(t.nativeSourceHandler?n=t.nativeSourceHandler:Fe.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),n!==t.nativeSourceHandler&&(this.currentSource_=e),this.sourceHandler_=n.handleSource(e,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},t.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},ji.registerComponent("Tech",Pr),Pr.registerTech("Tech",Pr),Pr.defaultTechOrder_=[];var Lr={},Ir={},Ar={};function Mr(t,e,n){t.setTimeout((function(){return Ur(e,Lr[e.type],n,t)}),1)}function Or(t,e,n,i){void 0===i&&(i=null);var r="call"+Di(n),o=t.reduce(Br(r),i),a=o===Ar,s=a?null:e[n](o);return function(t,e,n,i){for(var r=t.length-1;r>=0;r--){var o=t[r];o[e]&&o[e](i,n)}}(t,n,s,a),s}var Rr={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},Dr={setCurrentTime:1,setMuted:1,setVolume:1},Nr={play:1,pause:1};function Br(t){return function(e,n){return e===Ar?Ar:n[t]?n[t](e):e}}function Ur(t,e,n,i,r,o){void 0===t&&(t={}),void 0===e&&(e=[]),void 0===r&&(r=[]),void 0===o&&(o=!1);var a=e,s=a[0],u=a.slice(1);if("string"===typeof s)Ur(t,Lr[s],n,i,r,o);else if(s){var l=function(t,e){var n=Ir[t.id()],i=null;if(void 0===n||null===n)return i=e(t),Ir[t.id()]=[[e,i]],i;for(var r=0;r<n.length;r++){var o=n[r],a=o[0],s=o[1];a===e&&(i=s)}return null===i&&(i=e(t),n.push([e,i])),i}(i,s);if(!l.setSource)return r.push(l),Ur(t,u,n,i,r,o);l.setSource(qe({},t),(function(e,a){if(e)return Ur(t,u,n,i,r,o);r.push(l),Ur(a,t.type===a.type?u:Lr[a.type],n,i,r,o)}))}else u.length?Ur(t,u,n,i,r,o):o?n(t,r):Ur(t,Lr["*"],n,i,r,!0)}var zr={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Fr=function(t){void 0===t&&(t="");var e=gr(t);return zr[e.toLowerCase()]||""},jr=function t(e){if(Array.isArray(e)){var n=[];e.forEach((function(e){e=t(e),Array.isArray(e)?n=n.concat(e):Ve(e)&&n.push(e)})),e=n}else e="string"===typeof e&&e.trim()?[Hr({src:e})]:Ve(e)&&"string"===typeof e.src&&e.src&&e.src.trim()?[Hr(e)]:[];return e};function Hr(t){if(!t.type){var e=Fr(t.src);e&&(t.type=e)}return t}var Zr=function(t){function e(e,n,i){var r,o=Ni({createEl:!1},n);if(r=t.call(this,e,o,i)||this,n.playerOptions.sources&&0!==n.playerOptions.sources.length)e.src(n.playerOptions.sources);else for(var a=0,s=n.playerOptions.techOrder;a<s.length;a++){var u=Di(s[a]),l=Pr.getTech(u);if(u||(l=ji.getComponent(u)),l&&l.isSupported()){e.loadTech_(u);break}}return r}return y()(e,t),e}(ji);ji.registerComponent("MediaLoader",Zr);var Wr=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handleMouseOver_=function(t){return i.handleMouseOver(t)},i.handleMouseOut_=function(t){return i.handleMouseOut(t)},i.handleClick_=function(t){return i.handleClick(t)},i.handleKeyDown_=function(t){return i.handleKeyDown(t)},i.emitTapEvents(),i.enable(),i}y()(e,t);var n=e.prototype;return n.createEl=function(t,e,n){void 0===t&&(t="div"),void 0===e&&(e={}),void 0===n&&(n={}),e=qe({className:this.buildCSSClass(),tabIndex:0},e),"button"===t&&Fe.error("Creating a ClickableComponent with an HTML element of "+t+" is not supported; use a Button instead."),n=qe({role:"button"},n),this.tabIndex_=e.tabIndex;var i=xn(t,e,n);return i.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.dispose=function(){this.controlTextEl_=null,t.prototype.dispose.call(this)},n.createControlTextEl=function(t){return this.controlTextEl_=xn("span",{className:"vjs-control-text"},{"aria-live":"polite"}),t&&t.appendChild(this.controlTextEl_),this.controlText(this.controlText_,t),this.controlTextEl_},n.controlText=function(t,e){if(void 0===e&&(e=this.el()),void 0===t)return this.controlText_||"Need Text";var n=this.localize(t);this.controlText_=t,Sn(this.controlTextEl_,n),this.nonIconControl||this.player_.options_.noUITitleAttributes||e.setAttribute("title",n)},n.buildCSSClass=function(){return"vjs-control vjs-button "+t.prototype.buildCSSClass.call(this)},n.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),"undefined"!==typeof this.tabIndex_&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},n.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),"undefined"!==typeof this.tabIndex_&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},n.handleLanguagechange=function(){this.controlText(this.controlText_)},n.handleClick=function(t){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},n.handleKeyDown=function(e){x.a.isEventKey(e,"Space")||x.a.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(ji);ji.registerComponent("ClickableComponent",Wr);var qr=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update(),i.update_=function(t){return i.update(t)},e.on("posterchange",i.update_),i}y()(e,t);var n=e.prototype;return n.dispose=function(){this.player().off("posterchange",this.update_),t.prototype.dispose.call(this)},n.createEl=function(){return xn("div",{className:"vjs-poster",tabIndex:-1})},n.update=function(t){var e=this.player().poster();this.setSrc(e),e?this.show():this.hide()},n.setSrc=function(t){var e="";t&&(e='url("'+t+'")'),this.el_.style.backgroundImage=e},n.handleClick=function(t){if(this.player_.controls()){var e=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;!this.player_.tech(!0)||(un||on)&&e||this.player_.tech(!0).focus(),this.player_.paused()?Xi(this.player_.play()):this.player_.pause()}},e}(Wr);ji.registerComponent("PosterImage",qr);var Vr={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function Gr(t,e){var n;if(4===t.length)n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3];else{if(7!==t.length)throw new Error("Invalid color code provided, "+t+"; must be formatted as e.g. #f0e or #f604e2.");n=t.slice(1)}return"rgba("+parseInt(n.slice(0,2),16)+","+parseInt(n.slice(2,4),16)+","+parseInt(n.slice(4,6),16)+","+e+")"}function Yr(t,e,n){try{t.style[e]=n}catch(i){return}}var Xr=function(t){function e(e,n,i){var r;r=t.call(this,e,n,i)||this;var o=function(t){return r.updateDisplay(t)};return e.on("loadstart",(function(t){return r.toggleDisplay(t)})),e.on("texttrackchange",o),e.on("loadedmetadata",(function(t){return r.preselectTrack(t)})),e.ready(yi(_()(r),(function(){if(e.tech_&&e.tech_.featuresNativeTextTracks)this.hide();else{e.on("fullscreenchange",o),e.on("playerresize",o),h.a.addEventListener("orientationchange",o),e.on("dispose",(function(){return h.a.removeEventListener("orientationchange",o)}));for(var t=this.options_.playerOptions.tracks||[],n=0;n<t.length;n++)this.player_.addRemoteTextTrack(t[n],!0);this.preselectTrack()}}))),r}y()(e,t);var n=e.prototype;return n.preselectTrack=function(){for(var t,e,n,i={captions:1,subtitles:1},r=this.player_.textTracks(),o=this.player_.cache_.selectedLanguage,a=0;a<r.length;a++){var s=r[a];o&&o.enabled&&o.language&&o.language===s.language&&s.kind in i?s.kind===o.kind?n=s:n||(n=s):o&&!o.enabled?(n=null,t=null,e=null):s.default&&("descriptions"!==s.kind||t?s.kind in i&&!e&&(e=s):t=s)}n?n.mode="showing":e?e.mode="showing":t&&(t.mode="showing")},n.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{"aria-live":"off","aria-atomic":"true"})},n.clearDisplay=function(){"function"===typeof h.a.WebVTT&&h.a.WebVTT.processCues(h.a,[],this.el_)},n.updateDisplay=function(){var t=this.player_.textTracks(),e=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),e){for(var n=[],i=0;i<t.length;++i){var r=t[i];"showing"===r.mode&&n.push(r)}this.updateForTrack(n)}else{for(var o=null,a=null,s=t.length;s--;){var u=t[s];"showing"===u.mode&&("descriptions"===u.kind?o=u:a=u)}a?("off"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","off"),this.updateForTrack(a)):o&&("assertive"!==this.getAttribute("aria-live")&&this.setAttribute("aria-live","assertive"),this.updateForTrack(o))}},n.updateDisplayState=function(t){for(var e=this.player_.textTrackSettings.getValues(),n=t.activeCues,i=n.length;i--;){var r=n[i];if(r){var o=r.displayState;if(e.color&&(o.firstChild.style.color=e.color),e.textOpacity&&Yr(o.firstChild,"color",Gr(e.color||"#fff",e.textOpacity)),e.backgroundColor&&(o.firstChild.style.backgroundColor=e.backgroundColor),e.backgroundOpacity&&Yr(o.firstChild,"backgroundColor",Gr(e.backgroundColor||"#000",e.backgroundOpacity)),e.windowColor&&(e.windowOpacity?Yr(o,"backgroundColor",Gr(e.windowColor,e.windowOpacity)):o.style.backgroundColor=e.windowColor),e.edgeStyle&&("dropshadow"===e.edgeStyle?o.firstChild.style.textShadow="2px 2px 3px #222, 2px 2px 4px #222, 2px 2px 5px #222":"raised"===e.edgeStyle?o.firstChild.style.textShadow="1px 1px #222, 2px 2px #222, 3px 3px #222":"depressed"===e.edgeStyle?o.firstChild.style.textShadow="1px 1px #ccc, 0 1px #ccc, -1px -1px #222, 0 -1px #222":"uniform"===e.edgeStyle&&(o.firstChild.style.textShadow="0 0 4px #222, 0 0 4px #222, 0 0 4px #222, 0 0 4px #222")),e.fontPercent&&1!==e.fontPercent){var a=h.a.parseFloat(o.style.fontSize);o.style.fontSize=a*e.fontPercent+"px",o.style.height="auto",o.style.top="auto"}e.fontFamily&&"default"!==e.fontFamily&&("small-caps"===e.fontFamily?o.firstChild.style.fontVariant="small-caps":o.firstChild.style.fontFamily=Vr[e.fontFamily])}}},n.updateForTrack=function(t){if(Array.isArray(t)||(t=[t]),"function"===typeof h.a.WebVTT&&!t.every((function(t){return!t.activeCues}))){for(var e=[],n=0;n<t.length;++n)for(var i=t[n],r=0;r<i.activeCues.length;++r)e.push(i.activeCues[r]);h.a.WebVTT.processCues(h.a,e,this.el_);for(var o=0;o<t.length;++o){for(var a=t[o],s=0;s<a.activeCues.length;++s){var u=a.activeCues[s].displayState;Cn(u,"vjs-text-track-cue"),Cn(u,"vjs-text-track-cue-"+(a.language?a.language:o))}this.player_.textTrackSettings&&this.updateDisplayState(a)}}},e}(ji);ji.registerComponent("TextTrackDisplay",Xr);var Kr=function(t){function e(){return t.apply(this,arguments)||this}return y()(e,t),e.prototype.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),i=xn("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),r=t.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return r.appendChild(i),r},e}(ji);ji.registerComponent("LoadingSpinner",Kr);var Qr=function(t){function e(){return t.apply(this,arguments)||this}y()(e,t);var n=e.prototype;return n.createEl=function(t,e,n){void 0===e&&(e={}),void 0===n&&(n={});var i=xn("button",e=qe({className:this.buildCSSClass()},e),n=qe({type:"button"},n));return i.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(i),i},n.addChild=function(t,e){void 0===e&&(e={});var n=this.constructor.name;return Fe.warn("Adding an actionable (user controllable) child to a Button ("+n+") is not supported; use a ClickableComponent instead."),ji.prototype.addChild.call(this,t,e)},n.enable=function(){t.prototype.enable.call(this),this.el_.removeAttribute("disabled")},n.disable=function(){t.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},n.handleKeyDown=function(e){x.a.isEventKey(e,"Space")||x.a.isEventKey(e,"Enter")?e.stopPropagation():t.prototype.handleKeyDown.call(this,e)},e}(Wr);ji.registerComponent("Button",Qr);var $r=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).mouseused_=!1,i.on("mousedown",(function(t){return i.handleMouseDown(t)})),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-big-play-button"},n.handleClick=function(t){var e=this.player_.play();if(this.mouseused_&&t.clientX&&t.clientY){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;return Xi(e),void(!this.player_.tech(!0)||(un||on)&&n||this.player_.tech(!0).focus())}var i=this.player_.getChild("controlBar"),r=i&&i.getChild("playToggle");if(r){var o=function(){return r.focus()};Yi(e)?e.then(o,(function(){})):this.setTimeout(o,1)}else this.player_.tech(!0).focus()},n.handleKeyDown=function(e){this.mouseused_=!1,t.prototype.handleKeyDown.call(this,e)},n.handleMouseDown=function(t){this.mouseused_=!0},e}(Qr);$r.prototype.controlText_="Play Video",ji.registerComponent("BigPlayButton",$r);var Jr=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).controlText(n&&n.controlText||i.localize("Close")),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-close-button "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.trigger({type:"close",bubbles:!1})},n.handleKeyDown=function(e){x.a.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):t.prototype.handleKeyDown.call(this,e)},e}(Qr);ji.registerComponent("CloseButton",Jr);var to=function(t){function e(e,n){var i;return void 0===n&&(n={}),i=t.call(this,e,n)||this,n.replay=void 0===n.replay||n.replay,i.on(e,"play",(function(t){return i.handlePlay(t)})),i.on(e,"pause",(function(t){return i.handlePause(t)})),n.replay&&i.on(e,"ended",(function(t){return i.handleEnded(t)})),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-play-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){this.player_.paused()?Xi(this.player_.play()):this.player_.pause()},n.handleSeeked=function(t){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(t):this.handlePlay(t)},n.handlePlay=function(t){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},n.handlePause=function(t){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},n.handleEnded=function(t){var e=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",(function(t){return e.handleSeeked(t)}))},e}(Qr);to.prototype.controlText_="Play",ji.registerComponent("PlayToggle",to);var eo=function(t,e){t=t<0?0:t;var n=Math.floor(t%60),i=Math.floor(t/60%60),r=Math.floor(t/3600),o=Math.floor(e/60%60),a=Math.floor(e/3600);return(isNaN(t)||t===1/0)&&(r=i=n="-"),(r=r>0||a>0?r+":":"")+(i=((r||o>=10)&&i<10?"0"+i:i)+":")+(n=n<10?"0"+n:n)},no=eo;function io(t,e){return void 0===e&&(e=t),no(t,e)}var ro=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,["timeupdate","ended"],(function(t){return i.updateContent(t)})),i.updateTextNode_(),i}y()(e,t);var n=e.prototype;return n.createEl=function(){var e=this.buildCSSClass(),n=t.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),i=xn("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+"\xa0"},{role:"presentation"});return n.appendChild(i),this.contentEl_=xn("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},n.dispose=function(){this.contentEl_=null,this.textNode_=null,t.prototype.dispose.call(this)},n.updateTextNode_=function(t){var e=this;void 0===t&&(t=0),t=io(t),this.formattedTime_!==t&&(this.formattedTime_=t,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",(function(){if(e.contentEl_){var t=e.textNode_;t&&e.contentEl_.firstChild!==t&&(t=null,Fe.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),e.textNode_=p.a.createTextNode(e.formattedTime_),e.textNode_&&(t?e.contentEl_.replaceChild(e.textNode_,t):e.contentEl_.appendChild(e.textNode_))}})))},n.updateContent=function(t){},e}(ji);ro.prototype.labelText_="Time",ro.prototype.controlText_="Time",ji.registerComponent("TimeDisplay",ro);var oo=function(t){function e(){return t.apply(this,arguments)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-current-time"},n.updateContent=function(t){var e;e=this.player_.ended()?this.player_.duration():this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(e)},e}(ro);oo.prototype.labelText_="Current Time",oo.prototype.controlText_="Current Time",ji.registerComponent("CurrentTimeDisplay",oo);var ao=function(t){function e(e,n){var i,r=function(t){return i.updateContent(t)};return(i=t.call(this,e,n)||this).on(e,"durationchange",r),i.on(e,"loadstart",r),i.on(e,"loadedmetadata",r),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-duration"},n.updateContent=function(t){var e=this.player_.duration();this.updateTextNode_(e)},e}(ro);ao.prototype.labelText_="Duration",ao.prototype.controlText_="Duration",ji.registerComponent("DurationDisplay",ao);var so=function(t){function e(){return t.apply(this,arguments)||this}return y()(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=t.prototype.createEl.call(this,"div"),i=t.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(i),e.appendChild(n),e},e}(ji);ji.registerComponent("TimeDivider",so);var uo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"durationchange",(function(t){return i.updateContent(t)})),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-remaining-time"},n.createEl=function(){var e=t.prototype.createEl.call(this);return e.insertBefore(xn("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},n.updateContent=function(t){var e;"number"===typeof this.player_.duration()&&(e=this.player_.ended()?0:this.player_.remainingTimeDisplay?this.player_.remainingTimeDisplay():this.player_.remainingTime(),this.updateTextNode_(e))},e}(ro);uo.prototype.labelText_="Remaining Time",uo.prototype.controlText_="Remaining Time",ji.registerComponent("RemainingTimeDisplay",uo);var lo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateShowing(),i.on(i.player(),"durationchange",(function(t){return i.updateShowing(t)})),i}y()(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=xn("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(xn("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+"\xa0"})),this.contentEl_.appendChild(p.a.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},n.dispose=function(){this.contentEl_=null,t.prototype.dispose.call(this)},n.updateShowing=function(t){this.player().duration()===1/0?this.show():this.hide()},e}(ji);ji.registerComponent("LiveDisplay",lo);var co=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).updateLiveEdgeStatus(),i.player_.liveTracker&&(i.updateLiveEdgeStatusHandler_=function(t){return i.updateLiveEdgeStatus(t)},i.on(i.player_.liveTracker,"liveedgechange",i.updateLiveEdgeStatusHandler_)),i}y()(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=xn("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},n.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},n.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},n.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,t.prototype.dispose.call(this)},e}(Qr);co.prototype.controlText_="Seek to live, currently playing live",ji.registerComponent("SeekToLive",co);var ho=function(t,e,n){return t=Number(t),Math.min(n,Math.max(e,isNaN(t)?e:t))},po=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handleMouseDown_=function(t){return i.handleMouseDown(t)},i.handleMouseUp_=function(t){return i.handleMouseUp(t)},i.handleKeyDown_=function(t){return i.handleKeyDown(t)},i.handleClick_=function(t){return i.handleClick(t)},i.handleMouseMove_=function(t){return i.handleMouseMove(t)},i.update_=function(t){return i.update(t)},i.bar=i.getChild(i.options_.barName),i.vertical(!!i.options_.vertical),i.enable(),i}y()(e,t);var n=e.prototype;return n.enabled=function(){return this.enabled_},n.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},n.disable=function(){if(this.enabled()){var t=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},n.createEl=function(e,n,i){return void 0===n&&(n={}),void 0===i&&(i={}),n.className=n.className+" vjs-slider",n=qe({tabIndex:0},n),i=qe({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},i),t.prototype.createEl.call(this,e,n,i)},n.handleMouseDown=function(t){var e=this.bar.el_.ownerDocument;"mousedown"===t.type&&t.preventDefault(),"touchstart"!==t.type||an||t.preventDefault(),Dn(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(e,"mousemove",this.handleMouseMove_),this.on(e,"mouseup",this.handleMouseUp_),this.on(e,"touchmove",this.handleMouseMove_),this.on(e,"touchend",this.handleMouseUp_),this.handleMouseMove(t)},n.handleMouseMove=function(t){},n.handleMouseUp=function(){var t=this.bar.el_.ownerDocument;Nn(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(t,"mousemove",this.handleMouseMove_),this.off(t,"mouseup",this.handleMouseUp_),this.off(t,"touchmove",this.handleMouseMove_),this.off(t,"touchend",this.handleMouseUp_),this.update()},n.update=function(){var t=this;if(this.el_&&this.bar){var e=this.getProgress();return e===this.progress_||(this.progress_=e,this.requestNamedAnimationFrame("Slider#update",(function(){var n=t.vertical()?"height":"width";t.bar.el().style[n]=(100*e).toFixed(2)+"%"}))),e}},n.getProgress=function(){return Number(ho(this.getPercent(),0,1).toFixed(4))},n.calculateDistance=function(t){var e=zn(this.el_,t);return this.vertical()?e.y:e.x},n.handleKeyDown=function(e){x.a.isEventKey(e,"Left")||x.a.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):x.a.isEventKey(e,"Right")||x.a.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):t.prototype.handleKeyDown.call(this,e)},n.handleClick=function(t){t.stopPropagation(),t.preventDefault()},n.vertical=function(t){if(void 0===t)return this.vertical_||!1;this.vertical_=!!t,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},e}(ji);ji.registerComponent("Slider",po);var fo=function(t,e){return ho(t/e*100,0,100).toFixed(2)+"%"},mo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).partEls_=[],i.on(e,"progress",(function(t){return i.update(t)})),i}y()(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=xn("span",{className:"vjs-control-text"}),i=xn("span",{textContent:this.localize("Loaded")}),r=p.a.createTextNode(": ");return this.percentageEl_=xn("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(i),n.appendChild(r),n.appendChild(this.percentageEl_),e},n.dispose=function(){this.partEls_=null,this.percentageEl_=null,t.prototype.dispose.call(this)},n.update=function(t){var e=this;this.requestNamedAnimationFrame("LoadProgressBar#update",(function(){var t=e.player_.liveTracker,n=e.player_.buffered(),i=t&&t.isLive()?t.seekableEnd():e.player_.duration(),r=e.player_.bufferedEnd(),o=e.partEls_,a=fo(r,i);e.percent_!==a&&(e.el_.style.width=a,Sn(e.percentageEl_,a),e.percent_=a);for(var s=0;s<n.length;s++){var u=n.start(s),l=n.end(s),c=o[s];c||(c=e.el_.appendChild(xn()),o[s]=c),c.dataset.start===u&&c.dataset.end===l||(c.dataset.start=u,c.dataset.end=l,c.style.left=fo(u,r),c.style.width=fo(l-u,r))}for(var h=o.length;h>n.length;h--)e.el_.removeChild(o[h-1]);o.length=n.length}))},e}(ji);ji.registerComponent("LoadProgressBar",mo);var go=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=bi(yi(_()(i),i.update),vi),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},n.update=function(t,e,n){var i=Un(this.el_),r=Bn(this.player_.el()),o=t.width*e;if(r&&i){var a=t.left-r.left+o,s=t.width-o+(r.right-t.right),u=i.width/2;a<u?u+=u-a:s<u&&(u=s),u<0?u=0:u>i.width&&(u=i.width),u=Math.round(u),this.el_.style.right="-"+u+"px",this.write(n)}},n.write=function(t){Sn(this.el_,t)},n.updateTime=function(t,e,n,i){var r=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",(function(){var o,a=r.player_.duration();if(r.player_.liveTracker&&r.player_.liveTracker.isLive()){var s=r.player_.liveTracker.liveWindow(),u=s-e*s;o=(u<1?"":"-")+io(u,s)}else o=io(n,a);r.update(t,e,o),i&&i()}))},e}(ji);ji.registerComponent("TimeTooltip",go);var _o=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=bi(yi(_()(i),i.update),vi),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},n.update=function(t,e){var n=this.getChild("timeTooltip");if(n){var i=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();n.updateTime(t,e,i)}},e}(ji);_o.prototype.options_={children:[]},fn||tn||_o.prototype.options_.children.push("timeTooltip"),ji.registerComponent("PlayProgressBar",_o);var vo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=bi(yi(_()(i),i.update),vi),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(t,e){var n=this,i=e*this.player_.duration();this.getChild("timeTooltip").updateTime(t,e,i,(function(){n.el_.style.left=t.width*e+"px"}))},e}(ji);vo.prototype.options_={children:["timeTooltip"]},ji.registerComponent("MouseTimeDisplay",vo);var yo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).setEventHandlers_(),i}y()(e,t);var n=e.prototype;return n.setEventHandlers_=function(){var t=this;this.update_=yi(this,this.update),this.update=bi(this.update_,vi),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(e){return t.enableInterval_(e)},this.disableIntervalHandler_=function(e){return t.disableInterval_(e)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in p.a&&"visibilityState"in p.a&&this.on(p.a,"visibilitychange",this.toggleVisibility_)},n.toggleVisibility_=function(t){"hidden"===p.a.visibilityState?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(t)):(this.player_.ended()||this.player_.paused()||this.enableInterval_(),this.update())},n.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,vi))},n.disableInterval_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&t&&"ended"!==t.type||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},n.update=function(e){var n=this;if("hidden"!==p.a.visibilityState){var i=t.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",(function(){var t=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),e=n.player_.liveTracker,r=n.player_.duration();e&&e.isLive()&&(r=n.player_.liveTracker.liveCurrentTime()),n.percent_!==i&&(n.el_.setAttribute("aria-valuenow",(100*i).toFixed(2)),n.percent_=i),n.currentTime_===t&&n.duration_===r||(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[io(t,r),io(r,r)],"{1} of {2}")),n.currentTime_=t,n.duration_=r),n.bar&&n.bar.update(Bn(n.el()),n.getProgress())})),i}},n.userSeek_=function(t){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(t)},n.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},n.getPercent=function(){var t,e=this.getCurrentTime_(),n=this.player_.liveTracker;return n&&n.isLive()?(t=(e-n.seekableStart())/n.liveWindow(),n.atLiveEdge()&&(t=1)):t=e/this.player_.duration(),t},n.handleMouseDown=function(e){qn(e)&&(e.stopPropagation(),this.player_.scrubbing(!0),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),t.prototype.handleMouseDown.call(this,e))},n.handleMouseMove=function(t){if(qn(t)){var e,n=this.calculateDistance(t),i=this.player_.liveTracker;if(i&&i.isLive()){if(n>=.99)return void i.seekToLiveEdge();var r=i.seekableStart(),o=i.liveCurrentTime();if((e=r+n*i.liveWindow())>=o&&(e=o),e<=r&&(e=r+.1),e===1/0)return}else(e=n*this.player_.duration())===this.player_.duration()&&(e-=.1);this.userSeek_(e)}},n.enable=function(){t.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},n.disable=function(){t.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},n.handleMouseUp=function(e){t.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Xi(this.player_.play()):this.update_()},n.stepForward=function(){this.userSeek_(this.player_.currentTime()+5)},n.stepBack=function(){this.userSeek_(this.player_.currentTime()-5)},n.handleAction=function(t){this.player_.paused()?this.player_.play():this.player_.pause()},n.handleKeyDown=function(e){var n=this.player_.liveTracker;if(x.a.isEventKey(e,"Space")||x.a.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(x.a.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(x.a.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(x()(e))){e.preventDefault(),e.stopPropagation();var i=10*(x.a.codes[x()(e)]-x.a.codes[0])/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*i):this.userSeek_(this.player_.duration()*i)}else x.a.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-60)):x.a.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+60)):t.prototype.handleKeyDown.call(this,e)},n.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in p.a&&"visibilityState"in p.a&&this.off(p.a,"visibilitychange",this.toggleVisibility_),t.prototype.dispose.call(this)},e}(po);yo.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},fn||tn||yo.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),ji.registerComponent("SeekBar",yo);var bo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).handleMouseMove=bi(yi(_()(i),i.handleMouseMove),vi),i.throttledHandleMouseSeek=bi(yi(_()(i),i.handleMouseSeek),vi),i.handleMouseUpHandler_=function(t){return i.handleMouseUp(t)},i.handleMouseDownHandler_=function(t){return i.handleMouseDown(t)},i.enable(),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},n.handleMouseMove=function(t){var e=this.getChild("seekBar");if(e){var n=e.getChild("playProgressBar"),i=e.getChild("mouseTimeDisplay");if(n||i){var r=e.el(),o=Un(r),a=zn(r,t).x;a=ho(a,0,1),i&&i.update(o,a),n&&n.update(o,e.getProgress())}}},n.handleMouseSeek=function(t){var e=this.getChild("seekBar");e&&e.handleMouseMove(t)},n.enabled=function(){return this.enabled_},n.disable=function(){if(this.children().forEach((function(t){return t.disable&&t.disable()})),this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var t=this.getChild("seekBar");this.player_.scrubbing(!1),t.videoWasPlaying&&Xi(this.player_.play())}},n.enable=function(){this.children().forEach((function(t){return t.enable&&t.enable()})),this.enabled()||(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},n.removeListenersAddedOnMousedownAndTouchstart=function(){var t=this.el_.ownerDocument;this.off(t,"mousemove",this.throttledHandleMouseSeek),this.off(t,"touchmove",this.throttledHandleMouseSeek),this.off(t,"mouseup",this.handleMouseUpHandler_),this.off(t,"touchend",this.handleMouseUpHandler_)},n.handleMouseDown=function(t){var e=this.el_.ownerDocument,n=this.getChild("seekBar");n&&n.handleMouseDown(t),this.on(e,"mousemove",this.throttledHandleMouseSeek),this.on(e,"touchmove",this.throttledHandleMouseSeek),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(t){var e=this.getChild("seekBar");e&&e.handleMouseUp(t),this.removeListenersAddedOnMousedownAndTouchstart()},e}(ji);bo.prototype.options_={children:["seekBar"]},ji.registerComponent("ProgressControl",bo);var To=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,["enterpictureinpicture","leavepictureinpicture"],(function(t){return i.handlePictureInPictureChange(t)})),i.on(e,["disablepictureinpicturechanged","loadedmetadata"],(function(t){return i.handlePictureInPictureEnabledChange(t)})),i.disable(),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-picture-in-picture-control "+t.prototype.buildCSSClass.call(this)},n.handlePictureInPictureEnabledChange=function(){p.a.pictureInPictureEnabled&&!1===this.player_.disablePictureInPicture()?this.enable():this.disable()},n.handlePictureInPictureChange=function(t){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},n.handleClick=function(t){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},e}(Qr);To.prototype.controlText_="Picture-in-Picture",ji.registerComponent("PictureInPictureToggle",To);var wo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"fullscreenchange",(function(t){return i.handleFullscreenChange(t)})),!1===p.a[e.fsApi_.fullscreenEnabled]&&i.disable(),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-fullscreen-control "+t.prototype.buildCSSClass.call(this)},n.handleFullscreenChange=function(t){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},n.handleClick=function(t){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},e}(Qr);wo.prototype.controlText_="Fullscreen",ji.registerComponent("FullscreenToggle",wo);var xo=function(t){function e(){return t.apply(this,arguments)||this}return y()(e,t),e.prototype.createEl=function(){var e=t.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},e}(ji);ji.registerComponent("VolumeLevel",xo);var So=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=bi(yi(_()(i),i.update),vi),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},n.update=function(t,e,n,i){if(!n){var r=Bn(this.el_),o=Bn(this.player_.el()),a=t.width*e;if(!o||!r)return;var s=t.left-o.left+a,u=t.width-a+(o.right-t.right),l=r.width/2;s<l?l+=l-s:u<l&&(l=u),l<0?l=0:l>r.width&&(l=r.width),this.el_.style.right="-"+l+"px"}this.write(i+"%")},n.write=function(t){Sn(this.el_,t)},n.updateVolume=function(t,e,n,i,r){var o=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",(function(){o.update(t,e,n,i.toFixed(0)),r&&r()}))},e}(ji);ji.registerComponent("VolumeLevelTooltip",So);var Eo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).update=bi(yi(_()(i),i.update),vi),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},n.update=function(t,e,n){var i=this,r=100*e;this.getChild("volumeLevelTooltip").updateVolume(t,e,n,r,(function(){n?i.el_.style.bottom=t.height*e+"px":i.el_.style.left=t.width*e+"px"}))},e}(ji);Eo.prototype.options_={children:["volumeLevelTooltip"]},ji.registerComponent("MouseVolumeLevelDisplay",Eo);var ko=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on("slideractive",(function(t){return i.updateLastVolume_(t)})),i.on(e,"volumechange",(function(t){return i.updateARIAAttributes(t)})),e.ready((function(){return i.updateARIAAttributes()})),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},n.handleMouseDown=function(e){qn(e)&&t.prototype.handleMouseDown.call(this,e)},n.handleMouseMove=function(t){var e=this.getChild("mouseVolumeLevelDisplay");if(e){var n=this.el(),i=Bn(n),r=this.vertical(),o=zn(n,t);o=r?o.y:o.x,o=ho(o,0,1),e.update(i,o,r)}qn(t)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(t)))},n.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},n.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},n.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},n.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},n.updateARIAAttributes=function(t){var e=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",e),this.el_.setAttribute("aria-valuetext",e+"%")},n.volumeAsPercentage_=function(){return Math.round(100*this.player_.volume())},n.updateLastVolume_=function(){var t=this,e=this.player_.volume();this.one("sliderinactive",(function(){0===t.player_.volume()&&t.player_.lastVolume_(e)}))},e}(po);ko.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},fn||tn||ko.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),ko.prototype.playerEvent="volumechange",ji.registerComponent("VolumeBar",ko);var Co=function(t){function e(e,n){var i;return void 0===n&&(n={}),n.vertical=n.vertical||!1,("undefined"===typeof n.volumeBar||Ge(n.volumeBar))&&(n.volumeBar=n.volumeBar||{},n.volumeBar.vertical=n.vertical),i=t.call(this,e,n)||this,function(t,e){e.tech_&&!e.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",(function(){e.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))}(_()(i),e),i.throttledHandleMouseMove=bi(yi(_()(i),i.handleMouseMove),vi),i.handleMouseUpHandler_=function(t){return i.handleMouseUp(t)},i.on("mousedown",(function(t){return i.handleMouseDown(t)})),i.on("touchstart",(function(t){return i.handleMouseDown(t)})),i.on("mousemove",(function(t){return i.handleMouseMove(t)})),i.on(i.volumeBar,["focus","slideractive"],(function(){i.volumeBar.addClass("vjs-slider-active"),i.addClass("vjs-slider-active"),i.trigger("slideractive")})),i.on(i.volumeBar,["blur","sliderinactive"],(function(){i.volumeBar.removeClass("vjs-slider-active"),i.removeClass("vjs-slider-active"),i.trigger("sliderinactive")})),i}y()(e,t);var n=e.prototype;return n.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},n.handleMouseDown=function(t){var e=this.el_.ownerDocument;this.on(e,"mousemove",this.throttledHandleMouseMove),this.on(e,"touchmove",this.throttledHandleMouseMove),this.on(e,"mouseup",this.handleMouseUpHandler_),this.on(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseUp=function(t){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseMove),this.off(e,"touchmove",this.throttledHandleMouseMove),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},n.handleMouseMove=function(t){this.volumeBar.handleMouseMove(t)},e}(ji);Co.prototype.options_={children:["volumeBar"]},ji.registerComponent("VolumeControl",Co);var Po=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,function(t,e){e.tech_&&!e.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(e,"loadstart",(function(){e.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")}))}(_()(i),e),i.on(e,["loadstart","volumechange"],(function(t){return i.update(t)})),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-mute-control "+t.prototype.buildCSSClass.call(this)},n.handleClick=function(t){var e=this.player_.volume(),n=this.player_.lastVolume_();if(0===e){var i=n<.1?.1:n;this.player_.volume(i),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},n.update=function(t){this.updateIcon_(),this.updateControlText_()},n.updateIcon_=function(){var t=this.player_.volume(),e=3;fn&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),0===t||this.player_.muted()?e=0:t<.33?e=1:t<.67&&(e=2);for(var n=0;n<4;n++)Pn(this.el_,"vjs-vol-"+n);Cn(this.el_,"vjs-vol-"+e)},n.updateControlText_=function(){var t=this.player_.muted()||0===this.player_.volume()?"Unmute":"Mute";this.controlText()!==t&&this.controlText(t)},e}(Qr);Po.prototype.controlText_="Mute",ji.registerComponent("MuteToggle",Po);var Lo=function(t){function e(e,n){var i;return void 0===n&&(n={}),"undefined"!==typeof n.inline?n.inline=n.inline:n.inline=!0,("undefined"===typeof n.volumeControl||Ge(n.volumeControl))&&(n.volumeControl=n.volumeControl||{},n.volumeControl.vertical=!n.inline),(i=t.call(this,e,n)||this).handleKeyPressHandler_=function(t){return i.handleKeyPress(t)},i.on(e,["loadstart"],(function(t){return i.volumePanelState_(t)})),i.on(i.muteToggle,"keyup",(function(t){return i.handleKeyPress(t)})),i.on(i.volumeControl,"keyup",(function(t){return i.handleVolumeControlKeyUp(t)})),i.on("keydown",(function(t){return i.handleKeyPress(t)})),i.on("mouseover",(function(t){return i.handleMouseOver(t)})),i.on("mouseout",(function(t){return i.handleMouseOut(t)})),i.on(i.volumeControl,["slideractive"],i.sliderActive_),i.on(i.volumeControl,["sliderinactive"],i.sliderInactive_),i}y()(e,t);var n=e.prototype;return n.sliderActive_=function(){this.addClass("vjs-slider-active")},n.sliderInactive_=function(){this.removeClass("vjs-slider-active")},n.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},n.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),t.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},n.dispose=function(){this.handleMouseOut(),t.prototype.dispose.call(this)},n.handleVolumeControlKeyUp=function(t){x.a.isEventKey(t,"Esc")&&this.muteToggle.focus()},n.handleMouseOver=function(t){this.addClass("vjs-hover"),hi(p.a,"keyup",this.handleKeyPressHandler_)},n.handleMouseOut=function(t){this.removeClass("vjs-hover"),di(p.a,"keyup",this.handleKeyPressHandler_)},n.handleKeyPress=function(t){x.a.isEventKey(t,"Esc")&&this.handleMouseOut()},e}(ji);Lo.prototype.options_={children:["muteToggle","volumeControl"]},ji.registerComponent("VolumePanel",Lo);var Io=function(t){function e(e,n){var i;return i=t.call(this,e,n)||this,n&&(i.menuButton_=n.menuButton),i.focusedChild_=-1,i.on("keydown",(function(t){return i.handleKeyDown(t)})),i.boundHandleBlur_=function(t){return i.handleBlur(t)},i.boundHandleTapClick_=function(t){return i.handleTapClick(t)},i}y()(e,t);var n=e.prototype;return n.addEventListenerForItem=function(t){t instanceof ji&&(this.on(t,"blur",this.boundHandleBlur_),this.on(t,["tap","click"],this.boundHandleTapClick_))},n.removeEventListenerForItem=function(t){t instanceof ji&&(this.off(t,"blur",this.boundHandleBlur_),this.off(t,["tap","click"],this.boundHandleTapClick_))},n.removeChild=function(e){"string"===typeof e&&(e=this.getChild(e)),this.removeEventListenerForItem(e),t.prototype.removeChild.call(this,e)},n.addItem=function(t){var e=this.addChild(t);e&&this.addEventListenerForItem(e)},n.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=xn(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=t.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),hi(n,"click",(function(t){t.preventDefault(),t.stopImmediatePropagation()})),n},n.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,t.prototype.dispose.call(this)},n.handleBlur=function(t){var e=t.relatedTarget||p.a.activeElement;if(!this.children().some((function(t){return t.el()===e}))){var n=this.menuButton_;n&&n.buttonPressed_&&e!==n.el().firstChild&&n.unpressButton()}},n.handleTapClick=function(t){if(this.menuButton_){this.menuButton_.unpressButton();var e=this.children();if(!Array.isArray(e))return;var n=e.filter((function(e){return e.el()===t.target}))[0];if(!n)return;"CaptionSettingsMenuItem"!==n.name()&&this.menuButton_.focus()}},n.handleKeyDown=function(t){x.a.isEventKey(t,"Left")||x.a.isEventKey(t,"Down")?(t.preventDefault(),t.stopPropagation(),this.stepForward()):(x.a.isEventKey(t,"Right")||x.a.isEventKey(t,"Up"))&&(t.preventDefault(),t.stopPropagation(),this.stepBack())},n.stepForward=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_+1),this.focus(t)},n.stepBack=function(){var t=0;void 0!==this.focusedChild_&&(t=this.focusedChild_-1),this.focus(t)},n.focus=function(t){void 0===t&&(t=0);var e=this.children().slice();e.length&&e[0].hasClass("vjs-menu-title")&&e.shift(),e.length>0&&(t<0?t=0:t>=e.length&&(t=e.length-1),this.focusedChild_=t,e[t].el_.focus())},e}(ji);ji.registerComponent("Menu",Io);var Ao=function(t){function e(e,n){var i;void 0===n&&(n={}),(i=t.call(this,e,n)||this).menuButton_=new Qr(e,n),i.menuButton_.controlText(i.controlText_),i.menuButton_.el_.setAttribute("aria-haspopup","true");var r=Qr.prototype.buildCSSClass();i.menuButton_.el_.className=i.buildCSSClass()+" "+r,i.menuButton_.removeClass("vjs-control"),i.addChild(i.menuButton_),i.update(),i.enabled_=!0;var o=function(t){return i.handleClick(t)};return i.handleMenuKeyUp_=function(t){return i.handleMenuKeyUp(t)},i.on(i.menuButton_,"tap",o),i.on(i.menuButton_,"click",o),i.on(i.menuButton_,"keydown",(function(t){return i.handleKeyDown(t)})),i.on(i.menuButton_,"mouseenter",(function(){i.addClass("vjs-hover"),i.menu.show(),hi(p.a,"keyup",i.handleMenuKeyUp_)})),i.on("mouseleave",(function(t){return i.handleMouseLeave(t)})),i.on("keydown",(function(t){return i.handleSubmenuKeyDown(t)})),i}y()(e,t);var n=e.prototype;return n.update=function(){var t=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=t,this.addChild(t),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?this.hide():this.show()},n.createMenu=function(){var t=new Io(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=xn("li",{className:"vjs-menu-title",textContent:Di(this.options_.title),tabIndex:-1}),n=new ji(this.player_,{el:e});t.addItem(n)}if(this.items=this.createItems(),this.items)for(var i=0;i<this.items.length;i++)t.addItem(this.items[i]);return t},n.createItems=function(){},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},n.buildWrapperCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+Qr.prototype.buildCSSClass()+" "+t.prototype.buildCSSClass.call(this)},n.buildCSSClass=function(){var e="vjs-menu-button";return!0===this.options_.inline?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+t.prototype.buildCSSClass.call(this)},n.controlText=function(t,e){return void 0===e&&(e=this.menuButton_.el()),this.menuButton_.controlText(t,e)},n.dispose=function(){this.handleMouseLeave(),t.prototype.dispose.call(this)},n.handleClick=function(t){this.buttonPressed_?this.unpressButton():this.pressButton()},n.handleMouseLeave=function(t){this.removeClass("vjs-hover"),di(p.a,"keyup",this.handleMenuKeyUp_)},n.focus=function(){this.menuButton_.focus()},n.blur=function(){this.menuButton_.blur()},n.handleKeyDown=function(t){x.a.isEventKey(t,"Esc")||x.a.isEventKey(t,"Tab")?(this.buttonPressed_&&this.unpressButton(),x.a.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus())):(x.a.isEventKey(t,"Up")||x.a.isEventKey(t,"Down"))&&(this.buttonPressed_||(t.preventDefault(),this.pressButton()))},n.handleMenuKeyUp=function(t){(x.a.isEventKey(t,"Esc")||x.a.isEventKey(t,"Tab"))&&this.removeClass("vjs-hover")},n.handleSubmenuKeyPress=function(t){this.handleSubmenuKeyDown(t)},n.handleSubmenuKeyDown=function(t){(x.a.isEventKey(t,"Esc")||x.a.isEventKey(t,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),x.a.isEventKey(t,"Tab")||(t.preventDefault(),this.menuButton_.focus()))},n.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),fn&&Tn())return;this.menu.focus()}},n.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},n.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},n.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},e}(ji);ji.registerComponent("MenuButton",Ao);var Mo=function(t){function e(e,n){var i,r=n.tracks;if((i=t.call(this,e,n)||this).items.length<=1&&i.hide(),!r)return _()(i);var o=yi(_()(i),i.update);return r.addEventListener("removetrack",o),r.addEventListener("addtrack",o),r.addEventListener("labelchange",o),i.player_.on("ready",o),i.player_.on("dispose",(function(){r.removeEventListener("removetrack",o),r.removeEventListener("addtrack",o),r.removeEventListener("labelchange",o)})),i}return y()(e,t),e}(Ao);ji.registerComponent("TrackButton",Mo);var Oo=["Tab","Esc","Up","Down","Right","Left"],Ro=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).selectable=n.selectable,i.isSelected_=n.selected||!1,i.multiSelectable=n.multiSelectable,i.selected(i.isSelected_),i.selectable?i.multiSelectable?i.el_.setAttribute("role","menuitemcheckbox"):i.el_.setAttribute("role","menuitemradio"):i.el_.setAttribute("role","menuitem"),i}y()(e,t);var n=e.prototype;return n.createEl=function(e,n,i){this.nonIconControl=!0;var r=t.prototype.createEl.call(this,"li",qe({className:"vjs-menu-item",tabIndex:-1},n),i);return r.replaceChild(xn("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),r.querySelector(".vjs-icon-placeholder")),r},n.handleKeyDown=function(e){Oo.some((function(t){return x.a.isEventKey(e,t)}))||t.prototype.handleKeyDown.call(this,e)},n.handleClick=function(t){this.selected(!0)},n.selected=function(t){this.selectable&&(t?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},e}(Wr);ji.registerComponent("MenuItem",Ro);var Do=function(t){function e(e,n){var i,r=n.track,o=e.textTracks();n.label=r.label||r.language||"Unknown",n.selected="showing"===r.mode,(i=t.call(this,e,n)||this).track=r,i.kinds=(n.kinds||[n.kind||i.track.kind]).filter(Boolean);var a,s=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleTracksChange.apply(_()(i),e)},u=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleSelectedLanguageChange.apply(_()(i),e)};(e.on(["loadstart","texttrackchange"],s),o.addEventListener("change",s),o.addEventListener("selectedlanguagechange",u),i.on("dispose",(function(){e.off(["loadstart","texttrackchange"],s),o.removeEventListener("change",s),o.removeEventListener("selectedlanguagechange",u)})),void 0===o.onchange)&&i.on(["tap","click"],(function(){if("object"!==typeof h.a.Event)try{a=new h.a.Event("change")}catch(t){}a||(a=p.a.createEvent("Event")).initEvent("change",!0,!0),o.dispatchEvent(a)}));return i.handleTracksChange(),i}y()(e,t);var n=e.prototype;return n.handleClick=function(e){var n=this.track,i=this.player_.textTracks();if(t.prototype.handleClick.call(this,e),i)for(var r=0;r<i.length;r++){var o=i[r];-1!==this.kinds.indexOf(o.kind)&&(o===n?"showing"!==o.mode&&(o.mode="showing"):"disabled"!==o.mode&&(o.mode="disabled"))}},n.handleTracksChange=function(t){var e="showing"===this.track.mode;e!==this.isSelected_&&this.selected(e)},n.handleSelectedLanguageChange=function(t){if("showing"===this.track.mode){var e=this.player_.cache_.selectedLanguage;if(e&&e.enabled&&e.language===this.track.language&&e.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},n.dispose=function(){this.track=null,t.prototype.dispose.call(this)},e}(Ro);ji.registerComponent("TextTrackMenuItem",Do);var No=function(t){function e(e,n){return n.track={player:e,kind:n.kind,kinds:n.kinds,default:!1,mode:"disabled"},n.kinds||(n.kinds=[n.kind]),n.label?n.track.label=n.label:n.track.label=n.kinds.join(" and ")+" off",n.selectable=!0,n.multiSelectable=!1,t.call(this,e,n)||this}y()(e,t);var n=e.prototype;return n.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,r=e.length;i<r;i++){var o=e[i];if(this.options_.kinds.indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;break}}n!==this.isSelected_&&this.selected(n)},n.handleSelectedLanguageChange=function(t){for(var e=this.player().textTracks(),n=!0,i=0,r=e.length;i<r;i++){var o=e[i];if(["captions","descriptions","subtitles"].indexOf(o.kind)>-1&&"showing"===o.mode){n=!1;break}}n&&(this.player_.cache_.selectedLanguage={enabled:!1})},e}(Do);ji.registerComponent("OffTextTrackMenuItem",No);var Bo=function(t){function e(e,n){return void 0===n&&(n={}),n.tracks=e.textTracks(),t.call(this,e,n)||this}return y()(e,t),e.prototype.createItems=function(t,e){var n;void 0===t&&(t=[]),void 0===e&&(e=Do),this.label_&&(n=this.label_+" off"),t.push(new No(this.player_,{kinds:this.kinds_,kind:this.kind_,label:n})),this.hideThreshold_+=1;var i=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var r=0;r<i.length;r++){var o=i[r];if(this.kinds_.indexOf(o.kind)>-1){var a=new e(this.player_,{track:o,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});a.addClass("vjs-"+o.kind+"-menu-item"),t.push(a)}}return t},e}(Mo);ji.registerComponent("TextTrackButton",Bo);var Uo=function(t){function e(e,n){var i,r=n.track,o=n.cue,a=e.currentTime();return n.selectable=!0,n.multiSelectable=!1,n.label=o.text,n.selected=o.startTime<=a&&a<o.endTime,(i=t.call(this,e,n)||this).track=r,i.cue=o,r.addEventListener("cuechange",yi(_()(i),i.update)),i}y()(e,t);var n=e.prototype;return n.handleClick=function(e){t.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime),this.update(this.cue.startTime)},n.update=function(t){var e=this.cue,n=this.player_.currentTime();this.selected(e.startTime<=n&&n<e.endTime)},e}(Ro);ji.registerComponent("ChaptersTrackMenuItem",Uo);var zo=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-chapters-button "+t.prototype.buildWrapperCSSClass.call(this)},n.update=function(e){this.track_&&(!e||"addtrack"!==e.type&&"removetrack"!==e.type)||this.setTrack(this.findChaptersTrack()),t.prototype.update.call(this)},n.setTrack=function(t){if(this.track_!==t){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var e=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);e&&e.removeEventListener("load",this.updateHandler_),this.track_=null}if(this.track_=t,this.track_){this.track_.mode="hidden";var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.addEventListener("load",this.updateHandler_)}}},n.findChaptersTrack=function(){for(var t=this.player_.textTracks()||[],e=t.length-1;e>=0;e--){var n=t[e];if(n.kind===this.kind_)return n}},n.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Di(this.kind_))},n.createMenu=function(){return this.options_.title=this.getMenuCaption(),t.prototype.createMenu.call(this)},n.createItems=function(){var t=[];if(!this.track_)return t;var e=this.track_.cues;if(!e)return t;for(var n=0,i=e.length;n<i;n++){var r=e[n],o=new Uo(this.player_,{track:this.track_,cue:r});t.push(o)}return t},e}(Bo);zo.prototype.kind_="chapters",zo.prototype.controlText_="Chapters",ji.registerComponent("ChaptersButton",zo);var Fo=function(t){function e(e,n,i){var r;r=t.call(this,e,n,i)||this;var o=e.textTracks(),a=yi(_()(r),r.handleTracksChange);return o.addEventListener("change",a),r.on("dispose",(function(){o.removeEventListener("change",a)})),r}y()(e,t);var n=e.prototype;return n.handleTracksChange=function(t){for(var e=this.player().textTracks(),n=!1,i=0,r=e.length;i<r;i++){var o=e[i];if(o.kind!==this.kind_&&"showing"===o.mode){n=!0;break}}n?this.disable():this.enable()},n.buildCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Bo);Fo.prototype.kind_="descriptions",Fo.prototype.controlText_="Descriptions",ji.registerComponent("DescriptionsButton",Fo);var jo=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+t.prototype.buildWrapperCSSClass.call(this)},e}(Bo);jo.prototype.kind_="subtitles",jo.prototype.controlText_="Subtitles",ji.registerComponent("SubtitlesButton",jo);var Ho=function(t){function e(e,n){var i;return n.track={player:e,kind:n.kind,label:n.kind+" settings",selectable:!1,default:!1,mode:"disabled"},n.selectable=!1,n.name="CaptionSettingsMenuItem",(i=t.call(this,e,n)||this).addClass("vjs-texttrack-settings"),i.controlText(", opens "+n.kind+" settings dialog"),i}return y()(e,t),e.prototype.handleClick=function(t){this.player().getChild("textTrackSettings").open()},e}(Do);ji.registerComponent("CaptionSettingsMenuItem",Ho);var Zo=function(t){function e(e,n,i){return t.call(this,e,n,i)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-captions-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-captions-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ho(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),t.prototype.createItems.call(this,e)},e}(Bo);Zo.prototype.kind_="captions",Zo.prototype.controlText_="Captions",ji.registerComponent("CaptionsButton",Zo);var Wo=function(t){function e(){return t.apply(this,arguments)||this}return y()(e,t),e.prototype.createEl=function(e,n,i){var r=t.prototype.createEl.call(this,e,n,i),o=r.querySelector(".vjs-menu-item-text");return"captions"===this.options_.track.kind&&(o.appendChild(xn("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(xn("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),r},e}(Do);ji.registerComponent("SubsCapsMenuItem",Wo);var qo=function(t){function e(e,n){var i;return void 0===n&&(n={}),(i=t.call(this,e,n)||this).label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(i.player_.language_)>-1&&(i.label_="captions"),i.menuButton_.controlText(Di(i.label_)),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){var e=[];return this.player().tech_&&this.player().tech_.featuresNativeTextTracks||!this.player().getChild("textTrackSettings")||(e.push(new Ho(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=t.prototype.createItems.call(this,e,Wo)},e}(Bo);qo.prototype.kinds_=["captions","subtitles"],qo.prototype.controlText_="Subtitles",ji.registerComponent("SubsCapsButton",qo);var Vo=function(t){function e(e,n){var i,r=n.track,o=e.audioTracks();n.label=r.label||r.language||"Unknown",n.selected=r.enabled,(i=t.call(this,e,n)||this).track=r,i.addClass("vjs-"+r.kind+"-menu-item");var a=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.handleTracksChange.apply(_()(i),e)};return o.addEventListener("change",a),i.on("dispose",(function(){o.removeEventListener("change",a)})),i}y()(e,t);var n=e.prototype;return n.createEl=function(e,n,i){var r=t.prototype.createEl.call(this,e,n,i),o=r.querySelector(".vjs-menu-item-text");return"main-desc"===this.options_.track.kind&&(o.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),o.appendChild(t.prototype.createEl.call(this,"span",{className:"vjs-control-text",textContent:this.localize("Descriptions")}))),r},n.handleClick=function(e){t.prototype.handleClick.call(this,e),this.track.enabled=!0},n.handleTracksChange=function(t){this.selected(this.track.enabled)},e}(Ro);ji.registerComponent("AudioTrackMenuItem",Vo);var Go=function(t){function e(e,n){return void 0===n&&(n={}),n.tracks=e.audioTracks(),t.call(this,e,n)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-audio-button "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-audio-button "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(t){void 0===t&&(t=[]),this.hideThreshold_=1;for(var e=this.player_.audioTracks(),n=0;n<e.length;n++){var i=e[n];t.push(new Vo(this.player_,{track:i,selectable:!0,multiSelectable:!1}))}return t},e}(Mo);Go.prototype.controlText_="Audio Track",ji.registerComponent("AudioTrackButton",Go);var Yo=function(t){function e(e,n){var i,r=n.rate,o=parseFloat(r,10);return n.label=r,n.selected=o===e.playbackRate(),n.selectable=!0,n.multiSelectable=!1,(i=t.call(this,e,n)||this).label=r,i.rate=o,i.on(e,"ratechange",(function(t){return i.update(t)})),i}y()(e,t);var n=e.prototype;return n.handleClick=function(e){t.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},n.update=function(t){this.selected(this.player().playbackRate()===this.rate)},e}(Ro);Yo.prototype.contentElType="button",ji.registerComponent("PlaybackRateMenuItem",Yo);var Xo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).menuButton_.el_.setAttribute("aria-describedby",i.labelElId_),i.updateVisibility(),i.updateLabel(),i.on(e,"loadstart",(function(t){return i.updateVisibility(t)})),i.on(e,"ratechange",(function(t){return i.updateLabel(t)})),i.on(e,"playbackrateschange",(function(t){return i.handlePlaybackRateschange(t)})),i}y()(e,t);var n=e.prototype;return n.createEl=function(){var e=t.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=xn("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},n.dispose=function(){this.labelEl_=null,t.prototype.dispose.call(this)},n.buildCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildCSSClass.call(this)},n.buildWrapperCSSClass=function(){return"vjs-playback-rate "+t.prototype.buildWrapperCSSClass.call(this)},n.createItems=function(){for(var t=this.playbackRates(),e=[],n=t.length-1;n>=0;n--)e.push(new Yo(this.player(),{rate:t[n]+"x"}));return e},n.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},n.handleClick=function(t){for(var e=this.player().playbackRate(),n=this.playbackRates(),i=n[0],r=0;r<n.length;r++)if(n[r]>e){i=n[r];break}this.player().playbackRate(i)},n.handlePlaybackRateschange=function(t){this.update()},n.playbackRates=function(){var t=this.player();return t.playbackRates&&t.playbackRates()||[]},n.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},n.updateVisibility=function(t){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},n.updateLabel=function(t){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},e}(Ao);Xo.prototype.controlText_="Playback Rate",ji.registerComponent("PlaybackRateMenuButton",Xo);var Ko=function(t){function e(){return t.apply(this,arguments)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(e,n,i){return void 0===e&&(e="div"),void 0===n&&(n={}),void 0===i&&(i={}),n.className||(n.className=this.buildCSSClass()),t.prototype.createEl.call(this,e,n,i)},e}(ji);ji.registerComponent("Spacer",Ko);var Qo=function(t){function e(){return t.apply(this,arguments)||this}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-custom-control-spacer "+t.prototype.buildCSSClass.call(this)},n.createEl=function(){return t.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:"\xa0"})},e}(Ko);ji.registerComponent("CustomControlSpacer",Qo);var $o=function(t){function e(){return t.apply(this,arguments)||this}return y()(e,t),e.prototype.createEl=function(){return t.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},e}(ji);$o.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in p.a&&$o.prototype.options_.children.splice($o.prototype.options_.children.length-1,0,"pictureInPictureToggle"),ji.registerComponent("ControlBar",$o);var Jo=function(t){function e(e,n){var i;return(i=t.call(this,e,n)||this).on(e,"error",(function(t){return i.open(t)})),i}y()(e,t);var n=e.prototype;return n.buildCSSClass=function(){return"vjs-error-display "+t.prototype.buildCSSClass.call(this)},n.content=function(){var t=this.player().error();return t?this.localize(t.message):""},e}(Ji);Jo.prototype.options_=m()({},Ji.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),ji.registerComponent("ErrorDisplay",Jo);var ta="vjs-text-track-settings",ea=["#000","Black"],na=["#00F","Blue"],ia=["#0FF","Cyan"],ra=["#0F0","Green"],oa=["#F0F","Magenta"],aa=["#F00","Red"],sa=["#FFF","White"],ua=["#FF0","Yellow"],la=["1","Opaque"],ca=["0.5","Semi-Transparent"],ha=["0","Transparent"],da={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ea,sa,aa,ra,na,ua,oa,ia]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[la,ca,ha]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[sa,ea,aa,ra,na,ua,oa,ia]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return"1.00"===t?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[la,ca]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[ha,ca,la]}};function pa(t,e){if(e&&(t=e(t)),t&&"none"!==t)return t}da.windowColor.options=da.backgroundColor.options;var fa=function(t){function e(e,n){var i;return n.temporary=!1,(i=t.call(this,e,n)||this).updateDisplay=i.updateDisplay.bind(_()(i)),i.fill(),i.hasBeenOpened_=i.hasBeenFilled_=!0,i.endDialog=xn("p",{className:"vjs-control-text",textContent:i.localize("End of dialog window.")}),i.el().appendChild(i.endDialog),i.setDefaults(),void 0===n.persistTextTrackSettings&&(i.options_.persistTextTrackSettings=i.options_.playerOptions.persistTextTrackSettings),i.on(i.$(".vjs-done-button"),"click",(function(){i.saveSettings(),i.close()})),i.on(i.$(".vjs-default-button"),"click",(function(){i.setDefaults(),i.updateDisplay()})),We(da,(function(t){i.on(i.$(t.selector),"change",i.updateDisplay)})),i.options_.persistTextTrackSettings&&i.restoreSettings(),i}y()(e,t);var n=e.prototype;return n.dispose=function(){this.endDialog=null,t.prototype.dispose.call(this)},n.createElSelect_=function(t,e,n){var i=this;void 0===e&&(e=""),void 0===n&&(n="label");var r=da[t],o=r.id.replace("%s",this.id_),a=[e,o].join(" ").trim();return["<"+n+' id="'+o+'" class="'+("label"===n?"vjs-label":"")+'">',this.localize(r.label),"</"+n+">",'<select aria-labelledby="'+a+'">'].concat(r.options.map((function(t){var e=o+"-"+t[1].replace(/\W+/g,"");return['<option id="'+e+'" value="'+t[0]+'" ','aria-labelledby="'+a+" "+e+'">',i.localize(t[1]),"</option>"].join("")}))).concat("</select>").join("")},n.createElFgColor_=function(){var t="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",t),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",t),"</span>","</fieldset>"].join("")},n.createElBgColor_=function(){var t="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",t),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",t),"</span>","</fieldset>"].join("")},n.createElWinColor_=function(){var t="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+t+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",t),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",t),"</span>","</fieldset>"].join("")},n.createElColors_=function(){return xn("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},n.createElFont_=function(){return xn("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},n.createElControls_=function(){var t=this.localize("restore all settings to the default values");return xn("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+t+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+t+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},n.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},n.label=function(){return this.localize("Caption Settings Dialog")},n.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},n.buildCSSClass=function(){return t.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},n.getValues=function(){var t,e,n,i=this;return e=function(t,e,n){var r,o,a=(r=i.$(e.selector),o=e.parser,pa(r.options[r.options.selectedIndex].value,o));return void 0!==a&&(t[n]=a),t},void 0===(n={})&&(n=0),Ze(t=da).reduce((function(n,i){return e(n,t[i],i)}),n)},n.setValues=function(t){var e=this;We(da,(function(n,i){!function(t,e,n){if(e)for(var i=0;i<t.options.length;i++)if(pa(t.options[i].value,n)===e){t.selectedIndex=i;break}}(e.$(n.selector),t[i],n.parser)}))},n.setDefaults=function(){var t=this;We(da,(function(e){var n=e.hasOwnProperty("default")?e.default:0;t.$(e.selector).selectedIndex=n}))},n.restoreSettings=function(){var t;try{t=JSON.parse(h.a.localStorage.getItem(ta))}catch(e){Fe.warn(e)}t&&this.setValues(t)},n.saveSettings=function(){if(this.options_.persistTextTrackSettings){var t=this.getValues();try{Object.keys(t).length?h.a.localStorage.setItem(ta,JSON.stringify(t)):h.a.localStorage.removeItem(ta)}catch(e){Fe.warn(e)}}},n.updateDisplay=function(){var t=this.player_.getChild("textTrackDisplay");t&&t.updateDisplay()},n.conditionalBlur_=function(){this.previouslyActiveEl_=null;var t=this.player_.controlBar,e=t&&t.subsCapsButton,n=t&&t.captionsButton;e?e.focus():n&&n.focus()},e}(Ji);ji.registerComponent("TextTrackSettings",fa);var ma=function(t){function e(e,n){var i,r=n.ResizeObserver||h.a.ResizeObserver;null===n.ResizeObserver&&(r=!1);var o=Ni({createEl:!r,reportTouchActivity:!1},n);return(i=t.call(this,e,o)||this).ResizeObserver=n.ResizeObserver||h.a.ResizeObserver,i.loadListener_=null,i.resizeObserver_=null,i.debouncedHandler_=function(t,e,n,i){var r;void 0===i&&(i=h.a);var o=function(){var o=this,a=arguments,s=function(){r=null,s=null,n||t.apply(o,a)};!r&&n&&t.apply(o,a),i.clearTimeout(r),r=i.setTimeout(s,e)};return o.cancel=function(){i.clearTimeout(r),r=null},o}((function(){i.resizeHandler()}),100,!1,_()(i)),r?(i.resizeObserver_=new i.ResizeObserver(i.debouncedHandler_),i.resizeObserver_.observe(e.el())):(i.loadListener_=function(){if(i.el_&&i.el_.contentWindow){var t=i.debouncedHandler_,e=i.unloadListener_=function(){di(this,"resize",t),di(this,"unload",e),e=null};hi(i.el_.contentWindow,"unload",e),hi(i.el_.contentWindow,"resize",t)}},i.one("load",i.loadListener_)),i}y()(e,t);var n=e.prototype;return n.createEl=function(){return t.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1},{"aria-hidden":"true"})},n.resizeHandler=function(){this.player_&&this.player_.trigger&&this.player_.trigger("playerresize")},n.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,t.prototype.dispose.call(this)},e}(ji);ji.registerComponent("ResizeManager",ma);var ga={trackingThreshold:30,liveTolerance:15},_a=function(t){function e(e,n){var i,r=Ni(ga,n,{createEl:!1});return(i=t.call(this,e,r)||this).handleVisibilityChange_=function(t){return i.handleVisibilityChange(t)},i.trackLiveHandler_=function(){return i.trackLive_()},i.handlePlay_=function(t){return i.handlePlay(t)},i.handleFirstTimeupdate_=function(t){return i.handleFirstTimeupdate(t)},i.handleSeeked_=function(t){return i.handleSeeked(t)},i.seekToLiveEdge_=function(t){return i.seekToLiveEdge(t)},i.reset_(),i.on(i.player_,"durationchange",(function(t){return i.handleDurationchange(t)})),i.one(i.player_,"canplay",(function(){return i.toggleTracking()})),un&&"hidden"in p.a&&"visibilityState"in p.a&&i.on(p.a,"visibilitychange",i.handleVisibilityChange_),i}y()(e,t);var n=e.prototype;return n.handleVisibilityChange=function(){this.player_.duration()===1/0&&(p.a.hidden?this.stopTracking():this.startTracking())},n.trackLive_=function(){var t=this.player_.seekable();if(t&&t.length){var e=Number(h.a.performance.now().toFixed(4)),n=-1===this.lastTime_?0:(e-this.lastTime_)/1e3;this.lastTime_=e,this.pastSeekEnd_=this.pastSeekEnd()+n;var i=this.liveCurrentTime(),r=this.player_.currentTime(),o=this.player_.paused()||this.seekedBehindLive_||Math.abs(i-r)>this.options_.liveTolerance;this.timeupdateSeen_&&i!==1/0||(o=!1),o!==this.behindLiveEdge_&&(this.behindLiveEdge_=o,this.trigger("liveedgechange"))}},n.handleDurationchange=function(){this.toggleTracking()},n.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},n.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,vi),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},n.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},n.handleSeeked=function(){var t=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&t>2,this.nextSeekedFromUser_=!1,this.trackLive_()},n.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},n.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},n.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},n.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},n.seekableEnd=function(){for(var t=this.player_.seekable(),e=[],n=t?t.length:0;n--;)e.push(t.end(n));return e.length?e.sort()[e.length-1]:1/0},n.seekableStart=function(){for(var t=this.player_.seekable(),e=[],n=t?t.length:0;n--;)e.push(t.start(n));return e.length?e.sort()[0]:0},n.liveWindow=function(){var t=this.liveCurrentTime();return t===1/0?0:t-this.seekableStart()},n.isLive=function(){return this.isTracking()},n.atLiveEdge=function(){return!this.behindLiveEdge()},n.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},n.pastSeekEnd=function(){var t=this.seekableEnd();return-1!==this.lastSeekEnd_&&t!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=t,this.pastSeekEnd_},n.behindLiveEdge=function(){return this.behindLiveEdge_},n.isTracking=function(){return"number"===typeof this.trackingInterval_},n.seekToLiveEdge=function(){this.seekedBehindLive_=!1,this.atLiveEdge()||(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},n.dispose=function(){this.off(p.a,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),t.prototype.dispose.call(this)},e}(ji);ji.registerComponent("LiveTracker",_a);var va,ya=function(t){var e=t.el();if(e.hasAttribute("src"))return t.triggerSourceset(e.src),!0;var n=t.$$("source"),i=[],r="";if(!n.length)return!1;for(var o=0;o<n.length;o++){var a=n[o].src;a&&-1===i.indexOf(a)&&i.push(a)}return!!i.length&&(1===i.length&&(r=i[0]),t.triggerSourceset(r),!0)},ba=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var e=p.a.createElement(this.nodeName.toLowerCase());e.innerHTML=t;for(var n=p.a.createDocumentFragment();e.childNodes.length;)n.appendChild(e.childNodes[0]);return this.innerText="",h.a.Element.prototype.appendChild.call(this,n),this.innerHTML}}),Ta=function(t,e){for(var n={},i=0;i<t.length&&!((n=Object.getOwnPropertyDescriptor(t[i],e))&&n.set&&n.get);i++);return n.enumerable=!0,n.configurable=!0,n},wa=function(t){var e=t.el();if(!e.resetSourceWatch_){var n={},i=function(t){return Ta([t.el(),h.a.HTMLMediaElement.prototype,h.a.Element.prototype,ba],"innerHTML")}(t),r=function(n){return function(){for(var i=arguments.length,r=new Array(i),o=0;o<i;o++)r[o]=arguments[o];var a=n.apply(e,r);return ya(t),a}};["append","appendChild","insertAdjacentHTML"].forEach((function(t){e[t]&&(n[t]=e[t],e[t]=r(n[t]))})),Object.defineProperty(e,"innerHTML",Ni(i,{set:r(i.set)})),e.resetSourceWatch_=function(){e.resetSourceWatch_=null,Object.keys(n).forEach((function(t){e[t]=n[t]})),Object.defineProperty(e,"innerHTML",i)},t.one("sourceset",e.resetSourceWatch_)}},xa=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?mr(h.a.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return h.a.Element.prototype.setAttribute.call(this,"src",t),t}}),Sa=function(t){if(t.featuresSourceset){var e=t.el();if(!e.resetSourceset_){var n=function(t){return Ta([t.el(),h.a.HTMLMediaElement.prototype,xa],"src")}(t),i=e.setAttribute,r=e.load;Object.defineProperty(e,"src",Ni(n,{set:function(i){var r=n.set.call(e,i);return t.triggerSourceset(e.src),r}})),e.setAttribute=function(n,r){var o=i.call(e,n,r);return/src/i.test(n)&&t.triggerSourceset(e.src),o},e.load=function(){var n=r.call(e);return ya(t)||(t.triggerSourceset(""),wa(t)),n},e.currentSrc?t.triggerSourceset(e.currentSrc):ya(t)||wa(t),e.resetSourceset_=function(){e.resetSourceset_=null,e.load=r,e.setAttribute=i,Object.defineProperty(e,"src",n),e.resetSourceWatch_&&e.resetSourceWatch_()}}}},Ea=function(t,e,n,i){void 0===i&&(i=!0);var r=function(n){return Object.defineProperty(t,e,{value:n,enumerable:!0,writable:!0})},o={configurable:!0,enumerable:!0,get:function(){var t=n();return r(t),t}};return i&&(o.set=r),Object.defineProperty(t,e,o)},ka=function(t){function e(e,n){var i;i=t.call(this,e,n)||this;var r=e.source,o=!1;if(r&&(i.el_.currentSrc!==r.src||e.tag&&3===e.tag.initNetworkState_)?i.setSource(r):i.handleLateInit_(i.el_),e.enableSourceset&&i.setupSourcesetHandling_(),i.isScrubbing_=!1,i.el_.hasChildNodes()){for(var a=i.el_.childNodes,s=a.length,u=[];s--;){var l=a[s];"track"===l.nodeName.toLowerCase()&&(i.featuresNativeTextTracks?(i.remoteTextTrackEls().addTrackElement_(l),i.remoteTextTracks().addTrack(l.track),i.textTracks().addTrack(l.track),o||i.el_.hasAttribute("crossorigin")||!_r(l.src)||(o=!0)):u.push(l))}for(var c=0;c<u.length;c++)i.el_.removeChild(u[c])}return i.proxyNativeTracks_(),i.featuresNativeTextTracks&&o&&Fe.warn("Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\nThis may prevent text tracks from loading."),i.restoreMetadataTracksInIOSNativePlayer_(),(hn||pn||nn)&&!0===e.nativeControlsForTouch&&i.setControls(!0),i.proxyWebkitFullscreen_(),i.triggerReady(),i}y()(e,t);var n=e.prototype;return n.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),e.disposeMediaElement(this.el_),this.options_=null,t.prototype.dispose.call(this)},n.setupSourcesetHandling_=function(){Sa(this)},n.restoreMetadataTracksInIOSNativePlayer_=function(){var t,e=this.textTracks(),n=function(){t=[];for(var n=0;n<e.length;n++){var i=e[n];"metadata"===i.kind&&t.push({track:i,storedMode:i.mode})}};n(),e.addEventListener("change",n),this.on("dispose",(function(){return e.removeEventListener("change",n)}));var i=function n(){for(var i=0;i<t.length;i++){var r=t[i];"disabled"===r.track.mode&&r.track.mode!==r.storedMode&&(r.track.mode=r.storedMode)}e.removeEventListener("change",n)};this.on("webkitbeginfullscreen",(function(){e.removeEventListener("change",n),e.removeEventListener("change",i),e.addEventListener("change",i)})),this.on("webkitendfullscreen",(function(){e.removeEventListener("change",n),e.addEventListener("change",n),e.removeEventListener("change",i)}))},n.overrideNative_=function(t,e){var n=this;if(e===this["featuresNative"+t+"Tracks"]){var i=t.toLowerCase();this[i+"TracksListeners_"]&&Object.keys(this[i+"TracksListeners_"]).forEach((function(t){n.el()[i+"Tracks"].removeEventListener(t,n[i+"TracksListeners_"][t])})),this["featuresNative"+t+"Tracks"]=!e,this[i+"TracksListeners_"]=null,this.proxyNativeTracksForType_(i)}},n.overrideNativeAudioTracks=function(t){this.overrideNative_("Audio",t)},n.overrideNativeVideoTracks=function(t){this.overrideNative_("Video",t)},n.proxyNativeTracksForType_=function(t){var e=this,n=Er[t],i=this.el()[n.getterName],r=this[n.getterName]();if(this["featuresNative"+n.capitalName+"Tracks"]&&i&&i.addEventListener){var o={change:function(n){var i={type:"change",target:r,currentTarget:r,srcElement:r};r.trigger(i),"text"===t&&e[kr.remoteText.getterName]().trigger(i)},addtrack:function(t){r.addTrack(t.track)},removetrack:function(t){r.removeTrack(t.track)}},a=function(){for(var t=[],e=0;e<r.length;e++){for(var n=!1,o=0;o<i.length;o++)if(i[o]===r[e]){n=!0;break}n||t.push(r[e])}for(;t.length;)r.removeTrack(t.shift())};this[n.getterName+"Listeners_"]=o,Object.keys(o).forEach((function(t){var n=o[t];i.addEventListener(t,n),e.on("dispose",(function(e){return i.removeEventListener(t,n)}))})),this.on("loadstart",a),this.on("dispose",(function(t){return e.off("loadstart",a)}))}},n.proxyNativeTracks_=function(){var t=this;Er.names.forEach((function(e){t.proxyNativeTracksForType_(e)}))},n.createEl=function(){var t=this.options_.tag;if(!t||!this.options_.playerElIngest&&!this.movingMediaElementInDOM){if(t){var n=t.cloneNode(!0);t.parentNode&&t.parentNode.insertBefore(n,t),e.disposeMediaElement(t),t=n}else{t=p.a.createElement("video");var i=Ni({},this.options_.tag&&An(this.options_.tag));hn&&!0===this.options_.nativeControlsForTouch||delete i.controls,In(t,qe(i,{id:this.options_.techId,class:"vjs-tech"}))}t.playerId=this.options_.playerId}"undefined"!==typeof this.options_.preload&&On(t,"preload",this.options_.preload),void 0!==this.options_.disablePictureInPicture&&(t.disablePictureInPicture=this.options_.disablePictureInPicture);for(var r=["loop","muted","playsinline","autoplay"],o=0;o<r.length;o++){var a=r[o],s=this.options_[a];"undefined"!==typeof s&&(s?On(t,a,a):Rn(t,a),t[a]=s)}return t},n.handleLateInit_=function(t){if(0!==t.networkState&&3!==t.networkState){if(0===t.readyState){var e=!1,n=function(){e=!0};this.on("loadstart",n);var i=function(){e||this.trigger("loadstart")};return this.on("loadedmetadata",i),void this.ready((function(){this.off("loadstart",n),this.off("loadedmetadata",i),e||this.trigger("loadstart")}))}var r=["loadstart"];r.push("loadedmetadata"),t.readyState>=2&&r.push("loadeddata"),t.readyState>=3&&r.push("canplay"),t.readyState>=4&&r.push("canplaythrough"),this.ready((function(){r.forEach((function(t){this.trigger(t)}),this)}))}},n.setScrubbing=function(t){this.isScrubbing_=t},n.scrubbing=function(){return this.isScrubbing_},n.setCurrentTime=function(t){try{this.isScrubbing_&&this.el_.fastSeek&&mn?this.el_.fastSeek(t):this.el_.currentTime=t}catch(e){Fe(e,"Video is not ready. (Video.js)")}},n.duration=function(){var t=this;if(this.el_.duration===1/0&&tn&&an&&0===this.el_.currentTime){return this.on("timeupdate",(function e(){t.el_.currentTime>0&&(t.el_.duration===1/0&&t.trigger("durationchange"),t.off("timeupdate",e))})),NaN}return this.el_.duration||NaN},n.width=function(){return this.el_.offsetWidth},n.height=function(){return this.el_.offsetHeight},n.proxyWebkitFullscreen_=function(){var t=this;if("webkitDisplayingFullscreen"in this.el_){var e=function(){this.trigger("fullscreenchange",{isFullscreen:!1})},n=function(){"webkitPresentationMode"in this.el_&&"picture-in-picture"!==this.el_.webkitPresentationMode&&(this.one("webkitendfullscreen",e),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",n),this.on("dispose",(function(){t.off("webkitbeginfullscreen",n),t.off("webkitendfullscreen",e)}))}},n.supportsFullScreen=function(){if("function"===typeof this.el_.webkitEnterFullScreen){var t=h.a.navigator&&h.a.navigator.userAgent||"";if(/Android/.test(t)||!/Chrome|Mac OS X 10.5/.test(t))return!0}return!1},n.enterFullScreen=function(){var t=this.el_;if(t.paused&&t.networkState<=t.HAVE_METADATA)Xi(this.el_.play()),this.setTimeout((function(){t.pause();try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}}),0);else try{t.webkitEnterFullScreen()}catch(e){this.trigger("fullscreenerror",e)}},n.exitFullScreen=function(){this.el_.webkitDisplayingFullscreen?this.el_.webkitExitFullScreen():this.trigger("fullscreenerror",new Error("The video is not fullscreen"))},n.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},n.src=function(t){if(void 0===t)return this.el_.src;this.setSrc(t)},n.reset=function(){e.resetMediaElement(this.el_)},n.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},n.setControls=function(t){this.el_.controls=!!t},n.addTextTrack=function(e,n,i){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,i):t.prototype.addTextTrack.call(this,e,n,i)},n.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return t.prototype.createRemoteTextTrack.call(this,e);var n=p.a.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},n.addRemoteTextTrack=function(e,n){var i=t.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(i),i},n.removeRemoteTextTrack=function(e){if(t.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),i=n.length;i--;)e!==n[i]&&e!==n[i].track||this.el().removeChild(n[i])},n.getVideoPlaybackQuality=function(){if("function"===typeof this.el().getVideoPlaybackQuality)return this.el().getVideoPlaybackQuality();var t={};return"undefined"!==typeof this.el().webkitDroppedFrameCount&&"undefined"!==typeof this.el().webkitDecodedFrameCount&&(t.droppedVideoFrames=this.el().webkitDroppedFrameCount,t.totalVideoFrames=this.el().webkitDecodedFrameCount),h.a.performance&&"function"===typeof h.a.performance.now?t.creationTime=h.a.performance.now():h.a.performance&&h.a.performance.timing&&"number"===typeof h.a.performance.timing.navigationStart&&(t.creationTime=h.a.Date.now()-h.a.performance.timing.navigationStart),t},e}(Pr);Ea(ka,"TEST_VID",(function(){if(yn()){var t=p.a.createElement("video"),e=p.a.createElement("track");return e.kind="captions",e.srclang="en",e.label="English",t.appendChild(e),t}})),ka.isSupported=function(){try{ka.TEST_VID.volume=.5}catch(t){return!1}return!(!ka.TEST_VID||!ka.TEST_VID.canPlayType)},ka.canPlayType=function(t){return ka.TEST_VID.canPlayType(t)},ka.canPlaySource=function(t,e){return ka.canPlayType(t.type)},ka.canControlVolume=function(){try{var t=ka.TEST_VID.volume;return ka.TEST_VID.volume=t/2+.1,t!==ka.TEST_VID.volume}catch(e){return!1}},ka.canMuteVolume=function(){try{var t=ka.TEST_VID.muted;return ka.TEST_VID.muted=!t,ka.TEST_VID.muted?On(ka.TEST_VID,"muted","muted"):Rn(ka.TEST_VID,"muted"),t!==ka.TEST_VID.muted}catch(e){return!1}},ka.canControlPlaybackRate=function(){if(tn&&an&&sn<58)return!1;try{var t=ka.TEST_VID.playbackRate;return ka.TEST_VID.playbackRate=t/2+.1,t!==ka.TEST_VID.playbackRate}catch(e){return!1}},ka.canOverrideAttributes=function(){try{var t=function(){};Object.defineProperty(p.a.createElement("video"),"src",{get:t,set:t}),Object.defineProperty(p.a.createElement("audio"),"src",{get:t,set:t}),Object.defineProperty(p.a.createElement("video"),"innerHTML",{get:t,set:t}),Object.defineProperty(p.a.createElement("audio"),"innerHTML",{get:t,set:t})}catch(e){return!1}return!0},ka.supportsNativeTextTracks=function(){return mn||fn&&an},ka.supportsNativeVideoTracks=function(){return!(!ka.TEST_VID||!ka.TEST_VID.videoTracks)},ka.supportsNativeAudioTracks=function(){return!(!ka.TEST_VID||!ka.TEST_VID.audioTracks)},ka.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresVolumeControl","canControlVolume"],["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach((function(t){var e=t[0],n=t[1];Ea(ka.prototype,e,(function(){return ka[n]()}),!0)})),ka.prototype.movingMediaElementInDOM=!fn,ka.prototype.featuresFullscreenResize=!0,ka.prototype.featuresProgressEvents=!0,ka.prototype.featuresTimeupdateEvents=!0,ka.patchCanPlayType=function(){en>=4&&!rn&&!an&&(va=ka.TEST_VID&&ka.TEST_VID.constructor.prototype.canPlayType,ka.TEST_VID.constructor.prototype.canPlayType=function(t){return t&&/^application\/(?:x-|vnd\.apple\.)mpegurl/i.test(t)?"maybe":va.call(this,t)})},ka.unpatchCanPlayType=function(){var t=ka.TEST_VID.constructor.prototype.canPlayType;return va&&(ka.TEST_VID.constructor.prototype.canPlayType=va),t},ka.patchCanPlayType(),ka.disposeMediaElement=function(t){if(t){for(t.parentNode&&t.parentNode.removeChild(t);t.hasChildNodes();)t.removeChild(t.firstChild);t.removeAttribute("src"),"function"===typeof t.load&&function(){try{t.load()}catch(e){}}()}},ka.resetMediaElement=function(t){if(t){for(var e=t.querySelectorAll("source"),n=e.length;n--;)t.removeChild(e[n]);t.removeAttribute("src"),"function"===typeof t.load&&function(){try{t.load()}catch(e){}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach((function(t){ka.prototype[t]=function(){return this.el_[t]||this.el_.hasAttribute(t)}})),["muted","defaultMuted","autoplay","loop","playsinline"].forEach((function(t){ka.prototype["set"+Di(t)]=function(e){this.el_[t]=e,e?this.el_.setAttribute(t,t):this.el_.removeAttribute(t)}})),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach((function(t){ka.prototype[t]=function(){return this.el_[t]}})),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach((function(t){ka.prototype["set"+Di(t)]=function(e){this.el_[t]=e}})),["pause","load","play"].forEach((function(t){ka.prototype[t]=function(){return this.el_[t]()}})),Pr.withSourceHandlers(ka),ka.nativeSourceHandler={},ka.nativeSourceHandler.canPlayType=function(t){try{return ka.TEST_VID.canPlayType(t)}catch(e){return""}},ka.nativeSourceHandler.canHandleSource=function(t,e){if(t.type)return ka.nativeSourceHandler.canPlayType(t.type);if(t.src){var n=gr(t.src);return ka.nativeSourceHandler.canPlayType("video/"+n)}return""},ka.nativeSourceHandler.handleSource=function(t,e,n){e.setSrc(t.src)},ka.nativeSourceHandler.dispose=function(){},ka.registerSourceHandler(ka.nativeSourceHandler),Pr.registerTech("Html5",ka);var Ca=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Pa={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},La=["tiny","xsmall","small","medium","large","xlarge","huge"],Ia={};La.forEach((function(t){var e="x"===t.charAt(0)?"x-"+t.substring(1):t;Ia[t]="vjs-layout-"+e}));var Aa={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},Ma=function(t){function e(n,i,r){var o;if(n.id=n.id||i.id||"vjs_video_"+ri(),(i=qe(e.getTagSettings(n),i)).initChildren=!1,i.createEl=!1,i.evented=!1,i.reportTouchActivity=!1,!i.language)if("function"===typeof n.closest){var a=n.closest("[lang]");a&&a.getAttribute&&(i.language=a.getAttribute("lang"))}else for(var s=n;s&&1===s.nodeType;){if(An(s).hasOwnProperty("lang")){i.language=s.getAttribute("lang");break}s=s.parentNode}if((o=t.call(this,null,i,r)||this).boundDocumentFullscreenChange_=function(t){return o.documentFullscreenChange_(t)},o.boundFullWindowOnEscKey_=function(t){return o.fullWindowOnEscKey(t)},o.boundUpdateStyleEl_=function(t){return o.updateStyleEl_(t)},o.boundApplyInitTime_=function(t){return o.applyInitTime_(t)},o.boundUpdateCurrentBreakpoint_=function(t){return o.updateCurrentBreakpoint_(t)},o.boundHandleTechClick_=function(t){return o.handleTechClick_(t)},o.boundHandleTechDoubleClick_=function(t){return o.handleTechDoubleClick_(t)},o.boundHandleTechTouchStart_=function(t){return o.handleTechTouchStart_(t)},o.boundHandleTechTouchMove_=function(t){return o.handleTechTouchMove_(t)},o.boundHandleTechTouchEnd_=function(t){return o.handleTechTouchEnd_(t)},o.boundHandleTechTap_=function(t){return o.handleTechTap_(t)},o.isFullscreen_=!1,o.log=je(o.id_),o.fsApi_=Re,o.isPosterFromTech_=!1,o.queuedCallbacks_=[],o.isReady_=!1,o.hasStarted_=!1,o.userActive_=!1,o.debugEnabled_=!1,!o.options_||!o.options_.techOrder||!o.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(o.tag=n,o.tagAttributes=n&&An(n),o.language(o.options_.language),i.languages){var u={};Object.getOwnPropertyNames(i.languages).forEach((function(t){u[t.toLowerCase()]=i.languages[t]})),o.languages_=u}else o.languages_=e.prototype.options_.languages;o.resetCache_(),o.poster_=i.poster||"",o.controls_=!!i.controls,n.controls=!1,n.removeAttribute("controls"),o.changingSrc_=!1,o.playCallbacks_=[],o.playTerminatedQueue_=[],n.hasAttribute("autoplay")?o.autoplay(!0):o.autoplay(o.options_.autoplay),i.plugins&&Object.keys(i.plugins).forEach((function(t){if("function"!==typeof o[t])throw new Error('plugin "'+t+'" does not exist')})),o.scrubbing_=!1,o.el_=o.createEl(),Ai(_()(o),{eventBusKey:"el_"}),o.fsApi_.requestFullscreen&&(hi(p.a,o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_),o.on(o.fsApi_.fullscreenchange,o.boundDocumentFullscreenChange_)),o.fluid_&&o.on(["playerreset","resize"],o.boundUpdateStyleEl_);var l=Ni(o.options_);i.plugins&&Object.keys(i.plugins).forEach((function(t){o[t](i.plugins[t])})),i.debug&&o.debug(!0),o.options_.playerOptions=l,o.middleware_=[],o.playbackRates(i.playbackRates),o.initChildren(),o.isAudio("audio"===n.nodeName.toLowerCase()),o.controls()?o.addClass("vjs-controls-enabled"):o.addClass("vjs-controls-disabled"),o.el_.setAttribute("role","region"),o.isAudio()?o.el_.setAttribute("aria-label",o.localize("Audio Player")):o.el_.setAttribute("aria-label",o.localize("Video Player")),o.isAudio()&&o.addClass("vjs-audio"),o.flexNotSupported_()&&o.addClass("vjs-no-flex"),hn&&o.addClass("vjs-touch-enabled"),fn||o.addClass("vjs-workinghover"),e.players[o.id_]=_()(o);var c=Ie.split(".")[0];return o.addClass("vjs-v"+c),o.userActive(!0),o.reportUserActivity(),o.one("play",(function(t){return o.listenForUserActivity_(t)})),o.on("stageclick",(function(t){return o.handleStageClick_(t)})),o.on("keydown",(function(t){return o.handleKeyDown(t)})),o.on("languagechange",(function(t){return o.handleLanguagechange(t)})),o.breakpoints(o.options_.breakpoints),o.responsive(o.options_.responsive),o}y()(e,t);var n=e.prototype;return n.dispose=function(){var n=this;this.trigger("dispose"),this.off("dispose"),di(p.a,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),di(p.a,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),e.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),Ir[this.id()]=null,Cr.names.forEach((function(t){var e=Cr[t],i=n[e.getterName]();i&&i.off&&i.off()})),t.prototype.dispose.call(this)},n.createEl=function(){var e,n=this.tag,i=this.playerElIngest_=n.parentNode&&n.parentNode.hasAttribute&&n.parentNode.hasAttribute("data-vjs-player"),r="video-js"===this.tag.tagName.toLowerCase();i?e=this.el_=n.parentNode:r||(e=this.el_=t.prototype.createEl.call(this,"div"));var o=An(n);if(r){for(e=this.el_=n,n=this.tag=p.a.createElement("video");e.children.length;)n.appendChild(e.firstChild);kn(e,"video-js")||Cn(e,"video-js"),e.appendChild(n),i=this.playerElIngest_=e,Object.keys(e).forEach((function(t){try{n[t]=e[t]}catch(i){}}))}if(n.setAttribute("tabindex","-1"),o.tabindex="-1",(un||an&&cn)&&(n.setAttribute("role","application"),o.role="application"),n.removeAttribute("width"),n.removeAttribute("height"),"width"in o&&delete o.width,"height"in o&&delete o.height,Object.getOwnPropertyNames(o).forEach((function(t){r&&"class"===t||e.setAttribute(t,o[t]),r&&n.setAttribute(t,o[t])})),n.playerId=n.id,n.id+="_html5_api",n.className="vjs-tech",n.player=e.player=this,this.addClass("vjs-paused"),!0!==h.a.VIDEOJS_NO_DYNAMIC_STYLE){this.styleEl_=ei("vjs-styles-dimensions");var a=Gn(".vjs-styles-defaults"),s=Gn("head");s.insertBefore(this.styleEl_,a?a.nextSibling:s.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var u=n.getElementsByTagName("a"),l=0;l<u.length;l++){var c=u.item(l);Cn(c,"vjs-hidden"),c.setAttribute("hidden","hidden")}return n.initNetworkState_=n.networkState,n.parentNode&&!i&&n.parentNode.insertBefore(e,n),En(n,e),this.children_.unshift(n),this.el_.setAttribute("lang",this.language_),this.el_=e,e},n.crossOrigin=function(t){if(!t)return this.techGet_("crossOrigin");"anonymous"===t||"use-credentials"===t?this.techCall_("setCrossOrigin",t):Fe.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+t+'"')},n.width=function(t){return this.dimension("width",t)},n.height=function(t){return this.dimension("height",t)},n.dimension=function(t,e){var n=t+"_";if(void 0===e)return this[n]||0;if(""===e||"auto"===e)return this[n]=void 0,void this.updateStyleEl_();var i=parseFloat(e);isNaN(i)?Fe.error('Improper value "'+e+'" supplied for for '+t):(this[n]=i,this.updateStyleEl_())},n.fluid=function(t){var e,n,i=this;if(void 0===t)return!!this.fluid_;this.fluid_=!!t,xi(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),t?(this.addClass("vjs-fluid"),this.fill(!1),n=function(){i.on(["playerreset","resize"],i.boundUpdateStyleEl_)},xi(e=this)?n():(e.eventedCallbacks||(e.eventedCallbacks=[]),e.eventedCallbacks.push(n))):this.removeClass("vjs-fluid"),this.updateStyleEl_()},n.fill=function(t){if(void 0===t)return!!this.fill_;this.fill_=!!t,t?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},n.aspectRatio=function(t){if(void 0===t)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(t))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=t,this.fluid(!0),this.updateStyleEl_()},n.updateStyleEl_=function(){if(!0!==h.a.VIDEOJS_NO_DYNAMIC_STYLE){var t,e,n,i=(void 0!==this.aspectRatio_&&"auto"!==this.aspectRatio_?this.aspectRatio_:this.videoWidth()>0?this.videoWidth()+":"+this.videoHeight():"16:9").split(":"),r=i[1]/i[0];t=void 0!==this.width_?this.width_:void 0!==this.height_?this.height_/r:this.videoWidth()||300,e=void 0!==this.height_?this.height_:t*r,n=/^[^a-zA-Z]/.test(this.id())?"dimensions-"+this.id():this.id()+"-dimensions",this.addClass(n),ni(this.styleEl_,"\n      ."+n+" {\n        width: "+t+"px;\n        height: "+e+"px;\n      }\n\n      ."+n+".vjs-fluid {\n        padding-top: "+100*r+"%;\n      }\n    ")}else{var o="number"===typeof this.width_?this.width_:this.options_.width,a="number"===typeof this.height_?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(o>=0&&(s.width=o),a>=0&&(s.height=a))}},n.loadTech_=function(t,e){var n=this;this.tech_&&this.unloadTech_();var i=Di(t),r=t.charAt(0).toLowerCase()+t.slice(1);"Html5"!==i&&this.tag&&(Pr.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=i,this.isReady_=!1;var o=this.autoplay();("string"===typeof this.autoplay()||!0===this.autoplay()&&this.options_.normalizeAutoplay)&&(o=!1);var a={source:e,autoplay:o,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+r+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Cr.names.forEach((function(t){var e=Cr[t];a[e.getterName]=n[e.privateName]})),qe(a,this.options_[i]),qe(a,this.options_[r]),qe(a,this.options_[t.toLowerCase()]),this.tag&&(a.tag=this.tag),e&&e.src===this.cache_.src&&this.cache_.currentTime>0&&(a.startTime=this.cache_.currentTime);var s=Pr.getTech(t);if(!s)throw new Error("No Tech named '"+i+"' exists! '"+i+"' should be registered using videojs.registerTech()'");this.tech_=new s(a),this.tech_.ready(yi(this,this.handleTechReady_),!0),$i(this.textTracksJson_||[],this.tech_),Ca.forEach((function(t){n.on(n.tech_,t,(function(e){return n["handleTech"+Di(t)+"_"](e)}))})),Object.keys(Pa).forEach((function(t){n.on(n.tech_,t,(function(e){0===n.tech_.playbackRate()&&n.tech_.seeking()?n.queuedCallbacks_.push({callback:n["handleTech"+Pa[t]+"_"].bind(n),event:e}):n["handleTech"+Pa[t]+"_"](e)}))})),this.on(this.tech_,"loadstart",(function(t){return n.handleTechLoadStart_(t)})),this.on(this.tech_,"sourceset",(function(t){return n.handleTechSourceset_(t)})),this.on(this.tech_,"waiting",(function(t){return n.handleTechWaiting_(t)})),this.on(this.tech_,"ended",(function(t){return n.handleTechEnded_(t)})),this.on(this.tech_,"seeking",(function(t){return n.handleTechSeeking_(t)})),this.on(this.tech_,"play",(function(t){return n.handleTechPlay_(t)})),this.on(this.tech_,"firstplay",(function(t){return n.handleTechFirstPlay_(t)})),this.on(this.tech_,"pause",(function(t){return n.handleTechPause_(t)})),this.on(this.tech_,"durationchange",(function(t){return n.handleTechDurationChange_(t)})),this.on(this.tech_,"fullscreenchange",(function(t,e){return n.handleTechFullscreenChange_(t,e)})),this.on(this.tech_,"fullscreenerror",(function(t,e){return n.handleTechFullscreenError_(t,e)})),this.on(this.tech_,"enterpictureinpicture",(function(t){return n.handleTechEnterPictureInPicture_(t)})),this.on(this.tech_,"leavepictureinpicture",(function(t){return n.handleTechLeavePictureInPicture_(t)})),this.on(this.tech_,"error",(function(t){return n.handleTechError_(t)})),this.on(this.tech_,"posterchange",(function(t){return n.handleTechPosterChange_(t)})),this.on(this.tech_,"textdata",(function(t){return n.handleTechTextData_(t)})),this.on(this.tech_,"ratechange",(function(t){return n.handleTechRateChange_(t)})),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode===this.el()||"Html5"===i&&this.tag||En(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},n.unloadTech_=function(){var t=this;Cr.names.forEach((function(e){var n=Cr[e];t[n.privateName]=t[n.getterName]()})),this.textTracksJson_=Qi(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},n.tech=function(t){return void 0===t&&Fe.warn("Using the tech directly can be dangerous. I hope you know what you're doing.\nSee https://github.com/videojs/video.js/issues/2617 for more info.\n"),this.tech_},n.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},n.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},n.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},n.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(!0===this.autoplay()&&this.options_.normalizeAutoplay?"play":this.autoplay())},n.manualAutoplay_=function(t){var e=this;if(this.tech_&&"string"===typeof t){var n,i=function(){var t=e.muted();e.muted(!0);var n=function(){e.muted(t)};e.playTerminatedQueue_.push(n);var i=e.play();if(Yi(i))return i.catch((function(t){throw n(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(t||""))}))};if("any"!==t||this.muted()?n="muted"!==t||this.muted()?this.play():i():Yi(n=this.play())&&(n=n.catch(i)),Yi(n))return n.then((function(){e.trigger({type:"autoplay-success",autoplay:t})})).catch((function(){e.trigger({type:"autoplay-failure",autoplay:t})}))}},n.updateSourceCaches_=function(t){void 0===t&&(t="");var e=t,n="";"string"!==typeof e&&(e=t.src,n=t.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],e&&!n&&(n=function(t,e){if(!e)return"";if(t.cache_.source.src===e&&t.cache_.source.type)return t.cache_.source.type;var n=t.cache_.sources.filter((function(t){return t.src===e}));if(n.length)return n[0].type;for(var i=t.$$("source"),r=0;r<i.length;r++){var o=i[r];if(o.type&&o.src&&o.src===e)return o.type}return Fr(e)}(this,e)),this.cache_.source=Ni({},t,{src:e,type:n});for(var i=this.cache_.sources.filter((function(t){return t.src&&t.src===e})),r=[],o=this.$$("source"),a=[],s=0;s<o.length;s++){var u=An(o[s]);r.push(u),u.src&&u.src===e&&a.push(u.src)}a.length&&!i.length?this.cache_.sources=r:i.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=e},n.handleTechSourceset_=function(t){var e=this;if(!this.changingSrc_){var n=function(t){return e.updateSourceCaches_(t)},i=this.currentSource().src,r=t.src;i&&!/^blob:/.test(i)&&/^blob:/.test(r)&&(!this.lastSource_||this.lastSource_.tech!==r&&this.lastSource_.player!==i)&&(n=function(){}),n(r),t.src||this.tech_.any(["sourceset","loadstart"],(function(t){if("sourceset"!==t.type){var n=e.techGet("currentSrc");e.lastSource_.tech=n,e.updateSourceCaches_(n)}}))}this.lastSource_={player:this.currentSource().src,tech:t.src},this.trigger({src:t.src,type:"sourceset"})},n.hasStarted=function(t){if(void 0===t)return this.hasStarted_;t!==this.hasStarted_&&(this.hasStarted_=t,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},n.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},n.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&0===this.cache_.lastPlaybackRate&&(this.queuedCallbacks_.forEach((function(t){return t.callback(t.event)})),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},n.handleTechWaiting_=function(){var t=this;this.addClass("vjs-waiting"),this.trigger("waiting");var e=this.currentTime();this.on("timeupdate",(function n(){e!==t.currentTime()&&(t.removeClass("vjs-waiting"),t.off("timeupdate",n))}))},n.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},n.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},n.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},n.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},n.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},n.handleTechFirstPlay_=function(){this.options_.starttime&&(Fe.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},n.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},n.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},n.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},n.handleTechClick_=function(t){this.controls_&&(this.paused()?Xi(this.play()):this.pause())},n.handleTechDoubleClick_=function(t){this.controls_&&(Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),(function(e){return e.contains(t.target)}))||void 0!==this.options_&&void 0!==this.options_.userActions&&void 0!==this.options_.userActions.doubleClick&&!1===this.options_.userActions.doubleClick||(void 0!==this.options_&&void 0!==this.options_.userActions&&"function"===typeof this.options_.userActions.doubleClick?this.options_.userActions.doubleClick.call(this,t):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen()))},n.handleTechTap_=function(){this.userActive(!this.userActive())},n.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},n.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},n.handleTechTouchEnd_=function(t){t.cancelable&&t.preventDefault()},n.handleStageClick_=function(){this.reportUserActivity()},n.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},n.documentFullscreenChange_=function(t){var e=t.target.player;if(!e||e===this){var n=this.el(),i=p.a[this.fsApi_.fullscreenElement]===n;!i&&n.matches?i=n.matches(":"+this.fsApi_.fullscreen):!i&&n.msMatchesSelector&&(i=n.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(i)}},n.handleTechFullscreenChange_=function(t,e){e&&(e.nativeIOSFullscreen&&this.toggleClass("vjs-ios-native-fs"),this.isFullscreen(e.isFullscreen))},n.handleTechFullscreenError_=function(t,e){this.trigger("fullscreenerror",e)},n.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},n.handleTechEnterPictureInPicture_=function(t){this.isInPictureInPicture(!0)},n.handleTechLeavePictureInPicture_=function(t){this.isInPictureInPicture(!1)},n.handleTechError_=function(){var t=this.tech_.error();this.error(t)},n.handleTechTextData_=function(){var t=null;arguments.length>1&&(t=arguments[1]),this.trigger("textdata",t)},n.getCache=function(){return this.cache_},n.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},n.techCall_=function(t,e){this.ready((function(){if(t in Dr)return function(t,e,n,i){return e[n](t.reduce(Br(n),i))}(this.middleware_,this.tech_,t,e);if(t in Nr)return Or(this.middleware_,this.tech_,t,e);try{this.tech_&&this.tech_[t](e)}catch(n){throw Fe(n),n}}),!0)},n.techGet_=function(t){if(this.tech_&&this.tech_.isReady_){if(t in Rr)return function(t,e,n){return t.reduceRight(Br(n),e[n]())}(this.middleware_,this.tech_,t);if(t in Nr)return Or(this.middleware_,this.tech_,t);try{return this.tech_[t]()}catch(e){if(void 0===this.tech_[t])throw Fe("Video.js: "+t+" method not defined for "+this.techName_+" playback technology.",e),e;if("TypeError"===e.name)throw Fe("Video.js: "+t+" unavailable on "+this.techName_+" playback technology element.",e),this.tech_.isReady_=!1,e;throw Fe(e),e}}},n.play=function(){var t=this,e=this.options_.Promise||h.a.Promise;return e?new e((function(e){t.play_(e)})):this.play_()},n.play_=function(t){var e=this;void 0===t&&(t=Xi),this.playCallbacks_.push(t);var n=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!n)return this.waitToPlay_=function(t){e.play_()},this.one(["ready","loadstart"],this.waitToPlay_),void(n||!mn&&!fn||this.load());var i=this.techGet_("play");null===i?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(i)},n.runPlayTerminatedQueue_=function(){var t=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],t.forEach((function(t){t()}))},n.runPlayCallbacks_=function(t){var e=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],e.forEach((function(e){e(t)}))},n.pause=function(){this.techCall_("pause")},n.paused=function(){return!1!==this.techGet_("paused")},n.played=function(){return this.techGet_("played")||Wi(0,0)},n.scrubbing=function(t){if("undefined"===typeof t)return this.scrubbing_;this.scrubbing_=!!t,this.techCall_("setScrubbing",this.scrubbing_),t?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},n.currentTime=function(t){return"undefined"!==typeof t?(t<0&&(t=0),this.isReady_&&!this.changingSrc_&&this.tech_&&this.tech_.isReady_?(this.techCall_("setCurrentTime",t),void(this.cache_.initTime=0)):(this.cache_.initTime=t,this.off("canplay",this.boundApplyInitTime_),void this.one("canplay",this.boundApplyInitTime_))):(this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime)},n.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},n.duration=function(t){if(void 0===t)return void 0!==this.cache_.duration?this.cache_.duration:NaN;(t=parseFloat(t))<0&&(t=1/0),t!==this.cache_.duration&&(this.cache_.duration=t,t===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(t)||this.trigger("durationchange"))},n.remainingTime=function(){return this.duration()-this.currentTime()},n.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},n.buffered=function(){var t=this.techGet_("buffered");return t&&t.length||(t=Wi(0,0)),t},n.bufferedPercent=function(){return qi(this.buffered(),this.duration())},n.bufferedEnd=function(){var t=this.buffered(),e=this.duration(),n=t.end(t.length-1);return n>e&&(n=e),n},n.volume=function(t){var e;return void 0!==t?(e=Math.max(0,Math.min(1,parseFloat(t))),this.cache_.volume=e,this.techCall_("setVolume",e),void(e>0&&this.lastVolume_(e))):(e=parseFloat(this.techGet_("volume")),isNaN(e)?1:e)},n.muted=function(t){if(void 0===t)return this.techGet_("muted")||!1;this.techCall_("setMuted",t)},n.defaultMuted=function(t){return void 0!==t?this.techCall_("setDefaultMuted",t):this.techGet_("defaultMuted")||!1},n.lastVolume_=function(t){if(void 0===t||0===t)return this.cache_.lastVolume;this.cache_.lastVolume=t},n.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},n.isFullscreen=function(t){if(void 0!==t){var e=this.isFullscreen_;return this.isFullscreen_=Boolean(t),this.isFullscreen_!==e&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),void this.toggleFullscreenClass_()}return this.isFullscreen_},n.requestFullscreen=function(t){var e=this.options_.Promise||h.a.Promise;if(e){var n=this;return new e((function(e,i){function r(){n.off("fullscreenerror",a),n.off("fullscreenchange",o)}function o(){r(),e()}function a(t,e){r(),i(e)}n.one("fullscreenchange",o),n.one("fullscreenerror",a);var s=n.requestFullscreenHelper_(t);s&&(s.then(r,r),s.then(e,i))}))}return this.requestFullscreenHelper_()},n.requestFullscreenHelper_=function(t){var e,n=this;if(this.fsApi_.prefixed||(e=this.options_.fullscreen&&this.options_.fullscreen.options||{},void 0!==t&&(e=t)),this.fsApi_.requestFullscreen){var i=this.el_[this.fsApi_.requestFullscreen](e);return i&&i.then((function(){return n.isFullscreen(!0)}),(function(){return n.isFullscreen(!1)})),i}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},n.exitFullscreen=function(){var t=this.options_.Promise||h.a.Promise;if(t){var e=this;return new t((function(t,n){function i(){e.off("fullscreenerror",o),e.off("fullscreenchange",r)}function r(){i(),t()}function o(t,e){i(),n(e)}e.one("fullscreenchange",r),e.one("fullscreenerror",o);var a=e.exitFullscreenHelper_();a&&(a.then(i,i),a.then(t,n))}))}return this.exitFullscreenHelper_()},n.exitFullscreenHelper_=function(){var t=this;if(this.fsApi_.requestFullscreen){var e=p.a[this.fsApi_.exitFullscreen]();return e&&Xi(e.then((function(){return t.isFullscreen(!1)}))),e}this.tech_.supportsFullScreen()&&!0===!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},n.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=p.a.documentElement.style.overflow,hi(p.a,"keydown",this.boundFullWindowOnEscKey_),p.a.documentElement.style.overflow="hidden",Cn(p.a.body,"vjs-full-window"),this.trigger("enterFullWindow")},n.fullWindowOnEscKey=function(t){x.a.isEventKey(t,"Esc")&&!0===this.isFullscreen()&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},n.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,di(p.a,"keydown",this.boundFullWindowOnEscKey_),p.a.documentElement.style.overflow=this.docOrigOverflow,Pn(p.a.body,"vjs-full-window"),this.trigger("exitFullWindow")},n.disablePictureInPicture=function(t){if(void 0===t)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",t),this.options_.disablePictureInPicture=t,this.trigger("disablepictureinpicturechanged")},n.isInPictureInPicture=function(t){return void 0!==t?(this.isInPictureInPicture_=!!t,void this.togglePictureInPictureClass_()):!!this.isInPictureInPicture_},n.requestPictureInPicture=function(){if("pictureInPictureEnabled"in p.a&&!1===this.disablePictureInPicture())return this.techGet_("requestPictureInPicture")},n.exitPictureInPicture=function(){if("pictureInPictureEnabled"in p.a)return p.a.exitPictureInPicture()},n.handleKeyDown=function(t){var e=this.options_.userActions;if(e&&e.hotkeys){(function(t){var e=t.tagName.toLowerCase();if(t.isContentEditable)return!0;if("input"===e)return-1===["button","checkbox","hidden","radio","reset","submit"].indexOf(t.type);return-1!==["textarea"].indexOf(e)})(this.el_.ownerDocument.activeElement)||("function"===typeof e.hotkeys?e.hotkeys.call(this,t):this.handleHotkeys(t))}},n.handleHotkeys=function(t){var e=this.options_.userActions?this.options_.userActions.hotkeys:{},n=e.fullscreenKey,i=void 0===n?function(t){return x.a.isEventKey(t,"f")}:n,r=e.muteKey,o=void 0===r?function(t){return x.a.isEventKey(t,"m")}:r,a=e.playPauseKey,s=void 0===a?function(t){return x.a.isEventKey(t,"k")||x.a.isEventKey(t,"Space")}:a;if(i.call(this,t)){t.preventDefault(),t.stopPropagation();var u=ji.getComponent("FullscreenToggle");!1!==p.a[this.fsApi_.fullscreenEnabled]&&u.prototype.handleClick.call(this,t)}else if(o.call(this,t)){t.preventDefault(),t.stopPropagation(),ji.getComponent("MuteToggle").prototype.handleClick.call(this,t)}else if(s.call(this,t)){t.preventDefault(),t.stopPropagation(),ji.getComponent("PlayToggle").prototype.handleClick.call(this,t)}},n.canPlayType=function(t){for(var e,n=0,i=this.options_.techOrder;n<i.length;n++){var r=i[n],o=Pr.getTech(r);if(o||(o=ji.getComponent(r)),o){if(o.isSupported()&&(e=o.canPlayType(t)))return e}else Fe.error('The "'+r+'" tech is undefined. Skipped browser support check for that tech.')}return""},n.selectSource=function(t){var e,n=this,i=this.options_.techOrder.map((function(t){return[t,Pr.getTech(t)]})).filter((function(t){var e=t[0],n=t[1];return n?n.isSupported():(Fe.error('The "'+e+'" tech is undefined. Skipped browser support check for that tech.'),!1)})),r=function(t,e,n){var i;return t.some((function(t){return e.some((function(e){if(i=n(t,e))return!0}))})),i},o=function(t,e){var i=t[0];if(t[1].canPlaySource(e,n.options_[i.toLowerCase()]))return{source:e,tech:i}};return(this.options_.sourceOrder?r(t,i,(e=o,function(t,n){return e(n,t)})):r(i,t,o))||!1},n.handleSrc_=function(t,e){var n=this;if("undefined"===typeof t)return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var i=jr(t);if(i.length){if(this.changingSrc_=!0,e||(this.cache_.sources=i),this.updateSourceCaches_(i[0]),Mr(this,i[0],(function(t,r){var o,a;if(n.middleware_=r,e||(n.cache_.sources=i),n.updateSourceCaches_(t),n.src_(t))return i.length>1?n.handleSrc_(i.slice(1)):(n.changingSrc_=!1,n.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0),void n.triggerReady());o=r,a=n.tech_,o.forEach((function(t){return t.setTech&&t.setTech(a)}))})),this.options_.retryOnError&&i.length>1){var r=function(){n.error(null),n.handleSrc_(i.slice(1),!0)},o=function(){n.off("error",r)};this.one("error",r),this.one("playing",o),this.resetRetryOnError_=function(){n.off("error",r),n.off("playing",o)}}}else this.setTimeout((function(){this.error({code:4,message:this.localize(this.options_.notSupportedMessage)})}),0)},n.src=function(t){return this.handleSrc_(t,!1)},n.src_=function(t){var e,n,i=this,r=this.selectSource([t]);return!r||(e=r.tech,n=this.techName_,Di(e)!==Di(n)?(this.changingSrc_=!0,this.loadTech_(r.tech,r.source),this.tech_.ready((function(){i.changingSrc_=!1})),!1):(this.ready((function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",t):this.techCall_("src",t.src),this.changingSrc_=!1}),!0),!1))},n.load=function(){this.techCall_("load")},n.reset=function(){var t=this,e=this.options_.Promise||h.a.Promise;this.paused()||!e?this.doReset_():Xi(this.play().then((function(){return t.doReset_()})))},n.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),xi(this)&&this.trigger("playerreset")},n.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},n.resetProgressBar_=function(){this.currentTime(0);var t=this.controlBar,e=t.durationDisplay,n=t.remainingTimeDisplay;e&&e.updateContent(),n&&n.updateContent()},n.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},n.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},n.currentSources=function(){var t=this.currentSource(),e=[];return 0!==Object.keys(t).length&&e.push(t),this.cache_.sources||e},n.currentSource=function(){return this.cache_.source||{}},n.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},n.currentType=function(){return this.currentSource()&&this.currentSource().type||""},n.preload=function(t){return void 0!==t?(this.techCall_("setPreload",t),void(this.options_.preload=t)):this.techGet_("preload")},n.autoplay=function(t){if(void 0===t)return this.options_.autoplay||!1;var e;"string"===typeof t&&/(any|play|muted)/.test(t)||!0===t&&this.options_.normalizeAutoplay?(this.options_.autoplay=t,this.manualAutoplay_("string"===typeof t?t:"play"),e=!1):this.options_.autoplay=!!t,e="undefined"===typeof e?this.options_.autoplay:e,this.tech_&&this.techCall_("setAutoplay",e)},n.playsinline=function(t){return void 0!==t?(this.techCall_("setPlaysinline",t),this.options_.playsinline=t,this):this.techGet_("playsinline")},n.loop=function(t){return void 0!==t?(this.techCall_("setLoop",t),void(this.options_.loop=t)):this.techGet_("loop")},n.poster=function(t){if(void 0===t)return this.poster_;t||(t=""),t!==this.poster_&&(this.poster_=t,this.techCall_("setPoster",t),this.isPosterFromTech_=!1,this.trigger("posterchange"))},n.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var t=this.tech_.poster()||"";t!==this.poster_&&(this.poster_=t,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},n.controls=function(t){if(void 0===t)return!!this.controls_;t=!!t,this.controls_!==t&&(this.controls_=t,this.usingNativeControls()&&this.techCall_("setControls",t),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},n.usingNativeControls=function(t){if(void 0===t)return!!this.usingNativeControls_;t=!!t,this.usingNativeControls_!==t&&(this.usingNativeControls_=t,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},n.error=function(t){var e=this;if(void 0===t)return this.error_||null;if(Me("beforeerror").forEach((function(n){var i=n(e,t);Ve(i)&&!Array.isArray(i)||"string"===typeof i||"number"===typeof i||null===i?t=i:e.log.error("please return a value that MediaError expects in beforeerror hooks")})),this.options_.suppressNotSupportedError&&t&&4===t.code){var n=function(){this.error(t)};return this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],n),void this.one("loadstart",(function(){this.off(["click","touchstart"],n)}))}if(null===t)return this.error_=t,this.removeClass("vjs-error"),void(this.errorDisplay&&this.errorDisplay.close());this.error_=new Vi(t),this.addClass("vjs-error"),Fe.error("(CODE:"+this.error_.code+" "+Vi.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Me("error").forEach((function(t){return t(e,e.error_)}))},n.reportUserActivity=function(t){this.userActivity_=!0},n.userActive=function(t){if(void 0===t)return this.userActive_;if((t=!!t)!==this.userActive_){if(this.userActive_=t,this.userActive_)return this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),void this.trigger("useractive");this.tech_&&this.tech_.one("mousemove",(function(t){t.stopPropagation(),t.preventDefault()})),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},n.listenForUserActivity_=function(){var t,e,n,i=yi(this,this.reportUserActivity),r=function(e){i(),this.clearInterval(t)};this.on("mousedown",(function(){i(),this.clearInterval(t),t=this.setInterval(i,250)})),this.on("mousemove",(function(t){t.screenX===e&&t.screenY===n||(e=t.screenX,n=t.screenY,i())})),this.on("mouseup",r),this.on("mouseleave",r);var o,a=this.getChild("controlBar");!a||fn||tn||(a.on("mouseenter",(function(t){0!==this.player().options_.inactivityTimeout&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0})),a.on("mouseleave",(function(t){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout}))),this.on("keydown",i),this.on("keyup",i),this.setInterval((function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(o);var t=this.options_.inactivityTimeout;t<=0||(o=this.setTimeout((function(){this.userActivity_||this.userActive(!1)}),t))}}),250)},n.playbackRate=function(t){if(void 0===t)return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1;this.techCall_("setPlaybackRate",t)},n.defaultPlaybackRate=function(t){return void 0!==t?this.techCall_("setDefaultPlaybackRate",t):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},n.isAudio=function(t){if(void 0===t)return!!this.isAudio_;this.isAudio_=!!t},n.addTextTrack=function(t,e,n){if(this.tech_)return this.tech_.addTextTrack(t,e,n)},n.addRemoteTextTrack=function(t,e){if(this.tech_)return this.tech_.addRemoteTextTrack(t,e)},n.removeRemoteTextTrack=function(t){void 0===t&&(t={});var e=t.track;if(e||(e=t),this.tech_)return this.tech_.removeRemoteTextTrack(e)},n.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},n.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},n.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},n.language=function(t){if(void 0===t)return this.language_;this.language_!==String(t).toLowerCase()&&(this.language_=String(t).toLowerCase(),xi(this)&&this.trigger("languagechange"))},n.languages=function(){return Ni(e.prototype.options_.languages,this.languages_)},n.toJSON=function(){var t=Ni(this.options_),e=t.tracks;t.tracks=[];for(var n=0;n<e.length;n++){var i=e[n];(i=Ni(i)).player=void 0,t.tracks[n]=i}return t},n.createModal=function(t,e){var n=this;(e=e||{}).content=t||"";var i=new Ji(this,e);return this.addChild(i),i.on("dispose",(function(){n.removeChild(i)})),i.open(),i},n.updateCurrentBreakpoint_=function(){if(this.responsive())for(var t=this.currentBreakpoint(),e=this.currentWidth(),n=0;n<La.length;n++){var i=La[n];if(e<=this.breakpoints_[i]){if(t===i)return;t&&this.removeClass(Ia[t]),this.addClass(Ia[i]),this.breakpoint_=i;break}}},n.removeCurrentBreakpoint_=function(){var t=this.currentBreakpointClass();this.breakpoint_="",t&&this.removeClass(t)},n.breakpoints=function(t){return void 0===t||(this.breakpoint_="",this.breakpoints_=qe({},Aa,t),this.updateCurrentBreakpoint_()),qe(this.breakpoints_)},n.responsive=function(t){return void 0===t?this.responsive_:(t=Boolean(t))!==this.responsive_?(this.responsive_=t,t?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),t):void 0},n.currentBreakpoint=function(){return this.breakpoint_},n.currentBreakpointClass=function(){return Ia[this.breakpoint_]||""},n.loadMedia=function(t,e){var n=this;if(t&&"object"===typeof t){this.reset(),this.cache_.media=Ni(t);var i=this.cache_.media,r=i.artwork,o=i.poster,a=i.src,s=i.textTracks;!r&&o&&(this.cache_.media.artwork=[{src:o,type:Fr(o)}]),a&&this.src(a),o&&this.poster(o),Array.isArray(s)&&s.forEach((function(t){return n.addRemoteTextTrack(t,!1)})),this.ready(e)}},n.getMedia=function(){if(!this.cache_.media){var t=this.poster(),e={src:this.currentSources(),textTracks:Array.prototype.map.call(this.remoteTextTracks(),(function(t){return{kind:t.kind,label:t.label,language:t.language,src:t.src}}))};return t&&(e.poster=t,e.artwork=[{src:e.poster,type:Fr(e.poster)}]),e}return Ni(this.cache_.media)},e.getTagSettings=function(t){var e={sources:[],tracks:[]},n=An(t),i=n["data-setup"];if(kn(t,"vjs-fill")&&(n.fill=!0),kn(t,"vjs-fluid")&&(n.fluid=!0),null!==i){var r=T()(i||"{}"),o=r[0],a=r[1];o&&Fe.error(o),qe(n,a)}if(qe(e,n),t.hasChildNodes())for(var s=t.childNodes,u=0,l=s.length;u<l;u++){var c=s[u],h=c.nodeName.toLowerCase();"source"===h?e.sources.push(An(c)):"track"===h&&e.tracks.push(An(c))}return e},n.flexNotSupported_=function(){var t=p.a.createElement("i");return!("flexBasis"in t.style||"webkitFlexBasis"in t.style||"mozFlexBasis"in t.style||"msFlexBasis"in t.style||"msFlexOrder"in t.style)},n.debug=function(t){if(void 0===t)return this.debugEnabled_;t?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},n.playbackRates=function(t){if(void 0===t)return this.cache_.playbackRates;Array.isArray(t)&&t.every((function(t){return"number"===typeof t}))&&(this.cache_.playbackRates=t,this.trigger("playbackrateschange"))},e}(ji);Cr.names.forEach((function(t){var e=Cr[t];Ma.prototype[e.getterName]=function(){return this.tech_?this.tech_[e.getterName]():(this[e.privateName]=this[e.privateName]||new e.ListClass,this[e.privateName])}})),Ma.prototype.crossorigin=Ma.prototype.crossOrigin,Ma.players={};var Oa=h.a.navigator;Ma.prototype.options_={techOrder:Pr.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:Oa&&(Oa.languages&&Oa.languages[0]||Oa.userLanguage||Oa.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1},["ended","seeking","seekable","networkState","readyState"].forEach((function(t){Ma.prototype[t]=function(){return this.techGet_(t)}})),Ca.forEach((function(t){Ma.prototype["handleTech"+Di(t)+"_"]=function(){return this.trigger(t)}})),ji.registerComponent("Player",Ma);var Ra="plugin",Da={},Na=function(t){return Da.hasOwnProperty(t)},Ba=function(t){return Na(t)?Da[t]:void 0},Ua=function(t,e){t.activePlugins_=t.activePlugins_||{},t.activePlugins_[e]=!0},za=function(t,e,n){var i=(n?"before":"")+"pluginsetup";t.trigger(i,e),t.trigger(i+":"+e.name,e)},Fa=function(t,e){return e.prototype.name=t,function(){za(this,{name:t,plugin:e,instance:null},!0);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var o=L()(e,[this].concat(i));return this[t]=function(){return o},za(this,o.getEventHash()),o}},ja=function(){function t(e){if(this.constructor===t)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=e,this.log||(this.log=this.player.log.createLogger(this.name)),Ai(this),delete this.trigger,Oi(this,this.constructor.defaultState),Ua(e,this.name),this.dispose=this.dispose.bind(this),e.on("dispose",this.dispose)}var e=t.prototype;return e.version=function(){return this.constructor.VERSION},e.getEventHash=function(t){return void 0===t&&(t={}),t.name=this.name,t.plugin=this.constructor,t.instance=this,t},e.trigger=function(t,e){return void 0===e&&(e={}),pi(this.eventBusEl_,t,this.getEventHash(e))},e.handleStateChanged=function(t){},e.dispose=function(){var t=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e.activePlugins_[t]=!1,this.player=this.state=null,e[t]=Fa(t,Da[t])},t.isBasic=function(e){var n="string"===typeof e?Ba(e):e;return"function"===typeof n&&!t.prototype.isPrototypeOf(n.prototype)},t.registerPlugin=function(e,n){if("string"!==typeof e)throw new Error('Illegal plugin name, "'+e+'", must be a string, was '+typeof e+".");if(Na(e))Fe.warn('A plugin named "'+e+'" already exists. You may want to avoid re-registering plugins!');else if(Ma.prototype.hasOwnProperty(e))throw new Error('Illegal plugin name, "'+e+'", cannot share a name with an existing player method!');if("function"!==typeof n)throw new Error('Illegal plugin for "'+e+'", must be a function, was '+typeof n+".");return Da[e]=n,e!==Ra&&(t.isBasic(n)?Ma.prototype[e]=function(t,e){var n=function(){za(this,{name:t,plugin:e,instance:null},!0);var n=e.apply(this,arguments);return Ua(this,t),za(this,{name:t,plugin:e,instance:n}),n};return Object.keys(e).forEach((function(t){n[t]=e[t]})),n}(e,n):Ma.prototype[e]=Fa(e,n)),n},t.deregisterPlugin=function(t){if(t===Ra)throw new Error("Cannot de-register base plugin.");Na(t)&&(delete Da[t],delete Ma.prototype[t])},t.getPlugins=function(t){var e;return void 0===t&&(t=Object.keys(Da)),t.forEach((function(t){var n=Ba(t);n&&((e=e||{})[t]=n)})),e},t.getPluginVersion=function(t){var e=Ba(t);return e&&e.VERSION||""},t}();ja.getPlugin=Ba,ja.BASE_PLUGIN_NAME=Ra,ja.registerPlugin(Ra,ja),Ma.prototype.usingPlugin=function(t){return!!this.activePlugins_&&!0===this.activePlugins_[t]},Ma.prototype.hasPlugin=function(t){return!!Na(t)};var Ha=function(t){return 0===t.indexOf("#")?t.slice(1):t};function Za(t,e,n){var i=Za.getPlayer(t);if(i)return e&&Fe.warn('Player "'+t+'" is already initialised. Options will not be applied.'),n&&i.ready(n),i;var r="string"===typeof t?Gn("#"+Ha(t)):t;if(!bn(r))throw new TypeError("The element or ID supplied is not valid. (videojs)");r.ownerDocument.defaultView&&r.ownerDocument.body.contains(r)||Fe.warn("The element supplied is not included in the DOM"),e=e||{},Me("beforesetup").forEach((function(t){var n=t(r,Ni(e));Ve(n)&&!Array.isArray(n)?e=Ni(e,n):Fe.error("please return an object in beforesetup hooks")}));var o=ji.getComponent("Player");return i=new o(r,e,n),Me("setup").forEach((function(t){return t(i)})),i}if(Za.hooks_=Ae,Za.hooks=Me,Za.hook=function(t,e){Me(t,e)},Za.hookOnce=function(t,e){Me(t,[].concat(e).map((function(e){return function n(){return Oe(t,n),e.apply(void 0,arguments)}})))},Za.removeHook=Oe,!0!==h.a.VIDEOJS_NO_DYNAMIC_STYLE&&yn()){var Wa=Gn(".vjs-styles-defaults");if(!Wa){Wa=ei("vjs-styles-defaults");var qa=Gn("head");qa&&qa.insertBefore(Wa,qa.firstChild),ni(Wa,"\n      .video-js {\n        width: 300px;\n        height: 150px;\n      }\n\n      .vjs-fluid {\n        padding-top: 56.25%\n      }\n    ")}}$n(1,Za),Za.VERSION=Ie,Za.options=Ma.prototype.options_,Za.getPlayers=function(){return Ma.players},Za.getPlayer=function(t){var e,n=Ma.players;if("string"===typeof t){var i=Ha(t),r=n[i];if(r)return r;e=Gn("#"+i)}else e=t;if(bn(e)){var o=e,a=o.player,s=o.playerId;if(a||n[s])return a||n[s]}},Za.getAllPlayers=function(){return Object.keys(Ma.players).map((function(t){return Ma.players[t]})).filter(Boolean)},Za.players=Ma.players,Za.getComponent=ji.getComponent,Za.registerComponent=function(t,e){Pr.isTech(e)&&Fe.warn("The "+t+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),ji.registerComponent.call(ji,t,e)},Za.getTech=Pr.getTech,Za.registerTech=Pr.registerTech,Za.use=function(t,e){Lr[t]=Lr[t]||[],Lr[t].push(e)},Object.defineProperty(Za,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(Za.middleware,"TERMINATOR",{value:Ar,writeable:!1,enumerable:!0}),Za.browser=gn,Za.TOUCH_ENABLED=hn,Za.extend=function(t,e){void 0===e&&(e={});var n=function(){t.apply(this,arguments)},i={};for(var r in"object"===typeof e?(e.constructor!==Object.prototype.constructor&&(n=e.constructor),i=e):"function"===typeof e&&(n=e),A()(n,t),t&&(n.super_=t),i)i.hasOwnProperty(r)&&(n.prototype[r]=i[r]);return n},Za.mergeOptions=Ni,Za.bind=yi,Za.registerPlugin=ja.registerPlugin,Za.deregisterPlugin=ja.deregisterPlugin,Za.plugin=function(t,e){return Fe.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),ja.registerPlugin(t,e)},Za.getPlugins=ja.getPlugins,Za.getPlugin=ja.getPlugin,Za.getPluginVersion=ja.getPluginVersion,Za.addLanguage=function(t,e){var n;return t=(""+t).toLowerCase(),Za.options.languages=Ni(Za.options.languages,((n={})[t]=e,n)),Za.options.languages[t]},Za.log=Fe,Za.createLogger=je,Za.createTimeRange=Za.createTimeRanges=Wi,Za.formatTime=io,Za.setFormatTime=function(t){no=t},Za.resetFormatTime=function(){no=eo},Za.parseUrl=fr,Za.isCrossOrigin=_r,Za.EventTarget=Ti,Za.on=hi,Za.one=fi,Za.off=di,Za.trigger=pi,Za.xhr=E.a,Za.TextTrack=Tr,Za.AudioTrack=wr,Za.VideoTrack=xr,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach((function(t){Za[t]=function(){return Fe.warn("videojs."+t+"() is deprecated; use videojs.dom."+t+"() instead"),Xn[t].apply(null,arguments)}})),Za.computedStyle=Ye,Za.dom=Xn,Za.url=vr,Za.defineLazyProperty=Ea,Za.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Va=D,Ga=function(t,e,n){return t&&n&&n.responseURL&&e!==n.responseURL?n.responseURL:e},Ya=function(t){return Za.log.debug?Za.log.debug.bind(Za,"VHS:",t+" >"):function(){}},Xa=1/30,Ka=.1,Qa=function(t,e){var n,i=[];if(t&&t.length)for(n=0;n<t.length;n++)e(t.start(n),t.end(n))&&i.push([t.start(n),t.end(n)]);return Za.createTimeRanges(i)},$a=function(t,e){return Qa(t,(function(t,n){return t-Ka<=e&&n+Ka>=e}))},Ja=function(t,e){return Qa(t,(function(t){return t-Xa>=e}))},ts=function(t){var e=[];if(!t||!t.length)return"";for(var n=0;n<t.length;n++)e.push(t.start(n)+" => "+t.end(n));return e.join(", ")},es=function(t){for(var e=[],n=0;n<t.length;n++)e.push({start:t.start(n),end:t.end(n)});return e},ns=function(t){if(t&&t.length&&t.end)return t.end(t.length-1)},is=Za.createTimeRange,rs=function(t){return(t.segments||[]).reduce((function(t,e,n){return e.parts?e.parts.forEach((function(i,r){t.push({duration:i.duration,segmentIndex:n,partIndex:r,part:i,segment:e})})):t.push({duration:e.duration,segmentIndex:n,partIndex:null,segment:e,part:null}),t}),[])},os=function(t){var e=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return e&&e.parts||[]},as=function(t){var e=t.preloadSegment;if(e){var n=e.parts,i=(e.preloadHints||[]).reduce((function(t,e){return t+("PART"===e.type?1:0)}),0);return i+=n&&n.length?n.length:0}},ss=function(t,e){if(e.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var n=os(e).length>0;return n&&e.serverControl&&e.serverControl.partHoldBack?e.serverControl.partHoldBack:n&&e.partTargetDuration?3*e.partTargetDuration:e.serverControl&&e.serverControl.holdBack?e.serverControl.holdBack:e.targetDuration?3*e.targetDuration:0},us=function(t,e,n){if("undefined"===typeof e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence)return 0;var i=function(t,e){var n=0,i=e-t.mediaSequence,r=t.segments[i];if(r){if("undefined"!==typeof r.start)return{result:r.start,precise:!0};if("undefined"!==typeof r.end)return{result:r.end-r.duration,precise:!0}}for(;i--;){if("undefined"!==typeof(r=t.segments[i]).end)return{result:n+r.end,precise:!0};if(n+=r.duration,"undefined"!==typeof r.start)return{result:n+r.start,precise:!0}}return{result:n,precise:!1}}(t,e);if(i.precise)return i.result;var r=function(t,e){for(var n,i=0,r=e-t.mediaSequence;r<t.segments.length;r++){if("undefined"!==typeof(n=t.segments[r]).start)return{result:n.start-i,precise:!0};if(i+=n.duration,"undefined"!==typeof n.end)return{result:n.end-i,precise:!0}}return{result:-1,precise:!1}}(t,e);return r.precise?r.result:i.result+n},ls=function(t,e,n){if(!t)return 0;if("number"!==typeof n&&(n=0),"undefined"===typeof e){if(t.totalDuration)return t.totalDuration;if(!t.endList)return h.a.Infinity}return us(t,e,n)},cs=function(t){var e=t.defaultDuration,n=t.durationList,i=t.startIndex,r=t.endIndex,o=0;if(i>r){var a=[r,i];i=a[0],r=a[1]}if(i<0){for(var s=i;s<Math.min(0,r);s++)o+=e;i=0}for(var u=i;u<r;u++)o+=n[u].duration;return o},hs=function(t,e,n,i){if(!t||!t.segments)return null;if(t.endList)return ls(t);if(null===e)return null;e=e||0;var r=us(t,t.mediaSequence+t.segments.length,e);return n&&(r-=i="number"===typeof i?i:ss(null,t)),Math.max(0,r)},ds=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},ps=function(t){return t.excludeUntil&&t.excludeUntil===1/0},fs=function(t){var e=ds(t);return!t.disabled&&!e},ms=function(t,e){return e.attributes&&e.attributes[t]},gs=function(t,e){if(1===t.playlists.length)return!0;var n=e.attributes.BANDWIDTH||Number.MAX_VALUE;return 0===t.playlists.filter((function(t){return!!fs(t)&&(t.attributes.BANDWIDTH||0)<n})).length},_s=function(t,e){return!(!t&&!e||!t&&e||t&&!e)&&(t===e||(!(!t.id||!e.id||t.id!==e.id)||(!(!t.resolvedUri||!e.resolvedUri||t.resolvedUri!==e.resolvedUri)||!(!t.uri||!e.uri||t.uri!==e.uri))))},vs=function(t,e){var n=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},i=!1;for(var r in n){for(var o in n[r])if(i=e(n[r][o]))break;if(i)break}return!!i},ys=function(t){if(!t||!t.playlists||!t.playlists.length)return vs(t,(function(t){return t.playlists&&t.playlists.length||t.uri}));for(var e=function(e){var n=t.playlists[e],i=n.attributes&&n.attributes.CODECS;return i&&i.split(",").every((function(t){return Q(t)}))||vs(t,(function(t){return _s(n,t)}))?"continue":{v:!1}},n=0;n<t.playlists.length;n++){var i=e(n);if("continue"!==i&&"object"===typeof i)return i.v}return!0},bs={liveEdgeDelay:ss,duration:ls,seekable:function(t,e,n){var i=e||0,r=hs(t,e,!0,n);return null===r?is():is(i,r)},getMediaInfoForTime:function(t){for(var e=t.playlist,n=t.currentTime,i=t.startingSegmentIndex,r=t.startingPartIndex,o=t.startTime,a=t.experimentalExactManifestTimings,s=n-o,u=rs(e),l=0,c=0;c<u.length;c++){var h=u[c];if(i===h.segmentIndex&&("number"!==typeof r||"number"!==typeof h.partIndex||r===h.partIndex)){l=c;break}}if(s<0){if(l>0)for(var d=l-1;d>=0;d--){var p=u[d];if(s+=p.duration,a){if(s<0)continue}else if(s+Xa<=0)continue;return{partIndex:p.partIndex,segmentIndex:p.segmentIndex,startTime:o-cs({defaultDuration:e.targetDuration,durationList:u,startIndex:l,endIndex:d})}}return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n}}if(l<0){for(var f=l;f<0;f++)if((s-=e.targetDuration)<0)return{partIndex:u[0]&&u[0].partIndex||null,segmentIndex:u[0]&&u[0].segmentIndex||0,startTime:n};l=0}for(var m=l;m<u.length;m++){var g=u[m];if(s-=g.duration,a){if(s>0)continue}else if(s-Xa>=0)continue;return{partIndex:g.partIndex,segmentIndex:g.segmentIndex,startTime:o+cs({defaultDuration:e.targetDuration,durationList:u,startIndex:l,endIndex:m})}}return{segmentIndex:u[u.length-1].segmentIndex,partIndex:u[u.length-1].partIndex,startTime:n}},isEnabled:fs,isDisabled:function(t){return t.disabled},isBlacklisted:ds,isIncompatible:ps,playlistEnd:hs,isAes:function(t){for(var e=0;e<t.segments.length;e++)if(t.segments[e].key)return!0;return!1},hasAttribute:ms,estimateSegmentRequestTime:function(t,e,n,i){return void 0===i&&(i=0),ms("BANDWIDTH",n)?(t*n.attributes.BANDWIDTH-8*i)/e:NaN},isLowestEnabledRendition:gs,isAudioOnly:ys,playlistMatch:_s},Ts=Za.log,ws=function(t,e){return t+"-"+e},xs=function(t,e){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach((function(n){if(t.mediaGroups[n])for(var i in t.mediaGroups[n])for(var r in t.mediaGroups[n][i]){var o=t.mediaGroups[n][i][r];e(o,n,i,r)}}))},Ss=function(t){var e=t.playlist,n=t.uri,i=t.id;e.id=i,e.playlistErrors_=0,n&&(e.uri=n),e.attributes=e.attributes||{}},Es=function(t,e){t.uri=e;for(var n=0;n<t.playlists.length;n++)if(!t.playlists[n].uri){var i="placeholder-uri-"+n;t.playlists[n].uri=i}var r=ys(t);xs(t,(function(e,n,i,o){var a="placeholder-uri-"+n+"-"+i+"-"+o;if(!e.playlists||!e.playlists.length){if(r&&"AUDIO"===n&&!e.uri)for(var s=0;s<t.playlists.length;s++){var u=t.playlists[s];if(u.attributes&&u.attributes.AUDIO&&u.attributes.AUDIO===i)return}e.playlists=[m()({},e)]}e.playlists.forEach((function(e,n){var i=ws(n,a);e.uri?e.resolvedUri=e.resolvedUri||Va(t.uri,e.uri):(e.uri=0===n?a:i,e.resolvedUri=e.uri),e.id=e.id||i,e.attributes=e.attributes||{},t.playlists[e.id]=e,t.playlists[e.uri]=e}))})),function(t){for(var e=t.playlists.length;e--;){var n=t.playlists[e];Ss({playlist:n,id:ws(e,n.uri)}),n.resolvedUri=Va(t.uri,n.uri),t.playlists[n.id]=n,t.playlists[n.uri]=n,n.attributes.BANDWIDTH||Ts.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}}(t),function(t){xs(t,(function(e){e.uri&&(e.resolvedUri=Va(t.uri,e.uri))}))}(t)},ks=Za.mergeOptions,Cs=Za.EventTarget,Ps=function(t,e){if(!t)return e;var n=ks(t,e);if(t.preloadHints&&!e.preloadHints&&delete n.preloadHints,t.parts&&!e.parts)delete n.parts;else if(t.parts&&e.parts)for(var i=0;i<e.parts.length;i++)t.parts&&t.parts[i]&&(n.parts[i]=ks(t.parts[i],e.parts[i]));return!t.skipped&&e.skipped&&(n.skipped=!1),t.preload&&!e.preload&&(n.preload=!1),n},Ls=function(t,e){!t.resolvedUri&&t.uri&&(t.resolvedUri=Va(e,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Va(e,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Va(e,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Va(e,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach((function(t){t.resolvedUri||(t.resolvedUri=Va(e,t.uri))})),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach((function(t){t.resolvedUri||(t.resolvedUri=Va(e,t.uri))}))},Is=function(t){var e=t.segments||[],n=t.preloadSegment;if(n&&n.parts&&n.parts.length){if(n.preloadHints)for(var i=0;i<n.preloadHints.length;i++)if("MAP"===n.preloadHints[i].type)return e;n.duration=t.targetDuration,n.preload=!0,e.push(n)}return e},As=function(t,e){return t===e||t.segments&&e.segments&&t.segments.length===e.segments.length&&t.endList===e.endList&&t.mediaSequence===e.mediaSequence},Ms=function(t,e,n){void 0===n&&(n=As);var i=ks(t,{}),r=i.playlists[e.id];if(!r)return null;if(n(r,e))return null;e.segments=Is(e);var o=ks(r,e);if(o.preloadSegment&&!e.preloadSegment&&delete o.preloadSegment,r.segments){if(e.skip){e.segments=e.segments||[];for(var a=0;a<e.skip.skippedSegments;a++)e.segments.unshift({skipped:!0})}o.segments=function(t,e,n){var i=t.slice(),r=e.slice();n=n||0;for(var o,a=[],s=0;s<r.length;s++){var u=i[s+n],l=r[s];u?(o=u.map||o,a.push(Ps(u,l))):(o&&!l.map&&(l.map=o),a.push(l))}return a}(r.segments,e.segments,e.mediaSequence-r.mediaSequence)}o.segments.forEach((function(t){Ls(t,o.resolvedUri)}));for(var s=0;s<i.playlists.length;s++)i.playlists[s].id===e.id&&(i.playlists[s]=o);return i.playlists[e.id]=o,i.playlists[e.uri]=o,xs(t,(function(t,n,i,r){if(t.playlists)for(var o=0;o<t.playlists.length;o++)e.id===t.playlists[o].id&&(t.playlists[o]=e)})),i},Os=function(t,e){var n=t.segments[t.segments.length-1],i=n&&n.parts&&n.parts[n.parts.length-1],r=i&&i.duration||n&&n.duration;return e&&r?1e3*r:500*(t.partTargetDuration||t.targetDuration||10)},Rs=function(t){function e(e,n,i){var r;if(void 0===i&&(i={}),r=t.call(this)||this,!e)throw new Error("A non-empty playlist URL or object is required");r.logger_=Ya("PlaylistLoader");var o=i,a=o.withCredentials,s=void 0!==a&&a,u=o.handleManifestRedirects,l=void 0!==u&&u;r.src=e,r.vhs_=n,r.withCredentials=s,r.handleManifestRedirects=l;var c=n.options_;return r.customTagParsers=c&&c.customTagParsers||[],r.customTagMappers=c&&c.customTagMappers||[],r.experimentalLLHLS=c&&c.experimentalLLHLS||!1,r.state="HAVE_NOTHING",r.handleMediaupdatetimeout_=r.handleMediaupdatetimeout_.bind(_()(r)),r.on("mediaupdatetimeout",r.handleMediaupdatetimeout_),r}y()(e,t);var n=e.prototype;return n.handleMediaupdatetimeout_=function(){var t=this;if("HAVE_METADATA"===this.state){var e=this.media(),n=Va(this.master.uri,e.uri);this.experimentalLLHLS&&(n=function(t,e){if(e.endList)return t;var n=[];if(e.serverControl&&e.serverControl.canBlockReload){var i=e.preloadSegment,r=e.mediaSequence+e.segments.length;if(i){var o=i.parts||[],a=as(e)-1;a>-1&&a!==o.length-1&&n.push("_HLS_part="+a),(a>-1||o.length)&&r--}n.unshift("_HLS_msn="+r)}return e.serverControl&&e.serverControl.canSkipUntil&&n.unshift("_HLS_skip="+(e.serverControl.canSkipDateranges?"v2":"YES")),n.forEach((function(e,n){t+=(0===n?"?":"&")+e})),t}(n,e)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:n,withCredentials:this.withCredentials},(function(e,n){if(t.request)return e?t.playlistRequestError(t.request,t.media(),"HAVE_METADATA"):void t.haveMetadata({playlistString:t.request.responseText,url:t.media().uri,id:t.media().id})}))}},n.playlistRequestError=function(t,e,n){var i=e.uri,r=e.id;this.request=null,n&&(this.state=n),this.error={playlist:this.master.playlists[r],status:t.status,message:"HLS playlist request error at URL: "+i+".",responseText:t.responseText,code:t.status>=500?4:2},this.trigger("error")},n.parseManifest_=function(t){var e=this,n=t.url;return function(t){var e=t.onwarn,n=t.oninfo,i=t.manifestString,r=t.customTagParsers,o=void 0===r?[]:r,a=t.customTagMappers,s=void 0===a?[]:a,u=t.experimentalLLHLS,l=new q;e&&l.on("warn",e),n&&l.on("info",n),o.forEach((function(t){return l.addParser(t)})),s.forEach((function(t){return l.addTagMapper(t)})),l.push(i),l.end();var c=l.manifest;if(u||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach((function(t){c.hasOwnProperty(t)&&delete c[t]})),c.segments&&c.segments.forEach((function(t){["parts","preloadHints"].forEach((function(e){t.hasOwnProperty(e)&&delete t[e]}))}))),!c.targetDuration){var h=10;c.segments&&c.segments.length&&(h=c.segments.reduce((function(t,e){return Math.max(t,e.duration)}),0)),e&&e("manifest has no targetDuration defaulting to "+h),c.targetDuration=h}var d=os(c);if(d.length&&!c.partTargetDuration){var p=d.reduce((function(t,e){return Math.max(t,e.duration)}),0);e&&(e("manifest has no partTargetDuration defaulting to "+p),Ts.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),c.partTargetDuration=p}return c}({onwarn:function(t){var i=t.message;return e.logger_("m3u8-parser warn for "+n+": "+i)},oninfo:function(t){var i=t.message;return e.logger_("m3u8-parser info for "+n+": "+i)},manifestString:t.manifestString,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},n.haveMetadata=function(t){var e=t.playlistString,n=t.playlistObject,i=t.url,r=t.id;this.request=null,this.state="HAVE_METADATA";var o=n||this.parseManifest_({url:i,manifestString:e});o.lastRequest=Date.now(),Ss({playlist:o,uri:i,id:r});var a=Ms(this.master,o);this.targetDuration=o.partTargetDuration||o.targetDuration,a?(this.master=a,this.media_=this.master.playlists[r]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Os(this.media(),!!a)),this.trigger("loadedplaylist")},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),h.a.clearTimeout(this.mediaUpdateTimeout),h.a.clearTimeout(this.finalRenditionTimeout),this.off()},n.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},n.media=function(t,e){var n=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);if("string"===typeof t){if(!this.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.master.playlists[t]}if(h.a.clearTimeout(this.finalRenditionTimeout),e){var i=(t.partTargetDuration||t.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=h.a.setTimeout(this.media.bind(this,t,!1),i)}else{var r=this.state,o=!this.media_||t.id!==this.media_.id,a=this.master.playlists[t.id];if(a&&a.endList||t.endList&&t.segments.length)return this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=t,void(o&&(this.trigger("mediachanging"),"HAVE_MASTER"===r?this.trigger("loadedmetadata"):this.trigger("mediachange")));if(this.updateMediaUpdateTimeout_(Os(t,!0)),o){if(this.state="SWITCHING_MEDIA",this.request){if(t.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.request=this.vhs_.xhr({uri:t.resolvedUri,withCredentials:this.withCredentials},(function(e,i){if(n.request){if(t.lastRequest=Date.now(),t.resolvedUri=Ga(n.handleManifestRedirects,t.resolvedUri,i),e)return n.playlistRequestError(n.request,t,r);n.haveMetadata({playlistString:i.responseText,url:t.uri,id:t.id}),"HAVE_MASTER"===r?n.trigger("loadedmetadata"):n.trigger("mediachange")}}))}}},n.pause=function(){this.mediaUpdateTimeout&&(h.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),"HAVE_NOTHING"===this.state&&(this.started=!1),"SWITCHING_MEDIA"===this.state?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":"HAVE_CURRENT_METADATA"===this.state&&(this.state="HAVE_METADATA")},n.load=function(t){var e=this;this.mediaUpdateTimeout&&(h.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var n=this.media();if(t){var i=n?(n.partTargetDuration||n.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=h.a.setTimeout((function(){e.mediaUpdateTimeout=null,e.load()}),i)}else this.started?n&&!n.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist"):this.start()},n.updateMediaUpdateTimeout_=function(t){var e=this;this.mediaUpdateTimeout&&(h.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.media()&&!this.media().endList&&(this.mediaUpdateTimeout=h.a.setTimeout((function(){e.mediaUpdateTimeout=null,e.trigger("mediaupdatetimeout"),e.updateMediaUpdateTimeout_(t)}),t))},n.start=function(){var t=this;if(this.started=!0,"object"===typeof this.src)return this.src.uri||(this.src.uri=h.a.location.href),this.src.resolvedUri=this.src.uri,void setTimeout((function(){t.setupInitialPlaylist(t.src)}),0);this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},(function(e,n){if(t.request){if(t.request=null,e)return t.error={status:n.status,message:"HLS playlist request error at URL: "+t.src+".",responseText:n.responseText,code:2},"HAVE_NOTHING"===t.state&&(t.started=!1),t.trigger("error");t.src=Ga(t.handleManifestRedirects,t.src,n);var i=t.parseManifest_({manifestString:n.responseText,url:t.src});t.setupInitialPlaylist(i)}}))},n.srcUri=function(){return"string"===typeof this.src?this.src:this.src.uri},n.setupInitialPlaylist=function(t){if(this.state="HAVE_MASTER",t.playlists)return this.master=t,Es(this.master,this.srcUri()),t.playlists.forEach((function(t){t.segments=Is(t),t.segments.forEach((function(e){Ls(e,t.resolvedUri)}))})),this.trigger("loadedplaylist"),void(this.request||this.media(this.master.playlists[0]));var e=this.srcUri()||h.a.location.href;this.master=function(t,e){var n=ws(0,e),i={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:h.a.location.href,resolvedUri:h.a.location.href,playlists:[{uri:e,id:n,resolvedUri:e,attributes:{}}]};return i.playlists[n]=i.playlists[0],i.playlists[e]=i.playlists[0],i}(0,e),this.haveMetadata({playlistObject:t,url:e,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},e}(Cs),Ds=Za.xhr,Ns=Za.mergeOptions,Bs=function(t,e,n,i){var r="arraybuffer"===t.responseType?t.response:t.responseText;!e&&r&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=r.byteLength||r.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),n.headers&&(t.responseHeaders=n.headers),e&&"ETIMEDOUT"===e.code&&(t.timedout=!0),e||t.aborted||200===n.statusCode||206===n.statusCode||0===n.statusCode||(e=new Error("XHR Failed with a response of: "+(t&&(r||t.responseText)))),i(e,t)},Us=function(){var t=function t(e,n){e=Ns({timeout:45e3},e);var i=t.beforeRequest||Za.Vhs.xhr.beforeRequest;if(i&&"function"===typeof i){var r=i(e);r&&(e=r)}var o=(!0===Za.Vhs.xhr.original?Ds:Za.Vhs.xhr)(e,(function(t,e){return Bs(o,t,e,n)})),a=o.abort;return o.abort=function(){return o.aborted=!0,a.apply(o,arguments)},o.uri=e.uri,o.requestTime=Date.now(),o};return t.original=!0,t},zs=function(t){var e={};return t.byterange&&(e.Range=function(t){var e=t.offset+t.length-1;return"bytes="+t.offset+"-"+e}(t.byterange)),e},Fs=function(t,e){return t.start(e)+"-"+t.end(e)},js=function(t,e){var n=t.toString(16);return"00".substring(0,2-n.length)+n+(e%2?" ":"")},Hs=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},Zs=function(t){var e={};return Object.keys(t).forEach((function(n){var i=t[n];ArrayBuffer.isView(i)?e[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[n]=i})),e},Ws=function(t){var e=t.byterange||{length:1/0,offset:0};return[e.length,e.offset,t.resolvedUri].join(",")},qs=function(t){return t.resolvedUri},Vs=function(t){for(var e=Array.prototype.slice.call(t),n=16,i="",r=0;r<e.length/n;r++)i+=e.slice(r*n,r*n+n).map(js).join("")+" "+e.slice(r*n,r*n+n).map(Hs).join("")+"\n";return i},Gs=Object.freeze({__proto__:null,createTransferableMessage:Zs,initSegmentId:Ws,segmentKeyId:qs,hexDump:Vs,tagDump:function(t){var e=t.bytes;return Vs(e)},textRanges:function(t){var e,n="";for(e=0;e<t.length;e++)n+=Fs(t,e)+" ";return n}}),Ys=function(t){var e=t.playlist,n=t.time,i=void 0===n?void 0:n,r=t.callback;if(!r)throw new Error("getProgramTime: callback must be provided");if(!e||void 0===i)return r({message:"getProgramTime: playlist and time must be provided"});var o=function(t,e){if(!e||!e.segments||0===e.segments.length)return null;for(var n,i=0,r=0;r<e.segments.length&&!(t<=(i=(n=e.segments[r]).videoTimingInfo?n.videoTimingInfo.transmuxedPresentationEnd:i+n.duration));r++);var o=e.segments[e.segments.length-1];if(o.videoTimingInfo&&o.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>i){if(t>i+.25*o.duration)return null;n=o}return{segment:n,estimatedStart:n.videoTimingInfo?n.videoTimingInfo.transmuxedPresentationStart:i-n.duration,type:n.videoTimingInfo?"accurate":"estimate"}}(i,e);if(!o)return r({message:"valid programTime was not found"});if("estimate"===o.type)return r({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:o.estimatedStart});var a={mediaSeconds:i},s=function(t,e){if(!e.dateTimeObject)return null;var n=e.videoTimingInfo.transmuxerPrependedSeconds,i=t-(e.videoTimingInfo.transmuxedPresentationStart+n);return new Date(e.dateTimeObject.getTime()+1e3*i)}(i,o.segment);return s&&(a.programDateTime=s.toISOString()),r(null,a)},Xs=function t(e){var n=e.programTime,i=e.playlist,r=e.retryCount,o=void 0===r?2:r,a=e.seekTo,s=e.pauseAfterSeek,u=void 0===s||s,l=e.tech,c=e.callback;if(!c)throw new Error("seekToProgramTime: callback must be provided");if("undefined"===typeof n||!i||!a)return c({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!i.endList&&!l.hasStarted_)return c({message:"player must be playing a live stream to start buffering"});if(!function(t){if(!t.segments||0===t.segments.length)return!1;for(var e=0;e<t.segments.length;e++)if(!t.segments[e].dateTimeObject)return!1;return!0}(i))return c({message:"programDateTime tags must be provided in the manifest "+i.resolvedUri});var h=function(t,e){var n;try{n=new Date(t)}catch(l){return null}if(!e||!e.segments||0===e.segments.length)return null;var i=e.segments[0];if(n<i.dateTimeObject)return null;for(var r=0;r<e.segments.length-1&&(i=e.segments[r],!(n<e.segments[r+1].dateTimeObject));r++);var o,a=e.segments[e.segments.length-1],s=a.dateTimeObject,u=a.videoTimingInfo?(o=a.videoTimingInfo).transmuxedPresentationEnd-o.transmuxedPresentationStart-o.transmuxerPrependedSeconds:a.duration+.25*a.duration;return n>new Date(s.getTime()+1e3*u)?null:(n>s&&(i=a),{segment:i,estimatedStart:i.videoTimingInfo?i.videoTimingInfo.transmuxedPresentationStart:bs.duration(e,e.mediaSequence+e.segments.indexOf(i)),type:i.videoTimingInfo?"accurate":"estimate"})}(n,i);if(!h)return c({message:n+" was not found in the stream"});var d=h.segment,p=function(t,e){var n,i;try{n=new Date(t),i=new Date(e)}catch(o){}var r=n.getTime();return(i.getTime()-r)/1e3}(d.dateTimeObject,n);if("estimate"===h.type)return 0===o?c({message:n+" is not buffered yet. Try again"}):(a(h.estimatedStart+p),void l.one("seeked",(function(){t({programTime:n,playlist:i,retryCount:o-1,seekTo:a,pauseAfterSeek:u,tech:l,callback:c})})));var f=d.start+p;l.one("seeked",(function(){return c(null,l.currentTime())})),u&&l.pause(),a(f)},Ks=function(t,e){if(4===t.readyState)return e()},Qs=function(t,e,n){var i,r=[],o=!1,a=function(t,e,i,r){return e.abort(),o=!0,n(t,e,i,r)},s=function(t,e){if(!o){if(t)return a(t,e,"",r);var n=e.responseText.substring(r&&r.byteLength||0,e.responseText.length);if(r=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];if((e=e.filter((function(t){return t&&(t.byteLength||t.length)&&"string"!==typeof t}))).length<=1)return Jt(e[0]);var i=e.reduce((function(t,e,n){return t+(e.byteLength||e.length)}),0),r=new Uint8Array(i),o=0;return e.forEach((function(t){t=Jt(t),r.set(t,o),o+=t.byteLength})),r}(r,oe(n,!0)),i=i||ue(r),r.length<10||i&&r.length<i+2)return Ks(e,(function(){return a(t,e,"",r)}));var s=Pe(r);return"ts"===s&&r.length<188||!s&&r.length<376?Ks(e,(function(){return a(t,e,"",r)})):a(null,e,s,r)}},u=e({uri:t,beforeSend:function(t){t.overrideMimeType("text/plain; charset=x-user-defined"),t.addEventListener("progress",(function(e){return e.total,e.loaded,Bs(t,null,{statusCode:t.status},s)}))}},(function(t,e){return Bs(u,t,e,s)}));return u},$s=Za.EventTarget,Js=Za.mergeOptions,tu=function(t,e){if(!As(t,e))return!1;if(t.sidx&&e.sidx&&(t.sidx.offset!==e.sidx.offset||t.sidx.length!==e.sidx.length))return!1;if(!t.sidx&&e.sidx||t.sidx&&!e.sidx)return!1;if(t.segments&&!e.segments||!t.segments&&e.segments)return!1;if(!t.segments&&!e.segments)return!0;for(var n=0;n<t.segments.length;n++){var i=t.segments[n],r=e.segments[n];if(i.uri!==r.uri)return!1;if(i.byterange||r.byterange){var o=i.byterange,a=r.byterange;if(o&&!a||!o&&a)return!1;if(o.offset!==a.offset||o.length!==a.length)return!1}}return!0},eu=function(t,e){var n,i,r={};for(var o in t){var a=t[o].sidx;if(a){var s=wt(a);if(!e[s])break;var u=e[s].sidxInfo;n=u,i=a,(Boolean(!n.map&&!i.map)||Boolean(n.map&&i.map&&n.map.byterange.offset===i.map.byterange.offset&&n.map.byterange.length===i.map.byterange.length))&&n.uri===i.uri&&n.byterange.offset===i.byterange.offset&&n.byterange.length===i.byterange.length&&(r[s]=e[s])}}return r},nu=function(t){function e(e,n,i,r){var o;void 0===i&&(i={}),(o=t.call(this)||this).masterPlaylistLoader_=r||_()(o),r||(o.isMaster_=!0);var a=i,s=a.withCredentials,u=void 0!==s&&s,l=a.handleManifestRedirects,c=void 0!==l&&l;if(o.vhs_=n,o.withCredentials=u,o.handleManifestRedirects=c,!e)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",(function(){o.refreshXml_()})),o.on("mediaupdatetimeout",(function(){o.refreshMedia_(o.media().id)})),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Ya("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=e,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=e,o}y()(e,t);var n=e.prototype;return n.requestErrored_=function(t,e,n){return!this.request||(this.request=null,t?(this.error="object"!==typeof t||t instanceof Error?{status:e.status,message:"DASH request error at URL: "+e.uri,response:e.response,code:2}:t,n&&(this.state=n),this.trigger("error"),!0):void 0)},n.addSidxSegments_=function(t,e,n){var i=this,r=t.sidx&&wt(t.sidx);if(t.sidx&&r&&!this.masterPlaylistLoader_.sidxMapping_[r]){var o=Ga(this.handleManifestRedirects,t.sidx.resolvedUri),a=function(o,a){if(!i.requestErrored_(o,a,e)){var s,u=i.masterPlaylistLoader_.sidxMapping_;try{s=$t()(Jt(a.response).subarray(8))}catch(l){return void i.requestErrored_(l,a,e)}return u[r]={sidxInfo:t.sidx,sidx:s},Tt(t,s,t.sidx.resolvedUri),n(!0)}};this.request=Qs(o,this.vhs_.xhr,(function(e,n,r,s){if(e)return a(e,n);if(!r||"mp4"!==r)return a({status:n.status,message:"Unsupported "+(r||"unknown")+" container type for sidx segment at URL: "+o,response:"",playlist:t,internal:!0,blacklistDuration:1/0,code:2},n);var u=t.sidx.byterange,l=u.offset,c=u.length;if(s.length>=c+l)return a(e,{response:s.subarray(l,l+c),status:n.status,uri:n.uri});i.request=i.vhs_.xhr({uri:o,responseType:"arraybuffer",headers:zs({byterange:t.sidx.byterange})},a)}))}else this.mediaRequest_=h.a.setTimeout((function(){return n(!1)}),0)},n.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},h.a.clearTimeout(this.minimumUpdatePeriodTimeout_),h.a.clearTimeout(this.mediaRequest_),h.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},n.hasPendingRequest=function(){return this.request||this.mediaRequest_},n.stopRequest=function(){if(this.request){var t=this.request;this.request=null,t.onreadystatechange=null,t.abort()}},n.media=function(t){var e=this;if(!t)return this.media_;if("HAVE_NOTHING"===this.state)throw new Error("Cannot switch media playlist from "+this.state);var n=this.state;if("string"===typeof t){if(!this.masterPlaylistLoader_.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=this.masterPlaylistLoader_.master.playlists[t]}var i=!this.media_||t.id!==this.media_.id;if(i&&this.loadedPlaylists_[t.id]&&this.loadedPlaylists_[t.id].endList)return this.state="HAVE_METADATA",this.media_=t,void(i&&(this.trigger("mediachanging"),this.trigger("mediachange")));i&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(t,n,(function(i){e.haveMetadata({startingState:n,playlist:t})})))},n.haveMetadata=function(t){var e=t.startingState,n=t.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[n.id]=n,this.mediaRequest_=null,this.refreshMedia_(n.id),"HAVE_MASTER"===e?this.trigger("loadedmetadata"):this.trigger("mediachange")},n.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),h.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(h.a.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),"HAVE_NOTHING"===this.state&&(this.started=!1)},n.load=function(t){var e=this;h.a.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var n=this.media();if(t){var i=n?n.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=h.a.setTimeout((function(){return e.load()}),i)}else this.started?n&&!n.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist"):this.start()},n.start=function(){var t=this;this.started=!0,this.isMaster_?this.requestMaster_((function(e,n){t.haveMaster_(),t.hasPendingRequest()||t.media_||t.media(t.masterPlaylistLoader_.master.playlists[0])})):this.mediaRequest_=h.a.setTimeout((function(){return t.haveMaster_()}),0)},n.requestMaster_=function(t){var e=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},(function(n,i){if(!e.requestErrored_(n,i)){var r=i.responseText!==e.masterPlaylistLoader_.masterXml_;return e.masterPlaylistLoader_.masterXml_=i.responseText,i.responseHeaders&&i.responseHeaders.date?e.masterLoaded_=Date.parse(i.responseHeaders.date):e.masterLoaded_=Date.now(),e.masterPlaylistLoader_.srcUrl=Ga(e.handleManifestRedirects,e.masterPlaylistLoader_.srcUrl,i),r?(e.handleMaster_(),void e.syncClientServerClock_((function(){return t(i,r)}))):t(i,r)}"HAVE_NOTHING"===e.state&&(e.started=!1)}))},n.syncClientServerClock_=function(t){var e=this,n=Kt(this.masterPlaylistLoader_.masterXml_);return null===n?(this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),t()):"DIRECT"===n.method?(this.masterPlaylistLoader_.clientOffset_=n.value-Date.now(),t()):void(this.request=this.vhs_.xhr({uri:Va(this.masterPlaylistLoader_.srcUrl,n.value),method:n.method,withCredentials:this.withCredentials},(function(i,r){if(e.request){if(i)return e.masterPlaylistLoader_.clientOffset_=e.masterLoaded_-Date.now(),t();var o;o="HEAD"===n.method?r.responseHeaders&&r.responseHeaders.date?Date.parse(r.responseHeaders.date):e.masterLoaded_:Date.parse(r.responseText),e.masterPlaylistLoader_.clientOffset_=o-Date.now(),t()}})))},n.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},n.handleMaster_=function(){this.mediaRequest_=null;var t=function(t){var e=t.masterXml,n=t.srcUrl,i=t.clientOffset,r=t.sidxMapping,o=Xt(e,{manifestUri:n,clientOffset:i,sidxMapping:r});return Es(o,n),o}({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_}),e=this.masterPlaylistLoader_.master;e&&(t=function(t,e,n){for(var i=!0,r=Js(t,{duration:e.duration,minimumUpdatePeriod:e.minimumUpdatePeriod}),o=0;o<e.playlists.length;o++){var a=e.playlists[o];if(a.sidx){var s=wt(a.sidx);n&&n[s]&&n[s].sidx&&Tt(a,n[s].sidx,a.sidx.resolvedUri)}var u=Ms(r,a,tu);u&&(r=u,i=!1)}return xs(e,(function(t,e,n,o){if(t.playlists&&t.playlists.length){var a=t.playlists[0].id,s=Ms(r,t.playlists[0],tu);s&&((r=s).mediaGroups[e][n][o].playlists[0]=r.playlists[a],i=!1)}})),e.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(i=!1),i?null:r}(e,t,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=t||e;var n=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return n&&n!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=n),(!e||t&&t.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(t)},n.updateMinimumUpdatePeriodTimeout_=function(){var t=this.masterPlaylistLoader_;t.createMupOnMedia_&&(t.off("loadedmetadata",t.createMupOnMedia_),t.createMupOnMedia_=null),t.minimumUpdatePeriodTimeout_&&(h.a.clearTimeout(t.minimumUpdatePeriodTimeout_),t.minimumUpdatePeriodTimeout_=null);var e=t.master&&t.master.minimumUpdatePeriod;0===e&&(t.media()?e=1e3*t.media().targetDuration:(t.createMupOnMedia_=t.updateMinimumUpdatePeriodTimeout_,t.one("loadedmetadata",t.createMupOnMedia_))),"number"!==typeof e||e<=0?e<0&&this.logger_("found invalid minimumUpdatePeriod of "+e+", not setting a timeout"):this.createMUPTimeout_(e)},n.createMUPTimeout_=function(t){var e=this.masterPlaylistLoader_;e.minimumUpdatePeriodTimeout_=h.a.setTimeout((function(){e.minimumUpdatePeriodTimeout_=null,e.trigger("minimumUpdatePeriod"),e.createMUPTimeout_(t)}),t)},n.refreshXml_=function(){var t=this;this.requestMaster_((function(e,n){n&&(t.media_&&(t.media_=t.masterPlaylistLoader_.master.playlists[t.media_.id]),t.masterPlaylistLoader_.sidxMapping_=function(t,e){var n=eu(t.playlists,e);return xs(t,(function(t,i,r,o){if(t.playlists&&t.playlists.length){var a=t.playlists;n=Js(n,eu(a,e))}})),n}(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.sidxMapping_),t.addSidxSegments_(t.media(),t.state,(function(e){t.refreshMedia_(t.media().id)})))}))},n.refreshMedia_=function(t){var e=this;if(!t)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var n=this.masterPlaylistLoader_.master.playlists,i=!this.media_||this.media_!==n[t];if(i?this.media_=n[t]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){!function t(){e.media().endList||(e.mediaUpdateTimeout=h.a.setTimeout((function(){e.trigger("mediaupdatetimeout"),t()}),Os(e.media(),Boolean(i))))}()}this.trigger("loadedplaylist")},e}($s),iu={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},ru=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},ou=function(t){return function(){var e=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch(n){var e=new BlobBuilder;return e.append(t),URL.createObjectURL(e.getBlob())}}(t),n=ru(new Worker(e));n.objURL=e;var i=n.terminate;return n.on=n.addEventListener,n.off=n.removeEventListener,n.terminate=function(){return URL.revokeObjectURL(e),i.call(this)},n}},au=function(t){return"var browserWorkerPolyFill = "+ru.toString()+";\nbrowserWorkerPolyFill(self);\n"+t},su=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},uu=ou(au(su((function(){var t=function(){this.init=function(){var t={};this.on=function(e,n){t[e]||(t[e]=[]),t[e]=t[e].concat(n)},this.off=function(e,n){var i;return!!t[e]&&(i=t[e].indexOf(n),t[e]=t[e].slice(),t[e].splice(i,1),i>-1)},this.trigger=function(e){var n,i,r,o;if(n=t[e])if(2===arguments.length)for(r=n.length,i=0;i<r;++i)n[i].call(this,arguments[1]);else{for(o=[],i=arguments.length,i=1;i<arguments.length;++i)o.push(arguments[i]);for(r=n.length,i=0;i<r;++i)n[i].apply(this,o)}},this.dispose=function(){t={}}}};t.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),this.on("partialdone",(function(e){t.partialFlush(e)})),this.on("endedtimeline",(function(e){t.endTimeline(e)})),this.on("reset",(function(e){t.reset(e)})),t},t.prototype.push=function(t){this.trigger("data",t)},t.prototype.flush=function(t){this.trigger("done",t)},t.prototype.partialFlush=function(t){this.trigger("partialdone",t)},t.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},t.prototype.reset=function(t){this.trigger("reset",t)};var e,n,i,r,o,a,s,u,l,c,h,d,p,f,m,g,_,v,y,b,T,w,x,S,E,k,C,P,L,I,A,M,O,R,D,N,B=t,U=Math.pow(2,32)-1;!function(){var t;if(x={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!==typeof Uint8Array){for(t in x)x.hasOwnProperty(t)&&(x[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);S=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),k=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),E=new Uint8Array([0,0,0,1]),C=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),P=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),L={video:C,audio:P},M=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),A=new Uint8Array([0,0,0,0,0,0,0,0]),O=new Uint8Array([0,0,0,0,0,0,0,0]),R=O,D=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),N=O,I=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}}(),e=function(t){var e,n,i=[],r=0;for(e=1;e<arguments.length;e++)i.push(arguments[e]);for(e=i.length;e--;)r+=i[e].byteLength;for(n=new Uint8Array(r+8),new DataView(n.buffer,n.byteOffset,n.byteLength).setUint32(0,n.byteLength),n.set(t,4),e=0,r=8;e<i.length;e++)n.set(i[e],r),r+=i[e].byteLength;return n},n=function(){return e(x.dinf,e(x.dref,M))},i=function(t){return e(x.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,t.audioobjecttype<<3|t.samplingfrequencyindex>>>1,t.samplingfrequencyindex<<7|t.channelcount<<3,6,1,2]))},r=function(){return e(x.ftyp,S,E,S,k)},g=function(t){return e(x.hdlr,L[t])},o=function(t){return e(x.mdat,t)},m=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,t.duration>>>24&255,t.duration>>>16&255,t.duration>>>8&255,255&t.duration,85,196,0,0]);return t.samplerate&&(n[12]=t.samplerate>>>24&255,n[13]=t.samplerate>>>16&255,n[14]=t.samplerate>>>8&255,n[15]=255&t.samplerate),e(x.mdhd,n)},f=function(t){return e(x.mdia,m(t),g(t.type),s(t))},a=function(t){return e(x.mfhd,new Uint8Array([0,0,0,0,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t]))},s=function(t){return e(x.minf,"video"===t.type?e(x.vmhd,I):e(x.smhd,A),n(),v(t))},u=function(t,n){for(var i=[],r=n.length;r--;)i[r]=b(n[r]);return e.apply(null,[x.moof,a(t)].concat(i))},l=function(t){for(var n=t.length,i=[];n--;)i[n]=d(t[n]);return e.apply(null,[x.moov,h(4294967295)].concat(i).concat(c(t)))},c=function(t){for(var n=t.length,i=[];n--;)i[n]=T(t[n]);return e.apply(null,[x.mvex].concat(i))},h=function(t){var n=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&t)>>24,(16711680&t)>>16,(65280&t)>>8,255&t,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e(x.mvhd,n)},_=function(t){var n,i,r=t.samples||[],o=new Uint8Array(4+r.length);for(i=0;i<r.length;i++)n=r[i].flags,o[i+4]=n.dependsOn<<4|n.isDependedOn<<2|n.hasRedundancy;return e(x.sdtp,o)},v=function(t){return e(x.stbl,y(t),e(x.stts,N),e(x.stsc,R),e(x.stsz,D),e(x.stco,O))},function(){var t,n;y=function(i){return e(x.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===i.type?t(i):n(i))},t=function(t){var n,i,r=t.sps||[],o=t.pps||[],a=[],s=[];for(n=0;n<r.length;n++)a.push((65280&r[n].byteLength)>>>8),a.push(255&r[n].byteLength),a=a.concat(Array.prototype.slice.call(r[n]));for(n=0;n<o.length;n++)s.push((65280&o[n].byteLength)>>>8),s.push(255&o[n].byteLength),s=s.concat(Array.prototype.slice.call(o[n]));if(i=[x.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&t.width)>>8,255&t.width,(65280&t.height)>>8,255&t.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),e(x.avcC,new Uint8Array([1,t.profileIdc,t.profileCompatibility,t.levelIdc,255].concat([r.length],a,[o.length],s))),e(x.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],t.sarRatio){var u=t.sarRatio[0],l=t.sarRatio[1];i.push(e(x.pasp,new Uint8Array([(4278190080&u)>>24,(16711680&u)>>16,(65280&u)>>8,255&u,(4278190080&l)>>24,(16711680&l)>>16,(65280&l)>>8,255&l])))}return e.apply(null,i)},n=function(t){return e(x.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&t.channelcount)>>8,255&t.channelcount,(65280&t.samplesize)>>8,255&t.samplesize,0,0,0,0,(65280&t.samplerate)>>8,255&t.samplerate,0,0]),i(t))}}(),p=function(t){var n=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,0,(4278190080&t.duration)>>24,(16711680&t.duration)>>16,(65280&t.duration)>>8,255&t.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&t.width)>>8,255&t.width,0,0,(65280&t.height)>>8,255&t.height,0,0]);return e(x.tkhd,n)},b=function(t){var n,i,r,o,a,s;return n=e(x.tfhd,new Uint8Array([0,0,0,58,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),a=Math.floor(t.baseMediaDecodeTime/(U+1)),s=Math.floor(t.baseMediaDecodeTime%(U+1)),i=e(x.tfdt,new Uint8Array([1,0,0,0,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s>>>24&255,s>>>16&255,s>>>8&255,255&s])),92,"audio"===t.type?(r=w(t,92),e(x.traf,n,i,r)):(o=_(t),r=w(t,o.length+92),e(x.traf,n,i,r,o))},d=function(t){return t.duration=t.duration||4294967295,e(x.trak,p(t),f(t))},T=function(t){var n=new Uint8Array([0,0,0,0,(4278190080&t.id)>>24,(16711680&t.id)>>16,(65280&t.id)>>8,255&t.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==t.type&&(n[n.length-1]=0),e(x.trex,n)},function(){var t,n,i;i=function(t,e){var n=0,i=0,r=0,o=0;return t.length&&(void 0!==t[0].duration&&(n=1),void 0!==t[0].size&&(i=2),void 0!==t[0].flags&&(r=4),void 0!==t[0].compositionTimeOffset&&(o=8)),[0,0,n|i|r|o,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},n=function(t,n){var r,o,a,s,u,l;for(n+=20+16*(s=t.samples||[]).length,a=i(s,n),(o=new Uint8Array(a.length+16*s.length)).set(a),r=a.length,l=0;l<s.length;l++)u=s[l],o[r++]=(4278190080&u.duration)>>>24,o[r++]=(16711680&u.duration)>>>16,o[r++]=(65280&u.duration)>>>8,o[r++]=255&u.duration,o[r++]=(4278190080&u.size)>>>24,o[r++]=(16711680&u.size)>>>16,o[r++]=(65280&u.size)>>>8,o[r++]=255&u.size,o[r++]=u.flags.isLeading<<2|u.flags.dependsOn,o[r++]=u.flags.isDependedOn<<6|u.flags.hasRedundancy<<4|u.flags.paddingValue<<1|u.flags.isNonSyncSample,o[r++]=61440&u.flags.degradationPriority,o[r++]=15&u.flags.degradationPriority,o[r++]=(4278190080&u.compositionTimeOffset)>>>24,o[r++]=(16711680&u.compositionTimeOffset)>>>16,o[r++]=(65280&u.compositionTimeOffset)>>>8,o[r++]=255&u.compositionTimeOffset;return e(x.trun,o)},t=function(t,n){var r,o,a,s,u,l;for(n+=20+8*(s=t.samples||[]).length,a=i(s,n),(r=new Uint8Array(a.length+8*s.length)).set(a),o=a.length,l=0;l<s.length;l++)u=s[l],r[o++]=(4278190080&u.duration)>>>24,r[o++]=(16711680&u.duration)>>>16,r[o++]=(65280&u.duration)>>>8,r[o++]=255&u.duration,r[o++]=(4278190080&u.size)>>>24,r[o++]=(16711680&u.size)>>>16,r[o++]=(65280&u.size)>>>8,r[o++]=255&u.size;return e(x.trun,r)},w=function(e,i){return"audio"===e.type?t(e,i):n(e,i)}}();var z,F,j,H,Z,W,q,V,G=o,Y=u,X=function(t){var e,n=r(),i=l(t);return(e=new Uint8Array(n.byteLength+i.byteLength)).set(n),e.set(i,n.byteLength),e},K=function(t,e){var n={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}};return n.dataOffset=e,n.compositionTimeOffset=t.pts-t.dts,n.duration=t.duration,n.size=4*t.length,n.size+=t.byteLength,t.keyFrame&&(n.flags.dependsOn=2,n.flags.isNonSyncSample=0),n},Q=function(t){var e,n,i=[],r=[];for(r.byteLength=0,r.nalCount=0,r.duration=0,i.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(n=t[e]).nalUnitType?(i.length&&(i.duration=n.dts-i.dts,r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i)),(i=[n]).byteLength=n.data.byteLength,i.pts=n.pts,i.dts=n.dts):("slice_layer_without_partitioning_rbsp_idr"===n.nalUnitType&&(i.keyFrame=!0),i.duration=n.dts-i.dts,i.byteLength+=n.data.byteLength,i.push(n));return r.length&&(!i.duration||i.duration<=0)&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.length,r.duration+=i.duration,r.push(i),r},$=function(t){var e,n,i=[],r=[];for(i.byteLength=0,i.nalCount=0,i.duration=0,i.pts=t[0].pts,i.dts=t[0].dts,r.byteLength=0,r.nalCount=0,r.duration=0,r.pts=t[0].pts,r.dts=t[0].dts,e=0;e<t.length;e++)(n=t[e]).keyFrame?(i.length&&(r.push(i),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration),(i=[n]).nalCount=n.length,i.byteLength=n.byteLength,i.pts=n.pts,i.dts=n.dts,i.duration=n.duration):(i.duration+=n.duration,i.nalCount+=n.length,i.byteLength+=n.byteLength,i.push(n));return r.length&&i.duration<=0&&(i.duration=r[r.length-1].duration),r.byteLength+=i.byteLength,r.nalCount+=i.nalCount,r.duration+=i.duration,r.push(i),r},J=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},tt=function(t,e){var n,i,r,o,a,s=e||0,u=[];for(n=0;n<t.length;n++)for(o=t[n],i=0;i<o.length;i++)a=o[i],s+=(r=K(a,s)).size,u.push(r);return u},et=function(t){var e,n,i,r,o,a,s=0,u=t.byteLength,l=t.nalCount,c=new Uint8Array(u+4*l),h=new DataView(c.buffer);for(e=0;e<t.length;e++)for(r=t[e],n=0;n<r.length;n++)for(o=r[n],i=0;i<o.length;i++)a=o[i],h.setUint32(s,a.data.byteLength),s+=4,c.set(a.data,s),s+=a.data.byteLength;return c},nt=[33,16,5,32,164,27],it=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],rt=function(t){for(var e=[];t--;)e.push(0);return e},ot=function(){if(!z){var t={96e3:[nt,[227,64],rt(154),[56]],88200:[nt,[231],rt(170),[56]],64e3:[nt,[248,192],rt(240),[56]],48e3:[nt,[255,192],rt(268),[55,148,128],rt(54),[112]],44100:[nt,[255,192],rt(268),[55,163,128],rt(84),[112]],32e3:[nt,[255,192],rt(268),[55,234],rt(226),[112]],24e3:[nt,[255,192],rt(268),[55,255,128],rt(268),[111,112],rt(126),[224]],16e3:[nt,[255,192],rt(268),[55,255,128],rt(268),[111,255],rt(269),[223,108],rt(195),[1,192]],12e3:[it,rt(268),[3,127,248],rt(268),[6,255,240],rt(268),[13,255,224],rt(268),[27,253,128],rt(259),[56]],11025:[it,rt(268),[3,127,248],rt(268),[6,255,240],rt(268),[13,255,224],rt(268),[27,255,192],rt(268),[55,175,128],rt(108),[112]],8e3:[it,rt(268),[3,121,16],rt(47),[7]]};e=t,z=Object.keys(e).reduce((function(t,n){return t[n]=new Uint8Array(e[n].reduce((function(t,e){return t.concat(e)}),[])),t}),{})}var e;return z},at=9e4;W=function(t,e){return F(Z(t,e))},q=function(t,e){return j(H(t),e)},V=function(t,e,n){return H(n?t:t-e)};var st=at,ut=F=function(t){return t*at},lt=(j=function(t,e){return t*e},H=function(t){return t/at}),ct=(Z=function(t,e){return t/e},W),ht=q,dt=V,pt=function(t,e,n,i){var r,o,a,s,u,l=0,c=0,h=0;if(e.length&&(r=ct(t.baseMediaDecodeTime,t.samplerate),o=Math.ceil(st/(t.samplerate/1024)),n&&i&&(l=r-Math.max(n,i),h=(c=Math.floor(l/o))*o),!(c<1||h>st/2))){for((a=ot()[t.samplerate])||(a=e[0].data),s=0;s<c;s++)u=e[0],e.splice(0,0,{data:a,dts:u.dts-o,pts:u.pts-o});return t.baseMediaDecodeTime-=Math.floor(ht(h,t.samplerate)),h}},ft=function(t,e,n){return e.minSegmentDts>=n?t:(e.minSegmentDts=1/0,t.filter((function(t){return t.dts>=n&&(e.minSegmentDts=Math.min(e.minSegmentDts,t.dts),e.minSegmentPts=e.minSegmentDts,!0)})))},mt=function(t){var e,n,i=[];for(e=0;e<t.length;e++)n=t[e],i.push({size:n.data.byteLength,duration:1024});return i},gt=function(t){var e,n,i=0,r=new Uint8Array(function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e].data.byteLength;return n}(t));for(e=0;e<t.length;e++)n=t[e],r.set(n.data,i),i+=n.data.byteLength;return r},_t=st,vt=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},yt=function(t,e){var n,i=t.minSegmentDts;return e||(i-=t.timelineStartInfo.dts),n=t.timelineStartInfo.baseMediaDecodeTime,n+=i,n=Math.max(0,n),"audio"===t.type&&(n*=t.samplerate/_t,n=Math.floor(n)),n},bt=function(t,e){"number"===typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"===typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},Tt=function(t){for(var e=0,n={payloadType:-1,payloadSize:0},i=0,r=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)i+=255,e++;for(i+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!n.payload&&4===i){if("GA94"===String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6])){n.payloadType=i,n.payloadSize=r,n.payload=t.subarray(e,e+r);break}n.payload=void 0}e+=r,i=0,r=0}return n},wt=function(t){return 181!==t.payload[0]||49!==(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},xt=function(t,e){var n,i,r,o,a=[];if(!(64&e[0]))return a;for(i=31&e[0],n=0;n<i;n++)o={type:3&e[(r=3*n)+2],pts:t},4&e[r+2]&&(o.ccData=e[r+3]<<8|e[r+4],a.push(o));return a},St=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var a=0;for(o=0;o<e;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=t[a];return n},Et=4,kt=function t(e){e=e||{},t.prototype.init.call(this),this.parse708captions_="boolean"!==typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Nt(0,0),new Nt(0,1),new Nt(1,0),new Nt(1,1)],this.parse708captions_&&(this.cc708Stream_=new At),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(kt.prototype=new B).push=function(t){var e,n,i;if("sei_rbsp"===t.nalUnitType&&(e=Tt(t.escapedRBSP)).payload&&e.payloadType===Et&&(n=wt(e)))if(t.dts<this.latestDts_)this.ignoreNextEqualDts_=!0;else{if(t.dts===this.latestDts_&&this.ignoreNextEqualDts_)return this.numSameDts_--,void(this.numSameDts_||(this.ignoreNextEqualDts_=!1));i=xt(t.pts,n),this.captionPackets_=this.captionPackets_.concat(i),this.latestDts_!==t.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=t.dts}},kt.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(e){return"flush"===t?e.flush():e.partialFlush()}),this)},kt.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,e){t.presortIndex=e})),this.captionPackets_.sort((function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},kt.prototype.flush=function(){return this.flushStream("flush")},kt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},kt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},kt.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},kt.prototype.setsChannel1Active=function(t){return 4096===(30720&t.ccData)},kt.prototype.setsChannel2Active=function(t){return 6144===(30720&t.ccData)},kt.prototype.setsTextOrXDSActive=function(t){return 256===(28928&t.ccData)||4138===(30974&t.ccData)||6186===(30974&t.ccData)},kt.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var Ct={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Pt=function(t){return 32<=t&&t<=127||160<=t&&t<=255},Lt=function(t){this.windowNum=t,this.reset()};Lt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Lt.prototype.getText=function(){return this.rows.join("\n")},Lt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Lt.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"===typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Lt.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},Lt.prototype.addText=function(t){this.rows[this.rowIdx]+=t},Lt.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var It=function(t){this.serviceNum=t,this.text="",this.currentWindow=new Lt(-1),this.windows=[]};It.prototype.init=function(t,e){this.startPts=t;for(var n=0;n<8;n++)this.windows[n]=new Lt(n),"function"===typeof e&&(this.windows[n].beforeRowOverflow=e)},It.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]};var At=function t(){t.prototype.init.call(this);var e=this;this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(e.new708Packet(),e.add708Bytes(t)):(null===e.current708Packet&&e.new708Packet(),e.add708Bytes(t))}};At.prototype=new B,At.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},At.prototype.add708Bytes=function(t){var e=t.ccData,n=e>>>8,i=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(n),this.current708Packet.data.push(i)},At.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,n=null,i=null,r=0,o=e[r++];for(t.seq=o>>6,t.sizeCode=63&o;r<e.length;r++)i=31&(o=e[r++]),7===(n=o>>5)&&i>0&&(n=o=e[r++]),this.pushServiceBlock(n,r,i),i>0&&(r+=i-1)},At.prototype.pushServiceBlock=function(t,e,n){var i,r=e,o=this.current708Packet.data,a=this.services[t];for(a||(a=this.initService(t,r));r<e+n&&r<o.length;r++)i=o[r],Pt(i)?r=this.handleText(r,a):16===i?r=this.extendedCommands(r,a):128<=i&&i<=135?r=this.setCurrentWindow(r,a):152<=i&&i<=159?r=this.defineWindow(r,a):136===i?r=this.clearWindows(r,a):140===i?r=this.deleteWindows(r,a):137===i?r=this.displayWindows(r,a):138===i?r=this.hideWindows(r,a):139===i?r=this.toggleWindows(r,a):151===i?r=this.setWindowAttributes(r,a):144===i?r=this.setPenAttributes(r,a):145===i?r=this.setPenColor(r,a):146===i?r=this.setPenLocation(r,a):143===i?a=this.reset(r,a):8===i?a.currentWindow.backspace():12===i?a.currentWindow.clearText():13===i?a.currentWindow.pendingNewLine=!0:14===i?a.currentWindow.clearText():141===i&&r++},At.prototype.extendedCommands=function(t,e){var n=this.current708Packet.data[++t];return Pt(n)&&(t=this.handleText(t,e,!0)),t},At.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},At.prototype.initService=function(t,e){var n=this;return this.services[t]=new It(t),this.services[t].init(this.getPts(e),(function(e){n.flushDisplayed(e,n.services[t])})),this.services[t]},At.prototype.handleText=function(t,e,n){var i=function(t){var e=Ct[t]||t;return 4096&t&&t===e?"":String.fromCharCode(e)}((n?4096:0)|this.current708Packet.data[t]),r=e.currentWindow;return r.pendingNewLine&&!r.isEmpty()&&r.newLine(this.getPts(t)),r.pendingNewLine=!1,r.addText(i),t},At.prototype.setCurrentWindow=function(t,e){var n=7&this.current708Packet.data[t];return e.setCurrentWindow(n),t},At.prototype.defineWindow=function(t,e){var n=this.current708Packet.data,i=n[t],r=7&i;e.setCurrentWindow(r);var o=e.currentWindow;return i=n[++t],o.visible=(32&i)>>5,o.rowLock=(16&i)>>4,o.columnLock=(8&i)>>3,o.priority=7&i,i=n[++t],o.relativePositioning=(128&i)>>7,o.anchorVertical=127&i,i=n[++t],o.anchorHorizontal=i,i=n[++t],o.anchorPoint=(240&i)>>4,o.rowCount=15&i,i=n[++t],o.columnCount=63&i,i=n[++t],o.windowStyle=(56&i)>>3,o.penStyle=7&i,o.virtualRowCount=o.rowCount+1,t},At.prototype.setWindowAttributes=function(t,e){var n=this.current708Packet.data,i=n[t],r=e.currentWindow.winAttr;return i=n[++t],r.fillOpacity=(192&i)>>6,r.fillRed=(48&i)>>4,r.fillGreen=(12&i)>>2,r.fillBlue=3&i,i=n[++t],r.borderType=(192&i)>>6,r.borderRed=(48&i)>>4,r.borderGreen=(12&i)>>2,r.borderBlue=3&i,i=n[++t],r.borderType+=(128&i)>>5,r.wordWrap=(64&i)>>6,r.printDirection=(48&i)>>4,r.scrollDirection=(12&i)>>2,r.justify=3&i,i=n[++t],r.effectSpeed=(240&i)>>4,r.effectDirection=(12&i)>>2,r.displayEffect=3&i,t},At.prototype.flushDisplayed=function(t,e){for(var n=[],i=0;i<8;i++)e.windows[i].visible&&!e.windows[i].isEmpty()&&n.push(e.windows[i].getText());e.endPts=t,e.text=n.join("\n\n"),this.pushCaption(e),e.startPts=t},At.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},At.prototype.displayWindows=function(t,e){var n=this.current708Packet.data[++t],i=this.getPts(t);this.flushDisplayed(i,e);for(var r=0;r<8;r++)n&1<<r&&(e.windows[r].visible=1);return t},At.prototype.hideWindows=function(t,e){var n=this.current708Packet.data[++t],i=this.getPts(t);this.flushDisplayed(i,e);for(var r=0;r<8;r++)n&1<<r&&(e.windows[r].visible=0);return t},At.prototype.toggleWindows=function(t,e){var n=this.current708Packet.data[++t],i=this.getPts(t);this.flushDisplayed(i,e);for(var r=0;r<8;r++)n&1<<r&&(e.windows[r].visible^=1);return t},At.prototype.clearWindows=function(t,e){var n=this.current708Packet.data[++t],i=this.getPts(t);this.flushDisplayed(i,e);for(var r=0;r<8;r++)n&1<<r&&e.windows[r].clearText();return t},At.prototype.deleteWindows=function(t,e){var n=this.current708Packet.data[++t],i=this.getPts(t);this.flushDisplayed(i,e);for(var r=0;r<8;r++)n&1<<r&&e.windows[r].reset();return t},At.prototype.setPenAttributes=function(t,e){var n=this.current708Packet.data,i=n[t],r=e.currentWindow.penAttr;return i=n[++t],r.textTag=(240&i)>>4,r.offset=(12&i)>>2,r.penSize=3&i,i=n[++t],r.italics=(128&i)>>7,r.underline=(64&i)>>6,r.edgeType=(56&i)>>3,r.fontStyle=7&i,t},At.prototype.setPenColor=function(t,e){var n=this.current708Packet.data,i=n[t],r=e.currentWindow.penColor;return i=n[++t],r.fgOpacity=(192&i)>>6,r.fgRed=(48&i)>>4,r.fgGreen=(12&i)>>2,r.fgBlue=3&i,i=n[++t],r.bgOpacity=(192&i)>>6,r.bgRed=(48&i)>>4,r.bgGreen=(12&i)>>2,r.bgBlue=3&i,i=n[++t],r.edgeRed=(48&i)>>4,r.edgeGreen=(12&i)>>2,r.edgeBlue=3&i,t},At.prototype.setPenLocation=function(t,e){var n=this.current708Packet.data,i=n[t],r=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,i=n[++t],r.row=15&i,i=n[++t],r.column=63&i,t},At.prototype.reset=function(t,e){var n=this.getPts(t);return this.flushDisplayed(n,e),this.initService(e.serviceNum,t)};var Mt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ot=function(t){return null===t?"":(t=Mt[t]||t,String.fromCharCode(t))},Rt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Dt=function(){for(var t=[],e=15;e--;)t.push("");return t},Nt=function t(e,n){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=n||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,n,i,r,o;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096===(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),i=e>>>8,r=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),n=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=n,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=Dt();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Dt();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=Dt()),this.mode_="paintOn",this.startPts_=t.pts;else if(this.isSpecialCharacter(i,r))o=Ot((i=(3&i)<<8)|r),this[this.mode_](t.pts,o),this.column_++;else if(this.isExtCharacter(i,r))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),o=Ot((i=(3&i)<<8)|r),this[this.mode_](t.pts,o),this.column_++;else if(this.isMidRowCode(i,r))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14===(14&r)&&this.addFormatting(t.pts,["i"]),1===(1&r)&&this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(i,r))this.column_+=3&r;else if(this.isPAC(i,r)){var a=Rt.indexOf(7968&e);"rollUp"===this.mode_&&(a-this.rollUpRows_+1<0&&(a=this.rollUpRows_-1),this.setRollUp(t.pts,a)),a!==this.row_&&(this.clearFormatting(t.pts),this.row_=a),1&r&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16===(16&e)&&(this.column_=4*((14&e)>>1)),this.isColorPAC(r)&&14===(14&r)&&this.addFormatting(t.pts,["i"])}else this.isNormalChar(i)&&(0===r&&(r=null),o=Ot(i),o+=Ot(r),this[this.mode_](t.pts,o),this.column_+=o.length)}else this.lastControlCode_=null}};Nt.prototype=new B,Nt.prototype.flushDisplayed=function(t){var e=this.displayed_.map((function(t,e){try{return t.trim()}catch(n){return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+e+"."}),""}}),this).join("\n").replace(/^\n+|\n+$/g,"");e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e,stream:this.name_})},Nt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Dt(),this.nonDisplayed_=Dt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Nt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_},Nt.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},Nt.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},Nt.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},Nt.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=33&&e<=35},Nt.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},Nt.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},Nt.prototype.isNormalChar=function(t){return t>=32&&t<=127},Nt.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=Dt(),this.displayed_=Dt()),void 0!==e&&e!==this.row_)for(var n=0;n<this.rollUpRows_;n++)this.displayed_[e-n]=this.displayed_[this.row_-n],this.displayed_[this.row_-n]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Nt.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var n=e.reduce((function(t,e){return t+"<"+e+">"}),"");this[this.mode_](t,n)},Nt.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce((function(t,e){return t+"</"+e+">"}),"");this.formatting_=[],this[this.mode_](t,e)}},Nt.prototype.popOn=function(t,e){var n=this.nonDisplayed_[this.row_];n+=e,this.nonDisplayed_[this.row_]=n},Nt.prototype.rollUp=function(t,e){var n=this.displayed_[this.row_];n+=e,this.displayed_[this.row_]=n},Nt.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Nt.prototype.paintOn=function(t,e){var n=this.displayed_[this.row_];n+=e,this.displayed_[this.row_]=n};var Bt={CaptionStream:kt,Cea608Stream:Nt,Cea708Stream:At},Ut={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},zt="shared",Ft=function(t,e){var n=1;for(t>e&&(n=-1);Math.abs(e-t)>4294967296;)t+=8589934592*n;return t},jt=function t(e){var n,i;t.prototype.init.call(this),this.type_=e||zt,this.push=function(t){this.type_!==zt&&t.type!==this.type_||(void 0===i&&(i=t.dts),t.dts=Ft(t.dts,i),t.pts=Ft(t.pts,i),n=t.dts,this.trigger("data",t))},this.flush=function(){i=n,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){i=void 0,n=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};jt.prototype=new B;var Ht,Zt=jt,Wt=Ft,qt=function(t,e,n){var i,r="";for(i=e;i<n;i++)r+="%"+("00"+t[i].toString(16)).slice(-2);return r},Vt=function(t,e,n){return decodeURIComponent(qt(t,e,n))},Gt=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Yt={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Vt(t.data,1,e),t.value=Vt(t.data,e+1,t.data.length).replace(/\0*$/,"");break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=Vt(t.data,1,e),t.url=Vt(t.data,e+1,t.data.length);break}},PRIV:function(t){var e,n;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=(n=t.data,unescape(qt(n,0,e)));break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};(Ht=function(t){var e,n={descriptor:t&&t.descriptor},i=0,r=[],o=0;if(Ht.prototype.init.call(this),this.dispatchType=Ut.METADATA_STREAM_TYPE.toString(16),n.descriptor)for(e=0;e<n.descriptor.length;e++)this.dispatchType+=("00"+n.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,n,a,s,u;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(o=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(r.push(t),o+=t.data.byteLength,1===r.length&&(i=Gt(t.data.subarray(6,10)),i+=10),!(o<i)){for(e={data:new Uint8Array(i),frames:[],pts:r[0].pts,dts:r[0].dts},u=0;u<i;)e.data.set(r[0].data.subarray(0,i-u),u),u+=r[0].data.byteLength,o-=r[0].data.byteLength,r.shift();n=10,64&e.data[5]&&(n+=4,n+=Gt(e.data.subarray(10,14)),i-=Gt(e.data.subarray(16,20)));do{if((a=Gt(e.data.subarray(n+4,n+8)))<1)return void this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});if((s={id:String.fromCharCode(e.data[n],e.data[n+1],e.data[n+2],e.data[n+3]),data:e.data.subarray(n+10,n+a+10)}).key=s.id,Yt[s.id]&&(Yt[s.id](s),"com.apple.streaming.transportStreamTimestamp"===s.owner)){var l=s.data,c=(1&l[3])<<30|l[4]<<22|l[5]<<14|l[6]<<6|l[7]>>>2;c*=4,c+=3&l[7],s.timeStamp=c,void 0===e.pts&&void 0===e.dts&&(e.pts=s.timeStamp,e.dts=s.timeStamp),this.trigger("timestamp",s)}e.frames.push(s),n+=10,n+=a}while(n<i);this.trigger("data",e)}}}).prototype=new B;var Xt,Kt,Qt,$t=Ht,Jt=Zt,te=188;(Xt=function(){var t=new Uint8Array(te),e=0;Xt.prototype.init.call(this),this.push=function(n){var i,r=0,o=te;for(e?((i=new Uint8Array(n.byteLength+e)).set(t.subarray(0,e)),i.set(n,e),e=0):i=n;o<i.byteLength;)71!==i[r]||71!==i[o]?(r++,o++):(this.trigger("data",i.subarray(r,o)),r+=te,o+=te);r<i.byteLength&&(t.set(i.subarray(r),0),e=i.byteLength-r)},this.flush=function(){e===te&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new B,(Kt=function(){var t,e,n,i;Kt.prototype.init.call(this),i=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,i){var r=0;i.payloadUnitStartIndicator&&(r+=t[r]+1),"pat"===i.type?e(t.subarray(r),i):n(t.subarray(r),i)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],i.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=i.pmtPid},n=function(t,e){var n,r;if(1&t[5]){for(i.programMapTable={video:null,audio:null,"timed-metadata":{}},n=3+((15&t[1])<<8|t[2])-4,r=12+((15&t[10])<<8|t[11]);r<n;){var o=t[r],a=(31&t[r+1])<<8|t[r+2];o===Ut.H264_STREAM_TYPE&&null===i.programMapTable.video?i.programMapTable.video=a:o===Ut.ADTS_STREAM_TYPE&&null===i.programMapTable.audio?i.programMapTable.audio=a:o===Ut.METADATA_STREAM_TYPE&&(i.programMapTable["timed-metadata"][a]=o),r+=5+((15&t[r+3])<<8|t[r+4])}e.programMapTable=i.programMapTable}},this.push=function(e){var n={},i=4;if(n.payloadUnitStartIndicator=!!(64&e[1]),n.pid=31&e[1],n.pid<<=8,n.pid|=e[2],(48&e[3])>>>4>1&&(i+=e[i]+1),0===n.pid)n.type="pat",t(e.subarray(i),n),this.trigger("data",n);else if(n.pid===this.pmtPid)for(n.type="pmt",t(e.subarray(i),n),this.trigger("data",n);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,i,n]):this.processPes_(e,i,n)},this.processPes_=function(t,e,n){n.pid===this.programMapTable.video?n.streamType=Ut.H264_STREAM_TYPE:n.pid===this.programMapTable.audio?n.streamType=Ut.ADTS_STREAM_TYPE:n.streamType=this.programMapTable["timed-metadata"][n.pid],n.type="pes",n.data=t.subarray(e),this.trigger("data",n)}}).prototype=new B,Kt.STREAM_TYPES={h264:27,adts:15},(Qt=function(){var t,e=this,n=!1,i={data:[],size:0},r={data:[],size:0},o={data:[],size:0},a=function(t,n,i){var r,o,a=new Uint8Array(t.size),s={type:n},u=0,l=0;if(t.data.length&&!(t.size<9)){for(s.trackId=t.data[0].pid,u=0;u<t.data.length;u++)o=t.data[u],a.set(o.data,l),l+=o.data.byteLength;!function(t,e){var n,i=t[0]<<16|t[1]<<8|t[2];e.data=new Uint8Array,1===i&&(e.packetLength=6+(t[4]<<8|t[5]),e.dataAlignmentIndicator=0!==(4&t[6]),192&(n=t[7])&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&n&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8]))}(a,s),r="video"===n||s.packetLength<=t.size,(i||r)&&(t.size=0,t.data.length=0),r&&e.trigger("data",s)}};Qt.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var t,e;switch(s.streamType){case Ut.H264_STREAM_TYPE:t=i,e="video";break;case Ut.ADTS_STREAM_TYPE:t=r,e="audio";break;case Ut.METADATA_STREAM_TYPE:t=o,e="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&a(t,e,!0),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var i={type:"metadata",tracks:[]};null!==(t=s.programMapTable).video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),n=!0,e.trigger("data",i)}})[s.type]()},this.reset=function(){i.size=0,i.data.length=0,r.size=0,r.data.length=0,this.trigger("reset")},this.flushStreams_=function(){a(i,"video"),a(r,"audio"),a(o,"timed-metadata")},this.flush=function(){if(!n&&t){var i={type:"metadata",tracks:[]};null!==t.video&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video,codec:"avc",type:"video"}),null!==t.audio&&i.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio,codec:"adts",type:"audio"}),e.trigger("data",i)}n=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new B;var ee={PAT_PID:0,MP2T_PACKET_LENGTH:te,TransportPacketStream:Xt,TransportParseStream:Kt,ElementaryStream:Qt,TimestampRolloverStream:Jt,CaptionStream:Bt.CaptionStream,Cea608Stream:Bt.Cea608Stream,Cea708Stream:Bt.Cea708Stream,MetadataStream:$t};for(var ne in Ut)Ut.hasOwnProperty(ne)&&(ee[ne]=Ut[ne]);var ie,re=ee,oe=st,ae=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ie=function(t){var e,n=0;ie.prototype.init.call(this),this.skipWarn_=function(t,e){this.trigger("log",{level:"warn",message:"adts skiping bytes "+t+" to "+e+" in frame "+n+" outside syncword"})},this.push=function(i){var r,o,a,s,u,l=0;if(t||(n=0),"audio"===i.type){var c;for(e&&e.length?(a=e,(e=new Uint8Array(a.byteLength+i.data.byteLength)).set(a),e.set(i.data,a.byteLength)):e=i.data;l+7<e.length;)if(255===e[l]&&240===(246&e[l+1])){if("number"===typeof c&&(this.skipWarn_(c,l),c=null),o=2*(1&~e[l+1]),r=(3&e[l+3])<<11|e[l+4]<<3|(224&e[l+5])>>5,u=(s=1024*(1+(3&e[l+6])))*oe/ae[(60&e[l+2])>>>2],e.byteLength-l<r)break;this.trigger("data",{pts:i.pts+n*u,dts:i.dts+n*u,sampleCount:s,audioobjecttype:1+(e[l+2]>>>6&3),channelcount:(1&e[l+2])<<2|(192&e[l+3])>>>6,samplerate:ae[(60&e[l+2])>>>2],samplingfrequencyindex:(60&e[l+2])>>>2,samplesize:16,data:e.subarray(l+7+o,l+r)}),n++,l+=r}else"number"!==typeof c&&(c=l),l++;"number"===typeof c&&(this.skipWarn_(c,l),c=null),e=e.subarray(l)}},this.flush=function(){n=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}}).prototype=new B;var se,ue,le,ce=ie,he=function(t){var e=t.byteLength,n=0,i=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+i},this.loadWord=function(){var r=t.byteLength-e,o=new Uint8Array(4),a=Math.min(4,e);if(0===a)throw new Error("no bytes available");o.set(t.subarray(r,r+a)),n=new DataView(o.buffer).getUint32(0),i=8*a,e-=a},this.skipBits=function(t){var r;i>t?(n<<=t,i-=t):(t-=i,t-=8*(r=Math.floor(t/8)),e-=r,this.loadWord(),n<<=t,i-=t)},this.readBits=function(t){var r=Math.min(i,t),o=n>>>32-r;return(i-=r)>0?n<<=r:e>0&&this.loadWord(),(r=t-r)>0?o<<r|this.readBits(r):o},this.skipLeadingZeros=function(){var t;for(t=0;t<i;++t)if(0!==(n&2147483648>>>t))return n<<=t,i-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};(ue=function(){var t,e,n=0;ue.prototype.init.call(this),this.push=function(i){var r;e?((r=new Uint8Array(e.byteLength+i.data.byteLength)).set(e),r.set(i.data,e.byteLength),e=r):e=i.data;for(var o=e.byteLength;n<o-3;n++)if(1===e[n+2]){t=n+5;break}for(;t<o;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}n+3!==t-2&&this.trigger("data",e.subarray(n+3,t-2));do{t++}while(1!==e[t]&&t<o);n=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(n+3,t-2)),n=t-2,t+=3;break;default:t+=3}e=e.subarray(n),t-=n,n=0},this.reset=function(){e=null,n=0,this.trigger("reset")},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(n+3)),e=null,n=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new B,le={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(se=function(){var t,e,n,i,r,o,a,s=new ue;se.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,n=t.pts,i=t.dts,s.push(t))},s.on("data",(function(a){var s={trackId:e,pts:n,dts:i,data:a,nalUnitTypeCode:31&a[0]};switch(s.nalUnitTypeCode){case 5:s.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:s.nalUnitType="sei_rbsp",s.escapedRBSP=r(a.subarray(1));break;case 7:s.nalUnitType="seq_parameter_set_rbsp",s.escapedRBSP=r(a.subarray(1)),s.config=o(s.escapedRBSP);break;case 8:s.nalUnitType="pic_parameter_set_rbsp";break;case 9:s.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",s)})),s.on("done",(function(){t.trigger("done")})),s.on("partialdone",(function(){t.trigger("partialdone")})),s.on("reset",(function(){t.trigger("reset")})),s.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){s.flush()},this.partialFlush=function(){s.partialFlush()},this.reset=function(){s.reset()},this.endTimeline=function(){s.endTimeline()},a=function(t,e){var n,i=8,r=8;for(n=0;n<t;n++)0!==r&&(r=(i+e.readExpGolomb()+256)%256),i=0===r?i:r},r=function(t){for(var e,n,i=t.byteLength,r=[],o=1;o<i-2;)0===t[o]&&0===t[o+1]&&3===t[o+2]?(r.push(o+2),o+=2):o++;if(0===r.length)return t;e=i-r.length,n=new Uint8Array(e);var a=0;for(o=0;o<e;a++,o++)a===r[0]&&(a++,r.shift()),n[o]=t[a];return n},o=function(t){var e,n,i,r,o,s,u,l,c,h,d,p,f=0,m=0,g=0,_=0,v=[1,1];if(n=(e=new he(t)).readUnsignedByte(),r=e.readUnsignedByte(),i=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),le[n]&&(3===(o=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(d=3!==o?8:12,p=0;p<d;p++)e.readBoolean()&&a(p<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(s=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===s)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),u=e.readUnsignedExpGolomb(),p=0;p<u;p++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),l=e.readUnsignedExpGolomb(),c=e.readUnsignedExpGolomb(),0===(h=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),_=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:v=[1,1];break;case 2:v=[12,11];break;case 3:v=[10,11];break;case 4:v=[16,11];break;case 5:v=[40,33];break;case 6:v=[24,11];break;case 7:v=[20,11];break;case 8:v=[32,11];break;case 9:v=[80,33];break;case 10:v=[18,11];break;case 11:v=[15,11];break;case 12:v=[64,33];break;case 13:v=[160,99];break;case 14:v=[4,3];break;case 15:v=[3,2];break;case 16:v=[2,1];break;case 255:v=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}v&&(v[0],v[1])}return{profileIdc:n,levelIdc:i,profileCompatibility:r,width:16*(l+1)-2*f-2*m,height:(2-h)*(c+1)*16-2*g-2*_,sarRatio:v}}}).prototype=new B;var de,pe={H264Stream:se,NalByteStream:ue},fe=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],me=function(t,e){var n=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return n=n>=0?n:0,(16&t[e+5])>>4?n+20:n+10},ge=function t(e,n){return e.length-n<10||e[n]!=="I".charCodeAt(0)||e[n+1]!=="D".charCodeAt(0)||e[n+2]!=="3".charCodeAt(0)?n:t(e,n+=me(e,n))},_e=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},ve={isLikelyAacData:function(t){var e=ge(t,0);return t.length>=e+2&&255===(255&t[e])&&240===(240&t[e+1])&&16===(22&t[e+1])},parseId3TagSize:me,parseAdtsSize:function(t,e){var n=(224&t[e+5])>>5,i=t[e+4]<<3;return 6144&t[e+3]|i|n},parseType:function(t,e){return t[e]==="I".charCodeAt(0)&&t[e+1]==="D".charCodeAt(0)&&t[e+2]==="3".charCodeAt(0)?"timed-metadata":!0&t[e]&&240===(240&t[e+1])?"audio":null},parseSampleRate:function(t){for(var e=0;e+5<t.length;){if(255===t[e]&&240===(246&t[e+1]))return fe[(60&t[e+2])>>>2];e++}return null},parseAacTimestamp:function(t){var e,n,i;e=10,64&t[5]&&(e+=4,e+=_e(t.subarray(10,14)));do{if((n=_e(t.subarray(e+4,e+8)))<1)return null;if("PRIV"===String.fromCharCode(t[e],t[e+1],t[e+2],t[e+3])){i=t.subarray(e+10,e+n+10);for(var r=0;r<i.byteLength;r++)if(0===i[r]){if("com.apple.streaming.transportStreamTimestamp"===unescape(function(t,e,n){var i,r="";for(i=e;i<n;i++)r+="%"+("00"+t[i].toString(16)).slice(-2);return r}(i,0,r))){var o=i.subarray(r+1),a=(1&o[3])<<30|o[4]<<22|o[5]<<14|o[6]<<6|o[7]>>>2;return a*=4,a+=3&o[7]}break}}e+=10,e+=n}while(e<t.byteLength);return null}};(de=function(){var t=new Uint8Array,e=0;de.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(n){var i,r,o,a,s=0,u=0;for(t.length?(a=t.length,(t=new Uint8Array(n.byteLength+a)).set(t.subarray(0,a)),t.set(n,a)):t=n;t.length-u>=3;)if(t[u]!=="I".charCodeAt(0)||t[u+1]!=="D".charCodeAt(0)||t[u+2]!=="3".charCodeAt(0))if(255!==(255&t[u])||240!==(240&t[u+1]))u++;else{if(t.length-u<7)break;if(u+(s=ve.parseAdtsSize(t,u))>t.length)break;o={type:"audio",data:t.subarray(u,u+s),pts:e,dts:e},this.trigger("data",o),u+=s}else{if(t.length-u<10)break;if(u+(s=ve.parseId3TagSize(t,u))>t.length)break;r={type:"timed-metadata",data:t.subarray(u,u+s)},this.trigger("data",r),u+=s}i=t.length-u,t=i>0?t.subarray(u):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new B;var ye,be,Te,we,xe=de,Se=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],Ee=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],ke=pe.H264Stream,Ce=ve.isLikelyAacData,Pe=st,Le=function(t,e){var n;if(t.length!==e.length)return!1;for(n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},Ie=function(t,e,n,i,r,o){return{start:{dts:t,pts:t+(n-e)},end:{dts:t+(i-e),pts:t+(r-n)},prependedContentDuration:o,baseMediaDecodeTime:t}};(be=function(t,e){var n,i=[],r=0,o=0,a=1/0;n=(e=e||{}).firstSequenceNumber||0,be.prototype.init.call(this),this.push=function(e){bt(t,e),t&&Se.forEach((function(n){t[n]=e[n]})),i.push(e)},this.setEarliestDts=function(t){r=t},this.setVideoBaseMediaDecodeTime=function(t){a=t},this.setAudioAppendStart=function(t){o=t},this.flush=function(){var s,u,l,c,h,d,p;0!==i.length?(s=ft(i,t,r),t.baseMediaDecodeTime=yt(t,e.keepOriginalTimestamps),p=pt(t,s,o,a),t.samples=mt(s),l=G(gt(s)),i=[],u=Y(n,[t]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),vt(t),h=Math.ceil(1024*Pe/t.samplerate),s.length&&(d=s.length*h,this.trigger("segmentTimingInfo",Ie(ct(t.baseMediaDecodeTime,t.samplerate),s[0].dts,s[0].pts,s[0].dts+d,s[0].pts+d,p||0)),this.trigger("timingInfo",{start:s[0].pts,end:s[0].pts+d})),this.trigger("data",{track:t,boxes:c}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){vt(t),i=[],this.trigger("reset")}}).prototype=new B,(ye=function(t,e){var n,i,r,o=[],a=[];n=(e=e||{}).firstSequenceNumber||0,ye.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){bt(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||i||(i=e.config,t.sps=[e.data],Ee.forEach((function(e){t[e]=i[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.pps=[e.data]),o.push(e)},this.flush=function(){for(var i,r,s,u,l,c,h,d,p=0;o.length&&"access_unit_delimiter_rbsp"!==o[0].nalUnitType;)o.shift();if(0===o.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(i=Q(o),(s=$(i))[0][0].keyFrame||((r=this.getGopForFusion_(o[0],t))?(p=r.duration,s.unshift(r),s.byteLength+=r.byteLength,s.nalCount+=r.nalCount,s.pts=r.pts,s.dts=r.dts,s.duration+=r.duration):s=J(s)),a.length){var f;if(!(f=e.alignGopsAtEnd?this.alignGopsAtEnd_(s):this.alignGopsAtStart_(s)))return this.gopCache_.unshift({gop:s.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");vt(t),s=f}bt(t,s),t.samples=tt(s),l=G(et(s)),t.baseMediaDecodeTime=yt(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",s.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),h=s[0],d=s[s.length-1],this.trigger("segmentTimingInfo",Ie(t.baseMediaDecodeTime,h.dts,h.pts,d.dts+d.duration,d.pts+d.duration,p)),this.trigger("timingInfo",{start:s[0].pts,end:s[s.length-1].pts+s[s.length-1].duration}),this.gopCache_.unshift({gop:s.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),o=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),u=Y(n,[t]),c=new Uint8Array(u.byteLength+l.byteLength),n++,c.set(u),c.set(l,u.byteLength),this.trigger("data",{track:t,boxes:c}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),o=[],this.gopCache_.length=0,a.length=0,this.trigger("reset")},this.resetStream_=function(){vt(t),i=void 0,r=void 0},this.getGopForFusion_=function(e){var n,i,r,o,a,s=1/0;for(a=0;a<this.gopCache_.length;a++)r=(o=this.gopCache_[a]).gop,t.pps&&Le(t.pps[0],o.pps[0])&&t.sps&&Le(t.sps[0],o.sps[0])&&(r.dts<t.timelineStartInfo.dts||(n=e.dts-r.dts-r.duration)>=-1e4&&n<=45e3&&(!i||s>n)&&(i=o,s=n));return i?i.gop:null},this.alignGopsAtStart_=function(t){var e,n,i,r,o,s,u,l;for(o=t.byteLength,s=t.nalCount,u=t.duration,e=n=0;e<a.length&&n<t.length&&(i=a[e],r=t[n],i.pts!==r.pts);)r.pts>i.pts?e++:(n++,o-=r.byteLength,s-=r.nalCount,u-=r.duration);return 0===n?t:n===t.length?null:((l=t.slice(n)).byteLength=o,l.duration=u,l.nalCount=s,l.pts=l[0].pts,l.dts=l[0].dts,l)},this.alignGopsAtEnd_=function(t){var e,n,i,r,o,s,u;for(e=a.length-1,n=t.length-1,o=null,s=!1;e>=0&&n>=0;){if(i=a[e],r=t[n],i.pts===r.pts){s=!0;break}i.pts>r.pts?e--:(e===a.length-1&&(o=n),n--)}if(!s&&null===o)return null;if(0===(u=s?n:o))return t;var l=t.slice(u),c=l.reduce((function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return l.byteLength=c.byteLength,l.duration=c.duration,l.nalCount=c.nalCount,l.pts=l[0].pts,l.dts=l[0].dts,l},this.alignGopsWith=function(t){a=t}}).prototype=new B,(we=function(t,e){this.numberOfTracks=0,this.metadataStream=e,"undefined"!==typeof(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"===typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,we.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}}).prototype=new B,we.prototype.flush=function(t){var e,n,i,r,o=0,a={captions:[],captionStreams:{},metadata:[],info:{}},s=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(s=this.videoTrack.timelineStartInfo.pts,Ee.forEach((function(t){a.info[t]=this.videoTrack[t]}),this)):this.audioTrack&&(s=this.audioTrack.timelineStartInfo.pts,Se.forEach((function(t){a.info[t]=this.audioTrack[t]}),this)),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?a.type=this.pendingTracks[0].type:a.type="combined",this.emittedTracks+=this.pendingTracks.length,i=X(this.pendingTracks),a.initSegment=new Uint8Array(i.byteLength),a.initSegment.set(i),a.data=new Uint8Array(this.pendingBytes),r=0;r<this.pendingBoxes.length;r++)a.data.set(this.pendingBoxes[r],o),o+=this.pendingBoxes[r].byteLength;for(r=0;r<this.pendingCaptions.length;r++)(e=this.pendingCaptions[r]).startTime=dt(e.startPts,s,this.keepOriginalTimestamps),e.endTime=dt(e.endPts,s,this.keepOriginalTimestamps),a.captionStreams[e.stream]=!0,a.captions.push(e);for(r=0;r<this.pendingMetadata.length;r++)(n=this.pendingMetadata[r]).cueTime=dt(n.pts,s,this.keepOriginalTimestamps),a.metadata.push(n);for(a.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",a),r=0;r<a.captions.length;r++)e=a.captions[r],this.trigger("caption",e);for(r=0;r<a.metadata.length;r++)n=a.metadata[r],this.trigger("id3Frame",n)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},we.prototype.setRemux=function(t){this.remuxTracks=t},(Te=function(t){var e,n,i=this,r=!0;Te.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="aac",r.metadataStream=new re.MetadataStream,r.aacStream=new xe,r.audioTimestampRolloverStream=new re.TimestampRolloverStream("audio"),r.timedMetadataTimestampRolloverStream=new re.TimestampRolloverStream("timed-metadata"),r.adtsStream=new ce,r.coalesceStream=new we(t,r.metadataStream),r.headOfPipeline=r.aacStream,r.aacStream.pipe(r.audioTimestampRolloverStream).pipe(r.adtsStream),r.aacStream.pipe(r.timedMetadataTimestampRolloverStream).pipe(r.metadataStream).pipe(r.coalesceStream),r.metadataStream.on("timestamp",(function(t){r.aacStream.setTimestamp(t.timeStamp)})),r.aacStream.on("data",(function(o){"timed-metadata"!==o.type&&"audio"!==o.type||r.audioSegmentStream||(n=n||{timelineStartInfo:{baseMediaDecodeTime:i.baseMediaDecodeTime},codec:"adts",type:"audio"},r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new be(n,t),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!e}))})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setupTsPipeline=function(){var r={};this.transmuxPipeline_=r,r.type="ts",r.metadataStream=new re.MetadataStream,r.packetStream=new re.TransportPacketStream,r.parseStream=new re.TransportParseStream,r.elementaryStream=new re.ElementaryStream,r.timestampRolloverStream=new re.TimestampRolloverStream,r.adtsStream=new ce,r.h264Stream=new ke,r.captionStream=new re.CaptionStream(t),r.coalesceStream=new we(t,r.metadataStream),r.headOfPipeline=r.packetStream,r.packetStream.pipe(r.parseStream).pipe(r.elementaryStream).pipe(r.timestampRolloverStream),r.timestampRolloverStream.pipe(r.h264Stream),r.timestampRolloverStream.pipe(r.adtsStream),r.timestampRolloverStream.pipe(r.metadataStream).pipe(r.coalesceStream),r.h264Stream.pipe(r.captionStream).pipe(r.coalesceStream),r.elementaryStream.on("data",(function(o){var a;if("metadata"===o.type){for(a=o.tracks.length;a--;)e||"video"!==o.tracks[a].type?n||"audio"!==o.tracks[a].type||((n=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime):(e=o.tracks[a]).timelineStartInfo.baseMediaDecodeTime=i.baseMediaDecodeTime;e&&!r.videoSegmentStream&&(r.coalesceStream.numberOfTracks++,r.videoSegmentStream=new ye(e,t),r.videoSegmentStream.on("log",i.getLogTrigger_("videoSegmentStream")),r.videoSegmentStream.on("timelineStartInfo",(function(e){n&&!t.keepOriginalTimestamps&&(n.timelineStartInfo=e,r.audioSegmentStream.setEarliestDts(e.dts-i.baseMediaDecodeTime))})),r.videoSegmentStream.on("processedGopsInfo",i.trigger.bind(i,"gopInfo")),r.videoSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"videoSegmentTimingInfo")),r.videoSegmentStream.on("baseMediaDecodeTime",(function(t){n&&r.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),r.videoSegmentStream.on("timingInfo",i.trigger.bind(i,"videoTimingInfo")),r.h264Stream.pipe(r.videoSegmentStream).pipe(r.coalesceStream)),n&&!r.audioSegmentStream&&(r.coalesceStream.numberOfTracks++,r.audioSegmentStream=new be(n,t),r.audioSegmentStream.on("log",i.getLogTrigger_("audioSegmentStream")),r.audioSegmentStream.on("timingInfo",i.trigger.bind(i,"audioTimingInfo")),r.audioSegmentStream.on("segmentTimingInfo",i.trigger.bind(i,"audioSegmentTimingInfo")),r.adtsStream.pipe(r.audioSegmentStream).pipe(r.coalesceStream)),i.trigger("trackinfo",{hasAudio:!!n,hasVideo:!!e})}})),r.coalesceStream.on("data",this.trigger.bind(this,"data")),r.coalesceStream.on("id3Frame",(function(t){t.dispatchType=r.metadataStream.dispatchType,i.trigger("id3Frame",t)})),r.coalesceStream.on("caption",this.trigger.bind(this,"caption")),r.coalesceStream.on("done",this.trigger.bind(this,"done"))},this.setBaseMediaDecodeTime=function(i){var r=this.transmuxPipeline_;t.keepOriginalTimestamps||(this.baseMediaDecodeTime=i),n&&(n.timelineStartInfo.dts=void 0,n.timelineStartInfo.pts=void 0,vt(n),r.audioTimestampRolloverStream&&r.audioTimestampRolloverStream.discontinuity()),e&&(r.videoSegmentStream&&(r.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,vt(e),r.captionStream.reset()),r.timestampRolloverStream&&r.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(t){n&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(t)},this.setRemux=function(e){var n=this.transmuxPipeline_;t.remux=e,n&&n.coalesceStream&&n.coalesceStream.setRemux(e)},this.alignGopsWith=function(t){e&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var e=this;return function(n){n.stream=t,e.trigger("log",n)}},this.push=function(t){if(r){var e=Ce(t);if(e&&"aac"!==this.transmuxPipeline_.type?this.setupAacPipeline():e||"ts"===this.transmuxPipeline_.type||this.setupTsPipeline(),this.transmuxPipeline_)for(var n=Object.keys(this.transmuxPipeline_),i=0;i<n.length;i++){var o=n[i];"headOfPipeline"!==o&&this.transmuxPipeline_[o].on&&this.transmuxPipeline_[o].on("log",this.getLogTrigger_(o))}r=!1}this.transmuxPipeline_.headOfPipeline.push(t)},this.flush=function(){r=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}}).prototype=new B;var Ae,Me,Oe,Re={Transmuxer:Te,VideoSegmentStream:ye,AudioSegmentStream:be,AUDIO_PROPERTIES:Se,VIDEO_PROPERTIES:Ee,generateSegmentTimingInfo:Ie},De=function(t){return t>>>0},Ne=function(t){var e="";return e+=String.fromCharCode(t[0]),e+=String.fromCharCode(t[1]),e+=String.fromCharCode(t[2]),e+=String.fromCharCode(t[3])},Be=De,Ue=function t(e,n){var i,r,o,a,s,u=[];if(!n.length)return null;for(i=0;i<e.byteLength;)r=Be(e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3]),o=Ne(e.subarray(i+4,i+8)),a=r>1?i+r:e.byteLength,o===n[0]&&(1===n.length?u.push(e.subarray(i+8,a)):(s=t(e.subarray(i+8,a),n.slice(1))).length&&(u=u.concat(s))),i=a;return u},ze=De,Fe=function(t){var e={version:t[0],flags:new Uint8Array(t.subarray(1,4)),baseMediaDecodeTime:ze(t[4]<<24|t[5]<<16|t[6]<<8|t[7])};return 1===e.version&&(e.baseMediaDecodeTime*=Math.pow(2,32),e.baseMediaDecodeTime+=ze(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),e},je=function(t){return{isLeading:(12&t[0])>>>2,dependsOn:3&t[0],isDependedOn:(192&t[1])>>>6,hasRedundancy:(48&t[1])>>>4,paddingValue:(14&t[1])>>>1,isNonSyncSample:1&t[1],degradationPriority:t[2]<<8|t[3]}},He=function(t){var e,n={version:t[0],flags:new Uint8Array(t.subarray(1,4)),samples:[]},i=new DataView(t.buffer,t.byteOffset,t.byteLength),r=1&n.flags[2],o=4&n.flags[2],a=1&n.flags[1],s=2&n.flags[1],u=4&n.flags[1],l=8&n.flags[1],c=i.getUint32(4),h=8;for(r&&(n.dataOffset=i.getInt32(h),h+=4),o&&c&&(e={flags:je(t.subarray(h,h+4))},h+=4,a&&(e.duration=i.getUint32(h),h+=4),s&&(e.size=i.getUint32(h),h+=4),l&&(1===n.version?e.compositionTimeOffset=i.getInt32(h):e.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(e),c--);c--;)e={},a&&(e.duration=i.getUint32(h),h+=4),s&&(e.size=i.getUint32(h),h+=4),u&&(e.flags=je(t.subarray(h,h+4)),h+=4),l&&(1===n.version?e.compositionTimeOffset=i.getInt32(h):e.compositionTimeOffset=i.getUint32(h),h+=4),n.samples.push(e);return n},Ze=function(t){var e,n=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),trackId:n.getUint32(4)},r=1&i.flags[2],o=2&i.flags[2],a=8&i.flags[2],s=16&i.flags[2],u=32&i.flags[2],l=65536&i.flags[0],c=131072&i.flags[0];return e=8,r&&(e+=4,i.baseDataOffset=n.getUint32(12),e+=4),o&&(i.sampleDescriptionIndex=n.getUint32(e),e+=4),a&&(i.defaultSampleDuration=n.getUint32(e),e+=4),s&&(i.defaultSampleSize=n.getUint32(e),e+=4),u&&(i.defaultSampleFlags=n.getUint32(e)),l&&(i.durationIsEmpty=!0),!r&&c&&(i.baseDataOffsetIsMoof=!0),i},We=St,qe=Bt.CaptionStream,Ve=function(t,e){for(var n=t,i=0;i<e.length;i++){var r=e[i];if(n<r.size)return r;n-=r.size}return null},Ge=function(t,e){var n=Ue(t,["moof","traf"]),i=Ue(t,["mdat"]),r={},o=[];return i.forEach((function(t,e){var i=n[e];o.push({mdat:t,traf:i})})),o.forEach((function(t){var n,i=t.mdat,o=t.traf,a=Ue(o,["tfhd"]),s=Ze(a[0]),u=s.trackId,l=Ue(o,["tfdt"]),c=l.length>0?Fe(l[0]).baseMediaDecodeTime:0,h=Ue(o,["trun"]);e===u&&h.length>0&&(n=function(t,e,n){var i,r,o,a,s=new DataView(t.buffer,t.byteOffset,t.byteLength),u={logs:[],seiNals:[]};for(r=0;r+4<t.length;r+=o)if(o=s.getUint32(r),r+=4,!(o<=0))switch(31&t[r]){case 6:var l=t.subarray(r+1,r+1+o),c=Ve(r,e);if(i={nalUnitType:"sei_rbsp",size:o,data:l,escapedRBSP:We(l),trackId:n},c)i.pts=c.pts,i.dts=c.dts,a=c;else{if(!a){u.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+r+" for trackId "+n+". See mux.js#223."});break}i.pts=a.pts,i.dts=a.dts}u.seiNals.push(i)}return u}(i,function(t,e,n){var i=e,r=n.defaultSampleDuration||0,o=n.defaultSampleSize||0,a=n.trackId,s=[];return t.forEach((function(t){var e=He(t).samples;e.forEach((function(t){void 0===t.duration&&(t.duration=r),void 0===t.size&&(t.size=o),t.trackId=a,t.dts=i,void 0===t.compositionTimeOffset&&(t.compositionTimeOffset=0),t.pts=i+t.compositionTimeOffset,i+=t.duration})),s=s.concat(e)})),s}(h,c,s),u),r[u]||(r[u]={seiNals:[],logs:[]}),r[u].seiNals=r[u].seiNals.concat(n.seiNals),r[u].logs=r[u].logs.concat(n.logs))})),r},Ye=function(){var t,e,n,i,r,o,a=!1;this.isInitialized=function(){return a},this.init=function(e){t=new qe,a=!0,o=!!e&&e.isPartial,t.on("data",(function(t){t.startTime=t.startPts/i,t.endTime=t.endPts/i,r.captions.push(t),r.captionStreams[t.stream]=!0})),t.on("log",(function(t){r.logs.push(t)}))},this.isNewInit=function(t,e){return!(t&&0===t.length||e&&"object"===typeof e&&0===Object.keys(e).length)&&(n!==t[0]||i!==e[n])},this.parse=function(t,o,a){var s;if(!this.isInitialized())return null;if(!o||!a)return null;if(this.isNewInit(o,a))n=o[0],i=a[n];else if(null===n||!i)return e.push(t),null;for(;e.length>0;){var u=e.shift();this.parse(u,o,a)}return(s=function(t,e,n){if(null===e)return null;var i=Ge(t,e)[e]||{};return{seiNals:i.seiNals,logs:i.logs,timescale:n}}(t,n,i))&&s.logs&&(r.logs=r.logs.concat(s.logs)),null!==s&&s.seiNals?(this.pushNals(s.seiNals),this.flushStream(),r):r.logs.length?{logs:r.logs,captions:[],captionStreams:[]}:null},this.pushNals=function(e){if(!this.isInitialized()||!e||0===e.length)return null;e.forEach((function(e){t.push(e)}))},this.flushStream=function(){if(!this.isInitialized())return null;o?t.partialFlush():t.flush()},this.clearParsedCaptions=function(){r.captions=[],r.captionStreams={},r.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;t.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){e=[],n=null,i=null,r?this.clearParsedCaptions():r={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Xe=De,Ke=function(t){return("00"+t.toString(16)).slice(-2)};Ae=function(t,e){var n,i,r;return n=Ue(e,["moof","traf"]),i=[].concat.apply([],n.map((function(e){return Ue(e,["tfhd"]).map((function(n){var i,r,o;return i=Xe(n[4]<<24|n[5]<<16|n[6]<<8|n[7]),r=t[i]||9e4,(o="number"!==typeof(o=Ue(e,["tfdt"]).map((function(t){var e,n;return e=t[0],n=Xe(t[4]<<24|t[5]<<16|t[6]<<8|t[7]),1===e&&(n*=Math.pow(2,32),n+=Xe(t[8]<<24|t[9]<<16|t[10]<<8|t[11])),n}))[0])||isNaN(o)?1/0:o)/r}))}))),r=Math.min.apply(null,i),isFinite(r)?r:0},Me=function(t){var e=Ue(t,["moov","trak"]),n=[];return e.forEach((function(t){var e,i,r={},o=Ue(t,["tkhd"])[0];o&&(i=(e=new DataView(o.buffer,o.byteOffset,o.byteLength)).getUint8(0),r.id=0===i?e.getUint32(12):e.getUint32(20));var a=Ue(t,["mdia","hdlr"])[0];if(a){var s=Ne(a.subarray(8,12));r.type="vide"===s?"video":"soun"===s?"audio":s}var u=Ue(t,["mdia","minf","stbl","stsd"])[0];if(u){var l=u.subarray(8);r.codec=Ne(l.subarray(4,8));var c,h=Ue(l,[r.codec])[0];h&&(/^[a-z]vc[1-9]$/i.test(r.codec)?(c=h.subarray(78),"avcC"===Ne(c.subarray(4,8))&&c.length>11?(r.codec+=".",r.codec+=Ke(c[9]),r.codec+=Ke(c[10]),r.codec+=Ke(c[11])):r.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(r.codec)?(c=h.subarray(28),"esds"===Ne(c.subarray(4,8))&&c.length>20&&0!==c[19]?(r.codec+="."+Ke(c[19]),r.codec+="."+Ke(c[20]>>>2&63).replace(/^0/,"")):r.codec="mp4a.40.2"):r.codec=r.codec.toLowerCase())}var d=Ue(t,["mdia","mdhd"])[0];d&&(r.timescale=Oe(d)),n.push(r)})),n};var Qe=Ae,$e=Me,Je=(Oe=function(t){var e=0===t[0]?12:20;return Xe(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])},function(t){var e=31&t[1];return e<<=8,e|=t[2]}),tn=function(t){return!!(64&t[1])},en=function(t){var e=0;return(48&t[3])>>>4>1&&(e+=t[4]+1),e},nn=function(t){switch(t){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},rn={parseType:function(t,e){var n=Je(t);return 0===n?"pat":n===e?"pmt":e?"pes":null},parsePat:function(t){var e=tn(t),n=4+en(t);return e&&(n+=t[n]+1),(31&t[n+10])<<8|t[n+11]},parsePmt:function(t){var e={},n=tn(t),i=4+en(t);if(n&&(i+=t[i]+1),1&t[i+5]){var r;r=3+((15&t[i+1])<<8|t[i+2])-4;for(var o=12+((15&t[i+10])<<8|t[i+11]);o<r;){var a=i+o;e[(31&t[a+1])<<8|t[a+2]]=t[a],o+=5+((15&t[a+3])<<8|t[a+4])}return e}},parsePayloadUnitStartIndicator:tn,parsePesType:function(t,e){switch(e[Je(t)]){case Ut.H264_STREAM_TYPE:return"video";case Ut.ADTS_STREAM_TYPE:return"audio";case Ut.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},parsePesTime:function(t){if(!tn(t))return null;var e=4+en(t);if(e>=t.byteLength)return null;var n,i=null;return 192&(n=t[e+7])&&((i={}).pts=(14&t[e+9])<<27|(255&t[e+10])<<20|(254&t[e+11])<<12|(255&t[e+12])<<5|(254&t[e+13])>>>3,i.pts*=4,i.pts+=(6&t[e+13])>>>1,i.dts=i.pts,64&n&&(i.dts=(14&t[e+14])<<27|(255&t[e+15])<<20|(254&t[e+16])<<12|(255&t[e+17])<<5|(254&t[e+18])>>>3,i.dts*=4,i.dts+=(6&t[e+18])>>>1)),i},videoPacketContainsKeyFrame:function(t){for(var e=4+en(t),n=t.subarray(e),i=0,r=0,o=!1;r<n.byteLength-3;r++)if(1===n[r+2]){i=r+5;break}for(;i<n.byteLength;)switch(n[i]){case 0:if(0!==n[i-1]){i+=2;break}if(0!==n[i-2]){i++;break}r+3!==i-2&&"slice_layer_without_partitioning_rbsp_idr"===nn(31&n[r+3])&&(o=!0);do{i++}while(1!==n[i]&&i<n.length);r=i-2,i+=3;break;case 1:if(0!==n[i-1]||0!==n[i-2]){i+=3;break}"slice_layer_without_partitioning_rbsp_idr"===nn(31&n[r+3])&&(o=!0),r=i-2,i+=3;break;default:i+=3}return n=n.subarray(r),i-=r,r=0,n&&n.byteLength>3&&"slice_layer_without_partitioning_rbsp_idr"===nn(31&n[r+3])&&(o=!0),o}},on=Wt,an={};an.ts=rn,an.aac=ve;var sn=st,un=188,ln=71,cn=function(t,e,n){for(var i,r,o,a,s=0,u=un,l=!1;u<=t.byteLength;)if(t[s]!==ln||t[u]!==ln&&u!==t.byteLength)s++,u++;else{switch(i=t.subarray(s,u),an.ts.parseType(i,e.pid)){case"pes":r=an.ts.parsePesType(i,e.table),o=an.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&o&&(a=an.ts.parsePesTime(i))&&(a.type="audio",n.audio.push(a),l=!0)}if(l)break;s+=un,u+=un}for(s=(u=t.byteLength)-un,l=!1;s>=0;)if(t[s]!==ln||t[u]!==ln&&u!==t.byteLength)s--,u--;else{switch(i=t.subarray(s,u),an.ts.parseType(i,e.pid)){case"pes":r=an.ts.parsePesType(i,e.table),o=an.ts.parsePayloadUnitStartIndicator(i),"audio"===r&&o&&(a=an.ts.parsePesTime(i))&&(a.type="audio",n.audio.push(a),l=!0)}if(l)break;s-=un,u-=un}},hn=function(t,e,n){for(var i,r,o,a,s,u,l,c=0,h=un,d=!1,p={data:[],size:0};h<t.byteLength;)if(t[c]!==ln||t[h]!==ln)c++,h++;else{switch(i=t.subarray(c,h),an.ts.parseType(i,e.pid)){case"pes":if(r=an.ts.parsePesType(i,e.table),o=an.ts.parsePayloadUnitStartIndicator(i),"video"===r&&(o&&!d&&(a=an.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),d=!0),!n.firstKeyFrame)){if(o&&0!==p.size){for(s=new Uint8Array(p.size),u=0;p.data.length;)l=p.data.shift(),s.set(l,u),u+=l.byteLength;if(an.ts.videoPacketContainsKeyFrame(s)){var f=an.ts.parsePesTime(s);f?(n.firstKeyFrame=f,n.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}p.size=0}p.data.push(i),p.size+=i.byteLength}}if(d&&n.firstKeyFrame)break;c+=un,h+=un}for(c=(h=t.byteLength)-un,d=!1;c>=0;)if(t[c]!==ln||t[h]!==ln)c--,h--;else{switch(i=t.subarray(c,h),an.ts.parseType(i,e.pid)){case"pes":r=an.ts.parsePesType(i,e.table),o=an.ts.parsePayloadUnitStartIndicator(i),"video"===r&&o&&(a=an.ts.parsePesTime(i))&&(a.type="video",n.video.push(a),d=!0)}if(d)break;c-=un,h-=un}},dn=function(t){var e={pid:null,table:null},n={};for(var i in function(t,e){for(var n,i=0,r=un;r<t.byteLength;)if(t[i]!==ln||t[r]!==ln)i++,r++;else{switch(n=t.subarray(i,r),an.ts.parseType(n,e.pid)){case"pat":e.pid=an.ts.parsePat(n);break;case"pmt":var o=an.ts.parsePmt(n);e.table=e.table||{},Object.keys(o).forEach((function(t){e.table[t]=o[t]}))}i+=un,r+=un}}(t,e),e.table){if(e.table.hasOwnProperty(i))switch(e.table[i]){case Ut.H264_STREAM_TYPE:n.video=[],hn(t,e,n),0===n.video.length&&delete n.video;break;case Ut.ADTS_STREAM_TYPE:n.audio=[],cn(t,e,n),0===n.audio.length&&delete n.audio}}return n},pn=function(t,e){var n;return(n=an.aac.isLikelyAacData(t)?function(t){for(var e,n=!1,i=0,r=null,o=null,a=0,s=0;t.length-s>=3;){switch(an.aac.parseType(t,s)){case"timed-metadata":if(t.length-s<10){n=!0;break}if((a=an.aac.parseId3TagSize(t,s))>t.length){n=!0;break}null===o&&(e=t.subarray(s,s+a),o=an.aac.parseAacTimestamp(e)),s+=a;break;case"audio":if(t.length-s<7){n=!0;break}if((a=an.aac.parseAdtsSize(t,s))>t.length){n=!0;break}null===r&&(e=t.subarray(s,s+a),r=an.aac.parseSampleRate(e)),i++,s+=a;break;default:s++}if(n)return null}if(null===r||null===o)return null;var u=sn/r;return{audio:[{type:"audio",dts:o,pts:o},{type:"audio",dts:o+1024*i*u,pts:o+1024*i*u}]}}(t):dn(t))&&(n.audio||n.video)?(function(t,e){if(t.audio&&t.audio.length){var n=e;("undefined"===typeof n||isNaN(n))&&(n=t.audio[0].dts),t.audio.forEach((function(t){t.dts=on(t.dts,n),t.pts=on(t.pts,n),t.dtsTime=t.dts/sn,t.ptsTime=t.pts/sn}))}if(t.video&&t.video.length){var i=e;if(("undefined"===typeof i||isNaN(i))&&(i=t.video[0].dts),t.video.forEach((function(t){t.dts=on(t.dts,i),t.pts=on(t.pts,i),t.dtsTime=t.dts/sn,t.ptsTime=t.pts/sn})),t.firstKeyFrame){var r=t.firstKeyFrame;r.dts=on(r.dts,i),r.pts=on(r.pts,i),r.dtsTime=r.dts/sn,r.ptsTime=r.pts/sn}}}(n,e),n):null},fn=function(){function t(t,e){this.options=e||{},this.self=t,this.init()}var e=t.prototype;return e.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Re.Transmuxer(this.options),function(t,e){e.on("data",(function(e){var n=e.initSegment;e.initSegment={data:n.buffer,byteOffset:n.byteOffset,byteLength:n.byteLength};var i=e.data;e.data=i.buffer,t.postMessage({action:"data",segment:e,byteOffset:i.byteOffset,byteLength:i.byteLength},[e.data])})),e.on("done",(function(e){t.postMessage({action:"done"})})),e.on("gopInfo",(function(e){t.postMessage({action:"gopInfo",gopInfo:e})})),e.on("videoSegmentTimingInfo",(function(e){var n={start:{decode:lt(e.start.dts),presentation:lt(e.start.pts)},end:{decode:lt(e.end.dts),presentation:lt(e.end.pts)},baseMediaDecodeTime:lt(e.baseMediaDecodeTime)};e.prependedContentDuration&&(n.prependedContentDuration=lt(e.prependedContentDuration)),t.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:n})})),e.on("audioSegmentTimingInfo",(function(e){var n={start:{decode:lt(e.start.dts),presentation:lt(e.start.pts)},end:{decode:lt(e.end.dts),presentation:lt(e.end.pts)},baseMediaDecodeTime:lt(e.baseMediaDecodeTime)};e.prependedContentDuration&&(n.prependedContentDuration=lt(e.prependedContentDuration)),t.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:n})})),e.on("id3Frame",(function(e){t.postMessage({action:"id3Frame",id3Frame:e})})),e.on("caption",(function(e){t.postMessage({action:"caption",caption:e})})),e.on("trackinfo",(function(e){t.postMessage({action:"trackinfo",trackInfo:e})})),e.on("audioTimingInfo",(function(e){t.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:lt(e.start),end:lt(e.end)}})})),e.on("videoTimingInfo",(function(e){t.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:lt(e.start),end:lt(e.end)}})})),e.on("log",(function(e){t.postMessage({action:"log",log:e})}))}(this.self,this.transmuxer)},e.pushMp4Captions=function(t){this.captionParser||(this.captionParser=new Ye,this.captionParser.init());var e=new Uint8Array(t.data,t.byteOffset,t.byteLength),n=this.captionParser.parse(e,t.trackIds,t.timescales);this.self.postMessage({action:"mp4Captions",captions:n&&n.captions||[],logs:n&&n.logs||[],data:e.buffer},[e.buffer])},e.probeMp4StartTime=function(t){var e=t.timescales,n=t.data,i=Qe(e,n);this.self.postMessage({action:"probeMp4StartTime",startTime:i,data:n},[n.buffer])},e.probeMp4Tracks=function(t){var e=t.data,n=$e(e);this.self.postMessage({action:"probeMp4Tracks",tracks:n,data:e},[e.buffer])},e.probeTs=function(t){var e=t.data,n=t.baseStartTime,i="number"!==typeof n||isNaN(n)?void 0:n*st,r=pn(e,i),o=null;r&&((o={hasVideo:r.video&&2===r.video.length||!1,hasAudio:r.audio&&2===r.audio.length||!1}).hasVideo&&(o.videoStart=r.video[0].ptsTime),o.hasAudio&&(o.audioStart=r.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:o,data:e},[e.buffer])},e.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},e.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},e.push=function(t){var e=new Uint8Array(t.data,t.byteOffset,t.byteLength);this.transmuxer.push(e)},e.reset=function(){this.transmuxer.reset()},e.setTimestampOffset=function(t){var e=t.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(ut(e)))},e.setAudioAppendStart=function(t){this.transmuxer.setAudioAppendStart(Math.ceil(ut(t.appendStart)))},e.setRemux=function(t){this.transmuxer.setRemux(t.remux)},e.flush=function(t){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},e.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},e.alignGopsWith=function(t){this.transmuxer.alignGopsWith(t.gopsToAlignWith.slice())},t}();self.onmessage=function(t){"init"===t.data.action&&t.data.options?this.messageHandlers=new fn(self,t.data.options):(this.messageHandlers||(this.messageHandlers=new fn(self)),t.data&&t.data.action&&"init"!==t.data.action&&this.messageHandlers[t.data.action]&&this.messageHandlers[t.data.action](t.data))}})))),lu=function(t){var e=t.transmuxer,n=t.bytes,i=t.audioAppendStart,r=t.gopsToAlignWith,o=t.remux,a=t.onData,s=t.onTrackInfo,u=t.onAudioTimingInfo,l=t.onVideoTimingInfo,c=t.onVideoSegmentTimingInfo,h=t.onAudioSegmentTimingInfo,d=t.onId3,p=t.onCaptions,f=t.onDone,m=t.onEndedTimeline,g=t.onTransmuxerLog,_=t.isEndOfTimeline,v={buffer:[]},y=_;if(e.onmessage=function(n){e.currentTransmux===t&&("data"===n.data.action&&function(t,e,n){var i=t.data.segment,r=i.type,o=i.initSegment,a=i.captions,s=i.captionStreams,u=i.metadata,l=i.videoFrameDtsTime,c=i.videoFramePtsTime;e.buffer.push({captions:a,captionStreams:s,metadata:u});var h=t.data.segment.boxes||{data:t.data.segment.data},d={type:r,data:new Uint8Array(h.data,h.data.byteOffset,h.data.byteLength),initSegment:new Uint8Array(o.data,o.byteOffset,o.byteLength)};"undefined"!==typeof l&&(d.videoFrameDtsTime=l),"undefined"!==typeof c&&(d.videoFramePtsTime=c),n(d)}(n,v,a),"trackinfo"===n.data.action&&s(n.data.trackInfo),"gopInfo"===n.data.action&&function(t,e){e.gopInfo=t.data.gopInfo}(n,v),"audioTimingInfo"===n.data.action&&u(n.data.audioTimingInfo),"videoTimingInfo"===n.data.action&&l(n.data.videoTimingInfo),"videoSegmentTimingInfo"===n.data.action&&c(n.data.videoSegmentTimingInfo),"audioSegmentTimingInfo"===n.data.action&&h(n.data.audioSegmentTimingInfo),"id3Frame"===n.data.action&&d([n.data.id3Frame],n.data.id3Frame.dispatchType),"caption"===n.data.action&&p(n.data.caption),"endedtimeline"===n.data.action&&(y=!1,m()),"log"===n.data.action&&g(n.data.log),"transmuxed"===n.data.type&&(y||(e.onmessage=null,function(t){var e=t.transmuxedData,n=t.callback;e.buffer=[],n(e)}({transmuxedData:v,callback:f}),cu(e))))},i&&e.postMessage({action:"setAudioAppendStart",appendStart:i}),Array.isArray(r)&&e.postMessage({action:"alignGopsWith",gopsToAlignWith:r}),"undefined"!==typeof o&&e.postMessage({action:"setRemux",remux:o}),n.byteLength){var b=n instanceof ArrayBuffer?n:n.buffer,T=n instanceof ArrayBuffer?0:n.byteOffset;e.postMessage({action:"push",data:b,byteOffset:T,byteLength:n.byteLength},[b])}_&&e.postMessage({action:"endTimeline"}),e.postMessage({action:"flush"})},cu=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),"function"===typeof t.currentTransmux?t.currentTransmux():lu(t.currentTransmux))},hu=function(t,e){t.postMessage({action:e}),cu(t)},du=function(t,e){if(!e.currentTransmux)return e.currentTransmux=t,void hu(e,t);e.transmuxQueue.push(hu.bind(null,e,t))},pu=function(t){if(!t.transmuxer.currentTransmux)return t.transmuxer.currentTransmux=t,void lu(t);t.transmuxer.transmuxQueue.push(t)},fu=function(t){du("reset",t)},mu=function(t){var e=new uu;e.currentTransmux=null,e.transmuxQueue=[];var n=e.terminate;return e.terminate=function(){return e.currentTransmux=null,e.transmuxQueue.length=0,n.call(e)},e.postMessage({action:"init",options:t}),e},gu=function(t){var e=t.transmuxer,n=t.endAction||t.action,i=t.callback,r=m()({},t,{endAction:null,transmuxer:null,callback:null});if(e.addEventListener("message",(function r(o){o.data.action===n&&(e.removeEventListener("message",r),o.data.data&&(o.data.data=new Uint8Array(o.data.data,t.byteOffset||0,t.byteLength||o.data.data.byteLength),t.data&&(t.data=o.data.data)),i(o.data))})),t.data){var o=t.data instanceof ArrayBuffer;r.byteOffset=o?0:t.data.byteOffset,r.byteLength=t.data.byteLength;var a=[o?t.data:t.data.buffer];e.postMessage(r,a)}else e.postMessage(r)},_u=2,vu=-101,yu=-102,bu=function(t){t.forEach((function(t){t.abort()}))},Tu=function(t,e){return e.timedout?{status:e.status,message:"HLS request timed-out at URL: "+e.uri,code:vu,xhr:e}:e.aborted?{status:e.status,message:"HLS request aborted at URL: "+e.uri,code:yu,xhr:e}:t?{status:e.status,message:"HLS request errored at URL: "+e.uri,code:_u,xhr:e}:"arraybuffer"===e.responseType&&0===e.response.byteLength?{status:e.status,message:"Empty HLS response at URL: "+e.uri,code:_u,xhr:e}:null},wu=function(t,e,n){return function(i,r){var o=r.response,a=Tu(i,r);if(a)return n(a,t);if(16!==o.byteLength)return n({status:r.status,message:"Invalid HLS key at URL: "+r.uri,code:_u,xhr:r},t);for(var s=new DataView(o),u=new Uint32Array([s.getUint32(0),s.getUint32(4),s.getUint32(8),s.getUint32(12)]),l=0;l<e.length;l++)e[l].bytes=u;return n(null,t)}},xu=function(t,e){var n=Pe(t.map.bytes);if("mp4"!==n){var i=t.map.resolvedUri||t.map.uri;return e({internal:!0,message:"Found unsupported "+(n||"unknown")+" container for initialization segment at URL: "+i,code:_u})}gu({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(n){var i=n.tracks,r=n.data;return t.map.bytes=r,i.forEach((function(e){t.map.tracks=t.map.tracks||{},t.map.tracks[e.type]||(t.map.tracks[e.type]=e,"number"===typeof e.id&&e.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[e.id]=e.timescale))})),e(null)}})},Su=function(t){var e=t.segment,n=t.finishProcessingFn,i=t.responseType;return function(t,r){var o=Tu(t,r);if(o)return n(o,e);var a="arraybuffer"!==i&&r.responseText?function(t){for(var e=new Uint8Array(new ArrayBuffer(t.length)),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e.buffer}(r.responseText.substring(e.lastReachedChar||0)):r.response;return e.stats=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}}(r),e.key?e.encryptedBytes=new Uint8Array(a):e.bytes=new Uint8Array(a),n(null,e)}},Eu=function(t){var e=t.segment,n=t.bytes,i=t.trackInfoFn,r=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,s=t.id3Fn,u=t.captionsFn,l=t.isEndOfTimeline,c=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog,f=e.map&&e.map.tracks||{},m=Boolean(f.audio&&f.video),g=r.bind(null,e,"audio","start"),_=r.bind(null,e,"audio","end"),v=r.bind(null,e,"video","start"),y=r.bind(null,e,"video","end");gu({action:"probeTs",transmuxer:e.transmuxer,data:n,baseStartTime:e.baseStartTime,callback:function(t){e.bytes=n=t.data;var r=t.result;r&&(i(e,{hasAudio:r.hasAudio,hasVideo:r.hasVideo,isMuxed:m}),i=null,r.hasAudio&&!m&&g(r.audioStart),r.hasVideo&&v(r.videoStart),g=null,v=null),pu({bytes:n,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,remux:m,onData:function(t){t.type="combined"===t.type?"video":t.type,h(e,t)},onTrackInfo:function(t){i&&(m&&(t.isMuxed=!0),i(e,t))},onAudioTimingInfo:function(t){g&&"undefined"!==typeof t.start&&(g(t.start),g=null),_&&"undefined"!==typeof t.end&&_(t.end)},onVideoTimingInfo:function(t){v&&"undefined"!==typeof t.start&&(v(t.start),v=null),y&&"undefined"!==typeof t.end&&y(t.end)},onVideoSegmentTimingInfo:function(t){o(t)},onAudioSegmentTimingInfo:function(t){a(t)},onId3:function(t,n){s(e,t,n)},onCaptions:function(t){u(e,[t])},isEndOfTimeline:l,onEndedTimeline:function(){c()},onTransmuxerLog:p,onDone:function(t){d&&(t.type="combined"===t.type?"video":t.type,d(null,e,t))}})}})},ku=function(t){var e=t.segment,n=t.bytes,i=t.trackInfoFn,r=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,s=t.id3Fn,u=t.captionsFn,l=t.isEndOfTimeline,c=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog,f=new Uint8Array(n);if(function(t){return he(t,["moof"]).length>0}(f)){e.isFmp4=!0;var m=e.map.tracks,g={isFmp4:!0,hasVideo:!!m.video,hasAudio:!!m.audio};m.audio&&m.audio.codec&&"enca"!==m.audio.codec&&(g.audioCodec=m.audio.codec),m.video&&m.video.codec&&"encv"!==m.video.codec&&(g.videoCodec=m.video.codec),m.video&&m.audio&&(g.isMuxed=!0),i(e,g);var _=function(t){h(e,{data:f,type:g.hasAudio&&!g.isMuxed?"audio":"video"}),t&&t.length&&u(e,t),d(null,e,{})};gu({action:"probeMp4StartTime",timescales:e.map.timescales,data:f,transmuxer:e.transmuxer,callback:function(t){var i=t.data,o=t.startTime;n=i.buffer,e.bytes=f=i,g.hasAudio&&!g.isMuxed&&r(e,"audio","start",o),g.hasVideo&&r(e,"video","start",o),m.video&&i.byteLength&&e.transmuxer?gu({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:e.transmuxer,data:f,timescales:e.map.timescales,trackIds:[m.video.id],callback:function(t){n=t.data.buffer,e.bytes=f=t.data,t.logs.forEach((function(t){p(Za.mergeOptions(t,{stream:"mp4CaptionParser"}))})),_(t.captions)}}):_()}})}else if(e.transmuxer){if("undefined"===typeof e.container&&(e.container=Pe(f)),"ts"!==e.container&&"aac"!==e.container)return i(e,{hasAudio:!1,hasVideo:!1}),void d(null,e,{});Eu({segment:e,bytes:n,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p})}else d(null,e,{})},Cu=function(t,e){var n,i=t.id,r=t.key,o=t.encryptedBytes,a=t.decryptionWorker;a.addEventListener("message",(function t(n){if(n.data.source===i){a.removeEventListener("message",t);var r=n.data.decrypted;e(new Uint8Array(r.bytes,r.byteOffset,r.byteLength))}})),n=r.bytes.slice?r.bytes.slice():new Uint32Array(Array.prototype.slice.call(r.bytes)),a.postMessage(Zs({source:i,encrypted:o,key:n,iv:r.iv}),[o.buffer,n.buffer])},Pu=function(t){var e=t.activeXhrs,n=t.decryptionWorker,i=t.trackInfoFn,r=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,s=t.id3Fn,u=t.captionsFn,l=t.isEndOfTimeline,c=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog,f=0,m=!1;return function(t,g){if(!m){if(t)return m=!0,bu(e),d(t,g);if((f+=1)===e.length){var _=function(){if(g.encryptedBytes)return function(t){var e=t.decryptionWorker,n=t.segment,i=t.trackInfoFn,r=t.timingInfoFn,o=t.videoSegmentTimingInfoFn,a=t.audioSegmentTimingInfoFn,s=t.id3Fn,u=t.captionsFn,l=t.isEndOfTimeline,c=t.endedTimelineFn,h=t.dataFn,d=t.doneFn,p=t.onTransmuxerLog;Cu({id:n.requestId,key:n.key,encryptedBytes:n.encryptedBytes,decryptionWorker:e},(function(t){n.bytes=t,ku({segment:n,bytes:n.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p})}))}({decryptionWorker:n,segment:g,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p});ku({segment:g,bytes:g.bytes,trackInfoFn:i,timingInfoFn:r,videoSegmentTimingInfoFn:o,audioSegmentTimingInfoFn:a,id3Fn:s,captionsFn:u,isEndOfTimeline:l,endedTimelineFn:c,dataFn:h,doneFn:d,onTransmuxerLog:p})};if(g.endOfAllRequests=Date.now(),g.map&&g.map.encryptedBytes&&!g.map.bytes)return Cu({decryptionWorker:n,id:g.requestId+"-init",encryptedBytes:g.map.encryptedBytes,key:g.map.key},(function(t){g.map.bytes=t,xu(g,(function(t){if(t)return bu(e),d(t,g);_()}))}));_()}}}},Lu=function(t){var e=t.segment,n=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(t){if(!t.target.aborted)return e.stats=Za.mergeOptions(e.stats,function(t){var e=t.target,n={bandwidth:1/0,bytesReceived:0,roundTripTime:Date.now()-e.requestTime||0};return n.bytesReceived=t.loaded,n.bandwidth=Math.floor(n.bytesReceived/n.roundTripTime*8*1e3),n}(t)),!e.stats.firstBytesReceivedAt&&e.stats.bytesReceived&&(e.stats.firstBytesReceivedAt=Date.now()),n(t,e)}},Iu=function(t){var e=t.xhr,n=t.xhrOptions,i=t.decryptionWorker,r=t.segment,o=t.abortFn,a=t.progressFn,s=t.trackInfoFn,u=t.timingInfoFn,l=t.videoSegmentTimingInfoFn,c=t.audioSegmentTimingInfoFn,h=t.id3Fn,d=t.captionsFn,p=t.isEndOfTimeline,f=t.endedTimelineFn,m=t.dataFn,g=t.doneFn,_=t.onTransmuxerLog,v=[],y=Pu({activeXhrs:v,decryptionWorker:i,trackInfoFn:s,timingInfoFn:u,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m,doneFn:g,onTransmuxerLog:_});if(r.key&&!r.key.bytes){var b=[r.key];r.map&&!r.map.bytes&&r.map.key&&r.map.key.resolvedUri===r.key.resolvedUri&&b.push(r.map.key);var T=e(Za.mergeOptions(n,{uri:r.key.resolvedUri,responseType:"arraybuffer"}),wu(r,b,y));v.push(T)}if(r.map&&!r.map.bytes){if(r.map.key&&(!r.key||r.key.resolvedUri!==r.map.key.resolvedUri)){var w=e(Za.mergeOptions(n,{uri:r.map.key.resolvedUri,responseType:"arraybuffer"}),wu(r,[r.map.key],y));v.push(w)}var x=e(Za.mergeOptions(n,{uri:r.map.resolvedUri,responseType:"arraybuffer",headers:zs(r.map)}),function(t){var e=t.segment,n=t.finishProcessingFn;return function(t,i){var r=Tu(t,i);if(r)return n(r,e);var o=new Uint8Array(i.response);if(e.map.key)return e.map.encryptedBytes=o,n(null,e);e.map.bytes=o,xu(e,(function(t){if(t)return t.xhr=i,t.status=i.status,n(t,e);n(null,e)}))}}({segment:r,finishProcessingFn:y}));v.push(x)}var S=Za.mergeOptions(n,{uri:r.part&&r.part.resolvedUri||r.resolvedUri,responseType:"arraybuffer",headers:zs(r)}),E=e(S,Su({segment:r,finishProcessingFn:y,responseType:S.responseType}));E.addEventListener("progress",Lu({segment:r,progressFn:a,trackInfoFn:s,timingInfoFn:u,videoSegmentTimingInfoFn:l,audioSegmentTimingInfoFn:c,id3Fn:h,captionsFn:d,isEndOfTimeline:p,endedTimelineFn:f,dataFn:m})),v.push(E);var k={};return v.forEach((function(t){t.addEventListener("loadend",function(t){var e=t.loadendState,n=t.abortFn;return function(t){t.target.aborted&&n&&!e.calledAbortFn&&(n(),e.calledAbortFn=!0)}}({loadendState:k,abortFn:o}))})),function(){return bu(v)}},Au=Ya("CodecUtils"),Mu=function(t,e){var n=e.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&n.AUDIO&&t.mediaGroups.AUDIO[n.AUDIO]},Ou=function(t){var e={};return t.forEach((function(t){var n=t.mediaType,i=t.type,r=t.details;e[n]=e[n]||[],e[n].push(X(""+i+r))})),Object.keys(e).forEach((function(t){if(e[t].length>1)return Au("multiple "+t+" codecs found as attributes: "+e[t].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),void(e[t]=null);e[t]=e[t][0]})),e},Ru=function(t){var e=0;return t.audio&&e++,t.video&&e++,e},Du=function(t,e){var n=e.attributes||{},i=Ou(function(t){var e=t.attributes||{};if(e.CODECS)return K(e.CODECS)}(e)||[]);if(Mu(t,e)&&!i.audio&&!function(t,e){if(!Mu(t,e))return!0;var n=e.attributes||{},i=t.mediaGroups.AUDIO[n.AUDIO];for(var r in i)if(!i[r].uri&&!i[r].playlists)return!0;return!1}(t,e)){var r=Ou(function(t,e){if(!t.mediaGroups.AUDIO||!e)return null;var n=t.mediaGroups.AUDIO[e];if(!n)return null;for(var i in n){var r=n[i];if(r.default&&r.playlists)return K(r.playlists[0].attributes.CODECS)}return null}(t,n.AUDIO)||[]);r.audio&&(i.audio=r.audio)}return i},Nu=Ya("PlaylistSelector"),Bu=function(t){if(t&&t.playlist){var e=t.playlist;return JSON.stringify({id:e.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:e.attributes&&e.attributes.CODECS||""})}},Uu=function(t,e){if(!t)return"";var n=h.a.getComputedStyle(t);return n?n[e]:""},zu=function(t,e){var n=t.slice();t.sort((function(t,i){var r=e(t,i);return 0===r?n.indexOf(t)-n.indexOf(i):r}))},Fu=function(t,e){var n,i;return t.attributes.BANDWIDTH&&(n=t.attributes.BANDWIDTH),n=n||h.a.Number.MAX_VALUE,e.attributes.BANDWIDTH&&(i=e.attributes.BANDWIDTH),n-(i=i||h.a.Number.MAX_VALUE)},ju=function(t,e,n,i,r,o){if(t){var a={bandwidth:e,width:n,height:i,limitRenditionByPlayerDimensions:r},s=t.playlists;bs.isAudioOnly(t)&&(s=o.getAudioTrackPlaylists_(),a.audioOnly=!0);var u=s.map((function(t){var e=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width,n=t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.height;return{bandwidth:t.attributes&&t.attributes.BANDWIDTH||h.a.Number.MAX_VALUE,width:e,height:n,playlist:t}}));zu(u,(function(t,e){return t.bandwidth-e.bandwidth}));var l=(u=u.filter((function(t){return!bs.isIncompatible(t.playlist)}))).filter((function(t){return bs.isEnabled(t.playlist)}));l.length||(l=u.filter((function(t){return!bs.isDisabled(t.playlist)})));var c=l.filter((function(t){return t.bandwidth*iu.BANDWIDTH_VARIANCE<e})),d=c[c.length-1],p=c.filter((function(t){return t.bandwidth===d.bandwidth}))[0];if(!1===r){var f=p||l[0]||u[0];if(f&&f.playlist){var m="sortedPlaylistReps";return p&&(m="bandwidthBestRep"),l[0]&&(m="enabledPlaylistReps"),Nu("choosing "+Bu(f)+" using "+m+" with options",a),f.playlist}return Nu("could not choose a playlist with options",a),null}var g=c.filter((function(t){return t.width&&t.height}));zu(g,(function(t,e){return t.width-e.width}));var _=g.filter((function(t){return t.width===n&&t.height===i}));d=_[_.length-1];var v,y,b,T,w=_.filter((function(t){return t.bandwidth===d.bandwidth}))[0];if(w||(y=(v=g.filter((function(t){return t.width>n||t.height>i}))).filter((function(t){return t.width===v[0].width&&t.height===v[0].height})),d=y[y.length-1],b=y.filter((function(t){return t.bandwidth===d.bandwidth}))[0]),o.experimentalLeastPixelDiffSelector){var x=g.map((function(t){return t.pixelDiff=Math.abs(t.width-n)+Math.abs(t.height-i),t}));zu(x,(function(t,e){return t.pixelDiff===e.pixelDiff?e.bandwidth-t.bandwidth:t.pixelDiff-e.pixelDiff})),T=x[0]}var S=T||b||w||p||l[0]||u[0];if(S&&S.playlist){var E="sortedPlaylistReps";return T?E="leastPixelDiffRep":b?E="resolutionPlusOneRep":w?E="resolutionBestRep":p?E="bandwidthBestRep":l[0]&&(E="enabledPlaylistReps"),Nu("choosing "+Bu(S)+" using "+E+" with options",a),S.playlist}return Nu("could not choose a playlist with options",a),null}},Hu=function(){var t=this.useDevicePixelRatio&&h.a.devicePixelRatio||1;return ju(this.playlists.master,this.systemBandwidth,parseInt(Uu(this.tech_.el(),"width"),10)*t,parseInt(Uu(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Zu=function(t){var e=t.inbandTextTracks,n=t.metadataArray,i=t.timestampOffset,r=t.videoDuration;if(n){var o=h.a.WebKitDataCue||h.a.VTTCue,a=e.metadataTrack_;if(a&&(n.forEach((function(t){var e=t.cueTime+i;!("number"!==typeof e||h.a.isNaN(e)||e<0)&&e<1/0&&t.frames.forEach((function(t){var n=new o(e,e,t.value||t.url||t.data||"");n.frame=t,n.value=t,function(t){Object.defineProperties(t.frame,{id:{get:function(){return Za.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return Za.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return Za.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})}(n),a.addCue(n)}))})),a.cues&&a.cues.length)){for(var s=a.cues,u=[],l=0;l<s.length;l++)s[l]&&u.push(s[l]);var c=u.reduce((function(t,e){var n=t[e.startTime]||[];return n.push(e),t[e.startTime]=n,t}),{}),d=Object.keys(c).sort((function(t,e){return Number(t)-Number(e)}));d.forEach((function(t,e){var n=c[t],i=Number(d[e+1])||r;n.forEach((function(t){t.endTime=i}))}))}}},Wu=function(t,e,n){var i,r;if(n&&n.cues)for(i=n.cues.length;i--;)(r=n.cues[i]).startTime>=t&&r.endTime<=e&&n.removeCue(r)},qu=function(t){return"number"===typeof t&&isFinite(t)},Vu=1/60,Gu=function(t){var e=t.startOfSegment,n=t.duration,i=t.segment,r=t.part,o=t.playlist,a=o.mediaSequence,s=o.id,u=o.segments,l=void 0===u?[]:u,c=t.mediaIndex,h=t.partIndex,d=t.timeline,p=l.length-1,f="mediaIndex/partIndex increment";t.getMediaInfoForTime?f="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(f="getSyncSegmentCandidate (isSyncRequest)");var m="number"===typeof h,g=t.segment.uri?"segment":"pre-segment",_=m?as({preloadSegment:i})-1:0;return g+" ["+(a+c)+"/"+(a+p)+"]"+(m?" part ["+h+"/"+_+"]":"")+" segment start/end ["+i.start+" => "+i.end+"]"+(m?" part start/end ["+r.start+" => "+r.end+"]":"")+" startOfSegment ["+e+"] duration ["+n+"] timeline ["+d+"] selected by ["+f+"] playlist ["+s+"]"},Yu=function(t){return t+"TimingInfo"},Xu=function(t){var e=t.timelineChangeController,n=t.currentTimeline,i=t.segmentTimeline,r=t.loaderType,o=t.audioDisabled;if(n===i)return!1;if("audio"===r){var a=e.lastTimelineChange({type:"main"});return!a||a.to!==i}if("main"===r&&o){var s=e.pendingTimelineChange({type:"audio"});return!s||s.to!==i}return!1},Ku=function(t){var e=t.segmentDuration,n=t.maxDuration;return!!e&&Math.round(e)>n+Xa},Qu=function(t,e){if("hls"!==e)return null;var n=function(t,e){var n=t&&"number"===typeof t.start&&"number"===typeof t.end?t.end-t.start:0,i=e&&"number"===typeof e.start&&"number"===typeof e.end?e.end-e.start:0;return Math.max(n,i)}(t.audioTimingInfo,t.videoTimingInfo);if(!n)return null;var i=t.playlist.targetDuration,r=Ku({segmentDuration:n,maxDuration:2*i}),o=Ku({segmentDuration:n,maxDuration:i}),a="Segment with index "+t.mediaIndex+" from playlist "+t.playlist.id+" has a duration of "+n+" when the reported duration is "+t.duration+" and the target duration is "+i+". For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return r||o?{severity:r?"warn":"info",message:a}:null},$u=function(t){function e(e,n){var i;if(i=t.call(this)||this,!e)throw new TypeError("Initialization settings are required");if("function"!==typeof e.currentTime)throw new TypeError("No currentTime getter specified");if(!e.mediaSource)throw new TypeError("No MediaSource specified");return i.bandwidth=e.bandwidth,i.throughput={rate:0,count:0},i.roundTrip=NaN,i.resetStats_(),i.mediaIndex=null,i.partIndex=null,i.hasPlayed_=e.hasPlayed,i.currentTime_=e.currentTime,i.seekable_=e.seekable,i.seeking_=e.seeking,i.duration_=e.duration,i.mediaSource_=e.mediaSource,i.vhs_=e.vhs,i.loaderType_=e.loaderType,i.currentMediaInfo_=void 0,i.startingMediaInfo_=void 0,i.segmentMetadataTrack_=e.segmentMetadataTrack,i.goalBufferLength_=e.goalBufferLength,i.sourceType_=e.sourceType,i.sourceUpdater_=e.sourceUpdater,i.inbandTextTracks_=e.inbandTextTracks,i.state_="INIT",i.timelineChangeController_=e.timelineChangeController,i.shouldSaveSegmentTimingInfo_=!0,i.parse708captions_=e.parse708captions,i.experimentalExactManifestTimings=e.experimentalExactManifestTimings,i.checkBufferTimeout_=null,i.error_=void 0,i.currentTimeline_=-1,i.pendingSegment_=null,i.xhrOptions_=null,i.pendingSegments_=[],i.audioDisabled_=!1,i.isPendingTimestampOffset_=!1,i.gopBuffer_=[],i.timeMapping_=0,i.safeAppend_=Za.browser.IE_VERSION>=11,i.appendInitSegment_={audio:!0,video:!0},i.playlistOfLastInitSegment_={audio:null,video:null},i.callQueue_=[],i.loadQueue_=[],i.metadataQueue_={id3:[],caption:[]},i.waitingOnRemove_=!1,i.quotaExceededErrorRetryTimeout_=null,i.activeInitSegmentId_=null,i.initSegments_={},i.cacheEncryptionKeys_=e.cacheEncryptionKeys,i.keyCache_={},i.decrypter_=e.decrypter,i.syncController_=e.syncController,i.syncPoint_={segmentIndex:0,time:0},i.transmuxer_=i.createTransmuxer_(),i.triggerSyncInfoUpdate_=function(){return i.trigger("syncinfoupdate")},i.syncController_.on("syncinfoupdate",i.triggerSyncInfoUpdate_),i.mediaSource_.addEventListener("sourceopen",(function(){i.isEndOfStream_()||(i.ended_=!1)})),i.fetchAtBuffer_=!1,i.logger_=Ya("SegmentLoader["+i.loaderType_+"]"),Object.defineProperty(_()(i),"state",{get:function(){return this.state_},set:function(t){t!==this.state_&&(this.logger_(this.state_+" -> "+t),this.state_=t,this.trigger("statechange"))}}),i.sourceUpdater_.on("ready",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"main"===i.loaderType_&&i.timelineChangeController_.on("pendingtimelinechange",(function(){i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),"audio"===i.loaderType_&&i.timelineChangeController_.on("timelinechange",(function(){i.hasEnoughInfoToLoad_()&&i.processLoadQueue_(),i.hasEnoughInfoToAppend_()&&i.processCallQueue_()})),i}y()(e,t);var n=e.prototype;return n.createTransmuxer_=function(){return mu({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_})},n.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},n.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&h.a.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},n.setAudio=function(t){this.audioDisabled_=!t,t?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},n.abort=function(){"WAITING"===this.state?(this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()):this.pendingSegment_&&(this.pendingSegment_=null)},n.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,h.a.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},n.checkForAbort_=function(t){return"APPENDING"!==this.state||this.pendingSegment_?!this.pendingSegment_||this.pendingSegment_.requestId!==t:(this.state="READY",!0)},n.error=function(t){return"undefined"!==typeof t&&(this.logger_("error occurred:",t),this.error_=t),this.pendingSegment_=null,this.error_},n.endOfStream=function(){this.ended_=!0,this.transmuxer_&&fu(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},n.buffered_=function(){var t=this.getMediaInfo_();if(!this.sourceUpdater_||!t)return Za.createTimeRanges();if("main"===this.loaderType_){var e=t.hasAudio,n=t.hasVideo,i=t.isMuxed;if(n&&e&&!this.audioDisabled_&&!i)return this.sourceUpdater_.buffered();if(n)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},n.initSegmentForMap=function(t,e){if(void 0===e&&(e=!1),!t)return null;var n=Ws(t),i=this.initSegments_[n];return e&&!i&&t.bytes&&(this.initSegments_[n]=i={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:t.bytes,tracks:t.tracks,timescales:t.timescales}),i||t},n.segmentKey=function(t,e){if(void 0===e&&(e=!1),!t)return null;var n=qs(t),i=this.keyCache_[n];this.cacheEncryptionKeys_&&e&&!i&&t.bytes&&(this.keyCache_[n]=i={resolvedUri:t.resolvedUri,bytes:t.bytes});var r={resolvedUri:(i||t).resolvedUri};return i&&(r.bytes=i.bytes),r},n.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},n.load=function(){if(this.monitorBuffer_(),this.playlist_)return"INIT"===this.state&&this.couldBeginLoading_()?this.init_():void(!this.couldBeginLoading_()||"READY"!==this.state&&"INIT"!==this.state||(this.state="READY"))},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.playlist=function(t,e){if(void 0===e&&(e={}),t){var n=this.playlist_,i=this.pendingSegment_;this.playlist_=t,this.xhrOptions_=e,"INIT"===this.state&&(t.syncInfo={mediaSequence:t.mediaSequence,time:0},"main"===this.loaderType_&&this.syncController_.setDateTimeMappingForStart(t));var r=null;if(n&&(n.id?r=n.id:n.uri&&(r=n.uri)),this.logger_("playlist update ["+r+" => "+(t.id||t.uri)+"]"),this.trigger("syncinfoupdate"),"INIT"===this.state&&this.couldBeginLoading_())return this.init_();if(!n||n.uri!==t.uri)return null!==this.mediaIndex&&this.resyncLoader(),this.currentMediaInfo_=void 0,void this.trigger("playlistupdate");var o=t.mediaSequence-n.mediaSequence;if(this.logger_("live window shift ["+o+"]"),null!==this.mediaIndex)if(this.mediaIndex-=o,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var a=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!a.parts||!a.parts.length||!a.parts[this.partIndex])){var s=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=s}}i&&(i.mediaIndex-=o,i.mediaIndex<0?(i.mediaIndex=null,i.partIndex=null):(i.mediaIndex>=0&&(i.segment=t.segments[i.mediaIndex]),i.partIndex>=0&&i.segment.parts&&(i.part=i.segment.parts[i.partIndex]))),this.syncController_.saveExpiredSegmentInfo(n,t)}},n.pause=function(){this.checkBufferTimeout_&&(h.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},n.paused=function(){return null===this.checkBufferTimeout_},n.resetEverything=function(t){this.ended_=!1,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,t),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"})},n.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},n.resyncLoader=function(){this.transmuxer_&&fu(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},n.remove=function(t,e,n,i){if(void 0===n&&(n=function(){}),void 0===i&&(i=!1),e===1/0&&(e=this.duration_()),e<=t)this.logger_("skipping remove because end ${end} is <= start ${start}");else if(this.sourceUpdater_&&this.getMediaInfo_()){var r=1,o=function(){0===--r&&n()};for(var a in!i&&this.audioDisabled_||(r++,this.sourceUpdater_.removeAudio(t,e,o)),(i||"main"===this.loaderType_)&&(this.gopBuffer_=function(t,e,n,i){for(var r=Math.ceil((e-i)*Le.ONE_SECOND_IN_TS),o=Math.ceil((n-i)*Le.ONE_SECOND_IN_TS),a=t.slice(),s=t.length;s--&&!(t[s].pts<=o););if(-1===s)return a;for(var u=s+1;u--&&!(t[u].pts<=r););return u=Math.max(u,0),a.splice(u,s-u+1),a}(this.gopBuffer_,t,e,this.timeMapping_),r++,this.sourceUpdater_.removeVideo(t,e,o)),this.inbandTextTracks_)Wu(t,e,this.inbandTextTracks_[a]);Wu(t,e,this.segmentMetadataTrack_),o()}else this.logger_("skipping remove because no source updater or starting media info")},n.monitorBuffer_=function(){this.checkBufferTimeout_&&h.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=h.a.setTimeout(this.monitorBufferTick_.bind(this),1)},n.monitorBufferTick_=function(){"READY"===this.state&&this.fillBuffer_(),this.checkBufferTimeout_&&h.a.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=h.a.setTimeout(this.monitorBufferTick_.bind(this),500)},n.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var t=this.chooseNextRequest_();t&&("number"===typeof t.timestampOffset&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline})),this.loadSegment_(t))}},n.isEndOfStream_=function(t,e,n){if(void 0===t&&(t=this.mediaIndex),void 0===e&&(e=this.playlist_),void 0===n&&(n=this.partIndex),!e||!this.mediaSource_)return!1;var i="number"===typeof t&&e.segments[t],r=t+1===e.segments.length,o=!i||!i.parts||n+1===i.parts.length;return e.endList&&"open"===this.mediaSource_.readyState&&r&&o},n.chooseNextRequest_=function(){var t=ns(this.buffered_())||0,e=Math.max(0,t-this.currentTime_()),n=!this.hasPlayed_()&&e>=1,i=e>=this.goalBufferLength_(),r=this.playlist_.segments;if(!r.length||n||i)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var o={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(o.isSyncRequest)o.mediaIndex=function(t,e,n){e=e||[];for(var i=[],r=0,o=0;o<e.length;o++){var a=e[o];if(t===a.timeline&&(i.push(o),(r+=a.duration)>n))return o}return 0===i.length?0:i[i.length-1]}(this.currentTimeline_,r,t);else if(null!==this.mediaIndex){var a=r[this.mediaIndex],s="number"===typeof this.partIndex?this.partIndex:-1;o.startOfSegment=a.end?a.end:t,a.parts&&a.parts[s+1]?(o.mediaIndex=this.mediaIndex,o.partIndex=s+1):o.mediaIndex=this.mediaIndex+1}else{var u=bs.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?t:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),l=u.segmentIndex,c=u.startTime,h=u.partIndex;o.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd":"currentTime",o.mediaIndex=l,o.startOfSegment=c,o.partIndex=h}var d=r[o.mediaIndex],p=d&&"number"===typeof o.partIndex&&d.parts&&d.parts[o.partIndex];if(!d||"number"===typeof o.partIndex&&!p)return null;"number"!==typeof o.partIndex&&d.parts&&(o.partIndex=0);var f=this.mediaSource_&&"ended"===this.mediaSource_.readyState;return o.mediaIndex>=r.length-1&&f&&!this.seeking_()?null:this.generateSegmentInfo_(o)},n.generateSegmentInfo_=function(t){var e=t.playlist,n=t.mediaIndex,i=t.startOfSegment,r=t.isSyncRequest,o=t.partIndex,a=t.forceTimestampOffset,s=t.getMediaInfoForTime,u=e.segments[n],l="number"===typeof o&&u.parts[o],c={requestId:"segment-loader-"+Math.random(),uri:l&&l.resolvedUri||u.resolvedUri,mediaIndex:n,partIndex:l?o:null,isSyncRequest:r,startOfSegment:i,playlist:e,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:u.timeline,duration:l&&l.duration||u.duration,segment:u,part:l,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:s},h="undefined"!==typeof a?a:this.isPendingTimestampOffset_;c.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:u.timeline,currentTimeline:this.currentTimeline_,startOfSegment:i,buffered:this.buffered_(),overrideCheck:h});var d=ns(this.sourceUpdater_.audioBuffered());return"number"===typeof d&&(c.audioAppendStart=d-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(c.gopsToAlignWith=function(t,e,n){if("undefined"===typeof e||null===e||!t.length)return[];var i,r=Math.ceil((e-n+3)*Le.ONE_SECOND_IN_TS);for(i=0;i<t.length&&!(t[i].pts>r);i++);return t.slice(i)}(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),c},n.timestampOffsetForSegment_=function(t){return function(t){var e=t.segmentTimeline,n=t.currentTimeline,i=t.startOfSegment,r=t.buffered;return t.overrideCheck||e!==n?e<n?i:r.length?r.end(r.length-1):i:null}(t)},n.earlyAbortWhenNeeded_=function(t){if(!this.vhs_.tech_.paused()&&this.xhrOptions_.timeout&&this.playlist_.attributes.BANDWIDTH&&!(Date.now()-(t.firstBytesReceivedAt||Date.now())<1e3)){var e=this.currentTime_(),n=t.bandwidth,i=this.pendingSegment_.duration,r=bs.estimateSegmentRequestTime(i,n,this.playlist_,t.bytesReceived),o=function(t,e,n){return void 0===n&&(n=1),((t.length?t.end(t.length-1):0)-e)/n}(this.buffered_(),e,this.vhs_.tech_.playbackRate())-1;if(!(r<=o)){var a=function(t){var e=t.master,n=t.currentTime,i=t.bandwidth,r=t.duration,o=t.segmentDuration,a=t.timeUntilRebuffer,s=t.currentTimeline,u=t.syncController,l=e.playlists.filter((function(t){return!bs.isIncompatible(t)})),c=l.filter(bs.isEnabled);c.length||(c=l.filter((function(t){return!bs.isDisabled(t)})));var h=c.filter(bs.hasAttribute.bind(null,"BANDWIDTH")).map((function(t){var e=u.getSyncPoint(t,r,s,n)?1:2;return{playlist:t,rebufferingImpact:bs.estimateSegmentRequestTime(o,i,t)*e-a}})),d=h.filter((function(t){return t.rebufferingImpact<=0}));return zu(d,(function(t,e){return Fu(e.playlist,t.playlist)})),d.length?d[0]:(zu(h,(function(t,e){return t.rebufferingImpact-e.rebufferingImpact})),h[0]||null)}({master:this.vhs_.playlists.master,currentTime:e,bandwidth:n,duration:this.duration_(),segmentDuration:i,timeUntilRebuffer:o,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(a){var s=r-o-a.rebufferingImpact,u=.5;o<=Xa&&(u=1),!a.playlist||a.playlist.uri===this.playlist_.uri||s<u||(this.bandwidth=a.playlist.attributes.BANDWIDTH*iu.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},n.handleAbort_=function(t){this.logger_("Aborting "+Gu(t)),this.mediaRequestsAborted+=1},n.handleProgress_=function(t,e){this.earlyAbortWhenNeeded_(e.stats),this.checkForAbort_(e.requestId)||this.trigger("progress")},n.handleTrackInfo_=function(t,e){this.earlyAbortWhenNeeded_(t.stats),this.checkForAbort_(t.requestId)||this.checkForIllegalMediaSwitch(e)||(e=e||{},function(t,e){if(!t&&!e||!t&&e||t&&!e)return!1;if(t===e)return!0;var n=Object.keys(t).sort(),i=Object.keys(e).sort();if(n.length!==i.length)return!1;for(var r=0;r<n.length;r++){var o=n[r];if(o!==i[r])return!1;if(t[o]!==e[o])return!1}return!0}(this.currentMediaInfo_,e)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=e,this.currentMediaInfo_=e,this.logger_("trackinfo update",e),this.trigger("trackinfo")),this.checkForAbort_(t.requestId)||(this.pendingSegment_.trackInfo=e,this.hasEnoughInfoToAppend_()&&this.processCallQueue_()))},n.handleTimingInfo_=function(t,e,n,i){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId)){var r=this.pendingSegment_,o=Yu(e);r[o]=r[o]||{},r[o][n]=i,this.logger_("timinginfo: "+e+" - "+n+" - "+i),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},n.handleCaptions_=function(t,e){var n=this;if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(0!==e.length)if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),r={};e.forEach((function(t){r[t.stream]=r[t.stream]||{startTime:1/0,captions:[],endTime:0};var e=r[t.stream];e.startTime=Math.min(e.startTime,t.startTime+i),e.endTime=Math.max(e.endTime,t.endTime+i),e.captions.push(t)})),Object.keys(r).forEach((function(t){var e=r[t],o=e.startTime,a=e.endTime,s=e.captions,u=n.inbandTextTracks_;n.logger_("adding cues from "+o+" -> "+a+" for "+t),function(t,e,n){if(!t[n]){e.trigger({type:"usage",name:"vhs-608"}),e.trigger({type:"usage",name:"hls-608"});var i=n;/^cc708_/.test(n)&&(i="SERVICE"+n.split("_")[1]);var r=e.textTracks().getTrackById(i);if(r)t[n]=r;else{var o=n,a=n,s=!1,u=(e.options_.vhs&&e.options_.vhs.captionServices||{})[i];u&&(o=u.label,a=u.language,s=u.default),t[n]=e.addRemoteTextTrack({kind:"captions",id:i,default:s,label:o,language:a},!1).track}}}(u,n.vhs_.tech_,t),Wu(o,a,u[t]),function(t){var e=t.inbandTextTracks,n=t.captionArray,i=t.timestampOffset;if(n){var r=h.a.WebKitDataCue||h.a.VTTCue;n.forEach((function(t){var n=t.stream;e[n].addCue(new r(t.startTime+i,t.endTime+i,t.text))}))}}({captionArray:s,inbandTextTracks:u,timestampOffset:i})})),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}else this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,t,e));else this.logger_("SegmentLoader received no captions from a caption event")},n.handleId3_=function(t,e,n){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(this.pendingSegment_.hasAppendedData_){var i=null===this.sourceUpdater_.videoTimestampOffset()?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();!function(t,e,n){t.metadataTrack_||(t.metadataTrack_=n.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=e)}(this.inbandTextTracks_,n,this.vhs_.tech_),Zu({inbandTextTracks:this.inbandTextTracks_,metadataArray:e,timestampOffset:i,videoDuration:this.duration_()})}else this.metadataQueue_.id3.push(this.handleId3_.bind(this,t,e,n))},n.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach((function(t){return t()})),this.metadataQueue_.caption.forEach((function(t){return t()})),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},n.processCallQueue_=function(){var t=this.callQueue_;this.callQueue_=[],t.forEach((function(t){return t()}))},n.processLoadQueue_=function(){var t=this.loadQueue_;this.loadQueue_=[],t.forEach((function(t){return t()}))},n.hasEnoughInfoToLoad_=function(){if("audio"!==this.loaderType_)return!0;var t=this.pendingSegment_;return!!t&&(!this.getCurrentMediaInfo_()||!Xu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.getCurrentMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),t&&t.trackInfo||this.currentMediaInfo_},n.getMediaInfo_=function(t){return void 0===t&&(t=this.pendingSegment_),this.getCurrentMediaInfo_(t)||this.startingMediaInfo_},n.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready())return!1;if(this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var t=this.pendingSegment_,e=this.getCurrentMediaInfo_();if(!t||!e)return!1;var n=e.hasAudio,i=e.hasVideo,r=e.isMuxed;return!(i&&!t.videoTimingInfo)&&(!(n&&!this.audioDisabled_&&!r&&!t.audioTimingInfo)&&!Xu({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:t.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},n.handleData_=function(t,e){if(this.earlyAbortWhenNeeded_(t.stats),!this.checkForAbort_(t.requestId))if(!this.callQueue_.length&&this.hasEnoughInfoToAppend_()){var n=this.pendingSegment_;if(this.setTimeMapping_(n.timeline),this.updateMediaSecondsLoaded_(n.segment),"closed"!==this.mediaSource_.readyState){if(t.map&&(t.map=this.initSegmentForMap(t.map,!0),n.segment.map=t.map),t.key&&this.segmentKey(t.key,!0),n.isFmp4=t.isFmp4,n.timingInfo=n.timingInfo||{},n.isFmp4)this.trigger("fmp4"),n.timingInfo.start=n[Yu(e.type)].start;else{var i,r=this.getCurrentMediaInfo_(),o="main"===this.loaderType_&&r&&r.hasVideo;o&&(i=n.videoTimingInfo.start),n.timingInfo.start=this.trueSegmentStart_({currentStart:n.timingInfo.start,playlist:n.playlist,mediaIndex:n.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:o,firstVideoFrameTimeForData:i,videoTimingInfo:n.videoTimingInfo,audioTimingInfo:n.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(n,e.type),this.updateSourceBufferTimestampOffset_(n),n.isSyncRequest){this.updateTimingInfoEnd_(n),this.syncController_.saveSegmentTimingInfo({segmentInfo:n,shouldSaveTimelineMapping:"main"===this.loaderType_});var a=this.chooseNextRequest_();if(a.mediaIndex!==n.mediaIndex||a.partIndex!==n.partIndex)return void this.logger_("sync segment was incorrect, not appending");this.logger_("sync segment was correct, appending")}n.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(n,e)}}else this.callQueue_.push(this.handleData_.bind(this,t,e))},n.updateAppendInitSegmentStatus=function(t,e){"main"!==this.loaderType_||"number"!==typeof t.timestampOffset||t.changedTimestampOffset||(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[e]!==t.playlist&&(this.appendInitSegment_[e]=!0)},n.getInitSegmentAndUpdateState_=function(t){var e=t.type,n=t.initSegment,i=t.map,r=t.playlist;if(i){var o=Ws(i);if(this.activeInitSegmentId_===o)return null;n=this.initSegmentForMap(i,!0).bytes,this.activeInitSegmentId_=o}return n&&this.appendInitSegment_[e]?(this.playlistOfLastInitSegment_[e]=r,this.appendInitSegment_[e]=!1,this.activeInitSegmentId_=null,n):null},n.handleQuotaExceededError_=function(t,e){var n=this,i=t.segmentInfo,r=t.type,o=t.bytes,a=this.sourceUpdater_.audioBuffered(),s=this.sourceUpdater_.videoBuffered();a.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+es(a).join(", ")),s.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+es(s).join(", "));var u=a.length?a.start(0):0,l=a.length?a.end(a.length-1):0,c=s.length?s.start(0):0,d=s.length?s.end(s.length-1):0;if(l-u<=1&&d-c<=1)return this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. Appended byte length: "+o.byteLength+", audio buffer: "+es(a).join(", ")+", video buffer: "+es(s).join(", ")+", "),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),void this.trigger("error");this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:i,type:r,bytes:o}));var p=this.currentTime_()-1;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+p),this.remove(0,p,(function(){n.logger_("On QUOTA_EXCEEDED_ERR, retrying append in 1s"),n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=h.a.setTimeout((function(){n.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),n.quotaExceededErrorRetryTimeout_=null,n.processCallQueue_()}),1e3)}),!0)},n.handleAppendError_=function(t,e){var n=t.segmentInfo,i=t.type,r=t.bytes;e&&(22!==e.code?(this.logger_("Received non QUOTA_EXCEEDED_ERR on append",e),this.error(i+" append of "+r.length+"b failed for segment #"+n.mediaIndex+" in playlist "+n.playlist.id),this.trigger("appenderror")):this.handleQuotaExceededError_({segmentInfo:n,type:i,bytes:r}))},n.appendToSourceBuffer_=function(t){var e=t.segmentInfo,n=t.type,i=t.initSegment,r=t.data,o=t.bytes;if(!o){var a=[r],s=r.byteLength;i&&(a.unshift(i),s+=i.byteLength),o=function(t){var e,n=0;return t.bytes&&(e=new Uint8Array(t.bytes),t.segments.forEach((function(t){e.set(t,n),n+=t.byteLength}))),e}({bytes:s,segments:a})}this.sourceUpdater_.appendBuffer({segmentInfo:e,type:n,bytes:o},this.handleAppendError_.bind(this,{segmentInfo:e,type:n,bytes:o}))},n.handleSegmentTimingInfo_=function(t,e,n){if(this.pendingSegment_&&e===this.pendingSegment_.requestId){var i=this.pendingSegment_.segment,r=t+"TimingInfo";i[r]||(i[r]={}),i[r].transmuxerPrependedSeconds=n.prependedContentDuration||0,i[r].transmuxedPresentationStart=n.start.presentation,i[r].transmuxedDecodeStart=n.start.decode,i[r].transmuxedPresentationEnd=n.end.presentation,i[r].transmuxedDecodeEnd=n.end.decode,i[r].baseMediaDecodeTime=n.baseMediaDecodeTime}},n.appendData_=function(t,e){var n=e.type,i=e.data;if(i&&i.byteLength&&("audio"!==n||!this.audioDisabled_)){var r=this.getInitSegmentAndUpdateState_({type:n,initSegment:e.initSegment,playlist:t.playlist,map:t.isFmp4?t.segment.map:null});this.appendToSourceBuffer_({segmentInfo:t,type:n,initSegment:r,data:i})}},n.loadSegment_=function(t){var e=this;this.state="WAITING",this.pendingSegment_=t,this.trimBackBuffer_(t),"number"===typeof t.timestampOffset&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.hasEnoughInfoToLoad_()?this.updateTransmuxerAndRequestSegment_(t):this.loadQueue_.push((function(){var n=m()({},t,{forceTimestampOffset:!0});m()(t,e.generateSegmentInfo_(n)),e.isPendingTimestampOffset_=!1,e.updateTransmuxerAndRequestSegment_(t)}))},n.updateTransmuxerAndRequestSegment_=function(t){var e=this;this.shouldUpdateTransmuxerTimestampOffset_(t.timestampOffset)&&(this.gopBuffer_.length=0,t.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t.timestampOffset}));var n=this.createSimplifiedSegmentObj_(t),i=this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex),r=null!==this.mediaIndex,o=t.timeline!==this.currentTimeline_&&t.timeline>0,a=i||r&&o;this.logger_("Requesting "+Gu(t)),n.map&&!n.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),t.abortRequests=Iu({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:n,abortFn:this.handleAbort_.bind(this,t),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",t.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",t.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:a,endedTimelineFn:function(){e.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(n){var i=n.message,r=n.level,o=n.stream;e.logger_(Gu(t)+" logged from transmuxer stream "+o+" as a "+r+": "+i)}})},n.trimBackBuffer_=function(t){var e=function(t,e,n){var i=e-iu.BACK_BUFFER_LENGTH;t.length&&(i=Math.max(i,t.start(0)));var r=e-n;return Math.min(r,i)}(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);e>0&&this.remove(0,e)},n.createSimplifiedSegmentObj_=function(t){var e=t.segment,n=t.part,i={resolvedUri:n?n.resolvedUri:e.resolvedUri,byterange:n?n.byterange:e.byterange,requestId:t.requestId,transmuxer:t.transmuxer,audioAppendStart:t.audioAppendStart,gopsToAlignWith:t.gopsToAlignWith,part:t.part},r=t.playlist.segments[t.mediaIndex-1];if(r&&r.timeline===e.timeline&&(r.videoTimingInfo?i.baseStartTime=r.videoTimingInfo.transmuxedDecodeEnd:r.audioTimingInfo&&(i.baseStartTime=r.audioTimingInfo.transmuxedDecodeEnd)),e.key){var o=e.key.iv||new Uint32Array([0,0,0,t.mediaIndex+t.playlist.mediaSequence]);i.key=this.segmentKey(e.key),i.key.iv=o}return e.map&&(i.map=this.initSegmentForMap(e.map)),i},n.saveTransferStats_=function(t){this.mediaRequests+=1,t&&(this.mediaBytesTransferred+=t.bytesReceived,this.mediaTransferDuration+=t.roundTripTime)},n.saveBandwidthRelatedStats_=function(t,e){this.pendingSegment_.byteLength=e.bytesReceived,t<Vu?this.logger_("Ignoring segment's bandwidth because its duration of "+t+" is less than the min to record 0.016666666666666666"):(this.bandwidth=e.bandwidth,this.roundTrip=e.roundTripTime)},n.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate")},n.segmentRequestFinished_=function(t,e,n){if(this.callQueue_.length)this.callQueue_.push(this.segmentRequestFinished_.bind(this,t,e,n));else if(this.saveTransferStats_(e.stats),this.pendingSegment_&&e.requestId===this.pendingSegment_.requestId){if(t){if(this.pendingSegment_=null,this.state="READY",t.code===yu)return;return this.pause(),t.code===vu?void this.handleTimeout_():(this.mediaRequestsErrored+=1,this.error(t),void this.trigger("error"))}var i=this.pendingSegment_;this.saveBandwidthRelatedStats_(i.duration,e.stats),i.endOfAllRequests=e.endOfAllRequests,n.gopInfo&&(this.gopBuffer_=function(t,e,n){if(!e.length)return t;if(n)return e.slice();for(var i=e[0].pts,r=0;r<t.length&&!(t[r].pts>=i);r++);return t.slice(0,r).concat(e)}(this.gopBuffer_,n.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(i)}},n.setTimeMapping_=function(t){var e=this.syncController_.mappingForTimeline(t);null!==e&&(this.timeMapping_=e)},n.updateMediaSecondsLoaded_=function(t){"number"===typeof t.start&&"number"===typeof t.end?this.mediaSecondsLoaded+=t.end-t.start:this.mediaSecondsLoaded+=t.duration},n.shouldUpdateTransmuxerTimestampOffset_=function(t){return null!==t&&("main"===this.loaderType_&&t!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&t!==this.sourceUpdater_.audioTimestampOffset())},n.trueSegmentStart_=function(t){var e=t.currentStart,n=t.playlist,i=t.mediaIndex,r=t.firstVideoFrameTimeForData,o=t.currentVideoTimestampOffset,a=t.useVideoTimingInfo,s=t.videoTimingInfo,u=t.audioTimingInfo;if("undefined"!==typeof e)return e;if(!a)return u.start;var l=n.segments[i-1];return 0!==i&&l&&"undefined"!==typeof l.start&&l.end===r+o?s.start:r},n.waitForAppendsToComplete_=function(t){var e=this.getCurrentMediaInfo_(t);if(!e)return this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),void this.trigger("error");var n=e.hasAudio,i=e.hasVideo,r=e.isMuxed,o="main"===this.loaderType_&&i,a=!this.audioDisabled_&&n&&!r;if(t.waitingOnAppends=0,!t.hasAppendedData_)return t.timingInfo||"number"!==typeof t.timestampOffset||(this.isPendingTimestampOffset_=!0),t.timingInfo={start:0},t.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(t),this.processMetadataQueue_()),void this.checkAppendsDone_(t);o&&t.waitingOnAppends++,a&&t.waitingOnAppends++,o&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,t)),a&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,t))},n.checkAppendsDone_=function(t){this.checkForAbort_(t.requestId)||(t.waitingOnAppends--,0===t.waitingOnAppends&&this.handleAppendsDone_())},n.checkForIllegalMediaSwitch=function(t){var e=function(t,e,n){return"main"===t&&e&&n?n.hasAudio||n.hasVideo?e.hasVideo&&!n.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!e.hasVideo&&n.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null:"Neither audio nor video found in segment.":null}(this.loaderType_,this.getCurrentMediaInfo_(),t);return!!e&&(this.error({message:e,blacklistDuration:1/0}),this.trigger("error"),!0)},n.updateSourceBufferTimestampOffset_=function(t){if(null!==t.timestampOffset&&"number"===typeof t.timingInfo.start&&!t.changedTimestampOffset&&"main"===this.loaderType_){var e=!1;t.timestampOffset-=t.timingInfo.start,t.changedTimestampOffset=!0,t.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(t.timestampOffset),e=!0),t.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(t.timestampOffset),e=!0),e&&this.trigger("timestampoffset")}},n.updateTimingInfoEnd_=function(t){t.timingInfo=t.timingInfo||{};var e=this.getMediaInfo_(),n="main"===this.loaderType_&&e&&e.hasVideo&&t.videoTimingInfo?t.videoTimingInfo:t.audioTimingInfo;n&&(t.timingInfo.end="number"===typeof n.end?n.end:n.start+t.duration)},n.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_)return this.state="READY",void(this.paused()||this.monitorBuffer_());var t=this.pendingSegment_;this.updateTimingInfoEnd_(t),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:t,shouldSaveTimelineMapping:"main"===this.loaderType_});var e=Qu(t,this.sourceType_);if(e&&("warn"===e.severity?Za.log.warn(e.message):this.logger_(e.message)),this.recordThroughput_(t),this.pendingSegment_=null,this.state="READY",!t.isSyncRequest||(this.trigger("syncinfoupdate"),t.hasAppendedData_)){this.logger_("Appended "+Gu(t)),this.addSegmentMetadataCue_(t),this.fetchAtBuffer_=!0,this.currentTimeline_!==t.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:t.timeline}),"main"!==this.loaderType_||this.audioDisabled_||this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:t.timeline})),this.currentTimeline_=t.timeline,this.trigger("syncinfoupdate");var n=t.segment;if(n.end&&this.currentTime_()-n.end>3*t.playlist.targetDuration)this.resetEverything();else null!==this.mediaIndex&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=t.mediaIndex,this.partIndex=t.partIndex,this.isEndOfStream_(t.mediaIndex,t.playlist,t.partIndex)&&this.endOfStream(),this.trigger("appended"),t.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()}else this.logger_("Throwing away un-appended sync request "+Gu(t))},n.recordThroughput_=function(t){if(t.duration<Vu)this.logger_("Ignoring segment's throughput because its duration of "+t.duration+" is less than the min to record 0.016666666666666666");else{var e=this.throughput.rate,n=Date.now()-t.endOfAllRequests+1,i=Math.floor(t.byteLength/n*8*1e3);this.throughput.rate+=(i-e)/++this.throughput.count}},n.addSegmentMetadataCue_=function(t){if(this.segmentMetadataTrack_){var e=t.segment,n=e.start,i=e.end;if(qu(n)&&qu(i)){Wu(n,i,this.segmentMetadataTrack_);var r=h.a.WebKitDataCue||h.a.VTTCue,o={custom:e.custom,dateTimeObject:e.dateTimeObject,dateTimeString:e.dateTimeString,bandwidth:t.playlist.attributes.BANDWIDTH,resolution:t.playlist.attributes.RESOLUTION,codecs:t.playlist.attributes.CODECS,byteLength:t.byteLength,uri:t.uri,timeline:t.timeline,playlist:t.playlist.id,start:n,end:i},a=new r(n,i,JSON.stringify(o));a.value=o,this.segmentMetadataTrack_.addCue(a)}}},e}(Za.EventTarget);function Ju(){}var tl,el=function(t){return"string"!==typeof t?t:t.replace(/./,(function(t){return t.toUpperCase()}))},nl=["video","audio"],il=function(t,e){var n=e[t+"Buffer"];return n&&n.updating||e.queuePending[t]},rl=function t(e,n){if(0!==n.queue.length){var i=0,r=n.queue[i];if("mediaSource"!==r.type){if("mediaSource"!==e&&n.ready()&&"closed"!==n.mediaSource.readyState&&!il(e,n)){if(r.type!==e){if(null===(i=function(t,e){for(var n=0;n<e.length;n++){var i=e[n];if("mediaSource"===i.type)return null;if(i.type===t)return n}return null}(e,n.queue)))return;r=n.queue[i]}return n.queue.splice(i,1),n.queuePending[e]=r,r.action(e,n),r.doneFn?void 0:(n.queuePending[e]=null,void t(e,n))}}else n.updating()||"closed"===n.mediaSource.readyState||(n.queue.shift(),r.action(n),r.doneFn&&r.doneFn(),t("audio",n),t("video",n))}},ol=function(t,e){var n=e[t+"Buffer"],i=el(t);n&&(n.removeEventListener("updateend",e["on"+i+"UpdateEnd_"]),n.removeEventListener("error",e["on"+i+"Error_"]),e.codecs[t]=null,e[t+"Buffer"]=null)},al=function(t,e){return t&&e&&-1!==Array.prototype.indexOf.call(t.sourceBuffers,e)},sl=function(t,e,n){return function(i,r){var o=r[i+"Buffer"];if(al(r.mediaSource,o)){r.logger_("Appending segment "+e.mediaIndex+"'s "+t.length+" bytes to "+i+"Buffer");try{o.appendBuffer(t)}catch(a){r.logger_("Error with code "+a.code+" "+(22===a.code?"(QUOTA_EXCEEDED_ERR) ":"")+"when appending segment "+e.mediaIndex+" to "+i+"Buffer"),r.queuePending[i]=null,n(a)}}}},ul=function(t,e){return function(n,i){var r=i[n+"Buffer"];if(al(i.mediaSource,r)){i.logger_("Removing "+t+" to "+e+" from "+n+"Buffer");try{r.remove(t,e)}catch(o){i.logger_("Remove "+t+" to "+e+" from "+n+"Buffer failed")}}}},ll=function(t){return function(e,n){var i=n[e+"Buffer"];al(n.mediaSource,i)&&(n.logger_("Setting "+e+"timestampOffset to "+t),i.timestampOffset=t)}},cl=function(t){return function(e,n){t()}},hl=function(t){return function(e){if("open"===e.mediaSource.readyState){e.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{e.mediaSource.endOfStream(t)}catch(n){Za.log.warn("Failed to call media source endOfStream",n)}}}},dl=function(t){return function(e){e.logger_("Setting mediaSource duration to "+t);try{e.mediaSource.duration=t}catch(n){Za.log.warn("Failed to set media source duration",n)}}},pl=function(){return function(t,e){if("open"===e.mediaSource.readyState){var n=e[t+"Buffer"];if(al(e.mediaSource,n)){e.logger_("calling abort on "+t+"Buffer");try{n.abort()}catch(i){Za.log.warn("Failed to abort on "+t+"Buffer",i)}}}}},fl=function(t,e){return function(n){var i=el(t),r=$(e);n.logger_("Adding "+t+"Buffer with codec "+e+" to mediaSource");var o=n.mediaSource.addSourceBuffer(r);o.addEventListener("updateend",n["on"+i+"UpdateEnd_"]),o.addEventListener("error",n["on"+i+"Error_"]),n.codecs[t]=e,n[t+"Buffer"]=o}},ml=function(t){return function(e){var n=e[t+"Buffer"];if(ol(t,e),al(e.mediaSource,n)){e.logger_("Removing "+t+"Buffer with codec "+e.codecs[t]+" from mediaSource");try{e.mediaSource.removeSourceBuffer(n)}catch(i){Za.log.warn("Failed to removeSourceBuffer "+t+"Buffer",i)}}}},gl=function(t){return function(e,n){var i=n[e+"Buffer"],r=$(t);al(n.mediaSource,i)&&n.codecs[e]!==t&&(n.logger_("changing "+e+"Buffer codec from "+n.codecs[e]+" to "+t),i.changeType(r),n.codecs[e]=t)}},_l=function(t){var e=t.type,n=t.sourceUpdater,i=t.action,r=t.doneFn,o=t.name;n.queue.push({type:e,action:i,doneFn:r,name:o}),rl(e,n)},vl=function(t,e){return function(n){if(e.queuePending[t]){var i=e.queuePending[t].doneFn;e.queuePending[t]=null,i&&i(e[t+"Error_"])}rl(t,e)}},yl=function(t){function e(e){var n;return(n=t.call(this)||this).mediaSource=e,n.sourceopenListener_=function(){return rl("mediaSource",_()(n))},n.mediaSource.addEventListener("sourceopen",n.sourceopenListener_),n.logger_=Ya("SourceUpdater"),n.audioTimestampOffset_=0,n.videoTimestampOffset_=0,n.queue=[],n.queuePending={audio:null,video:null},n.delayedAudioAppendQueue_=[],n.videoAppendQueued_=!1,n.codecs={},n.onVideoUpdateEnd_=vl("video",_()(n)),n.onAudioUpdateEnd_=vl("audio",_()(n)),n.onVideoError_=function(t){n.videoError_=t},n.onAudioError_=function(t){n.audioError_=t},n.createdSourceBuffers_=!1,n.initializedEme_=!1,n.triggeredReady_=!1,n}y()(e,t);var n=e.prototype;return n.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},n.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},n.hasInitializedAnyEme=function(){return this.initializedEme_},n.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},n.createSourceBuffers=function(t){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(t),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},n.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},n.addSourceBuffer=function(t,e){_l({type:"mediaSource",sourceUpdater:this,action:fl(t,e),name:"addSourceBuffer"})},n.abort=function(t){_l({type:t,sourceUpdater:this,action:pl(t),name:"abort"})},n.removeSourceBuffer=function(t){this.canRemoveSourceBuffer()?_l({type:"mediaSource",sourceUpdater:this,action:ml(t),name:"removeSourceBuffer"}):Za.log.error("removeSourceBuffer is not supported!")},n.canRemoveSourceBuffer=function(){return!Za.browser.IE_VERSION&&!Za.browser.IS_FIREFOX&&h.a.MediaSource&&h.a.MediaSource.prototype&&"function"===typeof h.a.MediaSource.prototype.removeSourceBuffer},e.canChangeType=function(){return h.a.SourceBuffer&&h.a.SourceBuffer.prototype&&"function"===typeof h.a.SourceBuffer.prototype.changeType},n.canChangeType=function(){return this.constructor.canChangeType()},n.changeType=function(t,e){this.canChangeType()?_l({type:t,sourceUpdater:this,action:gl(e),name:"changeType"}):Za.log.error("changeType is not supported!")},n.addOrChangeSourceBuffers=function(t){var e=this;if(!t||"object"!==typeof t||0===Object.keys(t).length)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(t).forEach((function(n){var i=t[n];if(!e.hasCreatedSourceBuffers())return e.addSourceBuffer(n,i);e.canChangeType()&&e.changeType(n,i)}))},n.appendBuffer=function(t,e){var n=this,i=t.segmentInfo,r=t.type,o=t.bytes;if(this.processedAppend_=!0,"audio"===r&&this.videoBuffer&&!this.videoAppendQueued_)return this.delayedAudioAppendQueue_.push([t,e]),void this.logger_("delayed audio append of "+o.length+" until video append");if(_l({type:r,sourceUpdater:this,action:sl(o,i||{mediaIndex:-1},e),doneFn:e,name:"appendBuffer"}),"video"===r){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var a=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+a.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,a.forEach((function(t){n.appendBuffer.apply(n,t)}))}},n.audioBuffered=function(){return al(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:Za.createTimeRange()},n.videoBuffered=function(){return al(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:Za.createTimeRange()},n.buffered=function(){var t=al(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,e=al(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return e&&!t?this.audioBuffered():t&&!e?this.videoBuffered():function(t,e){var n=null,i=null,r=0,o=[],a=[];if(!t||!t.length||!e||!e.length)return Za.createTimeRange();for(var s=t.length;s--;)o.push({time:t.start(s),type:"start"}),o.push({time:t.end(s),type:"end"});for(s=e.length;s--;)o.push({time:e.start(s),type:"start"}),o.push({time:e.end(s),type:"end"});for(o.sort((function(t,e){return t.time-e.time})),s=0;s<o.length;s++)"start"===o[s].type?2===++r&&(n=o[s].time):"end"===o[s].type&&1===--r&&(i=o[s].time),null!==n&&null!==i&&(a.push([n,i]),n=null,i=null);return Za.createTimeRanges(a)}(this.audioBuffered(),this.videoBuffered())},n.setDuration=function(t,e){void 0===e&&(e=Ju),_l({type:"mediaSource",sourceUpdater:this,action:dl(t),name:"duration",doneFn:e})},n.endOfStream=function(t,e){void 0===t&&(t=null),void 0===e&&(e=Ju),"string"!==typeof t&&(t=void 0),_l({type:"mediaSource",sourceUpdater:this,action:hl(t),name:"endOfStream",doneFn:e})},n.removeAudio=function(t,e,n){void 0===n&&(n=Ju),this.audioBuffered().length&&0!==this.audioBuffered().end(0)?_l({type:"audio",sourceUpdater:this,action:ul(t,e),doneFn:n,name:"remove"}):n()},n.removeVideo=function(t,e,n){void 0===n&&(n=Ju),this.videoBuffered().length&&0!==this.videoBuffered().end(0)?_l({type:"video",sourceUpdater:this,action:ul(t,e),doneFn:n,name:"remove"}):n()},n.updating=function(){return!(!il("audio",this)&&!il("video",this))},n.audioTimestampOffset=function(t){return"undefined"!==typeof t&&this.audioBuffer&&this.audioTimestampOffset_!==t&&(_l({type:"audio",sourceUpdater:this,action:ll(t),name:"timestampOffset"}),this.audioTimestampOffset_=t),this.audioTimestampOffset_},n.videoTimestampOffset=function(t){return"undefined"!==typeof t&&this.videoBuffer&&this.videoTimestampOffset!==t&&(_l({type:"video",sourceUpdater:this,action:ll(t),name:"timestampOffset"}),this.videoTimestampOffset_=t),this.videoTimestampOffset_},n.audioQueueCallback=function(t){this.audioBuffer&&_l({type:"audio",sourceUpdater:this,action:cl(t),name:"callback"})},n.videoQueueCallback=function(t){this.videoBuffer&&_l({type:"video",sourceUpdater:this,action:cl(t),name:"callback"})},n.dispose=function(){var t=this;this.trigger("dispose"),nl.forEach((function(e){t.abort(e),t.canRemoveSourceBuffer()?t.removeSourceBuffer(e):t[e+"QueueCallback"]((function(){return ol(e,t)}))})),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},e}(Za.EventTarget),bl=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},Tl=new Uint8Array("\n\n".split("").map((function(t){return t.charCodeAt(0)}))),wl=function(t){function e(e,n){var i;return void 0===n&&(n={}),(i=t.call(this,e,n)||this).mediaSource_=null,i.subtitlesTrack_=null,i.loaderType_="subtitle",i.featuresNativeTextTracks_=e.featuresNativeTextTracks,i.shouldSaveSegmentTimingInfo_=!1,i}y()(e,t);var n=e.prototype;return n.createTransmuxer_=function(){return null},n.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return Za.createTimeRanges();var t=this.subtitlesTrack_.cues,e=t[0].startTime,n=t[t.length-1].startTime;return Za.createTimeRanges([[e,n]])},n.initSegmentForMap=function(t,e){if(void 0===e&&(e=!1),!t)return null;var n=Ws(t),i=this.initSegments_[n];if(e&&!i&&t.bytes){var r=Tl.byteLength+t.bytes.byteLength,o=new Uint8Array(r);o.set(t.bytes),o.set(Tl,t.bytes.byteLength),this.initSegments_[n]=i={resolvedUri:t.resolvedUri,byterange:t.byterange,bytes:o}}return i||t},n.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},n.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},n.track=function(t){return"undefined"===typeof t||(this.subtitlesTrack_=t,"INIT"===this.state&&this.couldBeginLoading_()&&this.init_()),this.subtitlesTrack_},n.remove=function(t,e){Wu(t,e,this.subtitlesTrack_)},n.fillBuffer_=function(){var t=this,e=this.chooseNextRequest_();if(e){if(null===this.syncController_.timestampOffsetForTimeline(e.timeline)){return this.syncController_.one("timestampoffset",(function(){t.state="READY",t.paused()||t.monitorBuffer_()})),void(this.state="WAITING_ON_TIMELINE")}this.loadSegment_(e)}},n.timestampOffsetForSegment_=function(){return null},n.chooseNextRequest_=function(){return this.skipEmptySegments_(t.prototype.chooseNextRequest_.call(this))},n.skipEmptySegments_=function(t){for(;t&&t.segment.empty;){if(t.mediaIndex+1>=t.playlist.segments.length){t=null;break}t=this.generateSegmentInfo_({playlist:t.playlist,mediaIndex:t.mediaIndex+1,startOfSegment:t.startOfSegment+t.duration,isSyncRequest:t.isSyncRequest})}return t},n.stopForError=function(t){this.error(t),this.state="READY",this.pause(),this.trigger("error")},n.segmentRequestFinished_=function(t,e,n){var i=this;if(this.subtitlesTrack_){if(this.saveTransferStats_(e.stats),!this.pendingSegment_)return this.state="READY",void(this.mediaRequestsAborted+=1);if(t)return t.code===vu&&this.handleTimeout_(),t.code===yu?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,void this.stopForError(t);var r=this.pendingSegment_;this.saveBandwidthRelatedStats_(r.duration,e.stats),this.state="APPENDING",this.trigger("appending");var o=r.segment;if(o.map&&(o.map.bytes=e.map.bytes),r.bytes=e.bytes,"function"!==typeof h.a.WebVTT&&this.subtitlesTrack_&&this.subtitlesTrack_.tech_){var a,s=function(){i.subtitlesTrack_.tech_.off("vttjsloaded",a),i.stopForError({message:"Error loading vtt.js"})};return a=function(){i.subtitlesTrack_.tech_.off("vttjserror",s),i.segmentRequestFinished_(t,e,n)},this.state="WAITING_ON_VTTJS",this.subtitlesTrack_.tech_.one("vttjsloaded",a),void this.subtitlesTrack_.tech_.one("vttjserror",s)}o.requested=!0;try{this.parseVTTCues_(r)}catch(u){return void this.stopForError({message:u.message})}if(this.updateTimeMapping_(r,this.syncController_.timelines[r.timeline],this.playlist_),r.cues.length?r.timingInfo={start:r.cues[0].startTime,end:r.cues[r.cues.length-1].endTime}:r.timingInfo={start:r.startOfSegment,end:r.startOfSegment+r.duration},r.isSyncRequest)return this.trigger("syncinfoupdate"),this.pendingSegment_=null,void(this.state="READY");r.byteLength=r.bytes.byteLength,this.mediaSecondsLoaded+=o.duration,r.cues.forEach((function(t){i.subtitlesTrack_.addCue(i.featuresNativeTextTracks_?new h.a.VTTCue(t.startTime,t.endTime,t.text):t)})),function(t){var e=t.cues;if(e)for(var n=0;n<e.length;n++){for(var i=[],r=0,o=0;o<e.length;o++)e[n].startTime===e[o].startTime&&e[n].endTime===e[o].endTime&&e[n].text===e[o].text&&++r>1&&i.push(e[o]);i.length&&i.forEach((function(e){return t.removeCue(e)}))}}(this.subtitlesTrack_),this.handleAppendsDone_()}else this.state="READY"},n.handleData_=function(){},n.updateTimingInfoEnd_=function(){},n.parseVTTCues_=function(t){var e,n=!1;"function"===typeof h.a.TextDecoder?e=new h.a.TextDecoder("utf8"):(e=h.a.WebVTT.StringDecoder(),n=!0);var i=new h.a.WebVTT.Parser(h.a,h.a.vttjs,e);if(t.cues=[],t.timestampmap={MPEGTS:0,LOCAL:0},i.oncue=t.cues.push.bind(t.cues),i.ontimestampmap=function(e){t.timestampmap=e},i.onparsingerror=function(t){Za.log.warn("Error encountered when parsing cues: "+t.message)},t.segment.map){var r=t.segment.map.bytes;n&&(r=bl(r)),i.parse(r)}var o=t.bytes;n&&(o=bl(o)),i.parse(o),i.flush()},n.updateTimeMapping_=function(t,e,n){var i=t.segment;if(e)if(t.cues.length){var r=t.timestampmap,o=r.MPEGTS/Le.ONE_SECOND_IN_TS-r.LOCAL+e.mapping;if(t.cues.forEach((function(t){t.startTime+=o,t.endTime+=o})),!n.syncInfo){var a=t.cues[0].startTime,s=t.cues[t.cues.length-1].startTime;n.syncInfo={mediaSequence:n.mediaSequence+t.mediaIndex,time:Math.min(a,s-i.duration)}}}else i.empty=!0},e}($u),xl=function(t,e){for(var n=t.cues,i=0;i<n.length;i++){var r=n[i];if(e>=r.adStartTime&&e<=r.adEndTime)return r}return null},Sl=[{name:"VOD",run:function(t,e,n,i,r){if(n!==1/0){return{time:0,segmentIndex:0,partIndex:null}}return null}},{name:"ProgramDateTime",run:function(t,e,n,i,r){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var o=null,a=null,s=rs(e);r=r||0;for(var u=0;u<s.length;u++){var l=s[e.endList||0===r?u:s.length-(u+1)],c=l.segment,h=t.timelineToDatetimeMappings[c.timeline];if(h&&c.dateTimeObject){var d=c.dateTimeObject.getTime()/1e3+h;if(c.parts&&"number"===typeof l.partIndex)for(var p=0;p<l.partIndex;p++)d+=c.parts[p].duration;var f=Math.abs(r-d);if(null!==a&&(0===f||a<f))break;a=f,o={time:d,segmentIndex:l.segmentIndex,partIndex:l.partIndex}}}return o}},{name:"Segment",run:function(t,e,n,i,r){var o=null,a=null;r=r||0;for(var s=rs(e),u=0;u<s.length;u++){var l=s[e.endList||0===r?u:s.length-(u+1)],c=l.segment,h=l.part&&l.part.start||c&&c.start;if(c.timeline===i&&"undefined"!==typeof h){var d=Math.abs(r-h);if(null!==a&&a<d)break;(!o||null===a||a>=d)&&(a=d,o={time:h,segmentIndex:l.segmentIndex,partIndex:l.partIndex})}}return o}},{name:"Discontinuity",run:function(t,e,n,i,r){var o=null;if(r=r||0,e.discontinuityStarts&&e.discontinuityStarts.length)for(var a=null,s=0;s<e.discontinuityStarts.length;s++){var u=e.discontinuityStarts[s],l=e.discontinuitySequence+s+1,c=t.discontinuities[l];if(c){var h=Math.abs(r-c.time);if(null!==a&&a<h)break;(!o||null===a||a>=h)&&(a=h,o={time:c.time,segmentIndex:u,partIndex:null})}}return o}},{name:"Playlist",run:function(t,e,n,i,r){return e.syncInfo?{time:e.syncInfo.time,segmentIndex:e.syncInfo.mediaSequence-e.mediaSequence,partIndex:null}:null}}],El=function(t){function e(e){var n;return(n=t.call(this)||this).timelines=[],n.discontinuities=[],n.timelineToDatetimeMappings={},n.logger_=Ya("SyncController"),n}y()(e,t);var n=e.prototype;return n.getSyncPoint=function(t,e,n,i){var r=this.runStrategies_(t,e,n,i);return r.length?this.selectSyncPoint_(r,{key:"time",value:i}):null},n.getExpiredTime=function(t,e){if(!t||!t.segments)return null;var n=this.runStrategies_(t,e,t.discontinuitySequence,0);if(!n.length)return null;var i=this.selectSyncPoint_(n,{key:"segmentIndex",value:0});return i.segmentIndex>0&&(i.time*=-1),Math.abs(i.time+cs({defaultDuration:t.targetDuration,durationList:t.segments,startIndex:i.segmentIndex,endIndex:0}))},n.runStrategies_=function(t,e,n,i){for(var r=[],o=0;o<Sl.length;o++){var a=Sl[o],s=a.run(this,t,e,n,i);s&&(s.strategy=a.name,r.push({strategy:a.name,syncPoint:s}))}return r},n.selectSyncPoint_=function(t,e){for(var n=t[0].syncPoint,i=Math.abs(t[0].syncPoint[e.key]-e.value),r=t[0].strategy,o=1;o<t.length;o++){var a=Math.abs(t[o].syncPoint[e.key]-e.value);a<i&&(i=a,n=t[o].syncPoint,r=t[o].strategy)}return this.logger_("syncPoint for ["+e.key+": "+e.value+"] chosen with strategy ["+r+"]: [time:"+n.time+", segmentIndex:"+n.segmentIndex+("number"===typeof n.partIndex?",partIndex:"+n.partIndex:"")+"]"),n},n.saveExpiredSegmentInfo=function(t,e){for(var n=e.mediaSequence-t.mediaSequence-1;n>=0;n--){var i=t.segments[n];if(i&&"undefined"!==typeof i.start){e.syncInfo={mediaSequence:t.mediaSequence+n,time:i.start},this.logger_("playlist refresh sync: [time:"+e.syncInfo.time+", mediaSequence: "+e.syncInfo.mediaSequence+"]"),this.trigger("syncinfoupdate");break}}},n.setDateTimeMappingForStart=function(t){if(this.timelineToDatetimeMappings={},t.segments&&t.segments.length&&t.segments[0].dateTimeObject){var e=t.segments[0],n=e.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[e.timeline]=-n}},n.saveSegmentTimingInfo=function(t){var e=t.segmentInfo,n=t.shouldSaveTimelineMapping,i=this.calculateSegmentTimeMapping_(e,e.timingInfo,n),r=e.segment;i&&(this.saveDiscontinuitySyncInfo_(e),e.playlist.syncInfo||(e.playlist.syncInfo={mediaSequence:e.playlist.mediaSequence+e.mediaIndex,time:r.start}));var o=r.dateTimeObject;r.discontinuity&&n&&o&&(this.timelineToDatetimeMappings[r.timeline]=-o.getTime()/1e3)},n.timestampOffsetForTimeline=function(t){return"undefined"===typeof this.timelines[t]?null:this.timelines[t].time},n.mappingForTimeline=function(t){return"undefined"===typeof this.timelines[t]?null:this.timelines[t].mapping},n.calculateSegmentTimeMapping_=function(t,e,n){var i,r,o=t.segment,a=t.part,s=this.timelines[t.timeline];if("number"===typeof t.timestampOffset)s={time:t.startOfSegment,mapping:t.startOfSegment-e.start},n&&(this.timelines[t.timeline]=s,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+t.timeline+": [time: "+s.time+"] [mapping: "+s.mapping+"]")),i=t.startOfSegment,r=e.end+s.mapping;else{if(!s)return!1;i=e.start+s.mapping,r=e.end+s.mapping}return a&&(a.start=i,a.end=r),(!o.start||i<o.start)&&(o.start=i),o.end=r,!0},n.saveDiscontinuitySyncInfo_=function(t){var e=t.playlist,n=t.segment;if(n.discontinuity)this.discontinuities[n.timeline]={time:n.start,accuracy:0};else if(e.discontinuityStarts&&e.discontinuityStarts.length)for(var i=0;i<e.discontinuityStarts.length;i++){var r=e.discontinuityStarts[i],o=e.discontinuitySequence+i+1,a=r-t.mediaIndex,s=Math.abs(a);if(!this.discontinuities[o]||this.discontinuities[o].accuracy>s){var u=void 0;u=a<0?n.start-cs({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex,endIndex:r}):n.end+cs({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:t.mediaIndex+1,endIndex:r}),this.discontinuities[o]={time:u,accuracy:s}}}},n.dispose=function(){this.trigger("dispose"),this.off()},e}(Za.EventTarget),kl=function(t){function e(){var e;return(e=t.call(this)||this).pendingTimelineChanges_={},e.lastTimelineChanges_={},e}y()(e,t);var n=e.prototype;return n.clearPendingTimelineChange=function(t){this.pendingTimelineChanges_[t]=null,this.trigger("pendingtimelinechange")},n.pendingTimelineChange=function(t){var e=t.type,n=t.from,i=t.to;return"number"===typeof n&&"number"===typeof i&&(this.pendingTimelineChanges_[e]={type:e,from:n,to:i},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[e]},n.lastTimelineChange=function(t){var e=t.type,n=t.from,i=t.to;return"number"===typeof n&&"number"===typeof i&&(this.lastTimelineChanges_[e]={type:e,from:n,to:i},delete this.pendingTimelineChanges_[e],this.trigger("timelinechange")),this.lastTimelineChanges_[e]},n.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},e}(Za.EventTarget),Cl=ou(au(su((function(){function t(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}((void 0===e||null===e)&&n.path)}},n.exports),n.exports}var e=t((function(t){function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}t.exports=function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t},t.exports.default=t.exports,t.exports.__esModule=!0})),n=t((function(t){function e(n,i){return t.exports=e=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},t.exports.default=t.exports,t.exports.__esModule=!0,e(n,i)}t.exports=e,t.exports.default=t.exports,t.exports.__esModule=!0})),i=t((function(t){t.exports=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,n(t,e)},t.exports.default=t.exports,t.exports.__esModule=!0})),r=function(){function t(){this.listeners={}}var e=t.prototype;return e.on=function(t,e){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push(e)},e.off=function(t,e){if(!this.listeners[t])return!1;var n=this.listeners[t].indexOf(e);return this.listeners[t]=this.listeners[t].slice(0),this.listeners[t].splice(n,1),n>-1},e.trigger=function(t){var e=this.listeners[t];if(e)if(2===arguments.length)for(var n=e.length,i=0;i<n;++i)e[i].call(this,arguments[1]);else for(var r=Array.prototype.slice.call(arguments,1),o=e.length,a=0;a<o;++a)e[a].apply(this,r)},e.dispose=function(){this.listeners={}},e.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t}();var o=null,a=function(){function t(t){var e,n,i;o||(o=function(){var t,e,n,i,r,o,a,s,u=[[[],[],[],[],[]],[[],[],[],[],[]]],l=u[0],c=u[1],h=l[4],d=c[4],p=[],f=[];for(t=0;t<256;t++)f[(p[t]=t<<1^283*(t>>7))^t]=t;for(e=n=0;!h[e];e^=i||1,n=f[n]||1)for(o=(o=n^n<<1^n<<2^n<<3^n<<4)>>8^255&o^99,h[e]=o,d[o]=e,s=16843009*p[r=p[i=p[e]]]^65537*r^257*i^16843008*e,a=257*p[o]^16843008*o,t=0;t<4;t++)l[t][e]=a=a<<24^a>>>8,c[t][o]=s=s<<24^s>>>8;for(t=0;t<5;t++)l[t]=l[t].slice(0),c[t]=c[t].slice(0);return u}()),this._tables=[[o[0][0].slice(),o[0][1].slice(),o[0][2].slice(),o[0][3].slice(),o[0][4].slice()],[o[1][0].slice(),o[1][1].slice(),o[1][2].slice(),o[1][3].slice(),o[1][4].slice()]];var r=this._tables[0][4],a=this._tables[1],s=t.length,u=1;if(4!==s&&6!==s&&8!==s)throw new Error("Invalid aes key size");var l=t.slice(0),c=[];for(this._key=[l,c],e=s;e<4*s+28;e++)i=l[e-1],(e%s===0||8===s&&e%s===4)&&(i=r[i>>>24]<<24^r[i>>16&255]<<16^r[i>>8&255]<<8^r[255&i],e%s===0&&(i=i<<8^i>>>24^u<<24,u=u<<1^283*(u>>7))),l[e]=l[e-s]^i;for(n=0;e;n++,e--)i=l[3&n?e:e-4],c[n]=e<=4||n<4?i:a[0][r[i>>>24]]^a[1][r[i>>16&255]]^a[2][r[i>>8&255]]^a[3][r[255&i]]}return t.prototype.decrypt=function(t,e,n,i,r,o){var a,s,u,l,c=this._key[1],h=t^c[0],d=i^c[1],p=n^c[2],f=e^c[3],m=c.length/4-2,g=4,_=this._tables[1],v=_[0],y=_[1],b=_[2],T=_[3],w=_[4];for(l=0;l<m;l++)a=v[h>>>24]^y[d>>16&255]^b[p>>8&255]^T[255&f]^c[g],s=v[d>>>24]^y[p>>16&255]^b[f>>8&255]^T[255&h]^c[g+1],u=v[p>>>24]^y[f>>16&255]^b[h>>8&255]^T[255&d]^c[g+2],f=v[f>>>24]^y[h>>16&255]^b[d>>8&255]^T[255&p]^c[g+3],g+=4,h=a,d=s,p=u;for(l=0;l<4;l++)r[(3&-l)+o]=w[h>>>24]<<24^w[d>>16&255]<<16^w[p>>8&255]<<8^w[255&f]^c[g++],a=h,h=d,d=p,p=f,f=a},t}(),s=function(t){function e(){var e;return(e=t.call(this,r)||this).jobs=[],e.delay=1,e.timeout_=null,e}i(e,t);var n=e.prototype;return n.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},n.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},e}(r),u=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},l=function(){function t(e,n,i,r){var o=t.STEP,a=new Int32Array(e.buffer),l=new Uint8Array(e.byteLength),c=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(a.subarray(c,c+o),n,i,l)),c=o;c<a.length;c+=o)i=new Uint32Array([u(a[c-4]),u(a[c-3]),u(a[c-2]),u(a[c-1])]),this.asyncStream_.push(this.decryptChunk_(a.subarray(c,c+o),n,i,l));this.asyncStream_.push((function(){var t;r(null,(t=l).subarray(0,t.byteLength-t[t.byteLength-1]))}))}return t.prototype.decryptChunk_=function(t,e,n,i){return function(){var r=function(t,e,n){var i,r,o,s,l,c,h,d,p,f=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),m=new a(Array.prototype.slice.call(e)),g=new Uint8Array(t.byteLength),_=new Int32Array(g.buffer);for(i=n[0],r=n[1],o=n[2],s=n[3],p=0;p<f.length;p+=4)l=u(f[p]),c=u(f[p+1]),h=u(f[p+2]),d=u(f[p+3]),m.decrypt(l,c,h,d,_,p),_[p]=u(_[p]^i),_[p+1]=u(_[p+1]^r),_[p+2]=u(_[p+2]^o),_[p+3]=u(_[p+3]^s),i=l,r=c,o=h,s=d;return g}(t,e,n);i.set(r,t.byteOffset)}},e(t,null,[{key:"STEP",get:function(){return 32e3}}]),t}();self.onmessage=function(t){var e=t.data,n=new Uint8Array(e.encrypted.bytes,e.encrypted.byteOffset,e.encrypted.byteLength),i=new Uint32Array(e.key.bytes,e.key.byteOffset,e.key.byteLength/4),r=new Uint32Array(e.iv.bytes,e.iv.byteOffset,e.iv.byteLength/4);new l(n,i,r,(function(t,n){self.postMessage(function(t){var e={};return Object.keys(t).forEach((function(n){var i=t[n];ArrayBuffer.isView(i)?e[n]={bytes:i.buffer,byteOffset:i.byteOffset,byteLength:i.byteLength}:e[n]=i})),e}({source:e.source,decrypted:n}),[n.buffer])}))}})))),Pl=function(t){var e=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(e="main-desc"),e},Ll=function(t,e){t.abort(),t.pause(),e&&e.activePlaylistLoader&&(e.activePlaylistLoader.pause(),e.activePlaylistLoader=null)},Il=function(t,e){e.activePlaylistLoader=t,t.load()},Al={AUDIO:function(t,e){return function(){var n=e.segmentLoaders[t],i=e.mediaTypes[t],r=e.blacklistCurrentPlaylist;Ll(n,i);var o=i.activeTrack(),a=i.activeGroup(),s=(a.filter((function(t){return t.default}))[0]||a[0]).id,u=i.tracks[s];if(o!==u){for(var l in Za.log.warn("Problem encountered loading the alternate audio track.Switching back to default."),i.tracks)i.tracks[l].enabled=i.tracks[l]===u;i.onTrackChanged()}else r({message:"Problem encountered loading the default audio track."})}},SUBTITLES:function(t,e){return function(){var n=e.segmentLoaders[t],i=e.mediaTypes[t];Za.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),Ll(n,i);var r=i.activeTrack();r&&(r.mode="disabled"),i.onTrackChanged()}}},Ml={AUDIO:function(t,e,n){if(e){var i=n.tech,r=n.requestOptions,o=n.segmentLoaders[t];e.on("loadedmetadata",(function(){var t=e.media();o.playlist(t,r),(!i.paused()||t.endList&&"none"!==i.preload())&&o.load()})),e.on("loadedplaylist",(function(){o.playlist(e.media(),r),i.paused()||o.load()})),e.on("error",Al[t](t,n))}},SUBTITLES:function(t,e,n){var i=n.tech,r=n.requestOptions,o=n.segmentLoaders[t],a=n.mediaTypes[t];e.on("loadedmetadata",(function(){var t=e.media();o.playlist(t,r),o.track(a.activeTrack()),(!i.paused()||t.endList&&"none"!==i.preload())&&o.load()})),e.on("loadedplaylist",(function(){o.playlist(e.media(),r),i.paused()||o.load()})),e.on("error",Al[t](t,n))}},Ol={AUDIO:function(t,e){var n=e.vhs,i=e.sourceType,r=e.segmentLoaders[t],o=e.requestOptions,a=e.master.mediaGroups,s=e.mediaTypes[t],u=s.groups,l=s.tracks,c=s.logger_,h=e.masterPlaylistLoader,d=ys(h.master);for(var p in a[t]&&0!==Object.keys(a[t]).length||(a[t]={main:{default:{default:!0}}},d&&(a[t].main.default.playlists=h.master.playlists)),a[t])for(var f in u[p]||(u[p]=[]),a[t][p]){var m=a[t][p][f],g=void 0;if(d?(c("AUDIO group '"+p+"' label '"+f+"' is a master playlist"),m.isMasterPlaylist=!0,g=null):g="vhs-json"===i&&m.playlists?new Rs(m.playlists[0],n,o):m.resolvedUri?new Rs(m.resolvedUri,n,o):m.playlists&&"dash"===i?new nu(m.playlists[0],n,o,h):null,m=Za.mergeOptions({id:f,playlistLoader:g},m),Ml[t](t,m.playlistLoader,e),u[p].push(m),"undefined"===typeof l[f]){var _=new Za.AudioTrack({id:f,kind:Pl(m),enabled:!1,language:m.language,default:m.default,label:f});l[f]=_}}r.on("error",Al[t](t,e))},SUBTITLES:function(t,e){var n=e.tech,i=e.vhs,r=e.sourceType,o=e.segmentLoaders[t],a=e.requestOptions,s=e.master.mediaGroups,u=e.mediaTypes[t],l=u.groups,c=u.tracks,h=e.masterPlaylistLoader;for(var d in s[t])for(var p in l[d]||(l[d]=[]),s[t][d])if(!s[t][d][p].forced){var f=s[t][d][p],m=void 0;if("hls"===r)m=new Rs(f.resolvedUri,i,a);else if("dash"===r){if(!f.playlists.filter((function(t){return t.excludeUntil!==1/0})).length)return;m=new nu(f.playlists[0],i,a,h)}else"vhs-json"===r&&(m=new Rs(f.playlists?f.playlists[0]:f.resolvedUri,i,a));if(f=Za.mergeOptions({id:p,playlistLoader:m},f),Ml[t](t,f.playlistLoader,e),l[d].push(f),"undefined"===typeof c[p]){var g=n.addRemoteTextTrack({id:p,kind:"subtitles",default:f.default&&f.autoselect,language:f.language,label:p},!1).track;c[p]=g}}o.on("error",Al[t](t,e))},"CLOSED-CAPTIONS":function(t,e){var n=e.tech,i=e.master.mediaGroups,r=e.mediaTypes[t],o=r.groups,a=r.tracks;for(var s in i[t])for(var u in o[s]||(o[s]=[]),i[t][s]){var l=i[t][s][u];if(/^(?:CC|SERVICE)/.test(l.instreamId)){var c=n.options_.vhs&&n.options_.vhs.captionServices||{},h={label:u,language:l.language,instreamId:l.instreamId,default:l.default&&l.autoselect};if(c[h.instreamId]&&(h=Za.mergeOptions(h,c[h.instreamId])),void 0===h.default&&delete h.default,o[s].push(Za.mergeOptions({id:u},l)),"undefined"===typeof a[u]){var d=n.addRemoteTextTrack({id:h.instreamId,kind:"captions",default:h.default,language:h.language,label:h.label},!1).track;a[u]=d}}}}},Rl=function t(e,n){for(var i=0;i<e.length;i++){if(_s(n,e[i]))return!0;if(e[i].playlists&&t(e[i].playlists,n))return!0}return!1},Dl={AUDIO:function(t,e){return function(){var n=e.mediaTypes[t].tracks;for(var i in n)if(n[i].enabled)return n[i];return null}},SUBTITLES:function(t,e){return function(){var n=e.mediaTypes[t].tracks;for(var i in n)if("showing"===n[i].mode||"hidden"===n[i].mode)return n[i];return null}}},Nl=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){Ol[e](e,t)}));var e=t.mediaTypes,n=t.masterPlaylistLoader,i=t.tech,r=t.vhs,o=t.segmentLoaders,a=o.AUDIO,s=o.main;["AUDIO","SUBTITLES"].forEach((function(n){e[n].activeGroup=function(t,e){return function(n){var i=e.masterPlaylistLoader,r=e.mediaTypes[t].groups,o=i.media();if(!o)return null;var a=null;o.attributes[t]&&(a=r[o.attributes[t]]);var s=Object.keys(r);if(!a)if("AUDIO"===t&&s.length>1&&ys(e.master))for(var u=0;u<s.length;u++){var l=r[s[u]];if(Rl(l,o)){a=l;break}}else r.main?a=r.main:1===s.length&&(a=r[s[0]]);return"undefined"===typeof n?a:null!==n&&a&&a.filter((function(t){return t.id===n.id}))[0]||null}}(n,t),e[n].activeTrack=Dl[n](n,t),e[n].onGroupChanged=function(t,e){return function(){var n=e.segmentLoaders,i=n[t],r=n.main,o=e.mediaTypes[t],a=o.activeTrack(),s=o.getActiveGroup(),u=o.activePlaylistLoader,l=o.lastGroup_;s&&l&&s.id===l.id||(o.lastGroup_=s,o.lastTrack_=a,Ll(i,o),s&&!s.isMasterPlaylist&&(s.playlistLoader?(i.resyncLoader(),Il(s.playlistLoader,o)):u&&r.resetEverything()))}}(n,t),e[n].onGroupChanging=function(t,e){return function(){var n=e.segmentLoaders[t];e.mediaTypes[t].lastGroup_=null,n.abort(),n.pause()}}(n,t),e[n].onTrackChanged=function(t,e){return function(){var n=e.masterPlaylistLoader,i=e.segmentLoaders,r=i[t],o=i.main,a=e.mediaTypes[t],s=a.activeTrack(),u=a.getActiveGroup(),l=a.activePlaylistLoader,c=a.lastTrack_;if((!c||!s||c.id!==s.id)&&(a.lastGroup_=u,a.lastTrack_=s,Ll(r,a),u)){if(u.isMasterPlaylist){if(!s||!c||s.id===c.id)return;var h=e.vhs.masterPlaylistController_,d=h.selectPlaylist();if(h.media()===d)return;return a.logger_("track change. Switching master audio from "+c.id+" to "+s.id),n.pause(),o.resetEverything(),void h.fastQualityChange_(d)}if("AUDIO"===t){if(!u.playlistLoader)return o.setAudio(!0),void o.resetEverything();r.setAudio(!0),o.setAudio(!1)}l!==u.playlistLoader?(r.track&&r.track(s),r.resetEverything(),Il(u.playlistLoader,a)):Il(u.playlistLoader,a)}}}(n,t),e[n].getActiveGroup=function(t,e){var n=e.mediaTypes;return function(){var e=n[t].activeTrack();return e?n[t].activeGroup(e):null}}(n,t)}));var u=e.AUDIO.activeGroup();if(u){var l=(u.filter((function(t){return t.default}))[0]||u[0]).id;e.AUDIO.tracks[l].enabled=!0,e.AUDIO.onGroupChanged(),e.AUDIO.onTrackChanged(),e.AUDIO.getActiveGroup().playlistLoader?(s.setAudio(!1),a.setAudio(!0)):s.setAudio(!0)}n.on("mediachange",(function(){["AUDIO","SUBTITLES"].forEach((function(t){return e[t].onGroupChanged()}))})),n.on("mediachanging",(function(){["AUDIO","SUBTITLES"].forEach((function(t){return e[t].onGroupChanging()}))}));var c=function(){e.AUDIO.onTrackChanged(),i.trigger({type:"usage",name:"vhs-audio-change"}),i.trigger({type:"usage",name:"hls-audio-change"})};for(var h in i.audioTracks().addEventListener("change",c),i.remoteTextTracks().addEventListener("change",e.SUBTITLES.onTrackChanged),r.on("dispose",(function(){i.audioTracks().removeEventListener("change",c),i.remoteTextTracks().removeEventListener("change",e.SUBTITLES.onTrackChanged)})),i.clearTracks("audio"),e.AUDIO.tracks)i.audioTracks().addTrack(e.AUDIO.tracks[h])},Bl=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],Ul=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},zl=function(t){function e(e){var n;n=t.call(this)||this;var i=e.src,r=e.handleManifestRedirects,o=e.withCredentials,a=e.tech,s=e.bandwidth,u=e.externVhs,l=e.useCueTags,c=e.blacklistDuration,d=e.enableLowInitialPlaylist,p=e.sourceType,f=e.cacheEncryptionKeys,m=e.experimentalBufferBasedABR,g=e.experimentalLeastPixelDiffSelector;if(!i)throw new Error("A non-empty playlist URL or JSON manifest string is required");var v=e.maxPlaylistRetries;null!==v&&"undefined"!==typeof v||(v=1/0),tl=u,n.experimentalBufferBasedABR=Boolean(m),n.experimentalLeastPixelDiffSelector=Boolean(g),n.withCredentials=o,n.tech_=a,n.vhs_=a.vhs,n.sourceType_=p,n.useCueTags_=l,n.blacklistDuration=c,n.maxPlaylistRetries=v,n.enableLowInitialPlaylist=d,n.useCueTags_&&(n.cueTagsTrack_=n.tech_.addTextTrack("metadata","ad-cues"),n.cueTagsTrack_.inBandMetadataTrackDispatchType=""),n.requestOptions_={withCredentials:o,handleManifestRedirects:r,maxPlaylistRetries:v,timeout:null},n.on("error",n.pauseLoading),n.mediaTypes_=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach((function(e){t[e]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ju,activeTrack:Ju,getActiveGroup:Ju,onGroupChanged:Ju,onTrackChanged:Ju,lastTrack_:null,logger_:Ya("MediaGroups["+e+"]")}})),t}(),n.mediaSource=new h.a.MediaSource,n.handleDurationChange_=n.handleDurationChange_.bind(_()(n)),n.handleSourceOpen_=n.handleSourceOpen_.bind(_()(n)),n.handleSourceEnded_=n.handleSourceEnded_.bind(_()(n)),n.mediaSource.addEventListener("durationchange",n.handleDurationChange_),n.mediaSource.addEventListener("sourceopen",n.handleSourceOpen_),n.mediaSource.addEventListener("sourceended",n.handleSourceEnded_),n.seekable_=Za.createTimeRanges(),n.hasPlayed_=!1,n.syncController_=new El(e),n.segmentMetadataTrack_=a.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,n.decrypter_=new Cl,n.sourceUpdater_=new yl(n.mediaSource),n.inbandTextTracks_={},n.timelineChangeController_=new kl;var y={vhs:n.vhs_,parse708captions:e.parse708captions,mediaSource:n.mediaSource,currentTime:n.tech_.currentTime.bind(n.tech_),seekable:function(){return n.seekable()},seeking:function(){return n.tech_.seeking()},duration:function(){return n.duration()},hasPlayed:function(){return n.hasPlayed_},goalBufferLength:function(){return n.goalBufferLength()},bandwidth:s,syncController:n.syncController_,decrypter:n.decrypter_,sourceType:n.sourceType_,inbandTextTracks:n.inbandTextTracks_,cacheEncryptionKeys:f,sourceUpdater:n.sourceUpdater_,timelineChangeController:n.timelineChangeController_,experimentalExactManifestTimings:e.experimentalExactManifestTimings};n.masterPlaylistLoader_="dash"===n.sourceType_?new nu(i,n.vhs_,n.requestOptions_):new Rs(i,n.vhs_,n.requestOptions_),n.setupMasterPlaylistLoaderListeners_(),n.mainSegmentLoader_=new $u(Za.mergeOptions(y,{segmentMetadataTrack:n.segmentMetadataTrack_,loaderType:"main"}),e),n.audioSegmentLoader_=new $u(Za.mergeOptions(y,{loaderType:"audio"}),e),n.subtitleSegmentLoader_=new wl(Za.mergeOptions(y,{loaderType:"vtt",featuresNativeTextTracks:n.tech_.featuresNativeTextTracks}),e),n.setupSegmentLoaderListeners_(),n.experimentalBufferBasedABR&&(n.masterPlaylistLoader_.one("loadedplaylist",(function(){return n.startABRTimer_()})),n.tech_.on("pause",(function(){return n.stopABRTimer_()})),n.tech_.on("play",(function(){return n.startABRTimer_()}))),Bl.forEach((function(t){n[t+"_"]=Ul.bind(_()(n),t)})),n.logger_=Ya("MPC"),n.triggeredFmp4Usage=!1,"none"===n.tech_.preload()?(n.loadOnPlay_=function(){n.loadOnPlay_=null,n.masterPlaylistLoader_.load()},n.tech_.one("play",n.loadOnPlay_)):n.masterPlaylistLoader_.load(),n.timeToLoadedData__=-1,n.mainAppendsToLoadedData__=-1,n.audioAppendsToLoadedData__=-1;var b="none"===n.tech_.preload()?"play":"loadstart";return n.tech_.one(b,(function(){var t=Date.now();n.tech_.one("loadeddata",(function(){n.timeToLoadedData__=Date.now()-t,n.mainAppendsToLoadedData__=n.mainSegmentLoader_.mediaAppends,n.audioAppendsToLoadedData__=n.audioSegmentLoader_.mediaAppends}))})),n}y()(e,t);var n=e.prototype;return n.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},n.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},n.appendsToLoadedData_=function(){var t=this.mainAppendsToLoadedData_(),e=this.audioAppendsToLoadedData_();return-1===t||-1===e?-1:t+e},n.timeToLoadedData_=function(){return this.timeToLoadedData__},n.checkABR_=function(){var t=this.selectPlaylist();t&&this.shouldSwitchToMedia_(t)&&this.switchMedia_(t,"abr")},n.switchMedia_=function(t,e,n){var i=this.media(),r=i&&(i.id||i.uri),o=t.id||t.uri;r&&r!==o&&(this.logger_("switch media "+r+" -> "+o+" from "+e),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+e})),this.masterPlaylistLoader_.media(t,n)},n.startABRTimer_=function(){var t=this;this.stopABRTimer_(),this.abrTimer_=h.a.setInterval((function(){return t.checkABR_()}),250)},n.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(h.a.clearInterval(this.abrTimer_),this.abrTimer_=null)},n.getAudioTrackPlaylists_=function(){var t=this.master(),e=t&&t.playlists||[];if(!t||!t.mediaGroups||!t.mediaGroups.AUDIO)return e;var n,i=t.mediaGroups.AUDIO,r=Object.keys(i);if(Object.keys(this.mediaTypes_.AUDIO.groups).length)n=this.mediaTypes_.AUDIO.activeTrack();else{var o=i.main||r.length&&i[r[0]];for(var a in o)if(o[a].default){n={label:a};break}}if(!n)return e;var s=[];for(var u in i)if(i[u][n.label]){var l=i[u][n.label];if(l.playlists&&l.playlists.length)s.push.apply(s,l.playlists);else if(l.uri)s.push(l);else if(t.playlists.length)for(var c=0;c<t.playlists.length;c++){var h=t.playlists[c];h.attributes&&h.attributes.AUDIO&&h.attributes.AUDIO===u&&s.push(h)}}return s.length?s:e},n.setupMasterPlaylistLoaderListeners_=function(){var t=this;this.masterPlaylistLoader_.on("loadedmetadata",(function(){var e=t.masterPlaylistLoader_.media(),n=1.5*e.targetDuration*1e3;gs(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=n,e.endList&&"none"!==t.tech_.preload()&&(t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load()),Nl({sourceType:t.sourceType_,segmentLoaders:{AUDIO:t.audioSegmentLoader_,SUBTITLES:t.subtitleSegmentLoader_,main:t.mainSegmentLoader_},tech:t.tech_,requestOptions:t.requestOptions_,masterPlaylistLoader:t.masterPlaylistLoader_,vhs:t.vhs_,master:t.master(),mediaTypes:t.mediaTypes_,blacklistCurrentPlaylist:t.blacklistCurrentPlaylist.bind(t)}),t.triggerPresenceUsage_(t.master(),e),t.setupFirstPlay(),!t.mediaTypes_.AUDIO.activePlaylistLoader||t.mediaTypes_.AUDIO.activePlaylistLoader.media()?t.trigger("selectedinitialmedia"):t.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",(function(){t.trigger("selectedinitialmedia")}))})),this.masterPlaylistLoader_.on("loadedplaylist",(function(){t.loadOnPlay_&&t.tech_.off("play",t.loadOnPlay_);var e=t.masterPlaylistLoader_.media();if(!e){var n;if(t.excludeUnsupportedVariants_(),t.enableLowInitialPlaylist&&(n=t.selectInitialPlaylist()),n||(n=t.selectPlaylist()),!n||!t.shouldSwitchToMedia_(n))return;if(t.initialMedia_=n,t.switchMedia_(t.initialMedia_,"initial"),!("vhs-json"===t.sourceType_&&t.initialMedia_.segments))return;e=t.initialMedia_}t.handleUpdatedMediaPlaylist(e)})),this.masterPlaylistLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.masterPlaylistLoader_.error)})),this.masterPlaylistLoader_.on("mediachanging",(function(){t.mainSegmentLoader_.abort(),t.mainSegmentLoader_.pause()})),this.masterPlaylistLoader_.on("mediachange",(function(){var e=t.masterPlaylistLoader_.media(),n=1.5*e.targetDuration*1e3;gs(t.masterPlaylistLoader_.master,t.masterPlaylistLoader_.media())?t.requestOptions_.timeout=0:t.requestOptions_.timeout=n,t.mainSegmentLoader_.playlist(e,t.requestOptions_),t.mainSegmentLoader_.load(),t.tech_.trigger({type:"mediachange",bubbles:!0})})),this.masterPlaylistLoader_.on("playlistunchanged",(function(){var e=t.masterPlaylistLoader_.media();"playlist-unchanged"!==e.lastExcludeReason_&&(t.stuckAtPlaylistEnd_(e)&&(t.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),t.tech_.trigger("playliststuck")))})),this.masterPlaylistLoader_.on("renditiondisabled",(function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})})),this.masterPlaylistLoader_.on("renditionenabled",(function(){t.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),t.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})}))},n.handleUpdatedMediaPlaylist=function(t){this.useCueTags_&&this.updateAdCues_(t),this.mainSegmentLoader_.playlist(t,this.requestOptions_),this.updateDuration(!t.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},n.triggerPresenceUsage_=function(t,e){var n=t.mediaGroups||{},i=!0,r=Object.keys(n.AUDIO);for(var o in n.AUDIO)for(var a in n.AUDIO[o]){n.AUDIO[o][a].uri||(i=!1)}i&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(n.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),tl.Playlist.isAes(e)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),r.length&&Object.keys(n.AUDIO[r[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},n.shouldSwitchToMedia_=function(t){var e=this.masterPlaylistLoader_.media(),n=this.tech_.buffered();return function(t){var e=t.currentPlaylist,n=t.nextPlaylist,i=t.forwardBuffer,r=t.bufferLowWaterLine,o=t.bufferHighWaterLine,a=t.duration,s=t.experimentalBufferBasedABR,u=t.log;if(!n)return Za.log.warn("We received no playlist to switch to. Please check your stream."),!1;var l="allowing switch "+(e&&e.id||"null")+" -> "+n.id;if(!e)return u(l+" as current playlist is not set"),!0;if(n.id===e.id)return!1;if(!e.endList)return u(l+" as current playlist is live"),!0;var c=s?iu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:iu.MAX_BUFFER_LOW_WATER_LINE;if(a<c)return u(l+" as duration < max low water line ("+a+" < "+c+")"),!0;var h=n.attributes.BANDWIDTH,d=e.attributes.BANDWIDTH;if(h<d&&(!s||i<o)){var p=l+" as next bandwidth < current bandwidth ("+h+" < "+d+")";return s&&(p+=" and forwardBuffer < bufferHighWaterLine ("+i+" < "+o+")"),u(p),!0}if((!s||h>d)&&i>=r){var f=l+" as forwardBuffer >= bufferLowWaterLine ("+i+" >= "+r+")";return s&&(f+=" and next bandwidth > current bandwidth ("+h+" > "+d+")"),u(f),!0}return u("not "+l+" as no switching criteria met"),!1}({currentPlaylist:e,nextPlaylist:t,forwardBuffer:n.length?n.end(n.length-1)-this.tech_.currentTime():0,bufferLowWaterLine:this.bufferLowWaterLine(),bufferHighWaterLine:this.bufferHighWaterLine(),duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},n.setupSegmentLoaderListeners_=function(){var t=this;this.experimentalBufferBasedABR||(this.mainSegmentLoader_.on("bandwidthupdate",(function(){var e=t.selectPlaylist();t.shouldSwitchToMedia_(e)&&t.switchMedia_(e,"bandwidthupdate"),t.tech_.trigger("bandwidthupdate")})),this.mainSegmentLoader_.on("progress",(function(){t.trigger("progress")}))),this.mainSegmentLoader_.on("error",(function(){t.blacklistCurrentPlaylist(t.mainSegmentLoader_.error())})),this.mainSegmentLoader_.on("appenderror",(function(){t.error=t.mainSegmentLoader_.error_,t.trigger("error")})),this.mainSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()})),this.mainSegmentLoader_.on("timestampoffset",(function(){t.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),t.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})})),this.audioSegmentLoader_.on("syncinfoupdate",(function(){t.onSyncInfoUpdate_()})),this.audioSegmentLoader_.on("appenderror",(function(){t.error=t.audioSegmentLoader_.error_,t.trigger("error")})),this.mainSegmentLoader_.on("ended",(function(){t.logger_("main segment loader ended"),t.onEndOfStream()})),this.mainSegmentLoader_.on("earlyabort",(function(e){t.experimentalBufferBasedABR||(t.delegateLoaders_("all",["abort"]),t.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},120))}));var e=function(){if(!t.sourceUpdater_.hasCreatedSourceBuffers())return t.tryToCreateSourceBuffers_();var e=t.getCodecsOrExclude_();e&&t.sourceUpdater_.addOrChangeSourceBuffers(e)};this.mainSegmentLoader_.on("trackinfo",e),this.audioSegmentLoader_.on("trackinfo",e),this.mainSegmentLoader_.on("fmp4",(function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("fmp4",(function(){t.triggeredFmp4Usage||(t.tech_.trigger({type:"usage",name:"vhs-fmp4"}),t.tech_.trigger({type:"usage",name:"hls-fmp4"}),t.triggeredFmp4Usage=!0)})),this.audioSegmentLoader_.on("ended",(function(){t.logger_("audioSegmentLoader ended"),t.onEndOfStream()}))},n.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},n.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},n.smoothQualityChange_=function(t){void 0===t&&(t=this.selectPlaylist()),this.fastQualityChange_(t)},n.fastQualityChange_=function(t){var e=this;void 0===t&&(t=this.selectPlaylist()),t!==this.masterPlaylistLoader_.media()?(this.switchMedia_(t,"fast-quality"),this.mainSegmentLoader_.resetEverything((function(){Za.browser.IE_VERSION||Za.browser.IS_EDGE?e.tech_.setCurrentTime(e.tech_.currentTime()+.04):e.tech_.setCurrentTime(e.tech_.currentTime())}))):this.logger_("skipping fastQualityChange because new media is same as old")},n.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var t=this.tech_.seekable();return this.tech_.duration()===1/0&&this.tech_.currentTime()<t.start(0)?this.tech_.setCurrentTime(t.end(t.length-1)):void 0}},n.setupFirstPlay=function(){var t=this,e=this.masterPlaylistLoader_.media();if(!e||this.tech_.paused()||this.hasPlayed_)return!1;if(!e.endList){var n=this.seekable();if(!n.length)return!1;if(Za.browser.IE_VERSION&&0===this.tech_.readyState())return this.tech_.one("loadedmetadata",(function(){t.trigger("firstplay"),t.tech_.setCurrentTime(n.end(0)),t.hasPlayed_=!0})),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(n.end(0))}return this.hasPlayed_=!0,this.load(),!0},n.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var t=this.tech_.play();"undefined"!==typeof t&&"function"===typeof t.then&&t.then(null,(function(t){}))}this.trigger("sourceopen")},n.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var t=this.inbandTextTracks_.metadataTrack_.cues;if(t&&t.length){var e=this.duration();t[t.length-1].endTime=isNaN(e)||Math.abs(e)===1/0?Number.MAX_VALUE:e}}},n.handleDurationChange_=function(){this.tech_.trigger("durationchange")},n.onEndOfStream=function(){var t=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var e=this.mainSegmentLoader_.getCurrentMediaInfo_();t=!e||e.hasVideo?t&&this.audioSegmentLoader_.ended_:this.audioSegmentLoader_.ended_}t&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},n.stuckAtPlaylistEnd_=function(t){if(!this.seekable().length)return!1;var e=this.syncController_.getExpiredTime(t,this.duration());if(null===e)return!1;var n=tl.Playlist.playlistEnd(t,e),i=this.tech_.currentTime(),r=this.tech_.buffered();if(!r.length)return n-i<=Ka;var o=r.end(r.length-1);return o-i<=Ka&&n-o<=Ka},n.blacklistCurrentPlaylist=function(t,e){void 0===t&&(t={});var n=t.playlist||this.masterPlaylistLoader_.media();if(e=e||t.blacklistDuration||this.blacklistDuration,!n)return this.error=t,void("open"!==this.mediaSource.readyState?this.trigger("error"):this.sourceUpdater_.endOfStream("network"));n.playlistErrors_++;var i,r=this.masterPlaylistLoader_.master.playlists,o=r.filter(fs),a=1===o.length&&o[0]===n;if(1===r.length&&e!==1/0)return Za.log.warn("Problem encountered with playlist "+n.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(a);if(a){var s=!1;r.forEach((function(t){if(t!==n){var e=t.excludeUntil;"undefined"!==typeof e&&e!==1/0&&(s=!0,delete t.excludeUntil)}})),s&&(Za.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}i=n.playlistErrors_>this.maxPlaylistRetries?1/0:Date.now()+1e3*e,n.excludeUntil=i,t.reason&&(n.lastExcludeReason_=t.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var u=this.selectPlaylist();if(!u)return this.error="Playback cannot continue. No available working or supported playlists.",void this.trigger("error");var l=t.internal?this.logger_:Za.log.warn,c=t.message?" "+t.message:"";l((t.internal?"Internal problem":"Problem")+" encountered with playlist "+n.id+"."+c+" Switching to playlist "+u.id+"."),u.attributes.AUDIO!==n.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),u.attributes.SUBTITLES!==n.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var h=u.targetDuration/2*1e3||5e3,d="number"===typeof u.lastRequest&&Date.now()-u.lastRequest<=h;return this.switchMedia_(u,"exclude",a||d)},n.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},n.delegateLoaders_=function(t,e){var n=this,i=[],r="all"===t;(r||"main"===t)&&i.push(this.masterPlaylistLoader_);var o=[];(r||"audio"===t)&&o.push("AUDIO"),(r||"subtitle"===t)&&(o.push("CLOSED-CAPTIONS"),o.push("SUBTITLES")),o.forEach((function(t){var e=n.mediaTypes_[t]&&n.mediaTypes_[t].activePlaylistLoader;e&&i.push(e)})),["main","audio","subtitle"].forEach((function(e){var r=n[e+"SegmentLoader_"];!r||t!==e&&"all"!==t||i.push(r)})),i.forEach((function(t){return e.forEach((function(e){"function"===typeof t[e]&&t[e]()}))}))},n.setCurrentTime=function(t){var e=$a(this.tech_.buffered(),t);return this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media()&&this.masterPlaylistLoader_.media().segments?e&&e.length?t:(this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),void this.load()):0},n.duration=function(){if(!this.masterPlaylistLoader_)return 0;var t=this.masterPlaylistLoader_.media();return t?t.endList?this.mediaSource?this.mediaSource.duration:tl.Playlist.duration(t):1/0:0},n.seekable=function(){return this.seekable_},n.onSyncInfoUpdate_=function(){var t;if(this.masterPlaylistLoader_){var e=this.masterPlaylistLoader_.media();if(e){var n=this.syncController_.getExpiredTime(e,this.duration());if(null!==n){var i=this.masterPlaylistLoader_.master,r=tl.Playlist.seekable(e,n,tl.Playlist.liveEdgeDelay(i,e));if(0!==r.length){if(this.mediaTypes_.AUDIO.activePlaylistLoader){if(e=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),null===(n=this.syncController_.getExpiredTime(e,this.duration())))return;if(0===(t=tl.Playlist.seekable(e,n,tl.Playlist.liveEdgeDelay(i,e))).length)return}var o,a;this.seekable_&&this.seekable_.length&&(o=this.seekable_.end(0),a=this.seekable_.start(0)),t?t.start(0)>r.end(0)||r.start(0)>t.end(0)?this.seekable_=r:this.seekable_=Za.createTimeRanges([[t.start(0)>r.start(0)?t.start(0):r.start(0),t.end(0)<r.end(0)?t.end(0):r.end(0)]]):this.seekable_=r,this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===o&&this.seekable_.start(0)===a||(this.logger_("seekable updated ["+ts(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},n.updateDuration=function(t){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),"open"!==this.mediaSource.readyState)return this.updateDuration_=this.updateDuration.bind(this,t),void this.mediaSource.addEventListener("sourceopen",this.updateDuration_);if(t){var e=this.seekable();if(!e.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<e.end(e.length-1))&&this.sourceUpdater_.setDuration(e.end(e.length-1))}else{var n=this.tech_.buffered(),i=tl.Playlist.duration(this.masterPlaylistLoader_.media());n.length>0&&(i=Math.max(i,n.end(n.length-1))),this.mediaSource.duration!==i&&this.sourceUpdater_.setDuration(i)}},n.dispose=function(){var t=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach((function(e){var n=t.mediaTypes_[e].groups;for(var i in n)n[i].forEach((function(t){t.playlistLoader&&t.playlistLoader.dispose()}))})),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},n.master=function(){return this.masterPlaylistLoader_.master},n.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},n.areMediaTypesKnown_=function(){var t=!!this.mediaTypes_.AUDIO.activePlaylistLoader,e=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),n=!t||!!this.audioSegmentLoader_.getCurrentMediaInfo_();return!(!e||!n)},n.getCodecsOrExclude_=function(){var t=this,e={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}};e.video=e.main;var n=Du(this.master(),this.media()),i={},r=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(e.main.hasVideo&&(i.video=n.video||e.main.videoCodec||"avc1.4d400d"),e.main.isMuxed&&(i.video+=","+(n.audio||e.main.audioCodec||et)),(e.main.hasAudio&&!e.main.isMuxed||e.audio.hasAudio||r)&&(i.audio=n.audio||e.main.audioCodec||e.audio.audioCodec||et,e.audio.isFmp4=e.main.hasAudio&&!e.main.isMuxed?e.main.isFmp4:e.audio.isFmp4),i.audio||i.video){var o,a={};if(["video","audio"].forEach((function(t){if(i.hasOwnProperty(t)&&(r=e[t].isFmp4,s=i[t],!(r?J(s):tt(s)))){var n=e[t].isFmp4?"browser":"muxer";a[n]=a[n]||[],a[n].push(i[t]),"audio"===t&&(o=n)}var r,s})),r&&o&&this.media().attributes.AUDIO){var s=this.media().attributes.AUDIO;this.master().playlists.forEach((function(e){(e.attributes&&e.attributes.AUDIO)===s&&e!==t.media()&&(e.excludeUntil=1/0)})),this.logger_("excluding audio group "+s+" as "+o+' does not support codec(s): "'+i.audio+'"')}if(!Object.keys(a).length){if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var u=[];if(["video","audio"].forEach((function(e){var n=(K(t.sourceUpdater_.codecs[e]||"")[0]||{}).type,r=(K(i[e]||"")[0]||{}).type;n&&r&&n.toLowerCase()!==r.toLowerCase()&&u.push('"'+t.sourceUpdater_.codecs[e]+'" -> "'+i[e]+'"')})),u.length)return void this.blacklistCurrentPlaylist({playlist:this.media(),message:"Codec switching not supported: "+u.join(", ")+".",blacklistDuration:1/0,internal:!0})}return i}var l=Object.keys(a).reduce((function(t,e){return t&&(t+=", "),t+=e+' does not support codec(s): "'+a[e].join(",")+'"'}),"")+".";this.blacklistCurrentPlaylist({playlist:this.media(),internal:!0,message:l,blacklistDuration:1/0})}else this.blacklistCurrentPlaylist({playlist:this.media(),message:"Could not determine codecs for playlist.",blacklistDuration:1/0})},n.tryToCreateSourceBuffers_=function(){if("open"===this.mediaSource.readyState&&!this.sourceUpdater_.hasCreatedSourceBuffers()&&this.areMediaTypesKnown_()){var t=this.getCodecsOrExclude_();if(t){this.sourceUpdater_.createSourceBuffers(t);var e=[t.video,t.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(e)}}},n.excludeUnsupportedVariants_=function(){var t=this,e=this.master().playlists,n=[];Object.keys(e).forEach((function(i){var r=e[i];if(-1===n.indexOf(r.id)){n.push(r.id);var o=Du(t.master,r),a=[];!o.audio||tt(o.audio)||J(o.audio)||a.push("audio codec "+o.audio),!o.video||tt(o.video)||J(o.video)||a.push("video codec "+o.video),o.text&&"stpp.ttml.im1t"===o.text&&a.push("text codec "+o.text),a.length&&(r.excludeUntil=1/0,t.logger_("excluding "+r.id+" for unsupported: "+a.join(", ")))}}))},n.excludeIncompatibleVariants_=function(t){var e=this,n=[],i=this.master().playlists,r=Ou(K(t)),o=Ru(r),a=r.video&&K(r.video)[0]||null,s=r.audio&&K(r.audio)[0]||null;Object.keys(i).forEach((function(t){var r=i[t];if(-1===n.indexOf(r.id)&&r.excludeUntil!==1/0){n.push(r.id);var u=[],l=Du(e.masterPlaylistLoader_.master,r),c=Ru(l);if(l.audio||l.video){if(c!==o&&u.push('codec count "'+c+'" !== "'+o+'"'),!e.sourceUpdater_.canChangeType()){var h=l.video&&K(l.video)[0]||null,d=l.audio&&K(l.audio)[0]||null;h&&a&&h.type.toLowerCase()!==a.type.toLowerCase()&&u.push('video codec "'+h.type+'" !== "'+a.type+'"'),d&&s&&d.type.toLowerCase()!==s.type.toLowerCase()&&u.push('audio codec "'+d.type+'" !== "'+s.type+'"')}u.length&&(r.excludeUntil=1/0,e.logger_("blacklisting "+r.id+": "+u.join(" && ")))}}}))},n.updateAdCues_=function(t){var e=0,n=this.seekable();n.length&&(e=n.start(0)),function(t,e,n){if(void 0===n&&(n=0),t.segments)for(var i,r=n,o=0;o<t.segments.length;o++){var a=t.segments[o];if(i||(i=xl(e,r+a.duration/2)),i){if("cueIn"in a){i.endTime=r,i.adEndTime=r,r+=a.duration,i=null;continue}if(r<i.endTime){r+=a.duration;continue}i.endTime+=a.duration}else if("cueOut"in a&&((i=new h.a.VTTCue(r,r+a.duration,a.cueOut)).adStartTime=r,i.adEndTime=r+parseFloat(a.cueOut),e.addCue(i)),"cueOutCont"in a){var s=a.cueOutCont.split("/").map(parseFloat),u=s[0],l=s[1];(i=new h.a.VTTCue(r,r+a.duration,"")).adStartTime=r-u,i.adEndTime=i.adStartTime+l,e.addCue(i)}r+=a.duration}}(t,this.cueTagsTrack_,e)},n.goalBufferLength=function(){var t=this.tech_.currentTime(),e=iu.GOAL_BUFFER_LENGTH,n=iu.GOAL_BUFFER_LENGTH_RATE,i=Math.max(e,iu.MAX_GOAL_BUFFER_LENGTH);return Math.min(e+t*n,i)},n.bufferLowWaterLine=function(){var t=this.tech_.currentTime(),e=iu.BUFFER_LOW_WATER_LINE,n=iu.BUFFER_LOW_WATER_LINE_RATE,i=Math.max(e,iu.MAX_BUFFER_LOW_WATER_LINE),r=Math.max(e,iu.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(e+t*n,this.experimentalBufferBasedABR?r:i)},n.bufferHighWaterLine=function(){return iu.BUFFER_HIGH_WATER_LINE},e}(Za.EventTarget),Fl=function(t,e,n){var i,r,o,a=t.masterPlaylistController_,s=a[(t.options_.smoothQualityChange?"smooth":"fast")+"QualityChange_"].bind(a);if(e.attributes){var u=e.attributes.RESOLUTION;this.width=u&&u.width,this.height=u&&u.height,this.bandwidth=e.attributes.BANDWIDTH}this.codecs=Du(a.master(),e),this.playlist=e,this.id=n,this.enabled=(i=t.playlists,r=e.id,o=s,function(t){var e=i.master.playlists[r],n=ps(e),a=fs(e);return"undefined"===typeof t?a:(t?delete e.disabled:e.disabled=!0,t===a||n||(o(),t?i.trigger("renditionenabled"):i.trigger("renditiondisabled")),t)})},jl=["seeking","seeked","pause","playing","error"],Hl=function(){function t(t){var e=this;this.masterPlaylistController_=t.masterPlaylistController,this.tech_=t.tech,this.seekable=t.seekable,this.allowSeeksWithinUnsafeLiveWindow=t.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=t.liveRangeSafeTimeDelta,this.media=t.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Ya("PlaybackWatcher"),this.logger_("initialize");var n=function(){return e.monitorCurrentTime_()},i=function(){return e.monitorCurrentTime_()},r=function(){return e.techWaiting_()},o=function(){return e.cancelTimer_()},a=function(){return e.fixesBadSeeks_()},s=this.masterPlaylistController_,u=["main","subtitle","audio"],l={};u.forEach((function(t){l[t]={reset:function(){return e.resetSegmentDownloads_(t)},updateend:function(){return e.checkSegmentDownloads_(t)}},s[t+"SegmentLoader_"].on("appendsdone",l[t].updateend),s[t+"SegmentLoader_"].on("playlistupdate",l[t].reset),e.tech_.on(["seeked","seeking"],l[t].reset)})),this.tech_.on("seekablechanged",a),this.tech_.on("waiting",r),this.tech_.on(jl,o),this.tech_.on("canplay",i),this.tech_.one("play",n),this.dispose=function(){e.logger_("dispose"),e.tech_.off("seekablechanged",a),e.tech_.off("waiting",r),e.tech_.off(jl,o),e.tech_.off("canplay",i),e.tech_.off("play",n),u.forEach((function(t){s[t+"SegmentLoader_"].off("appendsdone",l[t].updateend),s[t+"SegmentLoader_"].off("playlistupdate",l[t].reset),e.tech_.off(["seeked","seeking"],l[t].reset)})),e.checkCurrentTimeTimeout_&&h.a.clearTimeout(e.checkCurrentTimeTimeout_),e.cancelTimer_()}}var e=t.prototype;return e.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&h.a.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=h.a.setTimeout(this.monitorCurrentTime_.bind(this),250)},e.resetSegmentDownloads_=function(t){var e=this.masterPlaylistController_[t+"SegmentLoader_"];this[t+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+t+" loader"),this[t+"StalledDownloads_"]=0,this[t+"Buffered_"]=e.buffered_()},e.checkSegmentDownloads_=function(t){var e=this.masterPlaylistController_,n=e[t+"SegmentLoader_"],i=n.buffered_(),r=function(t,e){if(t===e)return!1;if(!t&&e||!e&&t)return!0;if(t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t.start(n)!==e.start(n)||t.end(n)!==e.end(n))return!0;return!1}(this[t+"Buffered_"],i);this[t+"Buffered_"]=i,r?this.resetSegmentDownloads_(t):(this[t+"StalledDownloads_"]++,this.logger_("found #"+this[t+"StalledDownloads_"]+" "+t+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:es(i)}),this[t+"StalledDownloads_"]<10||(this.logger_(t+" loader stalled download exclusion"),this.resetSegmentDownloads_(t),this.tech_.trigger({type:"usage",name:"vhs-"+t+"-download-exclusion"}),"subtitle"!==t&&e.blacklistCurrentPlaylist({message:"Excessive "+t+" segment downloading detected."},1/0)))},e.checkCurrentTime_=function(){if(this.tech_.seeking()&&this.fixesBadSeeks_())return this.consecutiveUpdates=0,void(this.lastRecordedTime=this.tech_.currentTime());if(!this.tech_.paused()&&!this.tech_.seeking()){var t=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===t&&(!e.length||t+Ka>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&t===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):t===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=t)}},e.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},e.fixesBadSeeks_=function(){if(!this.tech_.seeking())return!1;var t,e=this.seekable(),n=this.tech_.currentTime();this.afterSeekableWindow_(e,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow)&&(t=e.end(e.length-1));if(this.beforeSeekableWindow_(e,n)){var i=e.start(0);t=i+(i===e.end(0)?0:Ka)}if("undefined"!==typeof t)return this.logger_("Trying to seek outside of seekable at time "+n+" with seekable range "+ts(e)+". Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0;var r=this.tech_.buffered();return!!function(t){var e=t.buffered,n=t.targetDuration,i=t.currentTime;return!!e.length&&!(e.end(0)-e.start(0)<2*n)&&!(i>e.start(0))&&e.start(0)-i<n}({buffered:r,targetDuration:this.media().targetDuration,currentTime:n})&&(t=r.start(0)+Ka,this.logger_("Buffered region starts ("+r.start(0)+")  just beyond seek point ("+n+"). Seeking to "+t+"."),this.tech_.setCurrentTime(t),!0)},e.waiting_=function(){if(!this.techWaiting_()){var t=this.tech_.currentTime(),e=this.tech_.buffered(),n=$a(e,t);return n.length&&t+3<=n.end(0)?(this.cancelTimer_(),this.tech_.setCurrentTime(t),this.logger_("Stopped at "+t+" while inside a buffered region ["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),void this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"})):void 0}},e.techWaiting_=function(){var t=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()&&this.fixesBadSeeks_())return!0;if(this.tech_.seeking()||null!==this.timer_)return!0;if(this.beforeSeekableWindow_(t,e)){var n=t.end(t.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to live point (seekable end) "+n),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var i=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,r=this.tech_.buffered();if(this.videoUnderflow_({audioBuffered:i.audioBuffered(),videoBuffered:i.videoBuffered(),currentTime:e}))return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var o=Ja(r,e);if(o.length>0){var a=o.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+a+", seeking to "+o.start(0)),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),1e3*a,e),!0}return!1},e.afterSeekableWindow_=function(t,e,n,i){if(void 0===i&&(i=!1),!t.length)return!1;var r=t.end(t.length-1)+Ka;return!n.endList&&i&&(r=t.end(t.length-1)+3*n.targetDuration),e>r},e.beforeSeekableWindow_=function(t,e){return!!(t.length&&t.start(0)>0&&e<t.start(0)-this.liveRangeSafeTimeDelta)},e.videoUnderflow_=function(t){var e=t.videoBuffered,n=t.audioBuffered,i=t.currentTime;if(e){var r;if(e.length&&n.length){var o=$a(e,i-3),a=$a(e,i),s=$a(n,i);s.length&&!a.length&&o.length&&(r={start:o.end(0),end:s.end(0)})}else{Ja(e,i).length||(r=this.gapFromVideoUnderflow_(e,i))}return!!r&&(this.logger_("Encountered a gap in video from "+r.start+" to "+r.end+". Seeking to current time "+i),!0)}},e.skipTheGap_=function(t){var e=this.tech_.buffered(),n=this.tech_.currentTime(),i=Ja(e,n);this.cancelTimer_(),0!==i.length&&n===t&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",t,"nextRange start:",i.start(0)),this.tech_.setCurrentTime(i.start(0)+Xa),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},e.gapFromVideoUnderflow_=function(t,e){for(var n=function(t){if(t.length<2)return Za.createTimeRanges();for(var e=[],n=1;n<t.length;n++){var i=t.end(n-1),r=t.start(n);e.push([i,r])}return Za.createTimeRanges(e)}(t),i=0;i<n.length;i++){var r=n.start(i),o=n.end(i);if(e-r<4&&e-r>2)return{start:r,end:o}}return null},t}(),Zl={errorInterval:30,getSource:function(t){return t(this.tech({IWillNotUseThisInPlugins:!0}).currentSource_||this.currentSource())}},Wl=function t(e,n){var i=0,r=0,o=Za.mergeOptions(Zl,n);e.ready((function(){e.trigger({type:"usage",name:"vhs-error-reload-initialized"}),e.trigger({type:"usage",name:"hls-error-reload-initialized"})}));var a=function(){r&&e.currentTime(r)},s=function(t){null!==t&&void 0!==t&&(r=e.duration()!==1/0&&e.currentTime()||0,e.one("loadedmetadata",a),e.src(t),e.trigger({type:"usage",name:"vhs-error-reload"}),e.trigger({type:"usage",name:"hls-error-reload"}),e.play())},u=function(){return Date.now()-i<1e3*o.errorInterval?(e.trigger({type:"usage",name:"vhs-error-reload-canceled"}),void e.trigger({type:"usage",name:"hls-error-reload-canceled"})):o.getSource&&"function"===typeof o.getSource?(i=Date.now(),o.getSource.call(e,s)):void Za.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!")},l=function t(){e.off("loadedmetadata",a),e.off("error",u),e.off("dispose",t)};e.on("error",u),e.on("dispose",l),e.reloadSourceOnError=function(n){l(),t(e,n)}},ql=function(t){Wl(this,t)},Vl="2.10.2",Gl={PlaylistLoader:Rs,Playlist:bs,utils:Gs,STANDARD_PLAYLIST_SELECTOR:Hu,INITIAL_PLAYLIST_SELECTOR:function(){var t=this,e=this.playlists.master.playlists.filter(bs.isEnabled);return zu(e,(function(t,e){return Fu(t,e)})),e.filter((function(e){return!!Du(t.playlists.master,e).video}))[0]||null},lastBandwidthSelector:Hu,movingAverageBandwidthSelector:function(t){var e=-1,n=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var i=this.useDevicePixelRatio&&h.a.devicePixelRatio||1;return e<0&&(e=this.systemBandwidth,n=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==n&&(e=t*this.systemBandwidth+(1-t)*e,n=this.systemBandwidth),ju(this.playlists.master,e,parseInt(Uu(this.tech_.el(),"width"),10)*i,parseInt(Uu(this.tech_.el(),"height"),10)*i,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},comparePlaylistBandwidth:Fu,comparePlaylistResolution:function(t,e){var n,i;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(n=t.attributes.RESOLUTION.width),n=n||h.a.Number.MAX_VALUE,e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(i=e.attributes.RESOLUTION.width),n===(i=i||h.a.Number.MAX_VALUE)&&t.attributes.BANDWIDTH&&e.attributes.BANDWIDTH?t.attributes.BANDWIDTH-e.attributes.BANDWIDTH:n-i},xhr:Us()};Object.keys(iu).forEach((function(t){Object.defineProperty(Gl,t,{get:function(){return Za.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),iu[t]},set:function(e){Za.log.warn("using Vhs."+t+" is UNSAFE be sure you know what you are doing"),"number"!==typeof e||e<0?Za.log.warn("value of Vhs."+t+" must be greater than or equal to 0"):iu[t]=e}})}));var Yl="videojs-vhs",Xl=function(t,e){for(var n=e.media(),i=-1,r=0;r<t.length;r++)if(t[r].id===n.id){i=r;break}t.selectedIndex_=i,t.trigger({selectedIndex:i,type:"change"})};Gl.canPlaySource=function(){return Za.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Kl=function(t){var e=t.player,n=t.sourceKeySystems,i=t.audioMedia,r=t.mainPlaylists;if(!e.eme.initializeMediaKeys)return Promise.resolve();var o=function(t,e){return t.reduce((function(t,n){if(!n.contentProtection)return t;var i=e.reduce((function(t,e){var i=n.contentProtection[e];return i&&i.pssh&&(t[e]={pssh:i.pssh}),t}),{});return Object.keys(i).length&&t.push(i),t}),[])}(i?r.concat([i]):r,Object.keys(n)),a=[],s=[];return o.forEach((function(t){s.push(new Promise((function(t,n){e.tech_.one("keysessioncreated",t)}))),a.push(new Promise((function(n,i){e.eme.initializeMediaKeys({keySystems:t},(function(t){t?i(t):n()}))})))})),Promise.race([Promise.all(a),Promise.race(s)])},Ql=function(t){var e=t.player,n=function(t,e,n){if(!t)return t;var i={};e&&e.attributes&&e.attributes.CODECS&&(i=Ou(K(e.attributes.CODECS))),n&&n.attributes&&n.attributes.CODECS&&(i.audio=n.attributes.CODECS);var r=$(i.video),o=$(i.audio),a={};for(var s in t)a[s]={},o&&(a[s].audioContentType=o),r&&(a[s].videoContentType=r),e.contentProtection&&e.contentProtection[s]&&e.contentProtection[s].pssh&&(a[s].pssh=e.contentProtection[s].pssh),"string"===typeof t[s]&&(a[s].url=t[s]);return Za.mergeOptions(t,a)}(t.sourceKeySystems,t.media,t.audioMedia);return!!n&&(e.currentSource().keySystems=n,!(n&&!e.eme)||(Za.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1))},$l=function(){if(!h.a.localStorage)return null;var t=h.a.localStorage.getItem(Yl);if(!t)return null;try{return JSON.parse(t)}catch(e){return null}};Gl.supportsNativeHls=function(){if(!p.a||!p.a.createElement)return!1;var t=p.a.createElement("video");if(!Za.getTech("Html5").isSupported())return!1;return["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"].some((function(e){return/maybe|probably/i.test(t.canPlayType(e))}))}(),Gl.supportsNativeDash=!!(p.a&&p.a.createElement&&Za.getTech("Html5").isSupported())&&/maybe|probably/i.test(p.a.createElement("video").canPlayType("application/dash+xml")),Gl.supportsTypeNatively=function(t){return"hls"===t?Gl.supportsNativeHls:"dash"===t&&Gl.supportsNativeDash},Gl.isSupported=function(){return Za.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var Jl=function(t){function e(e,n,i){var r;if(r=t.call(this,n,Za.mergeOptions(i.hls,i.vhs))||this,i.hls&&Object.keys(i.hls).length&&Za.log.warn("Using hls options is deprecated. Use vhs instead."),"number"===typeof i.initialBandwidth&&(r.options_.bandwidth=i.initialBandwidth),r.logger_=Ya("VhsHandler"),n.options_&&n.options_.playerId){var o=Za(n.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return Za.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"hls-player-access"}),_()(r)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return Za.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),n.trigger({type:"usage",name:"vhs-player-access"}),_()(r)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return Za.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),_()(r)},configurable:!0}),r.player_=o}if(r.tech_=n,r.source_=e,r.stats={},r.ignoreNextSeekingEvent_=!1,r.setOptions_(),r.options_.overrideNative&&n.overrideNativeAudioTracks&&n.overrideNativeVideoTracks)n.overrideNativeAudioTracks(!0),n.overrideNativeVideoTracks(!0);else if(r.options_.overrideNative&&(n.featuresNativeVideoTracks||n.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return r.on(p.a,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],(function(t){var e=p.a.fullscreenElement||p.a.webkitFullscreenElement||p.a.mozFullScreenElement||p.a.msFullscreenElement;e&&e.contains(r.tech_.el())?r.masterPlaylistController_.fastQualityChange_():r.masterPlaylistController_.checkABR_()})),r.on(r.tech_,"seeking",(function(){this.ignoreNextSeekingEvent_?this.ignoreNextSeekingEvent_=!1:this.setCurrentTime(this.tech_.currentTime())})),r.on(r.tech_,"error",(function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()})),r.on(r.tech_,"play",r.play),r}y()(e,t);var n=e.prototype;return n.setOptions_=function(){var t=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=!1!==this.options_.handleManifestRedirects,this.options_.limitRenditionByPlayerDimensions=!1!==this.options_.limitRenditionByPlayerDimensions,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage="undefined"!==typeof this.source_.useBandwidthFromLocalStorage?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,"number"!==typeof this.options_.blacklistDuration&&(this.options_.blacklistDuration=300),"number"!==typeof this.options_.bandwidth&&this.options_.useBandwidthFromLocalStorage){var e=$l();e&&e.bandwidth&&(this.options_.bandwidth=e.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),e&&e.throughput&&(this.options_.throughput=e.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}"number"!==typeof this.options_.bandwidth&&(this.options_.bandwidth=iu.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===iu.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach((function(e){"undefined"!==typeof t.source_[e]&&(t.options_[e]=t.source_[e])})),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},n.src=function(t,e){var n=this;if(t){var i;this.setOptions_(),this.options_.src=0===(i=this.source_.src).toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")?JSON.parse(i.substring(i.indexOf(",")+1)):i,this.options_.tech=this.tech_,this.options_.externVhs=Gl,this.options_.sourceType=rt(e),this.options_.seekTo=function(t){n.tech_.setCurrentTime(t)},this.options_.smoothQualityChange&&Za.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new zl(this.options_);var r=Za.mergeOptions({liveRangeSafeTimeDelta:Ka},this.options_,{seekable:function(){return n.seekable()},media:function(){return n.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new Hl(r),this.masterPlaylistController_.on("error",(function(){var t=Za.players[n.tech_.options_.playerId],e=n.masterPlaylistController_.error;"object"!==typeof e||e.code?"string"===typeof e&&(e={message:e,code:3}):e.code=3,t.error(e)}));var o=this.options_.experimentalBufferBasedABR?Gl.movingAverageBandwidthSelector(.55):Gl.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):o.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Gl.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(t){this.masterPlaylistController_.selectPlaylist=t.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=t,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.bandwidth},set:function(t){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=t,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var t,e=1/(this.bandwidth||1);return t=this.throughput>0?1/this.throughput:0,Math.floor(1/(e+t))},set:function(){Za.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return n.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return n.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return n.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return n.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return n.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return n.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return n.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return n.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return n.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return n.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return n.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return n.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return es(n.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return n.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return n.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return n.tech_.name_},enumerable:!0},duration:{get:function(){return n.tech_.duration()},enumerable:!0},master:{get:function(){return n.playlists.master},enumerable:!0},playerDimensions:{get:function(){return n.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return es(n.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return n.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",(function(){n.options_.useBandwidthFromLocalStorage&&function(t){if(!h.a.localStorage)return!1;var e=$l();e=e?Za.mergeOptions(e,t):t;try{h.a.localStorage.setItem(Yl,JSON.stringify(e))}catch(n){return!1}}({bandwidth:n.bandwidth,throughput:Math.round(n.throughput)})})),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var t;(t=n).representations=function(){var e=t.masterPlaylistController_.master(),n=ys(e)?t.masterPlaylistController_.getAudioTrackPlaylists_():e.playlists;return n?n.filter((function(t){return!ps(t)})).map((function(e,n){return new Fl(t,e,e.id)})):[]}})),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",(function(){n.setupEme_()})),this.on(this.masterPlaylistController_,"progress",(function(){this.tech_.trigger("progress")})),this.on(this.masterPlaylistController_,"firstplay",(function(){this.ignoreNextSeekingEvent_=!0})),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=h.a.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},n.setupEme_=function(){var t=this,e=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,n=Ql({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:e&&e.media()});this.player_.tech_.on("keystatuschange",(function(e){"output-restricted"===e.status&&t.masterPlaylistController_.blacklistCurrentPlaylist({playlist:t.masterPlaylistController_.media(),message:"DRM keystatus changed to "+e.status+". Playlist will fail to play. Check for HDCP content.",blacklistDuration:1/0})})),11!==Za.browser.IE_VERSION&&n?(this.logger_("waiting for EME key session creation"),Kl({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:e&&e.media(),mainPlaylists:this.playlists.master.playlists}).then((function(){t.logger_("created EME key session"),t.masterPlaylistController_.sourceUpdater_.initializedEme()})).catch((function(e){t.logger_("error while creating EME key session",e),t.player_.error({message:"Failed to initialize media keys for EME",code:3})}))):this.masterPlaylistController_.sourceUpdater_.initializedEme()},n.setupQualityLevels_=function(){var t=this,e=Za.players[this.tech_.options_.playerId];e&&e.qualityLevels&&!this.qualityLevels_&&(this.qualityLevels_=e.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",(function(){var e,n;e=t.qualityLevels_,(n=t).representations().forEach((function(t){e.addQualityLevel(t)})),Xl(e,n.playlists)})),this.playlists.on("mediachange",(function(){Xl(t.qualityLevels_,t.playlists)})))},e.version=function(){return{"@videojs/http-streaming":Vl,"mux.js":"5.13.0","mpd-parser":"0.19.0","m3u8-parser":"4.7.0","aes-decrypter":"3.1.2"}},n.version=function(){return this.constructor.version()},n.canChangeType=function(){return yl.canChangeType()},n.play=function(){this.masterPlaylistController_.play()},n.setCurrentTime=function(t){this.masterPlaylistController_.setCurrentTime(t)},n.duration=function(){return this.masterPlaylistController_.duration()},n.seekable=function(){return this.masterPlaylistController_.seekable()},n.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&h.a.URL.revokeObjectURL&&(h.a.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),t.prototype.dispose.call(this)},n.convertToProgramTime=function(t,e){return Ys({playlist:this.masterPlaylistController_.media(),time:t,callback:e})},n.seekToProgramTime=function(t,e,n,i){return void 0===n&&(n=!0),void 0===i&&(i=2),Xs({programTime:t,playlist:this.masterPlaylistController_.media(),retryCount:i,pauseAfterSeek:n,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:e})},e}(Za.getComponent("Component")),tc={name:"videojs-http-streaming",VERSION:Vl,canHandleSource:function(t,e){void 0===e&&(e={});var n=Za.mergeOptions(Za.options,e);return tc.canPlayType(t.type,n)},handleSource:function(t,e,n){void 0===n&&(n={});var i=Za.mergeOptions(Za.options,n);return e.vhs=new Jl(t,e,i),Za.hasOwnProperty("hls")||Object.defineProperty(e,"hls",{get:function(){return Za.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),e.vhs},configurable:!0}),e.vhs.xhr=Us(),e.vhs.src(t.src,t.type),e.vhs},canPlayType:function(t,e){void 0===e&&(e={});var n=Za.mergeOptions(Za.options,e).vhs.overrideNative,i=void 0===n?!Za.browser.IS_ANY_SAFARI:n,r=rt(t);return r&&(!Gl.supportsTypeNatively(r)||i)?"maybe":""}};J("avc1.4d400d,mp4a.40.2")&&Za.getTech("Html5").registerSourceHandler(tc,0),Za.VhsHandler=Jl,Object.defineProperty(Za,"HlsHandler",{get:function(){return Za.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Jl},configurable:!0}),Za.VhsSourceHandler=tc,Object.defineProperty(Za,"HlsSourceHandler",{get:function(){return Za.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),tc},configurable:!0}),Za.Vhs=Gl,Object.defineProperty(Za,"Hls",{get:function(){return Za.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Gl},configurable:!0}),Za.use||(Za.registerComponent("Hls",Gl),Za.registerComponent("Vhs",Gl)),Za.options.vhs=Za.options.vhs||{},Za.options.hls=Za.options.hls||{},Za.registerPlugin?Za.registerPlugin("reloadSourceOnError",ql):Za.plugin("reloadSourceOnError",ql);var ec,nc,ic=Za;n(66);!function(t,e,n){e.registerPlugin("pannellum",(function(e){var i=this,r=i.el(),o=r.getElementsByTagName("video")[0],a=t.createElement("div");(e=e||{}).type="equirectangular",e.dynamic=!0,e.showZoomCtrl=!1,e.showFullscreenCtrl=!1,e.autoLoad=!0,e.panorama=o,a.style.visibility="hidden",i.pnlmViewer=n.viewer(a,e),r.insertBefore(a,r.firstChild),o.style.display="none",i.on("play",(function(){o.readyState>1&&i.pnlmViewer.setUpdate(!0)})),i.on("canplay",(function(){i.paused()||i.pnlmViewer.setUpdate(!0)})),i.on("pause",(function(){i.pnlmViewer.setUpdate(!1)})),i.on("loadeddata",(function(){a.style.visibility="visible"})),i.on("seeking",(function(){i.paused()&&i.pnlmViewer.setUpdate(!0)})),i.on("seeked",(function(){i.paused()&&i.pnlmViewer.setUpdate(!1)}))}))}(document,ic,pannellum);var rc=(nc=ec=function(t){function e(n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!==typeof e&&"function"!==typeof e?t:e}(this,t.call(this,n));return i.renderVideo=function(t){var e=i.props.children,n=[].concat(e),r=[];if(Array.isArray(n)&&n.map((function(t){switch(t.props.type){case"info":return r.push({id:Math.random().toString(36).substr(2,9),type:t.props.type,pitch:t.props.pitch?t.props.pitch:10,yaw:t.props.yaw?t.props.yaw:10,text:t.props.text?t.props.text:"",URL:t.props.URL?t.props.URL:""});case"custom":return r.push({id:Math.random().toString(36).substr(2,9),pitch:t.props.pitch?t.props.pitch:10,yaw:t.props.yaw?t.props.yaw:10,cssClass:t.props.cssClass?t.props.cssClass:"tooltipcss",createTooltipFunc:t.props.tooltip?t.props.tooltip:i.hotspotTooltip,createTooltipArgs:t.props.tooltipArg?t.props.tooltipArg:{},clickHandlerFunc:t.props.handleClick?t.props.handleClick:i.handleClickHotspot,clickHandlerArgs:t.props.handleClickArg?t.props.handleClickArg:{name:"test"}});default:return[]}})),"update"===t){i.video=ic(i.videoNode);var o=[].concat(i.video.pnlmViewer.getConfig().hotSpots);return i.video.pnlmViewer.setYaw(i.props.yaw),i.video.pnlmViewer.setPitch(i.props.pitch),i.video.pnlmViewer.setHfov(i.props.hfov),i.video.pnlmViewer.setHfovBounds([i.props.minHfov,i.props.maxHfov]),o.map((function(t){return i.video.pnlmViewer.removeHotSpot(t.id)})),r.map((function(t){return i.video.pnlmViewer.addHotSpot(t)})),i.video.src({type:"video/mp4",src:i.props.video}),i.video.play()}i.video=ic(i.videoNode,{loop:i.props.loop,autoplay:i.props.autoplay,controls:i.props.controls,muted:i.props.muted,plugins:{pannellum:{yaw:i.props.yaw,pitch:i.props.pitch,hfov:i.props.hfov,minHfov:i.props.minHfov,maxHfov:i.props.maxHfov,minPitch:i.props.minPitch,maxPitch:i.props.maxPitch,minYaw:i.props.minYaw,maxYaw:i.props.maxYaw,hotSpotDebug:i.props.hotspotDebug,autoRotate:i.props.autoRotate,mouseZoom:i.props.mouseZoom,hotSpots:r}}}),i.video.src({type:"video/mp4",src:i.props.video}),i.video.play()},i.componentDidMount=function(){i.renderVideo("mount")},i.handleClickHotspot=function(t,e){console.log("hotspot clicked",e.name)},i.hotspotTooltip=function(t,e){t.setAttribute("id","textInfo");var n=document.createElement("div");n.classList.add("hotspot");var i=document.createElement("div");i.classList.add("out");var r=document.createElement("div");r.classList.add("in"),document.createElement("div").classList.add("image"),t.appendChild(n),n.appendChild(r),n.appendChild(i)},i.getViewer=function(){return i.video.pnlmViewer},i.state={id:Math.random().toString(36).substr(2,9)},i}return function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.componentDidUpdate=function(t){this.renderVideo("update")},e.prototype.componentWillUnmount=function(){ic(this.videoNode).dispose()},e.prototype.render=function(){var t=this,e=this.props,n=e.width,i=e.height,r=(e.video,{width:n,height:i});return a.a.createElement("div",{"data-vjs-player":!0},a.a.createElement("video",{id:this.props.id?this.props.id:this.state.id,className:"video-js vjs-default-skin vjs-big-play-centered",ref:function(e){return t.videoNode=e},preload:"none",crossOrigin:"anonymous",style:r}))},e}(o.Component),ec.defaultProps={children:[],width:"100%",height:"400px",video:"",yaw:0,pitch:0,hfov:100,minHfov:50,maxHfov:150,minPitch:-90,maxPitch:90,minYaw:-180,maxYaw:180,hotspotDebug:!1,autoRotate:0,mouseZoom:!0,loop:!1,autoplay:!0,controls:!1,muted:!0},nc);rc.propTypes={};var oc=rc},function(t,e,n){"use strict";function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.d(e,"a",(function(){return o}))},function(t,e,n){"use strict";!function t(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}(),t.exports=n(46)},function(t,e,n){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(u){r=!0,o=u}finally{try{i||null==s.return||s.return()}finally{if(r)throw o}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}n.d(e,"a",(function(){return r}))},function(t,e){var n,i,r,o,a,s,u,l=9e4;n=function(t){return t*l},i=function(t,e){return t*e},r=function(t){return t/l},o=function(t,e){return t/e},a=function(t,e){return n(o(t,e))},s=function(t,e){return i(r(t),e)},u=function(t,e,n){return r(n?t:t-e)},t.exports={ONE_SECOND_IN_TS:l,secondsToVideoTs:n,secondsToAudioTs:i,videoTsToSeconds:r,audioTsToSeconds:o,audioTsToVideoTs:a,videoTsToAudioTs:s,metadataTsToSeconds:u}},function(t,e,n){"use strict";function i(t,e){return void 0===e&&(e=Object),e&&"function"===typeof e.freeze?e.freeze(t):t}var r=i({HTML:"text/html",isHTML:function(t){return t===r.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),o=i({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(t){return t===o.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});e.freeze=i,e.MIME_TYPE=r,e.NAMESPACE=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",(function(){return i}))},function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o}));var i=n(0),r=n.n(i);function o(e){for(var n,i=(n=e,r.a.atob?r.a.atob(n):t.from(n,"base64").toString("binary")),o=new Uint8Array(i.length),a=0;a<i.length;a++)o[a]=i.charCodeAt(a);return o}}).call(this,n(59).Buffer)},function(t,e,n){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}n.d(e,"a",(function(){return a}));var r=n(36);function o(t,e){return!e||"object"!==Object(r.a)(e)&&"function"!==typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function a(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=i(t);if(e){var a=i(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return o(this,n)}}},function(t,e,n){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function r(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";function i(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},o=Object.keys(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(i=0;i<o.length;i++)n=o[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}n.d(e,"a",(function(){return i}))},,function(t,e,n){"use strict";var i=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function a(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach((function(t){i[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(r){return!1}}()?Object.assign:function(t,e){for(var n,s,u=a(t),l=1;l<arguments.length;l++){for(var c in n=Object(arguments[l]))r.call(n,c)&&(u[c]=n[c]);if(i){s=i(n);for(var h=0;h<s.length;h++)o.call(n,s[h])&&(u[s[h]]=n[s[h]])}}return u}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},function(t,e){function n(e,i){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,i)}t.exports=n},function(t,e,n){"use strict";var i=n(0),r=n(9),o=n(53);s.httpHandler=n(54);function a(t,e,n){var i=t;return o(e)?(n=e,"string"===typeof t&&(i={uri:t})):i=r({},e,{uri:t}),i.callback=n,i}function s(t,e,n){return u(e=a(t,e,n))}function u(t){if("undefined"===typeof t.callback)throw new Error("callback argument missing");var e=!1,n=function(n,i,r){e||(e=!0,t.callback(n,i,r))};function i(){var t=void 0;if(t=l.response?l.response:l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(n){}return null}(l),g)try{t=JSON.parse(t)}catch(e){}return t}function r(t){return clearTimeout(c),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,n(t,_)}function o(){if(!u){var e;clearTimeout(c),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=_,o=null;return 0!==e?(r={body:i(),statusCode:e,method:d,headers:{},url:h,rawRequest:l},l.getAllResponseHeaders&&(r.headers=function(t){var e={};return t?(t.trim().split("\n").forEach((function(t){var n=t.indexOf(":"),i=t.slice(0,n).trim().toLowerCase(),r=t.slice(n+1).trim();"undefined"===typeof e[i]?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]})),e):e}(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),n(o,r,r.body)}}var a,u,l=t.xhr||null;l||(l=t.cors||t.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var c,h=l.url=t.uri||t.url,d=l.method=t.method||"GET",p=t.body||t.data,f=l.headers=t.headers||{},m=!!t.sync,g=!1,_={body:void 0,headers:{},statusCode:0,method:d,url:h,rawRequest:l};if("json"in t&&!1!==t.json&&(g=!0,f.accept||f.Accept||(f.Accept="application/json"),"GET"!==d&&"HEAD"!==d&&(f["content-type"]||f["Content-Type"]||(f["Content-Type"]="application/json"),p=JSON.stringify(!0===t.json?p:t.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(o,0)},l.onload=o,l.onerror=r,l.onprogress=function(){},l.onabort=function(){u=!0},l.ontimeout=r,l.open(d,h,!m,t.username,t.password),m||(l.withCredentials=!!t.withCredentials),!m&&t.timeout>0&&(c=setTimeout((function(){if(!u){u=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)}}),t.timeout)),l.setRequestHeader)for(a in f)f.hasOwnProperty(a)&&l.setRequestHeader(a,f[a]);else if(t.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"===typeof t.beforeSend&&t.beforeSend(l),l.send(p||null),l}t.exports=s,t.exports.default=s,s.XMLHttpRequest=i.XMLHttpRequest||function(){},s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:i.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],(function(t){s["delete"===t?"del":t]=function(e,n,i){return(n=a(e,n,i)).method=t.toUpperCase(),u(n)}}))},function(t,e,n){var i=n(0),r=t.exports={WebVTT:n(55),VTTCue:n(56),VTTRegion:n(57)};i.vttjs=r,i.WebVTT=r.WebVTT;var o=r.VTTCue,a=r.VTTRegion,s=i.VTTCue,u=i.VTTRegion;r.shim=function(){i.VTTCue=o,i.VTTRegion=a},r.restore=function(){i.VTTCue=s,i.VTTRegion=u},i.VTTCue||r.shim()},function(t,e,n){!function(e){var n=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/?#]*\/)*[^;?#]*)?(;[^?#]*)?(\?[^#]*)?(#[^]*)?$/,i=/^([^\/?#]*)([^]*)$/,r=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,a={buildAbsoluteURL:function(t,e,n){if(n=n||{},t=t.trim(),!(e=e.trim())){if(!n.alwaysNormalize)return t;var r=a.parseURL(t);if(!r)throw new Error("Error trying to parse base URL.");return r.path=a.normalizePath(r.path),a.buildURLFromParts(r)}var o=a.parseURL(e);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return n.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):e;var s=a.parseURL(t);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var u=i.exec(s.path);s.netLoc=u[1],s.path=u[2]}s.netLoc&&!s.path&&(s.path="/");var l={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(l.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var c=s.path,h=c.substring(0,c.lastIndexOf("/")+1)+o.path;l.path=a.normalizePath(h)}else l.path=s.path,o.params||(l.params=s.params,o.query||(l.query=s.query));return null===l.path&&(l.path=n.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(l)},parseURL:function(t){var e=n.exec(t);return e?{scheme:e[1]||"",netLoc:e[2]||"",path:e[3]||"",params:e[4]||"",query:e[5]||"",fragment:e[6]||""}:null},normalizePath:function(t){for(t=t.split("").reverse().join("").replace(r,"");t.length!==(t=t.replace(o,"")).length;);return t.split("").reverse().join("")},buildURLFromParts:function(t){return t.scheme+t.netLoc+t.path+t.params+t.query+t.fragment}};t.exports=a}()},function(t,e,n){t.exports=n(50)()},function(t,e,n){},function(t,e,n){},function(t,e){window.libpannellum=function(t,e,n){function i(i){var a,c,h,d,p,f,m,g,_,v,y,b,T,w,x,S,E=e.createElement("canvas");function k(t,e){return 1==t.level&&1!=e.level?-1:1==e.level&&1!=t.level?1:e.timestamp-t.timestamp}function C(t,e){return t.level!=e.level?t.level-e.level:t.diff-e.diff}function P(t,e,n,i,r,o){this.vertices=t,this.side=e,this.level=n,this.x=i,this.y=r,this.path=o.replace("%s",e).replace("%l",n).replace("%x",i).replace("%y",r)}function L(t,e,n,i,r){if(function(t,e){var n=D(t,e.slice(0,3)),i=D(t,e.slice(3,6)),r=D(t,e.slice(6,9)),o=D(t,e.slice(9,12)),a=n[0]+i[0]+r[0]+o[0];if(-4==a||4==a)return!1;var s=n[1]+i[1]+r[1]+o[1];if(-4==s||4==s)return!1;return n[2]+i[2]+r[2]+o[2]!=4}(t,e.vertices)){var o=e.vertices,s=o[0]+o[3]+o[6]+o[9],u=o[1]+o[4]+o[7]+o[10],l=o[2]+o[5]+o[8]+o[11],c=Math.sqrt(s*s+u*u+l*l),h=Math.asin(l/c),d=Math.atan2(u,s)-i;d+=d>Math.PI?-2*Math.PI:d<-Math.PI?2*Math.PI:0,d=Math.abs(d),e.diff=Math.acos(Math.sin(n)*Math.sin(h)+Math.cos(n)*Math.cos(h)*Math.cos(d));for(var p=!1,f=0;f<a.nodeCache.length;f++)if(a.nodeCache[f].path==e.path){p=!0,a.nodeCache[f].timestamp=a.nodeCacheTimestamp++,a.nodeCache[f].diff=e.diff,a.currentNodes.push(a.nodeCache[f]);break}if(p||(e.timestamp=a.nodeCacheTimestamp++,a.currentNodes.push(e),a.nodeCache.push(e)),e.level<a.level){var m=_.cubeResolution*Math.pow(2,e.level-_.maxLevel),g=Math.ceil(m*_.invTileResolution)-1,v=m%_.tileResolution*2,y=2*m%_.tileResolution;0===y&&(y=_.tileResolution),0===v&&(v=2*_.tileResolution);var b=.5;e.x!=g&&e.y!=g||(b=1-_.tileResolution/(_.tileResolution+y));var T,w=1-b,x=[],S=b,E=b,k=b,C=w,I=w,A=w;y<_.tileResolution&&(e.x==g&&e.y!=g?(E=.5,I=.5,"d"!=e.side&&"u"!=e.side||(k=.5,A=.5)):e.x!=g&&e.y==g&&(S=.5,C=.5,"l"!=e.side&&"r"!=e.side||(k=.5,A=.5))),v<=_.tileResolution&&(e.x==g&&(S=0,C=1,"l"!=e.side&&"r"!=e.side||(k=0,A=1)),e.y==g&&(E=0,I=1,"d"!=e.side&&"u"!=e.side||(k=0,A=1))),T=new P([o[0],o[1],o[2],o[0]*S+o[3]*C,o[1]*b+o[4]*w,o[2]*k+o[5]*A,o[0]*S+o[6]*C,o[1]*E+o[7]*I,o[2]*k+o[8]*A,o[0]*b+o[9]*w,o[1]*E+o[10]*I,o[2]*k+o[11]*A],e.side,e.level+1,2*e.x,2*e.y,_.fullpath),x.push(T),e.x==g&&v<=_.tileResolution||(T=new P([o[0]*S+o[3]*C,o[1]*b+o[4]*w,o[2]*k+o[5]*A,o[3],o[4],o[5],o[3]*b+o[6]*w,o[4]*E+o[7]*I,o[5]*k+o[8]*A,o[0]*S+o[6]*C,o[1]*E+o[7]*I,o[2]*k+o[8]*A],e.side,e.level+1,2*e.x+1,2*e.y,_.fullpath),x.push(T)),e.x==g&&v<=_.tileResolution||e.y==g&&v<=_.tileResolution||(T=new P([o[0]*S+o[6]*C,o[1]*E+o[7]*I,o[2]*k+o[8]*A,o[3]*b+o[6]*w,o[4]*E+o[7]*I,o[5]*k+o[8]*A,o[6],o[7],o[8],o[9]*S+o[6]*C,o[10]*b+o[7]*w,o[11]*k+o[8]*A],e.side,e.level+1,2*e.x+1,2*e.y+1,_.fullpath),x.push(T)),e.y==g&&v<=_.tileResolution||(T=new P([o[0]*b+o[9]*w,o[1]*E+o[10]*I,o[2]*k+o[11]*A,o[0]*S+o[6]*C,o[1]*E+o[7]*I,o[2]*k+o[8]*A,o[9]*S+o[6]*C,o[10]*b+o[7]*w,o[11]*k+o[8]*A,o[9],o[10],o[11]],e.side,e.level+1,2*e.x,2*e.y+1,_.fullpath),x.push(T));for(var M=0;M<x.length;M++)L(t,x[M],n,i,r)}}}function I(t,e,n){var i=Math.sin(e),r=Math.cos(e);return"x"==n?[t[0],r*t[1]+i*t[2],r*t[2]-i*t[1],t[3],r*t[4]+i*t[5],r*t[5]-i*t[4],t[6],r*t[7]+i*t[8],r*t[8]-i*t[7]]:"y"==n?[r*t[0]-i*t[2],t[1],r*t[2]+i*t[0],r*t[3]-i*t[5],t[4],r*t[5]+i*t[3],r*t[6]-i*t[8],t[7],r*t[8]+i*t[6]]:"z"==n?[r*t[0]+i*t[1],r*t[1]-i*t[0],t[2],r*t[3]+i*t[4],r*t[4]-i*t[3],t[5],r*t[6]+i*t[7],r*t[7]-i*t[6],t[8]]:void 0}function A(t){return[t[0],t[4],t[8],t[12],t[1],t[5],t[9],t[13],t[2],t[6],t[10],t[14],t[3],t[7],t[11],t[15]]}E.style.width=E.style.height="100%",i.appendChild(E),this.init=function(t,k,C,P,L,I,A,M){if(k===n&&(k="equirectangular"),"equirectangular"!=k&&"cubemap"!=k&&"multires"!=k)throw console.log("Error: invalid image type specified!"),{type:"config error"};if(v=k,_=t,y=C,S=M||{},a){if(h&&(c.detachShader(a,h),c.deleteShader(h)),d&&(c.detachShader(a,d),c.deleteShader(d)),c.bindBuffer(c.ARRAY_BUFFER,null),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,null),a.texture&&c.deleteTexture(a.texture),a.nodeCache)for(var O=0;O<a.nodeCache.length;O++)c.deleteTexture(a.nodeCache[O].texture);c.deleteProgram(a),a=n}var R;g=n;var D,B=!1;if("cubemap"==v)for(R=0;R<6;R++)_[R].width>0?(D===n&&(D=_[R].width),D!=_[R].width&&console.log("Cube faces have inconsistent widths: "+D+" vs. "+_[R].width)):B=!0;function U(t){if(B){var e=t*t*4,n=new Uint8ClampedArray(e),i=M.backgroundColor?M.backgroundColor:[0,0,0];i[0]*=255,i[1]*=255,i[2]*=255;for(var r=0;r<e;r++)n[r++]=i[0],n[r++]=i[1],n[r++]=i[2];var o=new ImageData(n,t,t);for(R=0;R<6;R++)0==_[R].width&&(_[R]=o)}}if("cubemap"==v&&0!==(D&D-1)&&(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 9_/)||navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 10_/)||navigator.userAgent.match(/Trident.*rv[ :]*11\./))||(c||(c=E.getContext("experimental-webgl",{alpha:!1,depth:!1})),c&&1286==c.getError()&&N()),c||!("multires"==v&&_.hasOwnProperty("fallbackPath")||"cubemap"==v)||!("WebkitAppearance"in e.documentElement.style)&&!navigator.userAgent.match(/Trident.*rv[ :]*11\./)&&-1===navigator.appVersion.indexOf("MSIE 10")){if(!c)throw console.log("Error: no WebGL support detected!"),{type:"no webgl"};"cubemap"==v&&U(D),_.basePath?_.fullpath=_.basePath+_.path:_.fullpath=_.path,_.invTileResolution=1/_.tileResolution;var z=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];for(m=[],R=0;R<6;R++)m[R]=z.slice(12*R,12*R+12),z=[-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,-1,1,1,1,1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1,1,-1,1,-1,-1,1,-1,1,1,-1,1,-1,-1,-1,-1,-1,-1,1,1,1,-1,1,1,1,1,-1,1,1,-1,-1];var F=0,j=0;if("equirectangular"==v?(F=Math.max(_.width,_.height),j=c.getParameter(c.MAX_TEXTURE_SIZE)):"cubemap"==v&&(F=D,j=c.getParameter(c.MAX_CUBE_MAP_TEXTURE_SIZE)),F>j)throw console.log("Error: The image is too big; it's "+F+"px wide, but this device's maximum supported size is "+j+"px."),{type:"webgl size error",width:F,maxWidth:j};M===n||M.horizonPitch===n&&M.horizonRoll===n||(g=[M.horizonPitch==n?0:M.horizonPitch,M.horizonRoll==n?0:M.horizonRoll]);var H=c.TEXTURE_2D;c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight),h=c.createShader(c.VERTEX_SHADER);var Z=r;"multires"==v&&(Z=o),c.shaderSource(h,Z),c.compileShader(h),d=c.createShader(c.FRAGMENT_SHADER);var W=u;"cubemap"==v?(H=c.TEXTURE_CUBE_MAP,W=s):"multires"==v&&(W=l),c.shaderSource(d,W),c.compileShader(d),a=c.createProgram(),c.attachShader(a,h),c.attachShader(a,d),c.linkProgram(a),c.getShaderParameter(h,c.COMPILE_STATUS)||console.log(c.getShaderInfoLog(h)),c.getShaderParameter(d,c.COMPILE_STATUS)||console.log(c.getShaderInfoLog(d)),c.getProgramParameter(a,c.LINK_STATUS)||console.log(c.getProgramInfoLog(a)),c.useProgram(a),a.drawInProgress=!1;var q=M.backgroundColor?M.backgroundColor:[0,0,0];c.clearColor(q[0],q[1],q[2],1),c.clear(c.COLOR_BUFFER_BIT),a.texCoordLocation=c.getAttribLocation(a,"a_texCoord"),c.enableVertexAttribArray(a.texCoordLocation),"multires"!=v?(b||(b=c.createBuffer()),c.bindBuffer(c.ARRAY_BUFFER,b),c.bufferData(c.ARRAY_BUFFER,new Float32Array([-1,1,1,1,1,-1,-1,1,1,-1,-1,-1]),c.STATIC_DRAW),c.vertexAttribPointer(a.texCoordLocation,2,c.FLOAT,!1,0,0),a.aspectRatio=c.getUniformLocation(a,"u_aspectRatio"),c.uniform1f(a.aspectRatio,c.drawingBufferWidth/c.drawingBufferHeight),a.psi=c.getUniformLocation(a,"u_psi"),a.theta=c.getUniformLocation(a,"u_theta"),a.f=c.getUniformLocation(a,"u_f"),a.h=c.getUniformLocation(a,"u_h"),a.v=c.getUniformLocation(a,"u_v"),a.vo=c.getUniformLocation(a,"u_vo"),a.rot=c.getUniformLocation(a,"u_rot"),c.uniform1f(a.h,P/(2*Math.PI)),c.uniform1f(a.v,L/Math.PI),c.uniform1f(a.vo,I/Math.PI*2),"equirectangular"==v&&(a.backgroundColor=c.getUniformLocation(a,"u_backgroundColor"),c.uniform4fv(a.backgroundColor,q.concat([1]))),a.texture=c.createTexture(),c.bindTexture(H,a.texture),"cubemap"==v?(c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_X,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_[1]),c.texImage2D(c.TEXTURE_CUBE_MAP_NEGATIVE_X,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_[3]),c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_Y,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_[4]),c.texImage2D(c.TEXTURE_CUBE_MAP_NEGATIVE_Y,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_[5]),c.texImage2D(c.TEXTURE_CUBE_MAP_POSITIVE_Z,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_[0]),c.texImage2D(c.TEXTURE_CUBE_MAP_NEGATIVE_Z,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_[2])):c.texImage2D(H,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_),c.texParameteri(H,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(H,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.texParameteri(H,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(H,c.TEXTURE_MAG_FILTER,c.LINEAR)):(a.vertPosLocation=c.getAttribLocation(a,"a_vertCoord"),c.enableVertexAttribArray(a.vertPosLocation),T||(T=c.createBuffer()),w||(w=c.createBuffer()),x||(x=c.createBuffer()),c.bindBuffer(c.ARRAY_BUFFER,w),c.bufferData(c.ARRAY_BUFFER,new Float32Array([0,0,1,0,1,1,0,1]),c.STATIC_DRAW),c.bindBuffer(c.ELEMENT_ARRAY_BUFFER,x),c.bufferData(c.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,0,2,3]),c.STATIC_DRAW),a.perspUniform=c.getUniformLocation(a,"u_perspMatrix"),a.cubeUniform=c.getUniformLocation(a,"u_cubeMatrix"),a.level=-1,a.currentNodes=[],a.nodeCache=[],a.nodeCacheTimestamp=0);var V=c.getError();if(0!==V)throw console.log("Error: Something went wrong with WebGL!",V),{type:"webgl error"};A()}else{var G;f&&i.removeChild(f),(f=e.createElement("div")).className="pnlm-world",G=_.basePath?_.basePath+_.fallbackPath:_.fallbackPath;var Y=["f","r","b","l","u","d"],X=0,K=function(){var t=e.createElement("canvas");t.className="pnlm-face pnlm-"+Y[this.side]+"face",f.appendChild(t);var n=t.getContext("2d");t.style.width=this.width+4+"px",t.style.height=this.height+4+"px",t.width=this.width+4,t.height=this.height+4,n.drawImage(this,2,2);var i,r,o=n.getImageData(0,0,t.width,t.height),a=o.data;for(i=2;i<t.width-2;i++)for(r=0;r<4;r++)a[4*(i+t.width)+r]=a[4*(i+2*t.width)+r],a[4*(i+t.width*(t.height-2))+r]=a[4*(i+t.width*(t.height-3))+r];for(i=2;i<t.height-2;i++)for(r=0;r<4;r++)a[4*(i*t.width+1)+r]=a[4*(i*t.width+2)+r],a[4*((i+1)*t.width-2)+r]=a[4*((i+1)*t.width-3)+r];for(r=0;r<4;r++)a[4*(t.width+1)+r]=a[4*(2*t.width+2)+r],a[4*(2*t.width-2)+r]=a[4*(3*t.width-3)+r],a[4*(t.width*(t.height-2)+1)+r]=a[4*(t.width*(t.height-3)+2)+r],a[4*(t.width*(t.height-1)-2)+r]=a[4*(t.width*(t.height-2)-3)+r];for(i=1;i<t.width-1;i++)for(r=0;r<4;r++)a[4*i+r]=a[4*(i+t.width)+r],a[4*(i+t.width*(t.height-1))+r]=a[4*(i+t.width*(t.height-2))+r];for(i=1;i<t.height-1;i++)for(r=0;r<4;r++)a[i*t.width*4+r]=a[4*(i*t.width+1)+r],a[4*((i+1)*t.width-1)+r]=a[4*((i+1)*t.width-2)+r];for(r=0;r<4;r++)a[r]=a[4*(t.width+1)+r],a[4*(t.width-1)+r]=a[4*(2*t.width-2)+r],a[t.width*(t.height-1)*4+r]=a[4*(t.width*(t.height-2)+1)+r],a[4*(t.width*t.height-1)+r]=a[4*(t.width*(t.height-1)-2)+r];n.putImageData(o,0,0),Q.call(this)},Q=function(){this.width>0?(p===n&&(p=this.width),p!=this.width&&console.log("Fallback faces have inconsistent widths: "+p+" vs. "+this.width)):B=!0,6==++X&&(p=this.width,i.appendChild(f),A())};for(B=!1,R=0;R<6;R++){var $=new Image;$.crossOrigin=S.crossOrigin?S.crossOrigin:"anonymous",$.side=R,$.onload=K,$.onerror=Q,$.src="multires"==v?encodeURI(G.replace("%s",Y[R])+"."+_.extension):encodeURI(_[R].src)}U(p)}},this.destroy=function(){if(i!==n&&(E!==n&&i.contains(E)&&i.removeChild(E),f!==n&&i.contains(f)&&i.removeChild(f)),c){var t=c.getExtension("WEBGL_lose_context");t&&t.loseContext()}},this.resize=function(){var e=t.devicePixelRatio||1;E.width=E.clientWidth*e,E.height=E.clientHeight*e,c&&(1286==c.getError()&&N(),c.viewport(0,0,c.drawingBufferWidth,c.drawingBufferHeight),"multires"!=v&&c.uniform1f(a.aspectRatio,E.clientWidth/E.clientHeight))},this.resize(),this.setPose=function(t,e){g=[t,e]},this.render=function(t,e,i,r){var o,s,u=0;if(r===n&&(r={}),r.roll&&(u=r.roll),g!==n){var l=g[0],h=g[1],d=t,b=e,x=Math.cos(h)*Math.sin(t)*Math.sin(l)+Math.cos(t)*(Math.cos(l)*Math.cos(e)+Math.sin(h)*Math.sin(l)*Math.sin(e)),S=-Math.sin(t)*Math.sin(h)+Math.cos(t)*Math.cos(h)*Math.sin(e),O=Math.cos(h)*Math.cos(l)*Math.sin(t)+Math.cos(t)*(-Math.cos(e)*Math.sin(l)+Math.cos(l)*Math.sin(h)*Math.sin(e));t=Math.asin(Math.max(Math.min(O,1),-1)),e=Math.atan2(S,x);var D=[Math.cos(d)*(Math.sin(h)*Math.sin(l)*Math.cos(b)-Math.cos(l)*Math.sin(b)),Math.cos(d)*Math.cos(h)*Math.cos(b),Math.cos(d)*(Math.cos(l)*Math.sin(h)*Math.cos(b)+Math.sin(b)*Math.sin(l))],N=[-Math.cos(t)*Math.sin(e),Math.cos(t)*Math.cos(e)],B=Math.acos(Math.max(Math.min((D[0]*N[0]+D[1]*N[1])/(Math.sqrt(D[0]*D[0]+D[1]*D[1]+D[2]*D[2])*Math.sqrt(N[0]*N[0]+N[1]*N[1])),1),-1));D[2]<0&&(B=2*Math.PI-B),u+=B}if(c||"multires"!=v&&"cubemap"!=v){if("multires"!=v){var U=2*Math.atan(Math.tan(.5*i)/(c.drawingBufferWidth/c.drawingBufferHeight));o=1/Math.tan(.5*U),c.uniform1f(a.psi,e),c.uniform1f(a.theta,t),c.uniform1f(a.rot,u),c.uniform1f(a.f,o),!0===y&&"equirectangular"==v&&(c.bindTexture(c.TEXTURE_2D,a.texture),c.texImage2D(c.TEXTURE_2D,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,_)),c.drawArrays(c.TRIANGLES,0,6)}else{var z=function(t,e,n,i){var r=2*Math.atan(Math.tan(t/2)*c.drawingBufferHeight/c.drawingBufferWidth),o=1/Math.tan(r/2);return[o/e,0,0,0,0,o,0,0,0,0,(i+n)/(n-i),2*i*n/(n-i),0,0,-1,0]}(i,c.drawingBufferWidth/c.drawingBufferHeight,.1,100);!function(t){var e=1;for(;e<_.maxLevel&&c.drawingBufferWidth>_.tileResolution*Math.pow(2,e-1)*Math.tan(t/2)*.707;)e++;a.level=e}(i);var F=[1,0,0,0,1,0,0,0,1];F=I(F,-u,"z"),F=I(F,-t,"x"),F=I(F,e,"y"),F=[(Y=F)[0],Y[1],Y[2],0,Y[3],Y[4],Y[5],0,Y[6],Y[7],Y[8],0,0,0,0,1],c.uniformMatrix4fv(a.perspUniform,!1,new Float32Array(A(z))),c.uniformMatrix4fv(a.cubeUniform,!1,new Float32Array(A(F)));var j=(G=F,[(V=z)[0]*G[0],V[0]*G[1],V[0]*G[2],0,V[5]*G[4],V[5]*G[5],V[5]*G[6],0,V[10]*G[8],V[10]*G[9],V[10]*G[10],V[11],-G[8],-G[9],-G[10],0]);if(a.nodeCache.sort(k),a.nodeCache.length>200&&a.nodeCache.length>a.currentNodes.length+50)for(var H=a.nodeCache.splice(200,a.nodeCache.length-200),Z=0;Z<H.length;Z++)c.deleteTexture(H[Z].texture);a.currentNodes=[];var W=["f","b","u","d","l","r"];for(s=0;s<6;s++){L(j,new P(m[s],W[s],1,0,0,_.fullpath),t,e,i)}for(a.currentNodes.sort(C),Z=M.length-1;Z>=0;Z--)-1===a.currentNodes.indexOf(M[Z].node)&&(M[Z].node.textureLoad=!1,M.splice(Z,1));if(0===M.length)for(Z=0;Z<a.currentNodes.length;Z++){var q=a.currentNodes[Z];if(!q.texture&&!q.textureLoad){q.textureLoad=!0,setTimeout(R,0,q);break}}!function(){if(!a.drawInProgress){a.drawInProgress=!0,c.clear(c.COLOR_BUFFER_BIT);for(var t=0;t<a.currentNodes.length;t++)a.currentNodes[t].textureLoaded>1&&(c.bindBuffer(c.ARRAY_BUFFER,T),c.bufferData(c.ARRAY_BUFFER,new Float32Array(a.currentNodes[t].vertices),c.STATIC_DRAW),c.vertexAttribPointer(a.vertPosLocation,3,c.FLOAT,!1,0,0),c.bindBuffer(c.ARRAY_BUFFER,w),c.vertexAttribPointer(a.texCoordLocation,2,c.FLOAT,!1,0,0),c.bindTexture(c.TEXTURE_2D,a.currentNodes[t].texture),c.drawElements(c.TRIANGLES,6,c.UNSIGNED_SHORT,0));a.drawInProgress=!1}}()}var V,G,Y;if(r.returnImage!==n)return E.toDataURL("image/png")}else{var X={f:"translate3d(-"+((s=p/2)+2)+"px, -"+(s+2)+"px, -"+s+"px)",b:"translate3d("+(s+2)+"px, -"+(s+2)+"px, "+s+"px) rotateX(180deg) rotateZ(180deg)",u:"translate3d(-"+(s+2)+"px, -"+s+"px, "+(s+2)+"px) rotateX(270deg)",d:"translate3d(-"+(s+2)+"px, "+s+"px, -"+(s+2)+"px) rotateX(90deg)",l:"translate3d(-"+s+"px, -"+(s+2)+"px, "+(s+2)+"px) rotateX(180deg) rotateY(90deg) rotateZ(180deg)",r:"translate3d("+s+"px, -"+(s+2)+"px, -"+(s+2)+"px) rotateY(270deg)"},K=(o=1/Math.tan(i/2))*E.clientWidth/2+"px",Q="perspective("+K+") translateZ("+K+") rotateX("+t+"rad) rotateY("+e+"rad) ",$=Object.keys(X);for(Z=0;Z<6;Z++){var J=f.querySelector(".pnlm-"+$[Z]+"face");J&&(J.style.webkitTransform=Q+X[$[Z]],J.style.transform=Q+X[$[Z]])}}},this.isLoading=function(){if(c&&"multires"==v)for(var t=0;t<a.currentNodes.length;t++)if(!a.currentNodes[t].textureLoaded)return!0;return!1},this.getCanvas=function(){return E};var M=[],O=function(){var t,e=4,n={};function i(){var i=this;this.texture=this.callback=null,this.image=new Image,this.image.crossOrigin=t||"anonymous";var r=function(){var t,r;i.image.width>0&&i.image.height>0?(t=i.image,r=i.texture,c.bindTexture(c.TEXTURE_2D,r),c.texImage2D(c.TEXTURE_2D,0,c.RGB,c.RGB,c.UNSIGNED_BYTE,t),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.LINEAR),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE),c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE),c.bindTexture(c.TEXTURE_2D,null),i.callback(i.texture,!0)):i.callback(i.texture,!1),function(t){if(M.length){var i=M.shift();t.loadTexture(i.src,i.texture,i.callback)}else n[e++]=t}(i)};this.image.addEventListener("load",r),this.image.addEventListener("error",r)}function r(t,e,n,i){this.node=t,this.src=e,this.texture=n,this.callback=i}i.prototype.loadTexture=function(t,e,n){this.texture=e,this.callback=n,this.image.src=t};for(var o=0;o<e;o++)n[o]=new i;return function(i,o,a,s){t=s;var u=c.createTexture();return e?n[--e].loadTexture(o,u,a):M.push(new r(i,o,u,a)),u}}();function R(t){O(t,encodeURI(t.path+"."+_.extension),(function(e,n){t.texture=e,t.textureLoaded=n?2:1}),S.crossOrigin)}function D(t,e){var n=function(t,e){return[t[0]*e[0]+t[1]*e[1]+t[2]*e[2],t[4]*e[0]+t[5]*e[1]+t[6]*e[2],t[11]+t[8]*e[0]+t[9]*e[1]+t[10]*e[2],1/(t[12]*e[0]+t[13]*e[1]+t[14]*e[2])]}(t,e),i=n[0]*n[3],r=n[1]*n[3],o=n[2]*n[3],a=[0,0,0];return i<-1&&(a[0]=-1),i>1&&(a[0]=1),r<-1&&(a[1]=-1),r>1&&(a[1]=1),(o<-1||o>1)&&(a[2]=1),a}function N(){console.log("Reducing canvas size due to error 1286!"),E.width=Math.round(E.width/2),E.height=Math.round(E.height/2)}}var r=["attribute vec2 a_texCoord;","varying vec2 v_texCoord;","void main() {","gl_Position = vec4(a_texCoord, 0.0, 1.0);","v_texCoord = a_texCoord;","}"].join(""),o=["attribute vec3 a_vertCoord;","attribute vec2 a_texCoord;","uniform mat4 u_cubeMatrix;","uniform mat4 u_perspMatrix;","varying mediump vec2 v_texCoord;","void main(void) {","gl_Position = u_perspMatrix * u_cubeMatrix * vec4(a_vertCoord, 1.0);","v_texCoord = a_texCoord;","}"].join(""),a=["precision mediump float;","uniform float u_aspectRatio;","uniform float u_psi;","uniform float u_theta;","uniform float u_f;","uniform float u_h;","uniform float u_v;","uniform float u_vo;","uniform float u_rot;","const float PI = 3.14159265358979323846264;","uniform sampler2D u_image;","uniform samplerCube u_imageCube;","varying vec2 v_texCoord;","uniform vec4 u_backgroundColor;","void main() {","float x = v_texCoord.x * u_aspectRatio;","float y = v_texCoord.y;","float sinrot = sin(u_rot);","float cosrot = cos(u_rot);","float rot_x = x * cosrot - y * sinrot;","float rot_y = x * sinrot + y * cosrot;","float sintheta = sin(u_theta);","float costheta = cos(u_theta);","float a = u_f * costheta - rot_y * sintheta;","float root = sqrt(rot_x * rot_x + a * a);","float lambda = atan(rot_x / root, a / root) + u_psi;","float phi = atan((rot_y * costheta + u_f * sintheta) / root);"].join("\n"),s=a+["float cosphi = cos(phi);","gl_FragColor = textureCube(u_imageCube, vec3(cosphi*sin(lambda), sin(phi), cosphi*cos(lambda)));","}"].join("\n"),u=a+["lambda = mod(lambda + PI, PI * 2.0) - PI;","vec2 coord = vec2(lambda / PI, phi / (PI / 2.0));","if(coord.x < -u_h || coord.x > u_h || coord.y < -u_v + u_vo || coord.y > u_v + u_vo)","gl_FragColor = u_backgroundColor;","else","gl_FragColor = texture2D(u_image, vec2((coord.x + u_h) / (u_h * 2.0), (-coord.y + u_v + u_vo) / (u_v * 2.0)));","}"].join("\n"),l=["varying mediump vec2 v_texCoord;","uniform sampler2D u_sampler;","void main(void) {","gl_FragColor = texture2D(u_sampler, v_texCoord);","}"].join("");return{renderer:function(t,e,n,r){return new i(t,e,n,r)}}}(window,document)},function(t,e){window.pannellum=function(t,e,n){function i(i,r){var o,a,s,u,l,c,h,d,p,f=this,m=!1,g=Date.now(),_=0,v=0,y=-1,b=0,T=0,w=new Array(10),x=!1,S=!1,E=!1,k={yaw:0,pitch:0,hfov:0},C=!1,P=!1,L=0,I=0,A={},M={},O=[],R=!1,D=!1,N={hfov:100,minHfov:50,maxHfov:120,pitch:0,minPitch:n,maxPitch:n,yaw:0,minYaw:-180,maxYaw:180,roll:0,haov:360,vaov:180,vOffset:0,autoRotate:!1,autoRotateInactivityDelay:-1,autoRotateStopDelay:n,type:"equirectangular",northOffset:0,showFullscreenCtrl:!0,dynamic:!1,doubleClickZoom:!0,keyboardZoom:!0,mouseZoom:!0,showZoomCtrl:!0,autoLoad:!1,showControls:!0,orientationOnByDefault:!1,hotSpotDebug:!1,backgroundColor:[0,0,0],avoidShowingBackground:!1,animationTimingFunction:function(t){return t<.5?2*t*t:(4-2*t)*t-1},draggable:!0,disableKeyboardCtrl:!1,crossOrigin:"anonymous",touchPanSpeedCoeffFactor:1,capturedKeyNumbers:[16,17,27,37,38,39,40,61,65,68,83,87,107,109,173,187,189],strings:{loadButtonLabel:"Click to<br>Load<br>Panorama",loadingLabel:"Loading...",bylineLabel:"by %s",noPanoramaError:"No panorama image was specified.",fileAccessError:"The file %s could not be accessed.",malformedURLError:"There is something wrong with the panorama URL.",iOS8WebGLError:"Due to iOS 8's broken WebGL implementation, only progressive encoded JPEGs work for your device (this panorama uses standard encoding).",genericWebGLError:"Your browser does not have the necessary WebGL support to display this panorama.",textureSizeError:"This panorama is too big for your device! It's %spx wide, but your device only supports images up to %spx wide. Try another device. (If you're the author, try scaling down the image.)",unknownError:"Unknown error. Check developer console."}};(i="string"===typeof i?e.getElementById(i):i).classList.add("pnlm-container"),i.tabIndex=0;var B=e.createElement("div");B.className="pnlm-ui",i.appendChild(B);var U=e.createElement("div");U.className="pnlm-render-container",i.appendChild(U);var z=e.createElement("div");z.className="pnlm-dragfix",B.appendChild(z);var F=e.createElement("span");F.className="pnlm-about-msg",F.innerHTML='<a href="https://pannellum.org/" target="_blank">Pannellum</a>',B.appendChild(F),z.addEventListener("contextmenu",(function t(e){var n=Q(e);F.style.left=n.x+"px",F.style.top=n.y+"px",clearTimeout(t.t1),clearTimeout(t.t2),F.style.display="block",F.style.opacity=1,t.t1=setTimeout((function(){F.style.opacity=0}),2e3),t.t2=setTimeout((function(){F.style.display="none"}),2500),e.preventDefault()}));var j={},H=e.createElement("div");H.className="pnlm-sprite pnlm-hot-spot-debug-indicator",B.appendChild(H),j.container=e.createElement("div"),j.container.className="pnlm-panorama-info",j.title=e.createElement("div"),j.title.className="pnlm-title-box",j.container.appendChild(j.title),j.author=e.createElement("div"),j.author.className="pnlm-author-box",j.container.appendChild(j.author),B.appendChild(j.container),j.load={},j.load.box=e.createElement("div"),j.load.box.className="pnlm-load-box",j.load.boxp=e.createElement("p"),j.load.box.appendChild(j.load.boxp),j.load.lbox=e.createElement("div"),j.load.lbox.className="pnlm-lbox",j.load.lbox.innerHTML='<div class="pnlm-loading"></div>',j.load.box.appendChild(j.load.lbox),j.load.lbar=e.createElement("div"),j.load.lbar.className="pnlm-lbar",j.load.lbarFill=e.createElement("div"),j.load.lbarFill.className="pnlm-lbar-fill",j.load.lbar.appendChild(j.load.lbarFill),j.load.box.appendChild(j.load.lbar),j.load.msg=e.createElement("p"),j.load.msg.className="pnlm-lmsg",j.load.box.appendChild(j.load.msg),B.appendChild(j.load.box),j.errorMsg=e.createElement("div"),j.errorMsg.className="pnlm-error-msg pnlm-info-box",B.appendChild(j.errorMsg);var Z={};Z.container=e.createElement("div"),Z.container.className="pnlm-controls-container",B.appendChild(Z.container),Z.load=e.createElement("div"),Z.load.className="pnlm-load-button",Z.load.addEventListener("click",(function(){Pt(),Rt()})),B.appendChild(Z.load),Z.zoom=e.createElement("div"),Z.zoom.className="pnlm-zoom-controls pnlm-controls",Z.zoomIn=e.createElement("div"),Z.zoomIn.className="pnlm-zoom-in pnlm-sprite pnlm-control",Z.zoomIn.addEventListener("click",(function(){u&&(Mt(o.hfov-5),vt())})),Z.zoom.appendChild(Z.zoomIn),Z.zoomOut=e.createElement("div"),Z.zoomOut.className="pnlm-zoom-out pnlm-sprite pnlm-control",Z.zoomOut.addEventListener("click",(function(){u&&(Mt(o.hfov+5),vt())})),Z.zoom.appendChild(Z.zoomOut),Z.container.appendChild(Z.zoom),Z.fullscreen=e.createElement("div"),Z.fullscreen.addEventListener("click",Lt),Z.fullscreen.className="pnlm-fullscreen-toggle-button pnlm-sprite pnlm-fullscreen-toggle-button-inactive pnlm-controls pnlm-control",(e.fullscreenEnabled||e.mozFullScreenEnabled||e.webkitFullscreenEnabled||e.msFullscreenEnabled)&&Z.container.appendChild(Z.fullscreen),Z.orientation=e.createElement("div"),Z.orientation.addEventListener("click",(function(t){P?Nt():Bt()})),Z.orientation.addEventListener("mousedown",(function(t){t.stopPropagation()})),Z.orientation.addEventListener("touchstart",(function(t){t.stopPropagation()})),Z.orientation.addEventListener("pointerdown",(function(t){t.stopPropagation()})),Z.orientation.className="pnlm-orientation-button pnlm-orientation-button-inactive pnlm-sprite pnlm-controls pnlm-control";var W,q=!1;t.DeviceOrientationEvent?t.addEventListener("deviceorientation",(function e(n){t.removeEventListener("deviceorientation",e),n&&null!==n.alpha&&null!==n.beta&&null!==n.gamma?(Z.container.appendChild(Z.orientation),W=!0,q&&Bt()):W=!1})):W=!1;var V=e.createElement("div");function G(){var i=e.createElement("div");if(i.innerHTML="\x3c!--[if lte IE 9]><i></i><![endif]--\x3e",1!=i.getElementsByTagName("i").length){var r,a;if(d=o.hfov,p=o.pitch,"cubemap"==o.type){for(l=[],r=0;r<6;r++)l.push(new Image),l[r].crossOrigin=o.crossOrigin;j.load.lbox.style.display="block",j.load.lbar.style.display="none"}else if("multires"==o.type){var s=JSON.parse(JSON.stringify(o.multiRes));o.basePath&&o.multiRes.basePath&&!/^(?:[a-z]+:)?\/\//i.test(o.multiRes.basePath)?s.basePath=o.basePath+o.multiRes.basePath:o.multiRes.basePath?s.basePath=o.multiRes.basePath:o.basePath&&(s.basePath=o.basePath),l=s}else if(!0===o.dynamic)l=o.panorama;else{if(o.panorama===n)return void K(o.strings.noPanoramaError);l=new Image}if("cubemap"==o.type){var u=6,c=function(){0===--u&&X()},h=function(t){var n=e.createElement("a");n.href=t.target.src,n.textContent=n.href,K(o.strings.fileAccessError.replace("%s",n.outerHTML))};for(r=0;r<l.length;r++)"null"==(a=o.cubeMap[r])?(console.log("Will use background instead of missing cubemap face "+r),c()):(o.basePath&&!Y(a)&&(a=o.basePath+a),l[r].onload=c,l[r].onerror=h,l[r].src=zt(a))}else if("multires"==o.type)X();else if(a="",o.basePath&&(a=o.basePath),!0!==o.dynamic){a=Y(o.panorama)?o.panorama:a+o.panorama,l.onload=function(){t.URL.revokeObjectURL(this.src),X()};var f=new XMLHttpRequest;f.onloadend=function(){if(200!=f.status){var i=e.createElement("a");i.href=a,i.textContent=i.href,K(o.strings.fileAccessError.replace("%s",i.outerHTML))}!function(e){var i=new FileReader;i.addEventListener("loadend",(function(){var r=i.result;if(navigator.userAgent.toLowerCase().match(/(iphone|ipod|ipad).* os 8_/)){var a=r.indexOf("\xff\xc2");(a<0||a>65536)&&K(o.strings.iOS8WebGLError)}var s=r.indexOf("<x:xmpmeta");if(s>-1&&!0!==o.ignoreGPanoXMP){var u=r.substring(s,r.indexOf("</x:xmpmeta>")+12),c=function(t){var e;return u.indexOf(t+'="')>=0?e=(e=u.substring(u.indexOf(t+'="')+t.length+2)).substring(0,e.indexOf('"')):u.indexOf(t+">")>=0&&(e=(e=u.substring(u.indexOf(t+">")+t.length+1)).substring(0,e.indexOf("<"))),e!==n?Number(e):null},h={fullWidth:c("GPano:FullPanoWidthPixels"),croppedWidth:c("GPano:CroppedAreaImageWidthPixels"),fullHeight:c("GPano:FullPanoHeightPixels"),croppedHeight:c("GPano:CroppedAreaImageHeightPixels"),topPixels:c("GPano:CroppedAreaTopPixels"),heading:c("GPano:PoseHeadingDegrees"),horizonPitch:c("GPano:PosePitchDegrees"),horizonRoll:c("GPano:PoseRollDegrees")};null!==h.fullWidth&&null!==h.croppedWidth&&null!==h.fullHeight&&null!==h.croppedHeight&&null!==h.topPixels&&(O.indexOf("haov")<0&&(o.haov=h.croppedWidth/h.fullWidth*360),O.indexOf("vaov")<0&&(o.vaov=h.croppedHeight/h.fullHeight*180),O.indexOf("vOffset")<0&&(o.vOffset=-180*((h.topPixels+h.croppedHeight/2)/h.fullHeight-.5)),null!==h.heading&&O.indexOf("northOffset")<0&&(o.northOffset=h.heading,!1!==o.compass&&(o.compass=!0)),null!==h.horizonPitch&&null!==h.horizonRoll&&(O.indexOf("horizonPitch")<0&&(o.horizonPitch=h.horizonPitch),O.indexOf("horizonRoll")<0&&(o.horizonRoll=h.horizonRoll)))}l.src=t.URL.createObjectURL(e)})),i.readAsBinaryString!==n?i.readAsBinaryString(e):i.readAsText(e)}(this.response),j.load.msg.innerHTML=""},f.onprogress=function(t){if(t.lengthComputable){var e,n,i,r=t.loaded/t.total*100;j.load.lbarFill.style.width=r+"%",t.total>1e6?(e="MB",n=(t.loaded/1e6).toFixed(2),i=(t.total/1e6).toFixed(2)):t.total>1e3?(e="kB",n=(t.loaded/1e3).toFixed(1),i=(t.total/1e3).toFixed(1)):(e="B",n=t.loaded,i=t.total),j.load.msg.innerHTML=n+" / "+i+" "+e}else j.load.lbox.style.display="block",j.load.lbar.style.display="none"};try{f.open("GET",a,!0)}catch(m){K(o.strings.malformedURLError)}f.responseType="blob",f.setRequestHeader("Accept","image/*,*/*;q=0.9"),f.withCredentials="use-credentials"===o.crossOrigin,f.send()}o.draggable&&B.classList.add("pnlm-grab"),B.classList.remove("pnlm-grabbing")}else K()}function Y(t){return new RegExp("^(?:[a-z]+:)?//","i").test(t)||"/"==t[0]||"blob:"==t.slice(0,5)}function X(){a||(a=new libpannellum.renderer(U)),E||(E=!0,z.addEventListener("mousedown",$,!1),e.addEventListener("mousemove",et,!1),e.addEventListener("mouseup",nt,!1),o.mouseZoom&&(B.addEventListener("mousewheel",ht,!1),B.addEventListener("DOMMouseScroll",ht,!1)),o.doubleClickZoom&&z.addEventListener("dblclick",J,!1),B.addEventListener("mozfullscreenchange",It,!1),B.addEventListener("webkitfullscreenchange",It,!1),B.addEventListener("msfullscreenchange",It,!1),B.addEventListener("fullscreenchange",It,!1),t.addEventListener("resize",_t,!1),t.addEventListener("orientationchange",_t,!1),o.disableKeyboardCtrl||(i.addEventListener("keydown",dt,!1),i.addEventListener("keyup",ft,!1),i.addEventListener("blur",pt,!1)),e.addEventListener("mouseleave",nt,!1),""===e.documentElement.style.pointerAction&&""===e.documentElement.style.touchAction?(z.addEventListener("pointerdown",ut,!1),z.addEventListener("pointermove",lt,!1),z.addEventListener("pointerup",ct,!1),z.addEventListener("pointerleave",ct,!1)):(z.addEventListener("touchstart",it,!1),z.addEventListener("touchmove",rt,!1),z.addEventListener("touchend",ot,!1)),t.navigator.pointerEnabled&&(i.style.touchAction="none")),function(){try{var t={};o.horizonPitch!==n&&(t.horizonPitch=o.horizonPitch*Math.PI/180),o.horizonRoll!==n&&(t.horizonRoll=o.horizonRoll*Math.PI/180),o.backgroundColor!==n&&(t.backgroundColor=o.backgroundColor),a.init(l,o.type,o.dynamic,o.haov*Math.PI/180,o.vaov*Math.PI/180,o.vOffset*Math.PI/180,xt,t),!0!==o.dynamic&&(l=n)}catch(event){if("webgl error"==event.type||"no webgl"==event.type)K();else{if("webgl size error"!=event.type)throw K(o.strings.unknownError),event;K(o.strings.textureSizeError.replace("%s",event.width).replace("%s",event.maxWidth))}}}(),Mt(o.hfov),setTimeout((function(){!0}),500)}function K(t){t===n&&(t=o.strings.genericWebGLError),j.errorMsg.innerHTML="<p>"+t+"</p>",Z.load.style.display="none",j.load.box.style.display="none",j.errorMsg.style.display="table",S=!0,U.style.display="none",Ft("error",t)}function Q(t){var e=i.getBoundingClientRect(),n={};return n.x=t.clientX-e.left,n.y=t.clientY-e.top,n}function $(t){if(t.preventDefault(),i.focus(),u&&o.draggable){var e=Q(t);if(o.hotSpotDebug){var n=tt(t);console.log("Pitch: "+n[0]+", Yaw: "+n[1]+", Center Pitch: "+o.pitch+", Center Yaw: "+o.yaw+", HFOV: "+o.hfov)}Ot(),Nt(),o.roll=0,k.hfov=0,m=!0,g=Date.now(),_=e.x,v=e.y,b=o.yaw,T=o.pitch,B.classList.add("pnlm-grabbing"),B.classList.remove("pnlm-grab"),Ft("mousedown",t),vt()}}function J(t){if(o.minHfov===o.hfov)f.setHfov(d,1e3);else{var e=tt(t);f.lookAt(e[0],e[1],o.minHfov,1e3)}}function tt(t){var e=Q(t),n=a.getCanvas(),i=n.clientWidth,r=n.clientHeight,s=e.x/i*2-1,u=(1-e.y/r*2)*r/i,l=1/Math.tan(o.hfov*Math.PI/360),c=Math.sin(o.pitch*Math.PI/180),h=Math.cos(o.pitch*Math.PI/180),d=l*h-u*c,p=Math.sqrt(s*s+d*d),f=180*Math.atan((u*h+l*c)/p)/Math.PI,m=180*Math.atan2(s/p,d/p)/Math.PI+o.yaw;return m<-180&&(m+=360),m>180&&(m-=360),[f,m]}function et(t){if(m&&u){g=Date.now();var e=a.getCanvas(),n=e.clientWidth,i=e.clientHeight,r=Q(t),s=180*(Math.atan(_/n*2-1)-Math.atan(r.x/n*2-1))/Math.PI*o.hfov/90+b;k.yaw=(s-o.yaw)%360*.2,o.yaw=s;var l=2*Math.atan(Math.tan(o.hfov/360*Math.PI)*i/n)*180/Math.PI,c=180*(Math.atan(r.y/i*2-1)-Math.atan(v/i*2-1))/Math.PI*l/90+T;k.pitch=.2*(c-o.pitch),o.pitch=c}}function nt(t){m&&(m=!1,Date.now()-g>15&&(k.pitch=k.yaw=0),B.classList.add("pnlm-grab"),B.classList.remove("pnlm-grabbing"),g=Date.now(),Ft("mouseup",t))}function it(t){if(u&&o.draggable){Ot(),Nt(),o.roll=0,k.hfov=0;var e=Q(t.targetTouches[0]);if(_=e.x,v=e.y,2==t.targetTouches.length){var n=Q(t.targetTouches[1]);_+=.5*(n.x-e.x),v+=.5*(n.y-e.y),y=Math.sqrt((e.x-n.x)*(e.x-n.x)+(e.y-n.y)*(e.y-n.y))}m=!0,g=Date.now(),b=o.yaw,T=o.pitch,Ft("touchstart",t),vt()}}function rt(t){if(o.draggable&&(t.preventDefault(),u&&(g=Date.now()),m&&u)){var e=Q(t.targetTouches[0]),n=e.x,i=e.y;if(2==t.targetTouches.length&&-1!=y){var r=Q(t.targetTouches[1]);n+=.5*(r.x-e.x),i+=.5*(r.y-e.y);var a=Math.sqrt((e.x-r.x)*(e.x-r.x)+(e.y-r.y)*(e.y-r.y));Mt(o.hfov+.1*(y-a)),y=a}var s=o.hfov/360*o.touchPanSpeedCoeffFactor,l=(_-n)*s+b;k.yaw=(l-o.yaw)%360*.2,o.yaw=l;var c=(i-v)*s+T;k.pitch=.2*(c-o.pitch),o.pitch=c}}function ot(){m=!1,Date.now()-g>150&&(k.pitch=k.yaw=0),y=-1,g=Date.now(),Ft("touchend",event)}V.className="pnlm-compass pnlm-controls pnlm-control",B.appendChild(V),r.firstScene?Ct(r.firstScene):r.default&&r.default.firstScene?Ct(r.default.firstScene):Ct(null),Pt(!0);var at=[],st=[];function ut(t){"touch"==t.pointerType&&(at.push(t.pointerId),st.push({clientX:t.clientX,clientY:t.clientY}),t.targetTouches=st,it(t),t.preventDefault())}function lt(t){if("touch"==t.pointerType)for(var e=0;e<at.length;e++)if(t.pointerId==at[e])return st[e].clientX=t.clientX,st[e].clientY=t.clientY,t.targetTouches=st,rt(t),void t.preventDefault()}function ct(t){if("touch"==t.pointerType){for(var e=!1,i=0;i<at.length;i++)t.pointerId==at[i]&&(at[i]=n),at[i]&&(e=!0);e||(at=[],st=[],ot()),t.preventDefault()}}function ht(t){u&&("fullscreenonly"!=o.mouseZoom||x)&&(t.preventDefault(),Ot(),g=Date.now(),t.wheelDeltaY?(Mt(o.hfov-.05*t.wheelDeltaY),k.hfov=t.wheelDelta<0?1:-1):t.wheelDelta?(Mt(o.hfov-.05*t.wheelDelta),k.hfov=t.wheelDelta<0?1:-1):t.detail&&(Mt(o.hfov+1.5*t.detail),k.hfov=t.detail>0?1:-1),vt())}function dt(t){Ot(),g=Date.now(),Nt(),o.roll=0;var e=t.which||t.keycode;o.capturedKeyNumbers.indexOf(e)<0||(t.preventDefault(),27==e?x&&Lt():mt(e,!0))}function pt(){for(var t=0;t<10;t++)w[t]=!1}function ft(t){var e=t.which||t.keycode;o.capturedKeyNumbers.indexOf(e)<0||(t.preventDefault(),mt(e,!1))}function mt(t,e){var n=!1;switch(t){case 109:case 189:case 17:case 173:w[0]!=e&&(n=!0),w[0]=e;break;case 107:case 187:case 16:case 61:w[1]!=e&&(n=!0),w[1]=e;break;case 38:w[2]!=e&&(n=!0),w[2]=e;break;case 87:w[6]!=e&&(n=!0),w[6]=e;break;case 40:w[3]!=e&&(n=!0),w[3]=e;break;case 83:w[7]!=e&&(n=!0),w[7]=e;break;case 37:w[4]!=e&&(n=!0),w[4]=e;break;case 65:w[8]!=e&&(n=!0),w[8]=e;break;case 39:w[5]!=e&&(n=!0),w[5]=e;break;case 68:w[9]!=e&&(n=!0),w[9]=e}n&&e&&(c="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),vt())}function gt(t){var e=A[t],n=Math.min(1,Math.max((Date.now()-e.startTime)/1e3/(e.duration/1e3),0)),i=e.startPosition+o.animationTimingFunction(n)*(e.endPosition-e.startPosition);if(e.endPosition>e.startPosition&&i>=e.endPosition||e.endPosition<e.startPosition&&i<=e.endPosition||e.endPosition===e.startPosition){i=e.endPosition,k[t]=0;var r=A[t].callback,a=A[t].callbackArgs;delete A[t],"function"===typeof r&&r(a)}o[t]=i}function _t(){It()}function vt(){C||(C=!0,yt())}function yt(){if(function(){var t;if(u){o.yaw>180?o.yaw-=360:o.yaw<-180&&(o.yaw+=360),t=o.yaw;var e=0;if(o.avoidShowingBackground){var i=a.getCanvas(),r=o.hfov/2,s=180*Math.atan2(Math.tan(r/180*Math.PI),i.width/i.height)/Math.PI;o.vaov>o.haov?s*(1-Math.min(Math.cos((o.pitch-r)/180*Math.PI),Math.cos((o.pitch+r)/180*Math.PI))):e=r*(1-Math.min(Math.cos((o.pitch-s)/180*Math.PI),Math.cos((o.pitch+s)/180*Math.PI)))}var l=o.maxYaw-o.minYaw,h=-180,d=180;l<360&&(h=o.minYaw+o.hfov/2+e,d=o.maxYaw-o.hfov/2-e,l<o.hfov&&(h=d=(h+d)/2),o.yaw=Math.max(h,Math.min(d,o.yaw))),!1!==o.autoRotate&&t!=o.yaw&&c!==n&&(o.autoRotate*=-1);i=a.getCanvas();var p=2*Math.atan(Math.tan(o.hfov/180*Math.PI*.5)/(i.width/i.height))/Math.PI*180,f=o.minPitch+p/2,m=o.maxPitch-p/2;o.maxPitch-o.minPitch<p&&(f=m=(f+m)/2),isNaN(f)&&(f=-90),isNaN(m)&&(m=90),o.pitch=Math.max(f,Math.min(m,o.pitch)),a.render(o.pitch*Math.PI/180,o.yaw*Math.PI/180,o.hfov*Math.PI/180,{roll:o.roll*Math.PI/180}),kt(),o.compass&&(V.style.transform="rotate("+(-o.yaw-o.northOffset)+"deg)",V.style.webkitTransform="rotate("+(-o.yaw-o.northOffset)+"deg)"),o.onRender&&o.onRender()}}(),h&&clearTimeout(h),m||!0===P)requestAnimationFrame(yt);else if(w[0]||w[1]||w[2]||w[3]||w[4]||w[5]||w[6]||w[7]||w[8]||w[9]||o.autoRotate||A.pitch||A.yaw||A.hfov||Math.abs(k.yaw)>.01||Math.abs(k.pitch)>.01||Math.abs(k.hfov)>.01)!function(){if(u){var t,e=!1,i=o.pitch,r=o.yaw,a=o.hfov;t="undefined"!==typeof performance&&performance.now()?performance.now():Date.now(),c===n&&(c=t);var s=(t-c)*o.hfov/1700;if(s=Math.min(s,1),w[0]&&!0===o.keyboardZoom&&(Mt(o.hfov+(.8*k.hfov+.5)*s),e=!0),w[1]&&!0===o.keyboardZoom&&(Mt(o.hfov+(.8*k.hfov-.2)*s),e=!0),(w[2]||w[6])&&(o.pitch+=(.8*k.pitch+.2)*s,e=!0),(w[3]||w[7])&&(o.pitch+=(.8*k.pitch-.2)*s,e=!0),(w[4]||w[8])&&(o.yaw+=(.8*k.yaw-.2)*s,e=!0),(w[5]||w[9])&&(o.yaw+=(.8*k.yaw+.2)*s,e=!0),e&&(g=Date.now()),Date.now(),o.autoRotate){if(t-c>.001){var l=(t-c)/1e3,h=(k.yaw/l*s-.2*o.autoRotate)*l;h=(-o.autoRotate>0?1:-1)*Math.min(Math.abs(o.autoRotate*l),Math.abs(h)),o.yaw+=h}o.autoRotateStopDelay&&(o.autoRotateStopDelay-=t-c,o.autoRotateStopDelay<=0&&(o.autoRotateStopDelay=!1,I=o.autoRotate,o.autoRotate=0))}if(A.pitch&&(gt("pitch"),i=o.pitch),A.yaw&&(gt("yaw"),r=o.yaw),A.hfov&&(gt("hfov"),a=o.hfov),s>0&&!o.autoRotate){var d=.85;w[4]||w[5]||w[8]||w[9]||A.yaw||(o.yaw+=k.yaw*s*d),w[2]||w[3]||w[6]||w[7]||A.pitch||(o.pitch+=k.pitch*s*d),w[0]||w[1]||A.hfov||Mt(o.hfov+k.hfov*s*d)}if(c=t,s>0){k.yaw=.8*k.yaw+(o.yaw-r)/s*.2,k.pitch=.8*k.pitch+(o.pitch-i)/s*.2,k.hfov=.8*k.hfov+(o.hfov-a)/s*.2;var p=o.autoRotate?Math.abs(o.autoRotate):5;k.yaw=Math.min(p,Math.max(k.yaw,-p)),k.pitch=Math.min(p,Math.max(k.pitch,-p)),k.hfov=Math.min(p,Math.max(k.hfov,-p))}w[0]&&w[1]&&(k.hfov=0),(w[2]||w[6])&&(w[3]||w[7])&&(k.pitch=0),(w[4]||w[8])&&(w[5]||w[9])&&(k.yaw=0)}}(),o.autoRotateInactivityDelay>=0&&I&&Date.now()-g>o.autoRotateInactivityDelay&&!o.autoRotate&&(o.autoRotate=I,f.lookAt(p,n,d,3e3)),requestAnimationFrame(yt);else if(a&&(a.isLoading()||!0===o.dynamic&&R))requestAnimationFrame(yt);else{C=!1,c=n;var t=o.autoRotateInactivityDelay-(Date.now()-g);t>0?h=setTimeout((function(){o.autoRotate=I,f.lookAt(p,n,d,3e3),vt()}),t):o.autoRotateInactivityDelay>=0&&I&&(o.autoRotate=I,f.lookAt(p,n,d,3e3),vt())}}function bt(t,e,n,i){this.w=t,this.x=e,this.y=n,this.z=i}function Tt(e,n,i){var r=function(t,e,n){var i=[e?e*Math.PI/180/2:0,n?n*Math.PI/180/2:0,t?t*Math.PI/180/2:0],r=[Math.cos(i[0]),Math.cos(i[1]),Math.cos(i[2])],o=[Math.sin(i[0]),Math.sin(i[1]),Math.sin(i[2])];return new bt(r[0]*r[1]*r[2]-o[0]*o[1]*o[2],o[0]*r[1]*r[2]-r[0]*o[1]*o[2],r[0]*o[1]*r[2]+o[0]*r[1]*o[2],r[0]*r[1]*o[2]+o[0]*o[1]*r[2])}(e,n,i);r=r.multiply(new bt(Math.sqrt(.5),-Math.sqrt(.5),0,0));var o=t.orientation?-t.orientation*Math.PI/180/2:0;return r.multiply(new bt(Math.cos(o),0,-Math.sin(o),0))}function wt(t){var e=Tt(t.alpha,t.beta,t.gamma).toEulerAngles();"number"===typeof P&&P<10?P+=1:10===P?(L=e[2]/Math.PI*180+o.yaw,P=!0,requestAnimationFrame(yt)):(o.pitch=e[0]/Math.PI*180,o.roll=-e[1]/Math.PI*180,o.yaw=-e[2]/Math.PI*180+L)}function xt(){if(o.sceneFadeDuration&&a.fadeImg!==n){a.fadeImg.style.opacity=0;var t=a.fadeImg;delete a.fadeImg,setTimeout((function(){U.removeChild(t),Ft("scenechangefadedone")}),o.sceneFadeDuration)}o.compass?V.style.display="inline":V.style.display="none",function(){if(D)return;o.hotSpots?(o.hotSpots=o.hotSpots.sort((function(t,e){return t.pitch<e.pitch})),o.hotSpots.forEach(St)):o.hotSpots=[];D=!0,kt()}(),j.load.box.style.display="none",s!==n&&(U.removeChild(s),s=n),u=!0,Ft("load"),vt()}function St(t){t.pitch=Number(t.pitch)||0,t.yaw=Number(t.yaw)||0;var n=e.createElement("div");n.className="pnlm-hotspot-base",t.cssClass?n.className+=" "+t.cssClass:n.className+=" pnlm-hotspot pnlm-sprite pnlm-"+Ut(t.type);var i,r=e.createElement("span");if(t.text&&(r.innerHTML=Ut(t.text)),t.video){var a=e.createElement("video"),s=t.video;o.basePath&&!Y(s)&&(s=o.basePath+s),a.src=zt(s),a.controls=!0,a.style.width=t.width+"px",U.appendChild(n),r.appendChild(a)}else if(t.image){s=t.image;o.basePath&&!Y(s)&&(s=o.basePath+s),(i=e.createElement("a")).href=zt(t.URL?t.URL:s),i.target="_blank",r.appendChild(i);var u=e.createElement("img");u.src=zt(s),u.style.width=t.width+"px",u.style.paddingTop="5px",U.appendChild(n),i.appendChild(u),r.style.maxWidth="initial"}else t.URL?((i=e.createElement("a")).href=zt(t.URL),i.target="_blank",U.appendChild(i),n.className+=" pnlm-pointer",r.className+=" pnlm-pointer",i.appendChild(n)):(t.sceneId&&(n.onclick=n.ontouchend=function(){return n.clicked||(n.clicked=!0,Dt(t.sceneId,t.targetPitch,t.targetYaw,t.targetHfov)),!1},n.className+=" pnlm-pointer",r.className+=" pnlm-pointer"),U.appendChild(n));t.createTooltipFunc?t.createTooltipFunc(n,t.createTooltipArgs):(t.text||t.video||t.image)&&(n.classList.add("pnlm-tooltip"),n.appendChild(r),r.style.width=r.scrollWidth-20+"px",r.style.marginLeft=-(r.scrollWidth-n.offsetWidth)/2+"px",r.style.marginTop=-r.scrollHeight-12+"px"),t.clickHandlerFunc&&(n.addEventListener("click",(function(e){t.clickHandlerFunc(e,t.clickHandlerArgs)}),"false"),n.className+=" pnlm-pointer",r.className+=" pnlm-pointer"),t.div=n}function Et(t){var e=Math.sin(t.pitch*Math.PI/180),n=Math.cos(t.pitch*Math.PI/180),i=Math.sin(o.pitch*Math.PI/180),r=Math.cos(o.pitch*Math.PI/180),s=Math.cos((-t.yaw+o.yaw)*Math.PI/180),u=e*i+n*s*r;if(t.yaw<=90&&t.yaw>-90&&u<=0||(t.yaw>90||t.yaw<=-90)&&u<=0)t.div.style.visibility="hidden";else{var l=Math.sin((-t.yaw+o.yaw)*Math.PI/180),c=Math.tan(o.hfov*Math.PI/360);t.div.style.visibility="visible";var h=a.getCanvas(),d=h.clientWidth,p=h.clientHeight,f=[-d/c*l*n/u/2,-d/c*(e*r-n*s*i)/u/2],m=Math.sin(o.roll*Math.PI/180),g=Math.cos(o.roll*Math.PI/180);(f=[f[0]*g-f[1]*m,f[0]*m+f[1]*g])[0]+=(d-t.div.offsetWidth)/2,f[1]+=(p-t.div.offsetHeight)/2;var _="translate("+f[0]+"px, "+f[1]+"px) translateZ(9999px) rotate("+o.roll+"deg)";t.div.style.webkitTransform=_,t.div.style.MozTransform=_,t.div.style.transform=_}}function kt(){o.hotSpots.forEach(Et)}function Ct(t){var e,n;o={};var i=["haov","vaov","vOffset","northOffset","horizonPitch","horizonRoll"];for(e in O=[],N)N.hasOwnProperty(e)&&(o[e]=N[e]);for(e in r.default)if(r.default.hasOwnProperty(e))if("strings"==e)for(n in r.default.strings)r.default.strings.hasOwnProperty(n)&&(o.strings[n]=Ut(r.default.strings[n]));else o[e]=r.default[e],i.indexOf(e)>=0&&O.push(e);if(null!==t&&""!==t&&r.scenes&&r.scenes[t]){var a=r.scenes[t];for(e in a)if(a.hasOwnProperty(e))if("strings"==e)for(n in a.strings)a.strings.hasOwnProperty(n)&&(o.strings[n]=Ut(a.strings[n]));else o[e]=a[e],i.indexOf(e)>=0&&O.push(e);o.scene=t}for(e in r)if(r.hasOwnProperty(e))if("strings"==e)for(n in r.strings)r.strings.hasOwnProperty(n)&&(o.strings[n]=Ut(r.strings[n]));else o[e]=r[e],i.indexOf(e)>=0&&O.push(e)}function Pt(t){if((t=t||!1)&&"preview"in o){var i=o.preview;o.basePath&&!Y(i)&&(i=o.basePath+i),(s=e.createElement("div")).className="pnlm-preview-img",s.style.backgroundImage="url('"+(zt(i).replace(/"/g,"%22").replace(/'/g,"%27")+"')"),U.appendChild(s)}var r=o.title,u=o.author;for(var l in t&&("previewTitle"in o&&(o.title=o.previewTitle),"previewAuthor"in o&&(o.author=o.previewAuthor)),o.hasOwnProperty("title")||(j.title.innerHTML=""),o.hasOwnProperty("author")||(j.author.innerHTML=""),o.hasOwnProperty("title")||o.hasOwnProperty("author")||(j.container.style.display="none"),Z.load.innerHTML="<p>"+o.strings.loadButtonLabel+"</p>",j.load.boxp.innerHTML=o.strings.loadingLabel,o)if(o.hasOwnProperty(l))switch(l){case"title":j.title.innerHTML=Ut(o[l]),j.container.style.display="inline";break;case"author":j.author.innerHTML=o.strings.bylineLabel.replace("%s",Ut(o[l])),j.container.style.display="inline";break;case"fallback":var c=e.createElement("a");c.href=zt(o[l]),c.target="_blank",c.textContent="Click here to view this panorama in an alternative viewer.";var h=e.createElement("p");h.textContent="Your browser does not support WebGL.",h.appendChild(e.createElement("br")),h.appendChild(c),j.errorMsg.innerHTML="",j.errorMsg.appendChild(h);break;case"hfov":Mt(Number(o[l]));break;case"autoLoad":!0===o[l]&&a===n&&(j.load.box.style.display="inline",Z.load.style.display="none",G());break;case"showZoomCtrl":o[l]&&0!=o.showControls?Z.zoom.style.display="block":Z.zoom.style.display="none";break;case"showFullscreenCtrl":o[l]&&0!=o.showControls&&("fullscreen"in e||"mozFullScreen"in e||"webkitIsFullScreen"in e||"msFullscreenElement"in e)?Z.fullscreen.style.display="block":Z.fullscreen.style.display="none";break;case"hotSpotDebug":o[l]?H.style.display="block":H.style.display="none";break;case"showControls":o[l]||(Z.orientation.style.display="none",Z.zoom.style.display="none",Z.fullscreen.style.display="none");break;case"orientationOnByDefault":o[l]&&(W===n?q=!0:!0===W&&Bt())}t&&(r?o.title=r:delete o.title,u?o.author=u:delete o.author)}function Lt(){if(u&&!S)if(x)e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen();else try{i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen?i.msRequestFullscreen():i.webkitRequestFullScreen()}catch(event){}}function It(){var n=t.innerWidth==screen.width&&t.innerHeight==screen.height;e.fullscreen||e.mozFullScreen||e.webkitIsFullScreen||e.msFullscreenElement||n?(Z.fullscreen.classList.add("pnlm-fullscreen-toggle-button-active"),x=!0):(Z.fullscreen.classList.remove("pnlm-fullscreen-toggle-button-active"),x=!1),a.resize(),Mt(o.hfov),vt()}function At(t){var e=o.minHfov;if("multires"==o.type&&a&&(e=Math.min(e,a.getCanvas().width/(o.multiRes.cubeResolution/90*.9))),e>o.maxHfov)return console.log("HFOV bounds do not make sense (minHfov > maxHfov)."),o.hfov;var n=o.hfov;if(n=t<e?e:t>o.maxHfov?o.maxHfov:t,o.avoidShowingBackground&&a){var i=a.getCanvas();n=Math.min(n,360*Math.atan(Math.tan((o.maxPitch-o.minPitch)/360*Math.PI)/i.height*i.width)/Math.PI)}return n}function Mt(t){o.hfov=At(t)}function Ot(){A={},I=o.autoRotate?o.autoRotate:I,o.autoRotate=!1}function Rt(){S&&(j.load.box.style.display="none",j.errorMsg.style.display="none",S=!1,Ft("errorcleared")),u=!1,Z.load.style.display="none",j.load.box.style.display="inline",G()}function Dt(t,e,i,s,l){var c,h,d,p;if(u=!1,A={},o.sceneFadeDuration&&!l){var f=a.render(o.pitch*Math.PI/180,o.yaw*Math.PI/180,o.hfov*Math.PI/180,{returnImage:!0});if(f!==n)return(c=new Image).className="pnlm-fade-img",c.style.transition="opacity "+o.sceneFadeDuration/1e3+"s",c.style.width="100%",c.style.height="100%",c.onload=function(){Dt(t,e,i,s,!0)},c.src=f,U.appendChild(c),void(a.fadeImg=c)}h="same"===e?o.pitch:e,d="same"===i?o.yaw:"sameAzimuth"===i?o.yaw+(o.northOffset||0)-(r.scenes[t].northOffset||0):i,p="same"===s?o.hfov:s,function(){var t=o.hotSpots;if(D=!1,delete o.hotSpots,t)for(var e=0;e<t.length;e++){for(var n=t[e].div;n.parentNode!=U;)n=n.parentNode;U.removeChild(n),delete t[e].div}}(),Ct(t),k.yaw=k.pitch=k.hfov=0,Pt(),h!==n&&(o.pitch=h),d!==n&&(o.yaw=d),p!==n&&(o.hfov=p),Ft("scenechange",t),Rt()}function Nt(){t.removeEventListener("deviceorientation",wt),Z.orientation.classList.remove("pnlm-orientation-button-active"),P=!1}function Bt(){P=1,t.addEventListener("deviceorientation",wt),Z.orientation.classList.add("pnlm-orientation-button-active")}function Ut(t){return r.escapeHTML?String(t).split(/&/g).join("&amp;").split('"').join("&quot;").split("'").join("&#39;").split("<").join("&lt;").split(">").join("&gt;").split("/").join("&#x2f;").split("\n").join("<br>"):String(t).split("\n").join("<br>")}function zt(t){return 0===t.trim().toLowerCase().indexOf("javascript:")?"about:blank":t}function Ft(t){if(t in M)for(var e=M[t].length;e>0;e--)M[t][M[t].length-e].apply(null,[].slice.call(arguments,1))}bt.prototype.multiply=function(t){return new bt(this.w*t.w-this.x*t.x-this.y*t.y-this.z*t.z,this.x*t.w+this.w*t.x+this.y*t.z-this.z*t.y,this.y*t.w+this.w*t.y+this.z*t.x-this.x*t.z,this.z*t.w+this.w*t.z+this.x*t.y-this.y*t.x)},bt.prototype.toEulerAngles=function(){return[Math.atan2(2*(this.w*this.x+this.y*this.z),1-2*(this.x*this.x+this.y*this.y)),Math.asin(2*(this.w*this.y-this.z*this.x)),Math.atan2(2*(this.w*this.z+this.x*this.y),1-2*(this.y*this.y+this.z*this.z))]},this.isLoaded=function(){return Boolean(u)},this.getPitch=function(){return o.pitch},this.setPitch=function(t,e,i,r){return(e=e==n?1e3:Number(e))?A.pitch={startTime:Date.now(),startPosition:o.pitch,endPosition:t,duration:e,callback:i,callbackArgs:r}:o.pitch=t,vt(),this},this.getPitchBounds=function(){return[o.minPitch,o.maxPitch]},this.setPitchBounds=function(t){return o.minPitch=Math.max(-90,Math.min(t[0],90)),o.maxPitch=Math.max(-90,Math.min(t[1],90)),this},this.getYaw=function(){return o.yaw},this.setYaw=function(t,e,i,r){return t=(t+180)%360-180,(e=e==n?1e3:Number(e))?(o.yaw-t>180?t+=360:t-o.yaw>180&&(t-=360),A.yaw={startTime:Date.now(),startPosition:o.yaw,endPosition:t,duration:e,callback:i,callbackArgs:r}):o.yaw=t,vt(),this},this.getYawBounds=function(){return[o.minYaw,o.maxYaw]},this.setYawBounds=function(t){return o.minYaw=Math.max(-180,Math.min(t[0],180)),o.maxYaw=Math.max(-180,Math.min(t[1],180)),this},this.getHfov=function(){return o.hfov},this.setHfov=function(t,e,i,r){return(e=e==n?1e3:Number(e))?A.hfov={startTime:Date.now(),startPosition:o.hfov,endPosition:At(t),duration:e,callback:i,callbackArgs:r}:Mt(t),vt(),this},this.getHfovBounds=function(){return[o.minHfov,o.maxHfov]},this.setHfovBounds=function(t){return o.minHfov=Math.max(0,t[0]),o.maxHfov=Math.max(0,t[1]),this},this.lookAt=function(t,e,i,r,o,a){return r=r==n?1e3:Number(r),t!==n&&(this.setPitch(t,r,o,a),o=n),e!==n&&(this.setYaw(e,r,o,a),o=n),i!==n&&this.setHfov(i,r,o,a),this},this.getNorthOffset=function(){return o.northOffset},this.setNorthOffset=function(t){return o.northOffset=Math.min(360,Math.max(0,t)),vt(),this},this.getHorizonRoll=function(){return o.horizonRoll},this.setHorizonRoll=function(t){return o.horizonRoll=Math.min(90,Math.max(-90,t)),a.setPose(o.horizonPitch*Math.PI/180,o.horizonRoll*Math.PI/180),vt(),this},this.getHorizonPitch=function(){return o.horizonPitch},this.setHorizonPitch=function(t){return o.horizonPitch=Math.min(90,Math.max(-90,t)),a.setPose(o.horizonPitch*Math.PI/180,o.horizonRoll*Math.PI/180),vt(),this},this.startAutoRotate=function(t){return t=t||I||1,o.autoRotate=t,f.lookAt(p,n,d,3e3),vt(),this},this.stopAutoRotate=function(){return I=o.autoRotate?o.autoRotate:I,o.autoRotate=!1,o.autoRotateInactivityDelay=-1,this},this.getRenderer=function(){return a},this.setUpdate=function(t){return R=!0===t,a===n?X():vt(),this},this.mouseEventToCoords=function(t){return tt(t)},this.loadScene=function(t,e,n,i){return!1!==u&&Dt(t,e,n,i),this},this.getScene=function(){return o.scene},this.addScene=function(t,e){return r.scenes[t]=e,this},this.removeScene=function(t){return!(o.scene===t||!r.scenes.hasOwnProperty(t))&&(delete r.scenes[t],!0)},this.toggleFullscreen=function(){return Lt(),this},this.getConfig=function(){return o},this.getContainer=function(){return i},this.addHotSpot=function(t,e){if(e===n&&o.scene===n)o.hotSpots.push(t);else{var i=e!==n?e:o.scene;if(!r.scenes.hasOwnProperty(i))throw"Invalid scene ID!";r.scenes[i].hasOwnProperty("hotSpots")||(r.scenes[i].hotSpots=[],i==o.scene&&(o.hotSpots=r.scenes[i].hotSpots)),r.scenes[i].hotSpots.push(t)}return e!==n&&o.scene!=e||(St(t),u&&Et(t)),this},this.removeHotSpot=function(t,e){if(e===n||o.scene==e){if(!o.hotSpots)return!1;for(var i=0;i<o.hotSpots.length;i++)if(o.hotSpots[i].hasOwnProperty("id")&&o.hotSpots[i].id===t){for(var a=o.hotSpots[i].div;a.parentNode!=U;)a=a.parentNode;return U.removeChild(a),delete o.hotSpots[i].div,o.hotSpots.splice(i,1),!0}}else{if(!r.scenes.hasOwnProperty(e))return!1;if(!r.scenes[e].hasOwnProperty("hotSpots"))return!1;for(i=0;i<r.scenes[e].hotSpots.length;i++)if(r.scenes[e].hotSpots[i].hasOwnProperty("id")&&r.scenes[e].hotSpots[i].id===t)return r.scenes[e].hotSpots.splice(i,1),!0}},this.resize=function(){a&&_t()},this.isLoaded=function(){return u},this.isOrientationSupported=function(){return W||!1},this.stopOrientation=function(){Nt()},this.startOrientation=function(){W&&Bt()},this.isOrientationActive=function(){return Boolean(P)},this.on=function(t,e){return M[t]=M[t]||[],M[t].push(e),this},this.off=function(t,e){if(!t)return M={},this;if(e){var n=M[t].indexOf(e);n>=0&&M[t].splice(n,1),0==M[t].length&&delete M[t]}else delete M[t];return this},this.destroy=function(){a&&a.destroy(),E&&(z.removeEventListener("mousedown",$,!1),z.removeEventListener("dblclick",J,!1),e.removeEventListener("mousemove",et,!1),e.removeEventListener("mouseup",nt,!1),i.removeEventListener("mousewheel",ht,!1),i.removeEventListener("DOMMouseScroll",ht,!1),i.removeEventListener("mozfullscreenchange",It,!1),i.removeEventListener("webkitfullscreenchange",It,!1),i.removeEventListener("msfullscreenchange",It,!1),i.removeEventListener("fullscreenchange",It,!1),t.removeEventListener("resize",_t,!1),t.removeEventListener("orientationchange",_t,!1),i.removeEventListener("keydown",dt,!1),i.removeEventListener("keyup",ft,!1),i.removeEventListener("blur",pt,!1),e.removeEventListener("mouseleave",nt,!1),z.removeEventListener("touchstart",it,!1),z.removeEventListener("touchmove",rt,!1),z.removeEventListener("touchend",ot,!1),z.removeEventListener("pointerdown",ut,!1),z.removeEventListener("pointermove",lt,!1),z.removeEventListener("pointerup",ct,!1),z.removeEventListener("pointerleave",ct,!1)),i.innerHTML="",i.classList.remove("pnlm-container"),B.classList.remove("pnlm-grab"),B.classList.remove("pnlm-grabbing")}}return{viewer:function(t,e){return new i(t,e)}}}(window,document)},function(t,e){window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t,e){window.setTimeout(t,1e3/60)})},function(t,e,n){var i=n(15).NAMESPACE;function r(t){return""!==t}function o(t,e){return t.hasOwnProperty(e)||(t[e]=!0),t}function a(t){if(!t)return[];var e=function(t){return t?t.split(/[\t\n\f\r ]+/).filter(r):[]}(t);return Object.keys(e.reduce(o,{}))}function s(t,e){for(var n in t)e[n]=t[n]}function u(t,e){var n=t.prototype;if(!(n instanceof e)){function i(){}i.prototype=e.prototype,s(n,i=new i),t.prototype=n=i}n.constructor!=t&&("function"!=typeof t&&console.error("unknown Class:"+t),n.constructor=t)}var l={},c=l.ELEMENT_NODE=1,h=l.ATTRIBUTE_NODE=2,d=l.TEXT_NODE=3,p=l.CDATA_SECTION_NODE=4,f=l.ENTITY_REFERENCE_NODE=5,m=l.ENTITY_NODE=6,g=l.PROCESSING_INSTRUCTION_NODE=7,_=l.COMMENT_NODE=8,v=l.DOCUMENT_NODE=9,y=l.DOCUMENT_TYPE_NODE=10,b=l.DOCUMENT_FRAGMENT_NODE=11,T=l.NOTATION_NODE=12,w={},x={},S=(w.INDEX_SIZE_ERR=(x[1]="Index size error",1),w.DOMSTRING_SIZE_ERR=(x[2]="DOMString size error",2),w.HIERARCHY_REQUEST_ERR=(x[3]="Hierarchy request error",3)),E=(w.WRONG_DOCUMENT_ERR=(x[4]="Wrong document",4),w.INVALID_CHARACTER_ERR=(x[5]="Invalid character",5),w.NO_DATA_ALLOWED_ERR=(x[6]="No data allowed",6),w.NO_MODIFICATION_ALLOWED_ERR=(x[7]="No modification allowed",7),w.NOT_FOUND_ERR=(x[8]="Not found",8)),k=(w.NOT_SUPPORTED_ERR=(x[9]="Not supported",9),w.INUSE_ATTRIBUTE_ERR=(x[10]="Attribute in use",10));w.INVALID_STATE_ERR=(x[11]="Invalid state",11),w.SYNTAX_ERR=(x[12]="Syntax error",12),w.INVALID_MODIFICATION_ERR=(x[13]="Invalid modification",13),w.NAMESPACE_ERR=(x[14]="Invalid namespace",14),w.INVALID_ACCESS_ERR=(x[15]="Invalid access",15);function C(t,e){if(e instanceof Error)var n=e;else n=this,Error.call(this,x[t]),this.message=x[t],Error.captureStackTrace&&Error.captureStackTrace(this,C);return n.code=t,e&&(this.message=this.message+": "+e),n}function P(){}function L(t,e){this._node=t,this._refresh=e,I(this)}function I(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);lt(t,"length",n.length),s(n,t),t._inc=e}}function A(){}function M(t,e){for(var n=t.length;n--;)if(t[n]===e)return n}function O(t,e,n,r){if(r?e[M(e,r)]=n:e[e.length++]=n,t){n.ownerElement=t;var o=t.ownerDocument;o&&(r&&F(o,t,r),function(t,e,n){t&&t._inc++,n.namespaceURI===i.XMLNS&&(e._nsMap[n.prefix?n.localName:""]=n.value)}(o,t,n))}}function R(t,e,n){var i=M(e,n);if(!(i>=0))throw C(E,new Error(t.tagName+"@"+n));for(var r=e.length-1;i<r;)e[i]=e[++i];if(e.length=r,t){var o=t.ownerDocument;o&&(F(o,t,n),n.ownerElement=null)}}function D(){}function N(){}function B(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function U(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(U(t,e))return!0}while(t=t.nextSibling)}function z(){}function F(t,e,n,r){t&&t._inc++,n.namespaceURI===i.XMLNS&&delete e._nsMap[n.prefix?n.localName:""]}function j(t,e,n){if(t&&t._inc){t._inc++;var i=e.childNodes;if(n)i[i.length++]=n;else{for(var r=e.firstChild,o=0;r;)i[o++]=r,r=r.nextSibling;i.length=o}}}function H(t,e){var n=e.previousSibling,i=e.nextSibling;return n?n.nextSibling=i:t.firstChild=i,i?i.previousSibling=n:t.lastChild=n,j(t.ownerDocument,t),e}function Z(t,e,n){var i=e.parentNode;if(i&&i.removeChild(e),e.nodeType===b){var r=e.firstChild;if(null==r)return e;var o=e.lastChild}else r=o=e;var a=n?n.previousSibling:t.lastChild;r.previousSibling=a,o.nextSibling=n,a?a.nextSibling=r:t.firstChild=r,null==n?t.lastChild=o:n.previousSibling=o;do{r.parentNode=t}while(r!==o&&(r=r.nextSibling));return j(t.ownerDocument||t,t),e.nodeType==b&&(e.firstChild=e.lastChild=null),e}function W(){this._nsMap={}}function q(){}function V(){}function G(){}function Y(){}function X(){}function K(){}function Q(){}function $(){}function J(){}function tt(){}function et(){}function nt(){}function it(t,e){var n=[],i=9==this.nodeType&&this.documentElement||this,r=i.prefix,o=i.namespaceURI;if(o&&null==r&&null==(r=i.lookupPrefix(o)))var a=[{namespace:o,prefix:null}];return at(this,n,t,e,a),n.join("")}function rt(t,e,n){var r=t.prefix||"",o=t.namespaceURI;if(!o)return!1;if("xml"===r&&o===i.XML||o===i.XMLNS)return!1;for(var a=n.length;a--;){var s=n[a];if(s.prefix===r)return s.namespace!==o}return!0}function ot(t,e,n){t.push(" ",e,'="',n.replace(/[<&"]/g,B),'"')}function at(t,e,n,r,o){if(o||(o=[]),r){if(!(t=r(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case c:var a=t.attributes,s=a.length,u=t.firstChild,l=t.tagName,m=l;if(!(n=i.isHTML(t.namespaceURI)||n)&&!t.prefix&&t.namespaceURI){for(var T,w=0;w<a.length;w++)if("xmlns"===a.item(w).name){T=a.item(w).value;break}if(!T)for(var x=o.length-1;x>=0;x--){if(""===(S=o[x]).prefix&&S.namespace===t.namespaceURI){T=S.namespace;break}}if(T!==t.namespaceURI)for(x=o.length-1;x>=0;x--){var S;if((S=o[x]).namespace===t.namespaceURI){S.prefix&&(m=S.prefix+":"+l);break}}}e.push("<",m);for(var E=0;E<s;E++){"xmlns"==(k=a.item(E)).prefix?o.push({prefix:k.localName,namespace:k.value}):"xmlns"==k.nodeName&&o.push({prefix:"",namespace:k.value})}for(E=0;E<s;E++){var k,C,P;if(rt(k=a.item(E),0,o))ot(e,(C=k.prefix||"")?"xmlns:"+C:"xmlns",P=k.namespaceURI),o.push({prefix:C,namespace:P});at(k,e,n,r,o)}if(l===m&&rt(t,0,o))ot(e,(C=t.prefix||"")?"xmlns:"+C:"xmlns",P=t.namespaceURI),o.push({prefix:C,namespace:P});if(u||n&&!/^(?:meta|link|img|br|hr|input)$/i.test(l)){if(e.push(">"),n&&/^script$/i.test(l))for(;u;)u.data?e.push(u.data):at(u,e,n,r,o.slice()),u=u.nextSibling;else for(;u;)at(u,e,n,r,o.slice()),u=u.nextSibling;e.push("</",m,">")}else e.push("/>");return;case v:case b:for(u=t.firstChild;u;)at(u,e,n,r,o.slice()),u=u.nextSibling;return;case h:return ot(e,t.name,t.value);case d:return e.push(t.data.replace(/[<&]/g,B).replace(/]]>/g,"]]&gt;"));case p:return e.push("<![CDATA[",t.data,"]]>");case _:return e.push("\x3c!--",t.data,"--\x3e");case y:var L=t.publicId,I=t.systemId;if(e.push("<!DOCTYPE ",t.name),L)e.push(" PUBLIC ",L),I&&"."!=I&&e.push(" ",I),e.push(">");else if(I&&"."!=I)e.push(" SYSTEM ",I,">");else{var A=t.internalSubset;A&&e.push(" [",A,"]"),e.push(">")}return;case g:return e.push("<?",t.target," ",t.data,"?>");case f:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function st(t,e,n){var i;switch(e.nodeType){case c:(i=e.cloneNode(!1)).ownerDocument=t;case b:break;case h:n=!0}if(i||(i=e.cloneNode(!1)),i.ownerDocument=t,i.parentNode=null,n)for(var r=e.firstChild;r;)i.appendChild(st(t,r,n)),r=r.nextSibling;return i}function ut(t,e,n){var i=new e.constructor;for(var r in e){var o=e[r];"object"!=typeof o&&o!=i[r]&&(i[r]=o)}switch(e.childNodes&&(i.childNodes=new P),i.ownerDocument=t,i.nodeType){case c:var a=e.attributes,s=i.attributes=new A,u=a.length;s._ownerElement=i;for(var l=0;l<u;l++)i.setAttributeNode(ut(t,a.item(l),!0));break;case h:n=!0}if(n)for(var d=e.firstChild;d;)i.appendChild(ut(t,d,n)),d=d.nextSibling;return i}function lt(t,e,n){t[e]=n}C.prototype=Error.prototype,s(w,C),P.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var n=[],i=0;i<this.length;i++)at(this[i],n,t,e);return n.join("")}},L.prototype.item=function(t){return I(this),this[t]},u(L,P),A.prototype={length:0,item:P.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var n=this[e];if(n.nodeName==t)return n}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new C(k);var n=this.getNamedItem(t.nodeName);return O(this._ownerElement,this,t,n),n},setNamedItemNS:function(t){var e,n=t.ownerElement;if(n&&n!=this._ownerElement)throw new C(k);return e=this.getNamedItemNS(t.namespaceURI,t.localName),O(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return R(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var n=this.getNamedItemNS(t,e);return R(this._ownerElement,this,n),n},getNamedItemNS:function(t,e){for(var n=this.length;n--;){var i=this[n];if(i.localName==e&&i.namespaceURI==t)return i}return null}},D.prototype={hasFeature:function(t,e){return!0},createDocument:function(t,e,n){var i=new z;if(i.implementation=this,i.childNodes=new P,i.doctype=n||null,n&&i.appendChild(n),e){var r=i.createElementNS(t,e);i.appendChild(r)}return i},createDocumentType:function(t,e,n){var i=new K;return i.name=t,i.nodeName=t,i.publicId=e||"",i.systemId=n||"",i}},N.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return Z(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return H(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return ut(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==d&&t.nodeType==d?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var n=e._nsMap;if(n)for(var i in n)if(n[i]==t)return i;e=e.nodeType==h?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var n=e._nsMap;if(n&&t in n)return n[t];e=e.nodeType==h?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},s(l,N),s(l,N.prototype),z.prototype={nodeName:"#document",nodeType:v,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==b){for(var n=t.firstChild;n;){var i=n.nextSibling;this.insertBefore(n,e),n=i}return t}return null==this.documentElement&&t.nodeType==c&&(this.documentElement=t),Z(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),H(this,t)},importNode:function(t,e){return st(this,t,e)},getElementById:function(t){var e=null;return U(this.documentElement,(function(n){if(n.nodeType==c&&n.getAttribute("id")==t)return e=n,!0})),e},getElementsByClassName:function(t){var e=a(t);return new L(this,(function(n){var i=[];return e.length>0&&U(n.documentElement,(function(r){if(r!==n&&r.nodeType===c){var o=r.getAttribute("class");if(o){var s=t===o;if(!s){var u=a(o);s=e.every((l=u,function(t){return l&&-1!==l.indexOf(t)}))}s&&i.push(r)}}var l})),i}))},createElement:function(t){var e=new W;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.localName=t,e.childNodes=new P,(e.attributes=new A)._ownerElement=e,e},createDocumentFragment:function(){var t=new tt;return t.ownerDocument=this,t.childNodes=new P,t},createTextNode:function(t){var e=new G;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new Y;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new X;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var n=new et;return n.ownerDocument=this,n.tagName=n.target=t,n.nodeValue=n.data=e,n},createAttribute:function(t){var e=new q;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new J;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var n=new W,i=e.split(":"),r=n.attributes=new A;return n.childNodes=new P,n.ownerDocument=this,n.nodeName=e,n.tagName=e,n.namespaceURI=t,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=e,r._ownerElement=n,n},createAttributeNS:function(t,e){var n=new q,i=e.split(":");return n.ownerDocument=this,n.nodeName=e,n.name=e,n.namespaceURI=t,n.specified=!0,2==i.length?(n.prefix=i[0],n.localName=i[1]):n.localName=e,n}},u(z,N),W.prototype={nodeType:c,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var n=this.ownerDocument.createAttribute(t);n.value=n.nodeValue=""+e,this.setAttributeNode(n)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===b?this.insertBefore(t,null):function(t,e){var n=e.parentNode;if(n){var i=t.lastChild;n.removeChild(e),i=t.lastChild}return i=t.lastChild,e.parentNode=t,e.previousSibling=i,e.nextSibling=null,i?i.nextSibling=e:t.firstChild=e,t.lastChild=e,j(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);n&&this.removeAttributeNode(n)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var n=this.getAttributeNodeNS(t,e);return n&&n.value||""},setAttributeNS:function(t,e,n){var i=this.ownerDocument.createAttributeNS(t,e);i.value=i.nodeValue=""+n,this.setAttributeNode(i)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new L(this,(function(e){var n=[];return U(e,(function(i){i===e||i.nodeType!=c||"*"!==t&&i.tagName!=t||n.push(i)})),n}))},getElementsByTagNameNS:function(t,e){return new L(this,(function(n){var i=[];return U(n,(function(r){r===n||r.nodeType!==c||"*"!==t&&r.namespaceURI!==t||"*"!==e&&r.localName!=e||i.push(r)})),i}))}},z.prototype.getElementsByTagName=W.prototype.getElementsByTagName,z.prototype.getElementsByTagNameNS=W.prototype.getElementsByTagNameNS,u(W,N),q.prototype.nodeType=h,u(q,N),V.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(x[S])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,n){n=this.data.substring(0,t)+n+this.data.substring(t+e),this.nodeValue=this.data=n,this.length=n.length}},u(V,N),G.prototype={nodeName:"#text",nodeType:d,splitText:function(t){var e=this.data,n=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var i=this.ownerDocument.createTextNode(n);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}},u(G,V),Y.prototype={nodeName:"#comment",nodeType:_},u(Y,V),X.prototype={nodeName:"#cdata-section",nodeType:p},u(X,V),K.prototype.nodeType=y,u(K,N),Q.prototype.nodeType=T,u(Q,N),$.prototype.nodeType=m,u($,N),J.prototype.nodeType=f,u(J,N),tt.prototype.nodeName="#document-fragment",tt.prototype.nodeType=b,u(tt,N),et.prototype.nodeType=g,u(et,N),nt.prototype.serializeToString=function(t,e,n){return it.call(t,e,n)},N.prototype.toString=it;try{if(Object.defineProperty){function ct(t){switch(t.nodeType){case c:case b:var e=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&e.push(ct(t)),t=t.nextSibling;return e.join("");default:return t.nodeValue}}Object.defineProperty(L.prototype,"length",{get:function(){return I(this),this.$$length}}),Object.defineProperty(N.prototype,"textContent",{get:function(){return ct(this)},set:function(t){switch(this.nodeType){case c:case b:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),lt=function(t,e,n){t["$$"+e]=n}}}catch(ht){}e.DocumentType=K,e.DOMException=C,e.DOMImplementation=D,e.Element=W,e.Node=N,e.NodeList=P,e.XMLSerializer=nt},function(t,e,n){"use strict";function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.d(e,"a",(function(){return i}))},function(t,e){t.exports=function(t,e){var n,i=null;try{n=JSON.parse(t,e)}catch(r){i=r}return[i,n]}},function(t,e,n){var i=n(25),r=n(58);function o(e,n,a){return r()?t.exports=o=Reflect.construct:t.exports=o=function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&i(o,n.prototype),o},o.apply(null,arguments)}t.exports=o},function(t,e,n){var i=n(25);t.exports=function(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&i(t,e)}},function(t,e,n){var i=n(35);e.DOMImplementation=i.DOMImplementation,e.XMLSerializer=i.XMLSerializer,e.DOMParser=n(63).DOMParser},function(t,e){var n=Math.pow(2,32);t.exports=function(t){var e=new DataView(t.buffer,t.byteOffset,t.byteLength),i={version:t[0],flags:new Uint8Array(t.subarray(1,4)),references:[],referenceId:e.getUint32(4),timescale:e.getUint32(8)},r=12;0===i.version?(i.earliestPresentationTime=e.getUint32(r),i.firstOffset=e.getUint32(r+4),r+=8):(i.earliestPresentationTime=e.getUint32(r)*n+e.getUint32(r+4),i.firstOffset=e.getUint32(r+8)*n+e.getUint32(r+12),r+=16),r+=2;var o=e.getUint16(r);for(r+=2;o>0;r+=12,o--)i.references.push({referenceType:(128&t[r])>>>7,referencedSize:2147483647&e.getUint32(r),subsegmentDuration:e.getUint32(r+4),startsWithSap:!!(128&t[r+8]),sapType:(112&t[r+8])>>>4,sapDeltaTime:268435455&e.getUint32(r+8)});return i}},function(t,e,n){"use strict";function i(t){if(null==t)throw new TypeError("Cannot destructure undefined")}n.d(e,"a",(function(){return i}))},function(t){t.exports=JSON.parse('{"name":"esri-leaflet","description":"Leaflet plugins for consuming ArcGIS Online and ArcGIS Server services.","version":"3.0.3","author":"Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","bugs":{"url":"https://github.com/esri/esri-leaflet/issues"},"contributors":["Patrick Arlt <parlt@esri.com> (http://patrickarlt.com)","John Gravois <jgravois@esri.com> (https://johngravois.com)","Gavin Rehkemper <grehkemper@esri.com> (https://gavinr.com)","Jacob Wasilkowski <jwasilkowski@esri.com> (https://jwasilgeo.github.io)"],"dependencies":{"@terraformer/arcgis":"^2.0.7","tiny-binary-search":"^1.0.3"},"devDependencies":{"@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.0","chai":"4.3.4","gh-release":"^6.0.0","highlight.js":"^10.7.2","http-server":"^0.12.3","husky":"^1.1.1","karma":"^6.3.2","karma-chai-sinon":"^0.1.5","karma-chrome-launcher":"^3.1.0","karma-coverage":"^2.0.3","karma-mocha":"^2.0.1","karma-mocha-reporter":"^2.2.5","karma-sourcemap-loader":"^0.3.8","leaflet":"^1.6.0","mkdirp":"^1.0.4","mocha":"^8.4.0","npm-run-all":"^4.1.5","rollup":"^2.49.0","rollup-plugin-uglify":"^6.0.4","semistandard":"^9.0.0","sinon":"^6.3.5","sinon-chai":"3.2.0","snazzy":"^8.0.0","uglify-js":"^2.8.29","watch":"^1.0.2"},"files":["src/**/*.js","dist/esri-leaflet.js","dist/esri-leaflet.js.map","dist/esri-leaflet-debug.js.map","profiles/*.js"],"homepage":"http://esri.github.io/esri-leaflet","module":"src/EsriLeaflet.js","jsnext:main":"src/EsriLeaflet.js","jspm":{"registry":"npm","format":"es6","main":"src/EsriLeaflet.js"},"keywords":["arcgis","esri","esri leaflet","gis","leaflet plugin","mapping"],"license":"Apache-2.0","main":"dist/esri-leaflet-debug.js","peerDependencies":{"leaflet":"^1.0.0"},"readmeFilename":"README.md","repository":{"type":"git","url":"git@github.com:Esri/esri-leaflet.git"},"scripts":{"build":"rollup -c profiles/debug.js & rollup -c profiles/production.js","lint":"semistandard | snazzy","prebuild":"mkdirp dist","prepare":"npm run build","pretest":"npm run build","precommit":"npm run lint","fix":"semistandard --fix","release":"./scripts/release.sh","start-watch":"watch \\"npm run build\\" src","start":"run-p start-watch serve","serve":"http-server -p 5000 -c-1 -o","test":"npm run lint && karma start","test:ci":"npm run lint && karma start --browsers Chrome_travis_ci"},"semistandard":{"globals":["expect","L","XMLHttpRequest","sinon","xhr","proj4"]},"unpkg":"dist/esri-leaflet-debug.js"}')},,function(t,e,n){"use strict";var i=n(23),r=60103,o=60106;e.Fragment=60107,e.StrictMode=60108,e.Profiler=60114;var a=60109,s=60110,u=60112;e.Suspense=60113;var l=60115,c=60116;if("function"===typeof Symbol&&Symbol.for){var h=Symbol.for;r=h("react.element"),o=h("react.portal"),e.Fragment=h("react.fragment"),e.StrictMode=h("react.strict_mode"),e.Profiler=h("react.profiler"),a=h("react.provider"),s=h("react.context"),u=h("react.forward_ref"),e.Suspense=h("react.suspense"),l=h("react.memo"),c=h("react.lazy")}var d="function"===typeof Symbol&&Symbol.iterator;function p(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m={};function g(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}function _(){}function v(t,e,n){this.props=t,this.context=e,this.refs=m,this.updater=n||f}g.prototype.isReactComponent={},g.prototype.setState=function(t,e){if("object"!==typeof t&&"function"!==typeof t&&null!=t)throw Error(p(85));this.updater.enqueueSetState(this,t,e,"setState")},g.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")},_.prototype=g.prototype;var y=v.prototype=new _;y.constructor=v,i(y,g.prototype),y.isPureReactComponent=!0;var b={current:null},T=Object.prototype.hasOwnProperty,w={key:!0,ref:!0,__self:!0,__source:!0};function x(t,e,n){var i,o={},a=null,s=null;if(null!=e)for(i in void 0!==e.ref&&(s=e.ref),void 0!==e.key&&(a=""+e.key),e)T.call(e,i)&&!w.hasOwnProperty(i)&&(o[i]=e[i]);var u=arguments.length-2;if(1===u)o.children=n;else if(1<u){for(var l=Array(u),c=0;c<u;c++)l[c]=arguments[c+2];o.children=l}if(t&&t.defaultProps)for(i in u=t.defaultProps)void 0===o[i]&&(o[i]=u[i]);return{$$typeof:r,type:t,key:a,ref:s,props:o,_owner:b.current}}function S(t){return"object"===typeof t&&null!==t&&t.$$typeof===r}var E=/\/+/g;function k(t,e){return"object"===typeof t&&null!==t&&null!=t.key?function(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,(function(t){return e[t]}))}(""+t.key):e.toString(36)}function C(t,e,n,i,a){var s=typeof t;"undefined"!==s&&"boolean"!==s||(t=null);var u=!1;if(null===t)u=!0;else switch(s){case"string":case"number":u=!0;break;case"object":switch(t.$$typeof){case r:case o:u=!0}}if(u)return a=a(u=t),t=""===i?"."+k(u,0):i,Array.isArray(a)?(n="",null!=t&&(n=t.replace(E,"$&/")+"/"),C(a,e,n,"",(function(t){return t}))):null!=a&&(S(a)&&(a=function(t,e){return{$$typeof:r,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}(a,n+(!a.key||u&&u.key===a.key?"":(""+a.key).replace(E,"$&/")+"/")+t)),e.push(a)),1;if(u=0,i=""===i?".":i+":",Array.isArray(t))for(var l=0;l<t.length;l++){var c=i+k(s=t[l],l);u+=C(s,e,n,c,a)}else if("function"===typeof(c=function(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=d&&t[d]||t["@@iterator"])?t:null}(t)))for(t=c.call(t),l=0;!(s=t.next()).done;)u+=C(s=s.value,e,n,c=i+k(s,l++),a);else if("object"===s)throw e=""+t,Error(p(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e));return u}function P(t,e,n){if(null==t)return t;var i=[],r=0;return C(t,i,"","",(function(t){return e.call(n,t,r++)})),i}function L(t){if(-1===t._status){var e=t._result;e=e(),t._status=0,t._result=e,e.then((function(e){0===t._status&&(e=e.default,t._status=1,t._result=e)}),(function(e){0===t._status&&(t._status=2,t._result=e)}))}if(1===t._status)return t._result;throw t._result}var I={current:null};function A(){var t=I.current;if(null===t)throw Error(p(321));return t}var M={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:b,IsSomeRendererActing:{current:!1},assign:i};e.Children={map:P,forEach:function(t,e,n){P(t,(function(){e.apply(this,arguments)}),n)},count:function(t){var e=0;return P(t,(function(){e++})),e},toArray:function(t){return P(t,(function(t){return t}))||[]},only:function(t){if(!S(t))throw Error(p(143));return t}},e.Component=g,e.PureComponent=v,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M,e.cloneElement=function(t,e,n){if(null===t||void 0===t)throw Error(p(267,t));var o=i({},t.props),a=t.key,s=t.ref,u=t._owner;if(null!=e){if(void 0!==e.ref&&(s=e.ref,u=b.current),void 0!==e.key&&(a=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)T.call(e,c)&&!w.hasOwnProperty(c)&&(o[c]=void 0===e[c]&&void 0!==l?l[c]:e[c])}var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){l=Array(c);for(var h=0;h<c;h++)l[h]=arguments[h+2];o.children=l}return{$$typeof:r,type:t.type,key:a,ref:s,props:o,_owner:u}},e.createContext=function(t,e){return void 0===e&&(e=null),(t={$$typeof:s,_calculateChangedBits:e,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:a,_context:t},t.Consumer=t},e.createElement=x,e.createFactory=function(t){var e=x.bind(null,t);return e.type=t,e},e.createRef=function(){return{current:null}},e.forwardRef=function(t){return{$$typeof:u,render:t}},e.isValidElement=S,e.lazy=function(t){return{$$typeof:c,_payload:{_status:-1,_result:t},_init:L}},e.memo=function(t,e){return{$$typeof:l,type:t,compare:void 0===e?null:e}},e.useCallback=function(t,e){return A().useCallback(t,e)},e.useContext=function(t,e){return A().useContext(t,e)},e.useDebugValue=function(){},e.useEffect=function(t,e){return A().useEffect(t,e)},e.useImperativeHandle=function(t,e,n){return A().useImperativeHandle(t,e,n)},e.useLayoutEffect=function(t,e){return A().useLayoutEffect(t,e)},e.useMemo=function(t,e){return A().useMemo(t,e)},e.useReducer=function(t,e,n){return A().useReducer(t,e,n)},e.useRef=function(t){return A().useRef(t)},e.useState=function(t){return A().useState(t)},e.version="17.0.2"},function(t,e,n){"use strict";var i=n(4),r=n(23),o=n(47);function a(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!i)throw Error(a(227));var s=new Set,u={};function l(t,e){c(t,e),c(t+"Capture",e)}function c(t,e){for(u[t]=e,t=0;t<e.length;t++)s.add(e[t])}var h=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p=Object.prototype.hasOwnProperty,f={},m={};function g(t,e,n,i,r,o,a){this.acceptsBooleans=2===e||3===e||4===e,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(t){_[t]=new g(t,0,!1,t,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(t){var e=t[0];_[e]=new g(e,1,!1,t[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(t){_[t]=new g(t,2,!1,t.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(t){_[t]=new g(t,2,!1,t,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(t){_[t]=new g(t,3,!1,t.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(t){_[t]=new g(t,3,!0,t,null,!1,!1)})),["capture","download"].forEach((function(t){_[t]=new g(t,4,!1,t,null,!1,!1)})),["cols","rows","size","span"].forEach((function(t){_[t]=new g(t,6,!1,t,null,!1,!1)})),["rowSpan","start"].forEach((function(t){_[t]=new g(t,5,!1,t.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(t){return t[1].toUpperCase()}function b(t,e,n,i){var r=_.hasOwnProperty(e)?_[e]:null;(null!==r?0===r.type:!i&&(2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])))||(function(t,e,n,i){if(null===e||"undefined"===typeof e||function(t,e,n,i){if(null!==n&&0===n.type)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(t=t.toLowerCase().slice(0,5))&&"aria-"!==t);default:return!1}}(t,e,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!e;case 4:return!1===e;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}(e,n,r,i)&&(n=null),i||null===r?function(t){return!!p.call(m,t)||!p.call(f,t)&&(d.test(t)?m[t]=!0:(f[t]=!0,!1))}(e)&&(null===n?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=null===n?3!==r.type&&"":n:(e=r.attributeName,i=r.attributeNamespace,null===n?t.removeAttribute(e):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(t){var e=t.replace(v,y);_[e]=new g(e,1,!1,t,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(t){var e=t.replace(v,y);_[e]=new g(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(t){var e=t.replace(v,y);_[e]=new g(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!1,!1)})),_.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(t){_[t]=new g(t,1,!1,t.toLowerCase(),null,!0,!0)}));var T=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=60103,x=60106,S=60107,E=60108,k=60114,C=60109,P=60110,L=60112,I=60113,A=60120,M=60115,O=60116,R=60121,D=60128,N=60129,B=60130,U=60131;if("function"===typeof Symbol&&Symbol.for){var z=Symbol.for;w=z("react.element"),x=z("react.portal"),S=z("react.fragment"),E=z("react.strict_mode"),k=z("react.profiler"),C=z("react.provider"),P=z("react.context"),L=z("react.forward_ref"),I=z("react.suspense"),A=z("react.suspense_list"),M=z("react.memo"),O=z("react.lazy"),R=z("react.block"),z("react.scope"),D=z("react.opaque.id"),N=z("react.debug_trace_mode"),B=z("react.offscreen"),U=z("react.legacy_hidden")}var F,j="function"===typeof Symbol&&Symbol.iterator;function H(t){return null===t||"object"!==typeof t?null:"function"===typeof(t=j&&t[j]||t["@@iterator"])?t:null}function Z(t){if(void 0===F)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);F=e&&e[1]||""}return"\n"+F+t}var W=!1;function q(t,e){if(!t||W)return"";W=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&"string"===typeof u.stack){for(var r=u.stack.split("\n"),o=i.stack.split("\n"),a=r.length-1,s=o.length-1;1<=a&&0<=s&&r[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(r[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||r[a]!==o[s])return"\n"+r[a].replace(" at new "," at ")}while(1<=a&&0<=s);break}}}finally{W=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Z(t):""}function V(t){switch(t.tag){case 5:return Z(t.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return t=q(t.type,!1);case 11:return t=q(t.type.render,!1);case 22:return t=q(t.type._render,!1);case 1:return t=q(t.type,!0);default:return""}}function G(t){if(null==t)return null;if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t;switch(t){case S:return"Fragment";case x:return"Portal";case k:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case A:return"SuspenseList"}if("object"===typeof t)switch(t.$$typeof){case P:return(t.displayName||"Context")+".Consumer";case C:return(t._context.displayName||"Context")+".Provider";case L:var e=t.render;return e=e.displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case M:return G(t.type);case R:return G(t._render);case O:e=t._payload,t=t._init;try{return G(t(e))}catch(n){}}return null}function Y(t){switch(typeof t){case"boolean":case"number":case"object":case"string":case"undefined":return t;default:return""}}function X(t){var e=t.type;return(t=t.nodeName)&&"input"===t.toLowerCase()&&("checkbox"===e||"radio"===e)}function K(t){t._valueTracker||(t._valueTracker=function(t){var e=X(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(t){i=""+t,o.call(this,t)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(t){i=""+t},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}(t))}function Q(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=X(t)?t.checked?"true":"false":t.value),(t=i)!==n&&(e.setValue(t),!0)}function $(t){if("undefined"===typeof(t=t||("undefined"!==typeof document?document:void 0)))return null;try{return t.activeElement||t.body}catch(e){return t.body}}function J(t,e){var n=e.checked;return r({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:t._wrapperState.initialChecked})}function tt(t,e){var n=null==e.defaultValue?"":e.defaultValue,i=null!=e.checked?e.checked:e.defaultChecked;n=Y(null!=e.value?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===e.type||"radio"===e.type?null!=e.checked:null!=e.value}}function et(t,e){null!=(e=e.checked)&&b(t,"checked",e,!1)}function nt(t,e){et(t,e);var n=Y(e.value),i=e.type;if(null!=n)"number"===i?(0===n&&""===t.value||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if("submit"===i||"reset"===i)return void t.removeAttribute("value");e.hasOwnProperty("value")?rt(t,e.type,n):e.hasOwnProperty("defaultValue")&&rt(t,e.type,Y(e.defaultValue)),null==e.checked&&null!=e.defaultChecked&&(t.defaultChecked=!!e.defaultChecked)}function it(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!("submit"!==i&&"reset"!==i||void 0!==e.value&&null!==e.value))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}""!==(n=t.name)&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,""!==n&&(t.name=n)}function rt(t,e,n){"number"===e&&$(t.ownerDocument)===t||(null==n?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}function ot(t,e){return t=r({children:void 0},e),(e=function(t){var e="";return i.Children.forEach(t,(function(t){null!=t&&(e+=t)})),e}(e.children))&&(t.children=e),t}function at(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Y(n),e=null,r=0;r<t.length;r++){if(t[r].value===n)return t[r].selected=!0,void(i&&(t[r].defaultSelected=!0));null!==e||t[r].disabled||(e=t[r])}null!==e&&(e.selected=!0)}}function st(t,e){if(null!=e.dangerouslySetInnerHTML)throw Error(a(91));return r({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ut(t,e){var n=e.value;if(null==n){if(n=e.children,e=e.defaultValue,null!=n){if(null!=e)throw Error(a(92));if(Array.isArray(n)){if(!(1>=n.length))throw Error(a(93));n=n[0]}e=n}null==e&&(e=""),n=e}t._wrapperState={initialValue:Y(n)}}function lt(t,e){var n=Y(e.value),i=Y(e.defaultValue);null!=n&&((n=""+n)!==t.value&&(t.value=n),null==e.defaultValue&&t.defaultValue!==n&&(t.defaultValue=n)),null!=i&&(t.defaultValue=""+i)}function ct(t){var e=t.textContent;e===t._wrapperState.initialValue&&""!==e&&null!==e&&(t.value=e)}var ht="http://www.w3.org/1999/xhtml",dt="http://www.w3.org/2000/svg";function pt(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(t,e){return null==t||"http://www.w3.org/1999/xhtml"===t?pt(e):"http://www.w3.org/2000/svg"===t&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":t}var mt,gt,_t=(gt=function(t,e){if(t.namespaceURI!==dt||"innerHTML"in t)t.innerHTML=e;else{for((mt=mt||document.createElement("div")).innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mt.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,e,n,i){MSApp.execUnsafeLocalFunction((function(){return gt(t,e)}))}:gt);function vt(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&3===n.nodeType)return void(n.nodeValue=e)}t.textContent=e}var yt={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bt=["Webkit","ms","Moz","O"];function Tt(t,e,n){return null==e||"boolean"===typeof e||""===e?"":n||"number"!==typeof e||0===e||yt.hasOwnProperty(t)&&yt[t]?(""+e).trim():e+"px"}function wt(t,e){for(var n in t=t.style,e)if(e.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=Tt(n,e[n],i);"float"===n&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}Object.keys(yt).forEach((function(t){bt.forEach((function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),yt[e]=yt[t]}))}));var xt=r({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(t,e){if(e){if(xt[t]&&(null!=e.children||null!=e.dangerouslySetInnerHTML))throw Error(a(137,t));if(null!=e.dangerouslySetInnerHTML){if(null!=e.children)throw Error(a(60));if("object"!==typeof e.dangerouslySetInnerHTML||!("__html"in e.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=e.style&&"object"!==typeof e.style)throw Error(a(62))}}function Et(t,e){if(-1===t.indexOf("-"))return"string"===typeof e.is;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function kt(t){return(t=t.target||t.srcElement||window).correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}var Ct=null,Pt=null,Lt=null;function It(t){if(t=tr(t)){if("function"!==typeof Ct)throw Error(a(280));var e=t.stateNode;e&&(e=nr(e),Ct(t.stateNode,t.type,e))}}function At(t){Pt?Lt?Lt.push(t):Lt=[t]:Pt=t}function Mt(){if(Pt){var t=Pt,e=Lt;if(Lt=Pt=null,It(t),e)for(t=0;t<e.length;t++)It(e[t])}}function Ot(t,e){return t(e)}function Rt(t,e,n,i,r){return t(e,n,i,r)}function Dt(){}var Nt=Ot,Bt=!1,Ut=!1;function zt(){null===Pt&&null===Lt||(Dt(),Mt())}function Ft(t,e){var n=t.stateNode;if(null===n)return null;var i=nr(n);if(null===i)return null;n=i[e];t:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(t=t.type)||"input"===t||"select"===t||"textarea"===t)),t=!i;break t;default:t=!1}if(t)return null;if(n&&"function"!==typeof n)throw Error(a(231,e,typeof n));return n}var jt=!1;if(h)try{var Ht={};Object.defineProperty(Ht,"passive",{get:function(){jt=!0}}),window.addEventListener("test",Ht,Ht),window.removeEventListener("test",Ht,Ht)}catch(gt){jt=!1}function Zt(t,e,n,i,r,o,a,s,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var Wt=!1,qt=null,Vt=!1,Gt=null,Yt={onError:function(t){Wt=!0,qt=t}};function Xt(t,e,n,i,r,o,a,s,u){Wt=!1,qt=null,Zt.apply(Yt,arguments)}function Kt(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do{0!==(1026&(e=t).flags)&&(n=e.return),t=e.return}while(t)}return 3===e.tag?n:null}function Qt(t){if(13===t.tag){var e=t.memoizedState;if(null===e&&(null!==(t=t.alternate)&&(e=t.memoizedState)),null!==e)return e.dehydrated}return null}function $t(t){if(Kt(t)!==t)throw Error(a(188))}function Jt(t){if(!(t=function(t){var e=t.alternate;if(!e){if(null===(e=Kt(t)))throw Error(a(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(null===r)break;var o=r.alternate;if(null===o){if(null!==(i=r.return)){n=i;continue}break}if(r.child===o.child){for(o=r.child;o;){if(o===n)return $t(r),t;if(o===i)return $t(r),e;o=o.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=o;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,i=o;break}if(u===i){s=!0,i=r,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,i=r;break}if(u===i){s=!0,i=o,n=r;break}u=u.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?t:e}(t)))return null;for(var e=t;;){if(5===e.tag||6===e.tag)return e;if(e.child)e.child.return=e,e=e.child;else{if(e===t)break;for(;!e.sibling;){if(!e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}}return null}function te(t,e){for(var n=t.alternate;null!==e;){if(e===t||e===n)return!0;e=e.return}return!1}var ee,ne,ie,re,oe=!1,ae=[],se=null,ue=null,le=null,ce=new Map,he=new Map,de=[],pe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fe(t,e,n,i,r){return{blockedOn:t,domEventName:e,eventSystemFlags:16|n,nativeEvent:r,targetContainers:[i]}}function me(t,e){switch(t){case"focusin":case"focusout":se=null;break;case"dragenter":case"dragleave":ue=null;break;case"mouseover":case"mouseout":le=null;break;case"pointerover":case"pointerout":ce.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":he.delete(e.pointerId)}}function ge(t,e,n,i,r,o){return null===t||t.nativeEvent!==o?(t=fe(e,n,i,r,o),null!==e&&(null!==(e=tr(e))&&ne(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,null!==r&&-1===e.indexOf(r)&&e.push(r),t)}function _e(t){var e=Ji(t.target);if(null!==e){var n=Kt(e);if(null!==n)if(13===(e=n.tag)){if(null!==(e=Qt(n)))return t.blockedOn=e,void re(t.lanePriority,(function(){o.unstable_runWithPriority(t.priority,(function(){ie(n)}))}))}else if(3===e&&n.stateNode.hydrate)return void(t.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}t.blockedOn=null}function ve(t){if(null!==t.blockedOn)return!1;for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n)return null!==(e=tr(n))&&ne(e),t.blockedOn=n,!1;e.shift()}return!0}function ye(t,e,n){ve(t)&&n.delete(e)}function be(){for(oe=!1;0<ae.length;){var t=ae[0];if(null!==t.blockedOn){null!==(t=tr(t.blockedOn))&&ee(t);break}for(var e=t.targetContainers;0<e.length;){var n=Je(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(null!==n){t.blockedOn=n;break}e.shift()}null===t.blockedOn&&ae.shift()}null!==se&&ve(se)&&(se=null),null!==ue&&ve(ue)&&(ue=null),null!==le&&ve(le)&&(le=null),ce.forEach(ye),he.forEach(ye)}function Te(t,e){t.blockedOn===e&&(t.blockedOn=null,oe||(oe=!0,o.unstable_scheduleCallback(o.unstable_NormalPriority,be)))}function we(t){function e(e){return Te(e,t)}if(0<ae.length){Te(ae[0],t);for(var n=1;n<ae.length;n++){var i=ae[n];i.blockedOn===t&&(i.blockedOn=null)}}for(null!==se&&Te(se,t),null!==ue&&Te(ue,t),null!==le&&Te(le,t),ce.forEach(e),he.forEach(e),n=0;n<de.length;n++)(i=de[n]).blockedOn===t&&(i.blockedOn=null);for(;0<de.length&&null===(n=de[0]).blockedOn;)_e(n),null===n.blockedOn&&de.shift()}function xe(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Se={animationend:xe("Animation","AnimationEnd"),animationiteration:xe("Animation","AnimationIteration"),animationstart:xe("Animation","AnimationStart"),transitionend:xe("Transition","TransitionEnd")},Ee={},ke={};function Ce(t){if(Ee[t])return Ee[t];if(!Se[t])return t;var e,n=Se[t];for(e in n)if(n.hasOwnProperty(e)&&e in ke)return Ee[t]=n[e];return t}h&&(ke=document.createElement("div").style,"AnimationEvent"in window||(delete Se.animationend.animation,delete Se.animationiteration.animation,delete Se.animationstart.animation),"TransitionEvent"in window||delete Se.transitionend.transition);var Pe=Ce("animationend"),Le=Ce("animationiteration"),Ie=Ce("animationstart"),Ae=Ce("transitionend"),Me=new Map,Oe=new Map,Re=["abort","abort",Pe,"animationEnd",Le,"animationIteration",Ie,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",Ae,"transitionEnd","waiting","waiting"];function De(t,e){for(var n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];r="on"+(r[0].toUpperCase()+r.slice(1)),Oe.set(i,e),Me.set(i,r),l(r,[i])}}(0,o.unstable_now)();var Ne=8;function Be(t){if(0!==(1&t))return Ne=15,1;if(0!==(2&t))return Ne=14,2;if(0!==(4&t))return Ne=13,4;var e=24&t;return 0!==e?(Ne=12,e):0!==(32&t)?(Ne=11,32):0!==(e=192&t)?(Ne=10,e):0!==(256&t)?(Ne=9,256):0!==(e=3584&t)?(Ne=8,e):0!==(4096&t)?(Ne=7,4096):0!==(e=4186112&t)?(Ne=6,e):0!==(e=62914560&t)?(Ne=5,e):67108864&t?(Ne=4,67108864):0!==(134217728&t)?(Ne=3,134217728):0!==(e=805306368&t)?(Ne=2,e):0!==(1073741824&t)?(Ne=1,1073741824):(Ne=8,t)}function Ue(t,e){var n=t.pendingLanes;if(0===n)return Ne=0;var i=0,r=0,o=t.expiredLanes,a=t.suspendedLanes,s=t.pingedLanes;if(0!==o)i=o,r=Ne=15;else if(0!==(o=134217727&n)){var u=o&~a;0!==u?(i=Be(u),r=Ne):0!==(s&=o)&&(i=Be(s),r=Ne)}else 0!==(o=n&~a)?(i=Be(o),r=Ne):0!==s&&(i=Be(s),r=Ne);if(0===i)return 0;if(i=n&((0>(i=31-We(i))?0:1<<i)<<1)-1,0!==e&&e!==i&&0===(e&a)){if(Be(e),r<=Ne)return e;Ne=r}if(0!==(e=t.entangledLanes))for(t=t.entanglements,e&=i;0<e;)r=1<<(n=31-We(e)),i|=t[n],e&=~r;return i}function ze(t){return 0!==(t=-1073741825&t.pendingLanes)?t:1073741824&t?1073741824:0}function Fe(t,e){switch(t){case 15:return 1;case 14:return 2;case 12:return 0===(t=je(24&~e))?Fe(10,e):t;case 10:return 0===(t=je(192&~e))?Fe(8,e):t;case 8:return 0===(t=je(3584&~e))&&(0===(t=je(4186112&~e))&&(t=512)),t;case 2:return 0===(e=je(805306368&~e))&&(e=268435456),e}throw Error(a(358,t))}function je(t){return t&-t}function He(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ze(t,e,n){t.pendingLanes|=e;var i=e-1;t.suspendedLanes&=i,t.pingedLanes&=i,(t=t.eventTimes)[e=31-We(e)]=n}var We=Math.clz32?Math.clz32:function(t){return 0===t?32:31-(qe(t)/Ve|0)|0},qe=Math.log,Ve=Math.LN2;var Ge=o.unstable_UserBlockingPriority,Ye=o.unstable_runWithPriority,Xe=!0;function Ke(t,e,n,i){Bt||Dt();var r=$e,o=Bt;Bt=!0;try{Rt(r,t,e,n,i)}finally{(Bt=o)||zt()}}function Qe(t,e,n,i){Ye(Ge,$e.bind(null,t,e,n,i))}function $e(t,e,n,i){var r;if(Xe)if((r=0===(4&e))&&0<ae.length&&-1<pe.indexOf(t))t=fe(null,t,e,n,i),ae.push(t);else{var o=Je(t,e,n,i);if(null===o)r&&me(t,i);else{if(r){if(-1<pe.indexOf(t))return t=fe(o,t,e,n,i),void ae.push(t);if(function(t,e,n,i,r){switch(e){case"focusin":return se=ge(se,t,e,n,i,r),!0;case"dragenter":return ue=ge(ue,t,e,n,i,r),!0;case"mouseover":return le=ge(le,t,e,n,i,r),!0;case"pointerover":var o=r.pointerId;return ce.set(o,ge(ce.get(o)||null,t,e,n,i,r)),!0;case"gotpointercapture":return o=r.pointerId,he.set(o,ge(he.get(o)||null,t,e,n,i,r)),!0}return!1}(o,t,e,n,i))return;me(t,i)}Mi(t,e,i,null,n)}}}function Je(t,e,n,i){var r=kt(i);if(null!==(r=Ji(r))){var o=Kt(r);if(null===o)r=null;else{var a=o.tag;if(13===a){if(null!==(r=Qt(o)))return r;r=null}else if(3===a){if(o.stateNode.hydrate)return 3===o.tag?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Mi(t,e,i,r,n),null}var tn=null,en=null,nn=null;function rn(){if(nn)return nn;var t,e,n=en,i=n.length,r="value"in tn?tn.value:tn.textContent,o=r.length;for(t=0;t<i&&n[t]===r[t];t++);var a=i-t;for(e=1;e<=a&&n[i-e]===r[o-e];e++);return nn=r.slice(t,1<e?1-e:void 0)}function on(t){var e=t.keyCode;return"charCode"in t?0===(t=t.charCode)&&13===e&&(t=13):t=e,10===t&&(t=13),32<=t||13===t?t:0}function an(){return!0}function sn(){return!1}function un(t){function e(e,n,i,r,o){for(var a in this._reactName=e,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=o,this.currentTarget=null,t)t.hasOwnProperty(a)&&(e=t[a],this[a]=e?e(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?an:sn,this.isPropagationStopped=sn,this}return r(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():"unknown"!==typeof t.returnValue&&(t.returnValue=!1),this.isDefaultPrevented=an)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():"unknown"!==typeof t.cancelBubble&&(t.cancelBubble=!0),this.isPropagationStopped=an)},persist:function(){},isPersistent:an}),e}var ln,cn,hn,dn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pn=un(dn),fn=r({},dn,{view:0,detail:0}),mn=un(fn),gn=r({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(t){return void 0===t.relatedTarget?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==hn&&(hn&&"mousemove"===t.type?(ln=t.screenX-hn.screenX,cn=t.screenY-hn.screenY):cn=ln=0,hn=t),ln)},movementY:function(t){return"movementY"in t?t.movementY:cn}}),_n=un(gn),vn=un(r({},gn,{dataTransfer:0})),yn=un(r({},fn,{relatedTarget:0})),bn=un(r({},dn,{animationName:0,elapsedTime:0,pseudoElement:0})),Tn=un(r({},dn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}})),wn=un(r({},dn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Sn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},En={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):!!(t=En[t])&&!!e[t]}function Cn(){return kn}var Pn=un(r({},fn,{key:function(t){if(t.key){var e=xn[t.key]||t.key;if("Unidentified"!==e)return e}return"keypress"===t.type?13===(t=on(t))?"Enter":String.fromCharCode(t):"keydown"===t.type||"keyup"===t.type?Sn[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(t){return"keypress"===t.type?on(t):0},keyCode:function(t){return"keydown"===t.type||"keyup"===t.type?t.keyCode:0},which:function(t){return"keypress"===t.type?on(t):"keydown"===t.type||"keyup"===t.type?t.keyCode:0}})),Ln=un(r({},gn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=un(r({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),An=un(r({},dn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Mn=un(r({},gn,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0})),On=[9,13,27,32],Rn=h&&"CompositionEvent"in window,Dn=null;h&&"documentMode"in document&&(Dn=document.documentMode);var Nn=h&&"TextEvent"in window&&!Dn,Bn=h&&(!Rn||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),zn=!1;function Fn(t,e){switch(t){case"keyup":return-1!==On.indexOf(e.keyCode);case"keydown":return 229!==e.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(t){return"object"===typeof(t=t.detail)&&"data"in t?t.data:null}var Hn=!1;var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return"input"===e?!!Zn[t.type]:"textarea"===e}function qn(t,e,n,i){At(i),0<(e=Ri(e,"onChange")).length&&(n=new pn("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var Vn=null,Gn=null;function Yn(t){ki(t,0)}function Xn(t){if(Q(er(t)))return t}function Kn(t,e){if("change"===t)return e}var Qn=!1;if(h){var $n;if(h){var Jn="oninput"in document;if(!Jn){var ti=document.createElement("div");ti.setAttribute("oninput","return;"),Jn="function"===typeof ti.oninput}$n=Jn}else $n=!1;Qn=$n&&(!document.documentMode||9<document.documentMode)}function ei(){Vn&&(Vn.detachEvent("onpropertychange",ni),Gn=Vn=null)}function ni(t){if("value"===t.propertyName&&Xn(Gn)){var e=[];if(qn(e,Gn,t,kt(t)),t=Yn,Bt)t(e);else{Bt=!0;try{Ot(t,e)}finally{Bt=!1,zt()}}}}function ii(t,e,n){"focusin"===t?(ei(),Gn=n,(Vn=e).attachEvent("onpropertychange",ni)):"focusout"===t&&ei()}function ri(t){if("selectionchange"===t||"keyup"===t||"keydown"===t)return Xn(Gn)}function oi(t,e){if("click"===t)return Xn(e)}function ai(t,e){if("input"===t||"change"===t)return Xn(e)}var si="function"===typeof Object.is?Object.is:function(t,e){return t===e&&(0!==t||1/t===1/e)||t!==t&&e!==e},ui=Object.prototype.hasOwnProperty;function li(t,e){if(si(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++)if(!ui.call(e,n[i])||!si(t[n[i]],e[n[i]]))return!1;return!0}function ci(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hi(t,e){var n,i=ci(t);for(t=0;i;){if(3===i.nodeType){if(n=t+i.textContent.length,t<=e&&n>=e)return{node:i,offset:e-t};t=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=ci(i)}}function di(t,e){return!(!t||!e)&&(t===e||(!t||3!==t.nodeType)&&(e&&3===e.nodeType?di(t,e.parentNode):"contains"in t?t.contains(e):!!t.compareDocumentPosition&&!!(16&t.compareDocumentPosition(e))))}function pi(){for(var t=window,e=$();e instanceof t.HTMLIFrameElement;){try{var n="string"===typeof e.contentWindow.location.href}catch(i){n=!1}if(!n)break;e=$((t=e.contentWindow).document)}return e}function fi(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&("input"===e&&("text"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type||"password"===t.type)||"textarea"===e||"true"===t.contentEditable)}var mi=h&&"documentMode"in document&&11>=document.documentMode,gi=null,_i=null,vi=null,yi=!1;function bi(t,e,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;yi||null==gi||gi!==$(i)||("selectionStart"in(i=gi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},vi&&li(vi,i)||(vi=i,0<(i=Ri(_i,"onSelect")).length&&(e=new pn("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=gi)))}De("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),De("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),De(Re,2);for(var Ti="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),wi=0;wi<Ti.length;wi++)Oe.set(Ti[wi],0);c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Si=new Set("cancel close invalid load scroll toggle".split(" ").concat(xi));function Ei(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,function(t,e,n,i,r,o,s,u,l){if(Xt.apply(this,arguments),Wt){if(!Wt)throw Error(a(198));var c=qt;Wt=!1,qt=null,Vt||(Vt=!0,Gt=c)}}(i,e,void 0,t),t.currentTarget=null}function ki(t,e){e=0!==(4&e);for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;t:{var o=void 0;if(e)for(var a=i.length-1;0<=a;a--){var s=i[a],u=s.instance,l=s.currentTarget;if(s=s.listener,u!==o&&r.isPropagationStopped())break t;Ei(r,s,l),o=u}else for(a=0;a<i.length;a++){if(u=(s=i[a]).instance,l=s.currentTarget,s=s.listener,u!==o&&r.isPropagationStopped())break t;Ei(r,s,l),o=u}}}if(Vt)throw t=Gt,Vt=!1,Gt=null,t}function Ci(t,e){var n=ir(e),i=t+"__bubble";n.has(i)||(Ai(e,t,2,!1),n.add(i))}var Pi="_reactListening"+Math.random().toString(36).slice(2);function Li(t){t[Pi]||(t[Pi]=!0,s.forEach((function(e){Si.has(e)||Ii(e,!1,t,null),Ii(e,!0,t,null)})))}function Ii(t,e,n,i){var r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=n;if("selectionchange"===t&&9!==n.nodeType&&(o=n.ownerDocument),null!==i&&!e&&Si.has(t)){if("scroll"!==t)return;r|=2,o=i}var a=ir(o),s=t+"__"+(e?"capture":"bubble");a.has(s)||(e&&(r|=4),Ai(o,t,r,e),a.add(s))}function Ai(t,e,n,i){var r=Oe.get(e);switch(void 0===r?2:r){case 0:r=Ke;break;case 1:r=Qe;break;default:r=$e}n=r.bind(null,e,n,t),r=void 0,!jt||"touchstart"!==e&&"touchmove"!==e&&"wheel"!==e||(r=!0),i?void 0!==r?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):void 0!==r?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Mi(t,e,n,i,r){var o=i;if(0===(1&e)&&0===(2&e)&&null!==i)t:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var s=i.stateNode.containerInfo;if(s===r||8===s.nodeType&&s.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var u=a.tag;if((3===u||4===u)&&((u=a.stateNode.containerInfo)===r||8===u.nodeType&&u.parentNode===r))return;a=a.return}for(;null!==s;){if(null===(a=Ji(s)))return;if(5===(u=a.tag)||6===u){i=o=a;continue t}s=s.parentNode}}i=i.return}!function(t,e,n){if(Ut)return t(e,n);Ut=!0;try{Nt(t,e,n)}finally{Ut=!1,zt()}}((function(){var i=o,r=kt(n),a=[];t:{var s=Me.get(t);if(void 0!==s){var u=pn,l=t;switch(t){case"keypress":if(0===on(n))break t;case"keydown":case"keyup":u=Pn;break;case"focusin":l="focus",u=yn;break;case"focusout":l="blur",u=yn;break;case"beforeblur":case"afterblur":u=yn;break;case"click":if(2===n.button)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":u=_n;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":u=vn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":u=In;break;case Pe:case Le:case Ie:u=bn;break;case Ae:u=An;break;case"scroll":u=mn;break;case"wheel":u=Mn;break;case"copy":case"cut":case"paste":u=Tn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":u=Ln}var c=0!==(4&e),h=!c&&"scroll"===t,d=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=i;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==d&&(null!=(m=Ft(f,d))&&c.push(Oi(f,m,p)))),h)break;f=f.return}0<c.length&&(s=new u(s,l,null,n,r),a.push({event:s,listeners:c}))}}if(0===(7&e)){if(u="mouseout"===t||"pointerout"===t,(!(s="mouseover"===t||"pointerover"===t)||0!==(16&e)||!(l=n.relatedTarget||n.fromElement)||!Ji(l)&&!l[Qi])&&(u||s)&&(s=r.window===r?r:(s=r.ownerDocument)?s.defaultView||s.parentWindow:window,u?(u=i,null!==(l=(l=n.relatedTarget||n.toElement)?Ji(l):null)&&(l!==(h=Kt(l))||5!==l.tag&&6!==l.tag)&&(l=null)):(u=null,l=i),u!==l)){if(c=_n,m="onMouseLeave",d="onMouseEnter",f="mouse","pointerout"!==t&&"pointerover"!==t||(c=Ln,m="onPointerLeave",d="onPointerEnter",f="pointer"),h=null==u?s:er(u),p=null==l?s:er(l),(s=new c(m,f+"leave",u,n,r)).target=h,s.relatedTarget=p,m=null,Ji(r)===i&&((c=new c(d,f+"enter",l,n,r)).target=p,c.relatedTarget=h,m=c),h=m,u&&l)t:{for(d=l,f=0,p=c=u;p;p=Di(p))f++;for(p=0,m=d;m;m=Di(m))p++;for(;0<f-p;)c=Di(c),f--;for(;0<p-f;)d=Di(d),p--;for(;f--;){if(c===d||null!==d&&c===d.alternate)break t;c=Di(c),d=Di(d)}c=null}else c=null;null!==u&&Ni(a,s,u,c,!1),null!==l&&null!==h&&Ni(a,h,l,c,!0)}if("select"===(u=(s=i?er(i):window).nodeName&&s.nodeName.toLowerCase())||"input"===u&&"file"===s.type)var g=Kn;else if(Wn(s))if(Qn)g=ai;else{g=ri;var _=ii}else(u=s.nodeName)&&"input"===u.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=oi);switch(g&&(g=g(t,i))?qn(a,g,n,r):(_&&_(t,s,i),"focusout"===t&&(_=s._wrapperState)&&_.controlled&&"number"===s.type&&rt(s,"number",s.value)),_=i?er(i):window,t){case"focusin":(Wn(_)||"true"===_.contentEditable)&&(gi=_,_i=i,vi=null);break;case"focusout":vi=_i=gi=null;break;case"mousedown":yi=!0;break;case"contextmenu":case"mouseup":case"dragend":yi=!1,bi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(a,n,r)}var v;if(Rn)t:{switch(t){case"compositionstart":var y="onCompositionStart";break t;case"compositionend":y="onCompositionEnd";break t;case"compositionupdate":y="onCompositionUpdate";break t}y=void 0}else Hn?Fn(t,n)&&(y="onCompositionEnd"):"keydown"===t&&229===n.keyCode&&(y="onCompositionStart");y&&(Bn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Hn&&(v=rn()):(en="value"in(tn=r)?tn.value:tn.textContent,Hn=!0)),0<(_=Ri(i,y)).length&&(y=new wn(y,t,null,n,r),a.push({event:y,listeners:_}),v?y.data=v:null!==(v=jn(n))&&(y.data=v))),(v=Nn?function(t,e){switch(t){case"compositionend":return jn(e);case"keypress":return 32!==e.which?null:(zn=!0,Un);case"textInput":return(t=e.data)===Un&&zn?null:t;default:return null}}(t,n):function(t,e){if(Hn)return"compositionend"===t||!Rn&&Fn(t,e)?(t=rn(),nn=en=tn=null,Hn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Bn&&"ko"!==e.locale?null:e.data;default:return null}}(t,n))&&(0<(i=Ri(i,"onBeforeInput")).length&&(r=new wn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=v))}ki(a,e)}))}function Oi(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ri(t,e){for(var n=e+"Capture",i=[];null!==t;){var r=t,o=r.stateNode;5===r.tag&&null!==o&&(r=o,null!=(o=Ft(t,n))&&i.unshift(Oi(t,o,r)),null!=(o=Ft(t,e))&&i.push(Oi(t,o,r))),t=t.return}return i}function Di(t){if(null===t)return null;do{t=t.return}while(t&&5!==t.tag);return t||null}function Ni(t,e,n,i,r){for(var o=e._reactName,a=[];null!==n&&n!==i;){var s=n,u=s.alternate,l=s.stateNode;if(null!==u&&u===i)break;5===s.tag&&null!==l&&(s=l,r?null!=(u=Ft(n,o))&&a.unshift(Oi(n,u,s)):r||null!=(u=Ft(n,o))&&a.push(Oi(n,u,s))),n=n.return}0!==a.length&&t.push({event:e,listeners:a})}function Bi(){}var Ui=null,zi=null;function Fi(t,e){switch(t){case"button":case"input":case"select":case"textarea":return!!e.autoFocus}return!1}function ji(t,e){return"textarea"===t||"option"===t||"noscript"===t||"string"===typeof e.children||"number"===typeof e.children||"object"===typeof e.dangerouslySetInnerHTML&&null!==e.dangerouslySetInnerHTML&&null!=e.dangerouslySetInnerHTML.__html}var Hi="function"===typeof setTimeout?setTimeout:void 0,Zi="function"===typeof clearTimeout?clearTimeout:void 0;function Wi(t){1===t.nodeType?t.textContent="":9===t.nodeType&&(null!=(t=t.body)&&(t.textContent=""))}function qi(t){for(;null!=t;t=t.nextSibling){var e=t.nodeType;if(1===e||3===e)break}return t}function Vi(t){t=t.previousSibling;for(var e=0;t;){if(8===t.nodeType){var n=t.data;if("$"===n||"$!"===n||"$?"===n){if(0===e)return t;e--}else"/$"===n&&e++}t=t.previousSibling}return null}var Gi=0;var Yi=Math.random().toString(36).slice(2),Xi="__reactFiber$"+Yi,Ki="__reactProps$"+Yi,Qi="__reactContainer$"+Yi,$i="__reactEvents$"+Yi;function Ji(t){var e=t[Xi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Qi]||n[Xi]){if(n=e.alternate,null!==e.child||null!==n&&null!==n.child)for(t=Vi(t);null!==t;){if(n=t[Xi])return n;t=Vi(t)}return e}n=(t=n).parentNode}return null}function tr(t){return!(t=t[Xi]||t[Qi])||5!==t.tag&&6!==t.tag&&13!==t.tag&&3!==t.tag?null:t}function er(t){if(5===t.tag||6===t.tag)return t.stateNode;throw Error(a(33))}function nr(t){return t[Ki]||null}function ir(t){var e=t[$i];return void 0===e&&(e=t[$i]=new Set),e}var rr=[],or=-1;function ar(t){return{current:t}}function sr(t){0>or||(t.current=rr[or],rr[or]=null,or--)}function ur(t,e){or++,rr[or]=t.current,t.current=e}var lr={},cr=ar(lr),hr=ar(!1),dr=lr;function pr(t,e){var n=t.type.contextTypes;if(!n)return lr;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r,o={};for(r in n)o[r]=e[r];return i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=o),o}function fr(t){return null!==(t=t.childContextTypes)&&void 0!==t}function mr(){sr(hr),sr(cr)}function gr(t,e,n){if(cr.current!==lr)throw Error(a(168));ur(cr,e),ur(hr,n)}function _r(t,e,n){var i=t.stateNode;if(t=e.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var o in i=i.getChildContext())if(!(o in t))throw Error(a(108,G(e)||"Unknown",o));return r({},n,i)}function vr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||lr,dr=cr.current,ur(cr,t),ur(hr,hr.current),!0}function yr(t,e,n){var i=t.stateNode;if(!i)throw Error(a(169));n?(t=_r(t,e,dr),i.__reactInternalMemoizedMergedChildContext=t,sr(hr),sr(cr),ur(cr,t)):sr(hr),ur(hr,n)}var br=null,Tr=null,wr=o.unstable_runWithPriority,xr=o.unstable_scheduleCallback,Sr=o.unstable_cancelCallback,Er=o.unstable_shouldYield,kr=o.unstable_requestPaint,Cr=o.unstable_now,Pr=o.unstable_getCurrentPriorityLevel,Lr=o.unstable_ImmediatePriority,Ir=o.unstable_UserBlockingPriority,Ar=o.unstable_NormalPriority,Mr=o.unstable_LowPriority,Or=o.unstable_IdlePriority,Rr={},Dr=void 0!==kr?kr:function(){},Nr=null,Br=null,Ur=!1,zr=Cr(),Fr=1e4>zr?Cr:function(){return Cr()-zr};function jr(){switch(Pr()){case Lr:return 99;case Ir:return 98;case Ar:return 97;case Mr:return 96;case Or:return 95;default:throw Error(a(332))}}function Hr(t){switch(t){case 99:return Lr;case 98:return Ir;case 97:return Ar;case 96:return Mr;case 95:return Or;default:throw Error(a(332))}}function Zr(t,e){return t=Hr(t),wr(t,e)}function Wr(t,e,n){return t=Hr(t),xr(t,e,n)}function qr(){if(null!==Br){var t=Br;Br=null,Sr(t)}Vr()}function Vr(){if(!Ur&&null!==Nr){Ur=!0;var t=0;try{var e=Nr;Zr(99,(function(){for(;t<e.length;t++){var n=e[t];do{n=n(!0)}while(null!==n)}})),Nr=null}catch(n){throw null!==Nr&&(Nr=Nr.slice(t+1)),xr(Lr,qr),n}finally{Ur=!1}}}var Gr=T.ReactCurrentBatchConfig;function Yr(t,e){if(t&&t.defaultProps){for(var n in e=r({},e),t=t.defaultProps)void 0===e[n]&&(e[n]=t[n]);return e}return e}var Xr=ar(null),Kr=null,Qr=null,$r=null;function Jr(){$r=Qr=Kr=null}function to(t){var e=Xr.current;sr(Xr),t.type._context._currentValue=e}function eo(t,e){for(;null!==t;){var n=t.alternate;if((t.childLanes&e)===e){if(null===n||(n.childLanes&e)===e)break;n.childLanes|=e}else t.childLanes|=e,null!==n&&(n.childLanes|=e);t=t.return}}function no(t,e){Kr=t,$r=Qr=null,null!==(t=t.dependencies)&&null!==t.firstContext&&(0!==(t.lanes&e)&&(Ra=!0),t.firstContext=null)}function io(t,e){if($r!==t&&!1!==e&&0!==e)if("number"===typeof e&&1073741823!==e||($r=t,e=1073741823),e={context:t,observedBits:e,next:null},null===Qr){if(null===Kr)throw Error(a(308));Qr=e,Kr.dependencies={lanes:0,firstContext:e,responders:null}}else Qr=Qr.next=e;return t._currentValue}var ro=!1;function oo(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function ao(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function so(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function uo(t,e){if(null!==(t=t.updateQueue)){var n=(t=t.shared).pending;null===n?e.next=e:(e.next=n.next,n.next=e),t.pending=e}}function lo(t,e){var n=t.updateQueue,i=t.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?r=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?r=o=e:o=o.next=e}else r=o=e;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:o,shared:i.shared,effects:i.effects},void(t.updateQueue=n)}null===(t=n.lastBaseUpdate)?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function co(t,e,n,i){var o=t.updateQueue;ro=!1;var a=o.firstBaseUpdate,s=o.lastBaseUpdate,u=o.shared.pending;if(null!==u){o.shared.pending=null;var l=u,c=l.next;l.next=null,null===s?a=c:s.next=c,s=l;var h=t.alternate;if(null!==h){var d=(h=h.updateQueue).lastBaseUpdate;d!==s&&(null===d?h.firstBaseUpdate=c:d.next=c,h.lastBaseUpdate=l)}}if(null!==a){for(d=o.baseState,s=0,h=c=l=null;;){u=a.lane;var p=a.eventTime;if((i&u)===u){null!==h&&(h=h.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var f=t,m=a;switch(u=e,p=n,m.tag){case 1:if("function"===typeof(f=m.payload)){d=f.call(p,d,u);break t}d=f;break t;case 3:f.flags=-4097&f.flags|64;case 0:if(null===(u="function"===typeof(f=m.payload)?f.call(p,d,u):f)||void 0===u)break t;d=r({},d,u);break t;case 2:ro=!0}}null!==a.callback&&(t.flags|=32,null===(u=o.effects)?o.effects=[a]:u.push(a))}else p={eventTime:p,lane:u,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===h?(c=h=p,l=d):h=h.next=p,s|=u;if(null===(a=a.next)){if(null===(u=o.shared.pending))break;a=u.next,u.next=null,o.lastBaseUpdate=u,o.shared.pending=null}}null===h&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=h,Us|=s,t.lanes=s,t.memoizedState=d}}function ho(t,e,n){if(t=e.effects,e.effects=null,null!==t)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var po=(new i.Component).refs;function fo(t,e,n,i){n=null===(n=n(i,e=t.memoizedState))||void 0===n?e:r({},e,n),t.memoizedState=n,0===t.lanes&&(t.updateQueue.baseState=n)}var mo={isMounted:function(t){return!!(t=t._reactInternals)&&Kt(t)===t},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=lu(),r=cu(t),o=so(i,r);o.payload=e,void 0!==n&&null!==n&&(o.callback=n),uo(t,o),hu(t,r,i)},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=lu(),r=cu(t),o=so(i,r);o.tag=1,o.payload=e,void 0!==n&&null!==n&&(o.callback=n),uo(t,o),hu(t,r,i)},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=lu(),i=cu(t),r=so(n,i);r.tag=2,void 0!==e&&null!==e&&(r.callback=e),uo(t,r),hu(t,i,n)}};function go(t,e,n,i,r,o,a){return"function"===typeof(t=t.stateNode).shouldComponentUpdate?t.shouldComponentUpdate(i,o,a):!e.prototype||!e.prototype.isPureReactComponent||(!li(n,i)||!li(r,o))}function _o(t,e,n){var i=!1,r=lr,o=e.contextType;return"object"===typeof o&&null!==o?o=io(o):(r=fr(e)?dr:cr.current,o=(i=null!==(i=e.contextTypes)&&void 0!==i)?pr(t,r):lr),e=new e(n,o),t.memoizedState=null!==e.state&&void 0!==e.state?e.state:null,e.updater=mo,t.stateNode=e,e._reactInternals=t,i&&((t=t.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=o),e}function vo(t,e,n,i){t=e.state,"function"===typeof e.componentWillReceiveProps&&e.componentWillReceiveProps(n,i),"function"===typeof e.UNSAFE_componentWillReceiveProps&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&mo.enqueueReplaceState(e,e.state,null)}function yo(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=po,oo(t);var o=e.contextType;"object"===typeof o&&null!==o?r.context=io(o):(o=fr(e)?dr:cr.current,r.context=pr(t,o)),co(t,n,r,i),r.state=t.memoizedState,"function"===typeof(o=e.getDerivedStateFromProps)&&(fo(t,e,o,n),r.state=t.memoizedState),"function"===typeof e.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(e=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),e!==r.state&&mo.enqueueReplaceState(r,r.state,null),co(t,n,r,i),r.state=t.memoizedState),"function"===typeof r.componentDidMount&&(t.flags|=4)}var bo=Array.isArray;function To(t,e,n){if(null!==(t=n.ref)&&"function"!==typeof t&&"object"!==typeof t){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,t));var r=""+t;return null!==e&&null!==e.ref&&"function"===typeof e.ref&&e.ref._stringRef===r?e.ref:((e=function(t){var e=i.refs;e===po&&(e=i.refs={}),null===t?delete e[r]:e[r]=t})._stringRef=r,e)}if("string"!==typeof t)throw Error(a(284));if(!n._owner)throw Error(a(290,t))}return t}function wo(t,e){if("textarea"!==t.type)throw Error(a(31,"[object Object]"===Object.prototype.toString.call(e)?"object with keys {"+Object.keys(e).join(", ")+"}":e))}function xo(t){function e(e,n){if(t){var i=e.lastEffect;null!==i?(i.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n,n.nextEffect=null,n.flags=8}}function n(n,i){if(!t)return null;for(;null!==i;)e(n,i),i=i.sibling;return null}function i(t,e){for(t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function r(t,e){return(t=Zu(t,e)).index=0,t.sibling=null,t}function o(e,n,i){return e.index=i,t?null!==(i=e.alternate)?(i=i.index)<n?(e.flags=2,n):i:(e.flags=2,n):n}function s(e){return t&&null===e.alternate&&(e.flags=2),e}function u(t,e,n,i){return null===e||6!==e.tag?((e=Gu(n,t.mode,i)).return=t,e):((e=r(e,n)).return=t,e)}function l(t,e,n,i){return null!==e&&e.elementType===n.type?((i=r(e,n.props)).ref=To(t,e,n),i.return=t,i):((i=Wu(n.type,n.key,n.props,null,t.mode,i)).ref=To(t,e,n),i.return=t,i)}function c(t,e,n,i){return null===e||4!==e.tag||e.stateNode.containerInfo!==n.containerInfo||e.stateNode.implementation!==n.implementation?((e=Yu(n,t.mode,i)).return=t,e):((e=r(e,n.children||[])).return=t,e)}function h(t,e,n,i,o){return null===e||7!==e.tag?((e=qu(n,t.mode,i,o)).return=t,e):((e=r(e,n)).return=t,e)}function d(t,e,n){if("string"===typeof e||"number"===typeof e)return(e=Gu(""+e,t.mode,n)).return=t,e;if("object"===typeof e&&null!==e){switch(e.$$typeof){case w:return(n=Wu(e.type,e.key,e.props,null,t.mode,n)).ref=To(t,null,e),n.return=t,n;case x:return(e=Yu(e,t.mode,n)).return=t,e}if(bo(e)||H(e))return(e=qu(e,t.mode,n,null)).return=t,e;wo(t,e)}return null}function p(t,e,n,i){var r=null!==e?e.key:null;if("string"===typeof n||"number"===typeof n)return null!==r?null:u(t,e,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?n.type===S?h(t,e,n.props.children,i,r):l(t,e,n,i):null;case x:return n.key===r?c(t,e,n,i):null}if(bo(n)||H(n))return null!==r?null:h(t,e,n,i,null);wo(t,n)}return null}function f(t,e,n,i,r){if("string"===typeof i||"number"===typeof i)return u(e,t=t.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case w:return t=t.get(null===i.key?n:i.key)||null,i.type===S?h(e,t,i.props.children,r,i.key):l(e,t,i,r);case x:return c(e,t=t.get(null===i.key?n:i.key)||null,i,r)}if(bo(i)||H(i))return h(e,t=t.get(n)||null,i,r,null);wo(e,i)}return null}function m(r,a,s,u){for(var l=null,c=null,h=a,m=a=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var _=p(r,h,s[m],u);if(null===_){null===h&&(h=g);break}t&&h&&null===_.alternate&&e(r,h),a=o(_,a,m),null===c?l=_:c.sibling=_,c=_,h=g}if(m===s.length)return n(r,h),l;if(null===h){for(;m<s.length;m++)null!==(h=d(r,s[m],u))&&(a=o(h,a,m),null===c?l=h:c.sibling=h,c=h);return l}for(h=i(r,h);m<s.length;m++)null!==(g=f(h,r,m,s[m],u))&&(t&&null!==g.alternate&&h.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?l=g:c.sibling=g,c=g);return t&&h.forEach((function(t){return e(r,t)})),l}function g(r,s,u,l){var c=H(u);if("function"!==typeof c)throw Error(a(150));if(null==(u=c.call(u)))throw Error(a(151));for(var h=c=null,m=s,g=s=0,_=null,v=u.next();null!==m&&!v.done;g++,v=u.next()){m.index>g?(_=m,m=null):_=m.sibling;var y=p(r,m,v.value,l);if(null===y){null===m&&(m=_);break}t&&m&&null===y.alternate&&e(r,m),s=o(y,s,g),null===h?c=y:h.sibling=y,h=y,m=_}if(v.done)return n(r,m),c;if(null===m){for(;!v.done;g++,v=u.next())null!==(v=d(r,v.value,l))&&(s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return c}for(m=i(r,m);!v.done;g++,v=u.next())null!==(v=f(m,r,g,v.value,l))&&(t&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===h?c=v:h.sibling=v,h=v);return t&&m.forEach((function(t){return e(r,t)})),c}return function(t,i,o,u){var l="object"===typeof o&&null!==o&&o.type===S&&null===o.key;l&&(o=o.props.children);var c="object"===typeof o&&null!==o;if(c)switch(o.$$typeof){case w:t:{for(c=o.key,l=i;null!==l;){if(l.key===c){switch(l.tag){case 7:if(o.type===S){n(t,l.sibling),(i=r(l,o.props.children)).return=t,t=i;break t}break;default:if(l.elementType===o.type){n(t,l.sibling),(i=r(l,o.props)).ref=To(t,l,o),i.return=t,t=i;break t}}n(t,l);break}e(t,l),l=l.sibling}o.type===S?((i=qu(o.props.children,t.mode,u,o.key)).return=t,t=i):((u=Wu(o.type,o.key,o.props,null,t.mode,u)).ref=To(t,i,o),u.return=t,t=u)}return s(t);case x:t:{for(l=o.key;null!==i;){if(i.key===l){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(t,i.sibling),(i=r(i,o.children||[])).return=t,t=i;break t}n(t,i);break}e(t,i),i=i.sibling}(i=Yu(o,t.mode,u)).return=t,t=i}return s(t)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(t,i.sibling),(i=r(i,o)).return=t,t=i):(n(t,i),(i=Gu(o,t.mode,u)).return=t,t=i),s(t);if(bo(o))return m(t,i,o,u);if(H(o))return g(t,i,o,u);if(c&&wo(t,o),"undefined"===typeof o&&!l)switch(t.tag){case 1:case 22:case 0:case 11:case 15:throw Error(a(152,G(t.type)||"Component"))}return n(t,i)}}var So=xo(!0),Eo=xo(!1),ko={},Co=ar(ko),Po=ar(ko),Lo=ar(ko);function Io(t){if(t===ko)throw Error(a(174));return t}function Ao(t,e){switch(ur(Lo,e),ur(Po,t),ur(Co,ko),t=e.nodeType){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ft(null,"");break;default:e=ft(e=(t=8===t?e.parentNode:e).namespaceURI||null,t=t.tagName)}sr(Co),ur(Co,e)}function Mo(){sr(Co),sr(Po),sr(Lo)}function Oo(t){Io(Lo.current);var e=Io(Co.current),n=ft(e,t.type);e!==n&&(ur(Po,t),ur(Co,n))}function Ro(t){Po.current===t&&(sr(Co),sr(Po))}var Do=ar(0);function No(t){for(var e=t;null!==e;){if(13===e.tag){var n=e.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return e}else if(19===e.tag&&void 0!==e.memoizedProps.revealOrder){if(0!==(64&e.flags))return e}else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break;for(;null===e.sibling;){if(null===e.return||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Bo=null,Uo=null,zo=!1;function Fo(t,e){var n=ju(5,null,null,0);n.elementType="DELETED",n.type="DELETED",n.stateNode=e,n.return=t,n.flags=8,null!==t.lastEffect?(t.lastEffect.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n}function jo(t,e){switch(t.tag){case 5:var n=t.type;return null!==(e=1!==e.nodeType||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e)&&(t.stateNode=e,!0);case 6:return null!==(e=""===t.pendingProps||3!==e.nodeType?null:e)&&(t.stateNode=e,!0);case 13:default:return!1}}function Ho(t){if(zo){var e=Uo;if(e){var n=e;if(!jo(t,e)){if(!(e=qi(n.nextSibling))||!jo(t,e))return t.flags=-1025&t.flags|2,zo=!1,void(Bo=t);Fo(Bo,n)}Bo=t,Uo=qi(e.firstChild)}else t.flags=-1025&t.flags|2,zo=!1,Bo=t}}function Zo(t){for(t=t.return;null!==t&&5!==t.tag&&3!==t.tag&&13!==t.tag;)t=t.return;Bo=t}function Wo(t){if(t!==Bo)return!1;if(!zo)return Zo(t),zo=!0,!1;var e=t.type;if(5!==t.tag||"head"!==e&&"body"!==e&&!ji(e,t.memoizedProps))for(e=Uo;e;)Fo(t,e),e=qi(e.nextSibling);if(Zo(t),13===t.tag){if(!(t=null!==(t=t.memoizedState)?t.dehydrated:null))throw Error(a(317));t:{for(t=t.nextSibling,e=0;t;){if(8===t.nodeType){var n=t.data;if("/$"===n){if(0===e){Uo=qi(t.nextSibling);break t}e--}else"$"!==n&&"$!"!==n&&"$?"!==n||e++}t=t.nextSibling}Uo=null}}else Uo=Bo?qi(t.stateNode.nextSibling):null;return!0}function qo(){Uo=Bo=null,zo=!1}var Vo=[];function Go(){for(var t=0;t<Vo.length;t++)Vo[t]._workInProgressVersionPrimary=null;Vo.length=0}var Yo=T.ReactCurrentDispatcher,Xo=T.ReactCurrentBatchConfig,Ko=0,Qo=null,$o=null,Jo=null,ta=!1,ea=!1;function na(){throw Error(a(321))}function ia(t,e){if(null===e)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!si(t[n],e[n]))return!1;return!0}function ra(t,e,n,i,r,o){if(Ko=o,Qo=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yo.current=null===t||null===t.memoizedState?Ia:Aa,t=n(i,r),ea){o=0;do{if(ea=!1,!(25>o))throw Error(a(301));o+=1,Jo=$o=null,e.updateQueue=null,Yo.current=Ma,t=n(i,r)}while(ea)}if(Yo.current=La,e=null!==$o&&null!==$o.next,Ko=0,Jo=$o=Qo=null,ta=!1,e)throw Error(a(300));return t}function oa(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Jo?Qo.memoizedState=Jo=t:Jo=Jo.next=t,Jo}function aa(){if(null===$o){var t=Qo.alternate;t=null!==t?t.memoizedState:null}else t=$o.next;var e=null===Jo?Qo.memoizedState:Jo.next;if(null!==e)Jo=e,$o=t;else{if(null===t)throw Error(a(310));t={memoizedState:($o=t).memoizedState,baseState:$o.baseState,baseQueue:$o.baseQueue,queue:$o.queue,next:null},null===Jo?Qo.memoizedState=Jo=t:Jo=Jo.next=t}return Jo}function sa(t,e){return"function"===typeof e?e(t):e}function ua(t){var e=aa(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=$o,r=i.baseQueue,o=n.pending;if(null!==o){if(null!==r){var s=r.next;r.next=o.next,o.next=s}i.baseQueue=r=o,n.pending=null}if(null!==r){r=r.next,i=i.baseState;var u=s=o=null,l=r;do{var c=l.lane;if((Ko&c)===c)null!==u&&(u=u.next={lane:0,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null}),i=l.eagerReducer===t?l.eagerState:t(i,l.action);else{var h={lane:c,action:l.action,eagerReducer:l.eagerReducer,eagerState:l.eagerState,next:null};null===u?(s=u=h,o=i):u=u.next=h,Qo.lanes|=c,Us|=c}l=l.next}while(null!==l&&l!==r);null===u?o=i:u.next=s,si(i,e.memoizedState)||(Ra=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=u,n.lastRenderedState=i}return[e.memoizedState,n.dispatch]}function la(t){var e=aa(),n=e.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,o=e.memoizedState;if(null!==r){n.pending=null;var s=r=r.next;do{o=t(o,s.action),s=s.next}while(s!==r);si(o,e.memoizedState)||(Ra=!0),e.memoizedState=o,null===e.baseQueue&&(e.baseState=o),n.lastRenderedState=o}return[o,i]}function ca(t,e,n){var i=e._getVersion;i=i(e._source);var r=e._workInProgressVersionPrimary;if(null!==r?t=r===i:(t=t.mutableReadLanes,(t=(Ko&t)===t)&&(e._workInProgressVersionPrimary=i,Vo.push(e))),t)return n(e._source);throw Vo.push(e),Error(a(350))}function ha(t,e,n,i){var r=Is;if(null===r)throw Error(a(349));var o=e._getVersion,s=o(e._source),u=Yo.current,l=u.useState((function(){return ca(r,e,n)})),c=l[1],h=l[0];l=Jo;var d=t.memoizedState,p=d.refs,f=p.getSnapshot,m=d.source;d=d.subscribe;var g=Qo;return t.memoizedState={refs:p,source:e,subscribe:i},u.useEffect((function(){p.getSnapshot=n,p.setSnapshot=c;var t=o(e._source);if(!si(s,t)){t=n(e._source),si(h,t)||(c(t),t=cu(g),r.mutableReadLanes|=t&r.pendingLanes),t=r.mutableReadLanes,r.entangledLanes|=t;for(var i=r.entanglements,a=t;0<a;){var u=31-We(a),l=1<<u;i[u]|=t,a&=~l}}}),[n,e,i]),u.useEffect((function(){return i(e._source,(function(){var t=p.getSnapshot,n=p.setSnapshot;try{n(t(e._source));var i=cu(g);r.mutableReadLanes|=i&r.pendingLanes}catch(o){n((function(){throw o}))}}))}),[e,i]),si(f,n)&&si(m,e)&&si(d,i)||((t={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:h}).dispatch=c=Pa.bind(null,Qo,t),l.queue=t,l.baseQueue=null,h=ca(r,e,n),l.memoizedState=l.baseState=h),h}function da(t,e,n){return ha(aa(),t,e,n)}function pa(t){var e=oa();return"function"===typeof t&&(t=t()),e.memoizedState=e.baseState=t,t=(t=e.queue={pending:null,dispatch:null,lastRenderedReducer:sa,lastRenderedState:t}).dispatch=Pa.bind(null,Qo,t),[e.memoizedState,t]}function fa(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},null===(e=Qo.updateQueue)?(e={lastEffect:null},Qo.updateQueue=e,e.lastEffect=t.next=t):null===(n=e.lastEffect)?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t),t}function ma(t){return t={current:t},oa().memoizedState=t}function ga(){return aa().memoizedState}function _a(t,e,n,i){var r=oa();Qo.flags|=t,r.memoizedState=fa(1|e,n,void 0,void 0===i?null:i)}function va(t,e,n,i){var r=aa();i=void 0===i?null:i;var o=void 0;if(null!==$o){var a=$o.memoizedState;if(o=a.destroy,null!==i&&ia(i,a.deps))return void fa(e,n,o,i)}Qo.flags|=t,r.memoizedState=fa(1|e,n,o,i)}function ya(t,e){return _a(516,4,t,e)}function ba(t,e){return va(516,4,t,e)}function Ta(t,e){return va(4,2,t,e)}function wa(t,e){return"function"===typeof e?(t=t(),e(t),function(){e(null)}):null!==e&&void 0!==e?(t=t(),e.current=t,function(){e.current=null}):void 0}function xa(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,va(4,2,wa.bind(null,e,t),n)}function Sa(){}function Ea(t,e){var n=aa();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&ia(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function ka(t,e){var n=aa();e=void 0===e?null:e;var i=n.memoizedState;return null!==i&&null!==e&&ia(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ca(t,e){var n=jr();Zr(98>n?98:n,(function(){t(!0)})),Zr(97<n?97:n,(function(){var n=Xo.transition;Xo.transition=1;try{t(!1),e()}finally{Xo.transition=n}}))}function Pa(t,e,n){var i=lu(),r=cu(t),o={lane:r,action:n,eagerReducer:null,eagerState:null,next:null},a=e.pending;if(null===a?o.next=o:(o.next=a.next,a.next=o),e.pending=o,a=t.alternate,t===Qo||null!==a&&a===Qo)ea=ta=!0;else{if(0===t.lanes&&(null===a||0===a.lanes)&&null!==(a=e.lastRenderedReducer))try{var s=e.lastRenderedState,u=a(s,n);if(o.eagerReducer=a,o.eagerState=u,si(u,s))return}catch(l){}hu(t,r,i)}}var La={readContext:io,useCallback:na,useContext:na,useEffect:na,useImperativeHandle:na,useLayoutEffect:na,useMemo:na,useReducer:na,useRef:na,useState:na,useDebugValue:na,useDeferredValue:na,useTransition:na,useMutableSource:na,useOpaqueIdentifier:na,unstable_isNewReconciler:!1},Ia={readContext:io,useCallback:function(t,e){return oa().memoizedState=[t,void 0===e?null:e],t},useContext:io,useEffect:ya,useImperativeHandle:function(t,e,n){return n=null!==n&&void 0!==n?n.concat([t]):null,_a(4,2,wa.bind(null,e,t),n)},useLayoutEffect:function(t,e){return _a(4,2,t,e)},useMemo:function(t,e){var n=oa();return e=void 0===e?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=oa();return e=void 0!==n?n(e):e,i.memoizedState=i.baseState=e,t=(t=i.queue={pending:null,dispatch:null,lastRenderedReducer:t,lastRenderedState:e}).dispatch=Pa.bind(null,Qo,t),[i.memoizedState,t]},useRef:ma,useState:pa,useDebugValue:Sa,useDeferredValue:function(t){var e=pa(t),n=e[0],i=e[1];return ya((function(){var e=Xo.transition;Xo.transition=1;try{i(t)}finally{Xo.transition=e}}),[t]),n},useTransition:function(){var t=pa(!1),e=t[0];return ma(t=Ca.bind(null,t[1])),[t,e]},useMutableSource:function(t,e,n){var i=oa();return i.memoizedState={refs:{getSnapshot:e,setSnapshot:null},source:t,subscribe:n},ha(i,t,e,n)},useOpaqueIdentifier:function(){if(zo){var t=!1,e=function(t){return{$$typeof:D,toString:t,valueOf:t}}((function(){throw t||(t=!0,n("r:"+(Gi++).toString(36))),Error(a(355))})),n=pa(e)[1];return 0===(2&Qo.mode)&&(Qo.flags|=516,fa(5,(function(){n("r:"+(Gi++).toString(36))}),void 0,null)),e}return pa(e="r:"+(Gi++).toString(36)),e},unstable_isNewReconciler:!1},Aa={readContext:io,useCallback:Ea,useContext:io,useEffect:ba,useImperativeHandle:xa,useLayoutEffect:Ta,useMemo:ka,useReducer:ua,useRef:ga,useState:function(){return ua(sa)},useDebugValue:Sa,useDeferredValue:function(t){var e=ua(sa),n=e[0],i=e[1];return ba((function(){var e=Xo.transition;Xo.transition=1;try{i(t)}finally{Xo.transition=e}}),[t]),n},useTransition:function(){var t=ua(sa)[0];return[ga().current,t]},useMutableSource:da,useOpaqueIdentifier:function(){return ua(sa)[0]},unstable_isNewReconciler:!1},Ma={readContext:io,useCallback:Ea,useContext:io,useEffect:ba,useImperativeHandle:xa,useLayoutEffect:Ta,useMemo:ka,useReducer:la,useRef:ga,useState:function(){return la(sa)},useDebugValue:Sa,useDeferredValue:function(t){var e=la(sa),n=e[0],i=e[1];return ba((function(){var e=Xo.transition;Xo.transition=1;try{i(t)}finally{Xo.transition=e}}),[t]),n},useTransition:function(){var t=la(sa)[0];return[ga().current,t]},useMutableSource:da,useOpaqueIdentifier:function(){return la(sa)[0]},unstable_isNewReconciler:!1},Oa=T.ReactCurrentOwner,Ra=!1;function Da(t,e,n,i){e.child=null===t?Eo(e,null,n,i):So(e,t.child,n,i)}function Na(t,e,n,i,r){n=n.render;var o=e.ref;return no(e,r),i=ra(t,e,n,i,o,r),null===t||Ra?(e.flags|=1,Da(t,e,i,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,ns(t,e,r))}function Ba(t,e,n,i,r,o){if(null===t){var a=n.type;return"function"!==typeof a||Hu(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((t=Wu(n.type,null,i,e,e.mode,o)).ref=e.ref,t.return=e,e.child=t):(e.tag=15,e.type=a,Ua(t,e,a,i,r,o))}return a=t.child,0===(r&o)&&(r=a.memoizedProps,(n=null!==(n=n.compare)?n:li)(r,i)&&t.ref===e.ref)?ns(t,e,o):(e.flags|=1,(t=Zu(a,i)).ref=e.ref,t.return=e,e.child=t)}function Ua(t,e,n,i,r,o){if(null!==t&&li(t.memoizedProps,i)&&t.ref===e.ref){if(Ra=!1,0===(o&r))return e.lanes=t.lanes,ns(t,e,o);0!==(16384&t.flags)&&(Ra=!0)}return ja(t,e,n,i,o)}function za(t,e,n){var i=e.pendingProps,r=i.children,o=null!==t?t.memoizedState:null;if("hidden"===i.mode||"unstable-defer-without-hiding"===i.mode)if(0===(4&e.mode))e.memoizedState={baseLanes:0},yu(e,n);else{if(0===(1073741824&n))return t=null!==o?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t},yu(e,t),null;e.memoizedState={baseLanes:0},yu(e,null!==o?o.baseLanes:n)}else null!==o?(i=o.baseLanes|n,e.memoizedState=null):i=n,yu(e,i);return Da(t,e,r,n),e.child}function Fa(t,e){var n=e.ref;(null===t&&null!==n||null!==t&&t.ref!==n)&&(e.flags|=128)}function ja(t,e,n,i,r){var o=fr(n)?dr:cr.current;return o=pr(e,o),no(e,r),n=ra(t,e,n,i,o,r),null===t||Ra?(e.flags|=1,Da(t,e,n,r),e.child):(e.updateQueue=t.updateQueue,e.flags&=-517,t.lanes&=~r,ns(t,e,r))}function Ha(t,e,n,i,r){if(fr(n)){var o=!0;vr(e)}else o=!1;if(no(e,r),null===e.stateNode)null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),_o(e,n,i),yo(e,n,i,r),i=!0;else if(null===t){var a=e.stateNode,s=e.memoizedProps;a.props=s;var u=a.context,l=n.contextType;"object"===typeof l&&null!==l?l=io(l):l=pr(e,l=fr(n)?dr:cr.current);var c=n.getDerivedStateFromProps,h="function"===typeof c||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==i||u!==l)&&vo(e,a,i,l),ro=!1;var d=e.memoizedState;a.state=d,co(e,i,a,r),u=e.memoizedState,s!==i||d!==u||hr.current||ro?("function"===typeof c&&(fo(e,n,c,i),u=e.memoizedState),(s=ro||go(e,n,s,i,d,u,l))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(e.flags|=4)):("function"===typeof a.componentDidMount&&(e.flags|=4),e.memoizedProps=i,e.memoizedState=u),a.props=i,a.state=u,a.context=l,i=s):("function"===typeof a.componentDidMount&&(e.flags|=4),i=!1)}else{a=e.stateNode,ao(t,e),s=e.memoizedProps,l=e.type===e.elementType?s:Yr(e.type,s),a.props=l,h=e.pendingProps,d=a.context,"object"===typeof(u=n.contextType)&&null!==u?u=io(u):u=pr(e,u=fr(n)?dr:cr.current);var p=n.getDerivedStateFromProps;(c="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==u)&&vo(e,a,i,u),ro=!1,d=e.memoizedState,a.state=d,co(e,i,a,r);var f=e.memoizedState;s!==h||d!==f||hr.current||ro?("function"===typeof p&&(fo(e,n,p,i),f=e.memoizedState),(l=ro||go(e,n,l,i,d,f,u))?(c||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,f,u),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,f,u)),"function"===typeof a.componentDidUpdate&&(e.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(e.flags|=256)):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),e.memoizedProps=i,e.memoizedState=f),a.props=i,a.state=f,a.context=u,i=l):("function"!==typeof a.componentDidUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===t.memoizedProps&&d===t.memoizedState||(e.flags|=256),i=!1)}return Za(t,e,n,i,o,r)}function Za(t,e,n,i,r,o){Fa(t,e);var a=0!==(64&e.flags);if(!i&&!a)return r&&yr(e,n,!1),ns(t,e,o);i=e.stateNode,Oa.current=e;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return e.flags|=1,null!==t&&a?(e.child=So(e,t.child,null,o),e.child=So(e,null,s,o)):Da(t,e,s,o),e.memoizedState=i.state,r&&yr(e,n,!0),e.child}function Wa(t){var e=t.stateNode;e.pendingContext?gr(0,e.pendingContext,e.pendingContext!==e.context):e.context&&gr(0,e.context,!1),Ao(t,e.containerInfo)}var qa,Va,Ga,Ya={dehydrated:null,retryLane:0};function Xa(t,e,n){var i,r=e.pendingProps,o=Do.current,a=!1;return(i=0!==(64&e.flags))||(i=(null===t||null!==t.memoizedState)&&0!==(2&o)),i?(a=!0,e.flags&=-65):null!==t&&null===t.memoizedState||void 0===r.fallback||!0===r.unstable_avoidThisFallback||(o|=1),ur(Do,1&o),null===t?(void 0!==r.fallback&&Ho(e),t=r.children,o=r.fallback,a?(t=Ka(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ya,t):"number"===typeof r.unstable_expectedLoadTime?(t=Ka(e,t,o,n),e.child.memoizedState={baseLanes:n},e.memoizedState=Ya,e.lanes=33554432,t):((n=Vu({mode:"visible",children:t},e.mode,n,null)).return=e,e.child=n)):(t.memoizedState,a?(r=$a(t,e,r.children,r.fallback,n),a=e.child,o=t.child.memoizedState,a.memoizedState=null===o?{baseLanes:n}:{baseLanes:o.baseLanes|n},a.childLanes=t.childLanes&~n,e.memoizedState=Ya,r):(n=Qa(t,e,r.children,n),e.memoizedState=null,n))}function Ka(t,e,n,i){var r=t.mode,o=t.child;return e={mode:"hidden",children:e},0===(2&r)&&null!==o?(o.childLanes=0,o.pendingProps=e):o=Vu(e,r,0,null),n=qu(n,r,i,null),o.return=t,n.return=t,o.sibling=n,t.child=o,n}function Qa(t,e,n,i){var r=t.child;return t=r.sibling,n=Zu(r,{mode:"visible",children:n}),0===(2&e.mode)&&(n.lanes=i),n.return=e,n.sibling=null,null!==t&&(t.nextEffect=null,t.flags=8,e.firstEffect=e.lastEffect=t),e.child=n}function $a(t,e,n,i,r){var o=e.mode,a=t.child;t=a.sibling;var s={mode:"hidden",children:n};return 0===(2&o)&&e.child!==a?((n=e.child).childLanes=0,n.pendingProps=s,null!==(a=n.lastEffect)?(e.firstEffect=n.firstEffect,e.lastEffect=a,a.nextEffect=null):e.firstEffect=e.lastEffect=null):n=Zu(a,s),null!==t?i=Zu(t,i):(i=qu(i,o,r,null)).flags|=2,i.return=e,n.return=e,n.sibling=i,e.child=n,i}function Ja(t,e){t.lanes|=e;var n=t.alternate;null!==n&&(n.lanes|=e),eo(t.return,e)}function ts(t,e,n,i,r,o){var a=t.memoizedState;null===a?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r,lastEffect:o}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r,a.lastEffect=o)}function es(t,e,n){var i=e.pendingProps,r=i.revealOrder,o=i.tail;if(Da(t,e,i.children,n),0!==(2&(i=Do.current)))i=1&i|2,e.flags|=64;else{if(null!==t&&0!==(64&t.flags))t:for(t=e.child;null!==t;){if(13===t.tag)null!==t.memoizedState&&Ja(t,n);else if(19===t.tag)Ja(t,n);else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break t;for(;null===t.sibling;){if(null===t.return||t.return===e)break t;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(ur(Do,i),0===(2&e.mode))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;null!==n;)null!==(t=n.alternate)&&null===No(t)&&(r=n),n=n.sibling;null===(n=r)?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),ts(e,!1,r,n,o,e.lastEffect);break;case"backwards":for(n=null,r=e.child,e.child=null;null!==r;){if(null!==(t=r.alternate)&&null===No(t)){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}ts(e,!0,n,null,o,e.lastEffect);break;case"together":ts(e,!1,null,null,void 0,e.lastEffect);break;default:e.memoizedState=null}return e.child}function ns(t,e,n){if(null!==t&&(e.dependencies=t.dependencies),Us|=e.lanes,0!==(n&e.childLanes)){if(null!==t&&e.child!==t.child)throw Error(a(153));if(null!==e.child){for(n=Zu(t=e.child,t.pendingProps),e.child=n,n.return=e;null!==t.sibling;)t=t.sibling,(n=n.sibling=Zu(t,t.pendingProps)).return=e;n.sibling=null}return e.child}return null}function is(t,e){if(!zo)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;null!==e;)null!==e.alternate&&(n=e),e=e.sibling;null===n?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?e||null===t.tail?t.tail=null:t.tail.sibling=null:i.sibling=null}}function rs(t,e,n){var i=e.pendingProps;switch(e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return fr(e.type)&&mr(),null;case 3:return Mo(),sr(hr),sr(cr),Go(),(i=e.stateNode).pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==t&&null!==t.child||(Wo(e)?e.flags|=4:i.hydrate||(e.flags|=256)),null;case 5:Ro(e);var o=Io(Lo.current);if(n=e.type,null!==t&&null!=e.stateNode)Va(t,e,n,i),t.ref!==e.ref&&(e.flags|=128);else{if(!i){if(null===e.stateNode)throw Error(a(166));return null}if(t=Io(Co.current),Wo(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Xi]=e,i[Ki]=s,n){case"dialog":Ci("cancel",i),Ci("close",i);break;case"iframe":case"object":case"embed":Ci("load",i);break;case"video":case"audio":for(t=0;t<xi.length;t++)Ci(xi[t],i);break;case"source":Ci("error",i);break;case"img":case"image":case"link":Ci("error",i),Ci("load",i);break;case"details":Ci("toggle",i);break;case"input":tt(i,s),Ci("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Ci("invalid",i);break;case"textarea":ut(i,s),Ci("invalid",i)}for(var l in St(n,s),t=null,s)s.hasOwnProperty(l)&&(o=s[l],"children"===l?"string"===typeof o?i.textContent!==o&&(t=["children",o]):"number"===typeof o&&i.textContent!==""+o&&(t=["children",""+o]):u.hasOwnProperty(l)&&null!=o&&"onScroll"===l&&Ci("scroll",i));switch(n){case"input":K(i),it(i,s,!0);break;case"textarea":K(i),ct(i);break;case"select":case"option":break;default:"function"===typeof s.onClick&&(i.onclick=Bi)}i=t,e.updateQueue=i,null!==i&&(e.flags|=4)}else{switch(l=9===o.nodeType?o:o.ownerDocument,t===ht&&(t=pt(n)),t===ht?"script"===n?((t=l.createElement("div")).innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):"string"===typeof i.is?t=l.createElement(n,{is:i.is}):(t=l.createElement(n),"select"===n&&(l=t,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):t=l.createElementNS(t,n),t[Xi]=e,t[Ki]=i,qa(t,e),e.stateNode=t,l=Et(n,i),n){case"dialog":Ci("cancel",t),Ci("close",t),o=i;break;case"iframe":case"object":case"embed":Ci("load",t),o=i;break;case"video":case"audio":for(o=0;o<xi.length;o++)Ci(xi[o],t);o=i;break;case"source":Ci("error",t),o=i;break;case"img":case"image":case"link":Ci("error",t),Ci("load",t),o=i;break;case"details":Ci("toggle",t),o=i;break;case"input":tt(t,i),o=J(t,i),Ci("invalid",t);break;case"option":o=ot(t,i);break;case"select":t._wrapperState={wasMultiple:!!i.multiple},o=r({},i,{value:void 0}),Ci("invalid",t);break;case"textarea":ut(t,i),o=st(t,i),Ci("invalid",t);break;default:o=i}St(n,o);var c=o;for(s in c)if(c.hasOwnProperty(s)){var h=c[s];"style"===s?wt(t,h):"dangerouslySetInnerHTML"===s?null!=(h=h?h.__html:void 0)&&_t(t,h):"children"===s?"string"===typeof h?("textarea"!==n||""!==h)&&vt(t,h):"number"===typeof h&&vt(t,""+h):"suppressContentEditableWarning"!==s&&"suppressHydrationWarning"!==s&&"autoFocus"!==s&&(u.hasOwnProperty(s)?null!=h&&"onScroll"===s&&Ci("scroll",t):null!=h&&b(t,s,h,l))}switch(n){case"input":K(t),it(t,i,!1);break;case"textarea":K(t),ct(t);break;case"option":null!=i.value&&t.setAttribute("value",""+Y(i.value));break;case"select":t.multiple=!!i.multiple,null!=(s=i.value)?at(t,!!i.multiple,s,!1):null!=i.defaultValue&&at(t,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof o.onClick&&(t.onclick=Bi)}Fi(n,i)&&(e.flags|=4)}null!==e.ref&&(e.flags|=128)}return null;case 6:if(t&&null!=e.stateNode)Ga(0,e,t.memoizedProps,i);else{if("string"!==typeof i&&null===e.stateNode)throw Error(a(166));n=Io(Lo.current),Io(Co.current),Wo(e)?(i=e.stateNode,n=e.memoizedProps,i[Xi]=e,i.nodeValue!==n&&(e.flags|=4)):((i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[Xi]=e,e.stateNode=i)}return null;case 13:return sr(Do),i=e.memoizedState,0!==(64&e.flags)?(e.lanes=n,e):(i=null!==i,n=!1,null===t?void 0!==e.memoizedProps.fallback&&Wo(e):n=null!==t.memoizedState,i&&!n&&0!==(2&e.mode)&&(null===t&&!0!==e.memoizedProps.unstable_avoidThisFallback||0!==(1&Do.current)?0===Ds&&(Ds=3):(0!==Ds&&3!==Ds||(Ds=4),null===Is||0===(134217727&Us)&&0===(134217727&zs)||mu(Is,Ms))),(i||n)&&(e.flags|=4),null);case 4:return Mo(),null===t&&Li(e.stateNode.containerInfo),null;case 10:return to(e),null;case 17:return fr(e.type)&&mr(),null;case 19:if(sr(Do),null===(i=e.memoizedState))return null;if(s=0!==(64&e.flags),null===(l=i.rendering))if(s)is(i,!1);else{if(0!==Ds||null!==t&&0!==(64&t.flags))for(t=e.child;null!==t;){if(null!==(l=No(t))){for(e.flags|=64,is(i,!1),null!==(s=l.updateQueue)&&(e.updateQueue=s,e.flags|=4),null===i.lastEffect&&(e.firstEffect=null),e.lastEffect=i.lastEffect,i=n,n=e.child;null!==n;)t=i,(s=n).flags&=2,s.nextEffect=null,s.firstEffect=null,s.lastEffect=null,null===(l=s.alternate)?(s.childLanes=0,s.lanes=t,s.child=null,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=l.childLanes,s.lanes=l.lanes,s.child=l.child,s.memoizedProps=l.memoizedProps,s.memoizedState=l.memoizedState,s.updateQueue=l.updateQueue,s.type=l.type,t=l.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ur(Do,1&Do.current|2),e.child}t=t.sibling}null!==i.tail&&Fr()>Zs&&(e.flags|=64,s=!0,is(i,!1),e.lanes=33554432)}else{if(!s)if(null!==(t=No(l))){if(e.flags|=64,s=!0,null!==(n=t.updateQueue)&&(e.updateQueue=n,e.flags|=4),is(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!zo)return null!==(e=e.lastEffect=i.lastEffect)&&(e.nextEffect=null),null}else 2*Fr()-i.renderingStartTime>Zs&&1073741824!==n&&(e.flags|=64,s=!0,is(i,!1),e.lanes=33554432);i.isBackwards?(l.sibling=e.child,e.child=l):(null!==(n=i.last)?n.sibling=l:e.child=l,i.last=l)}return null!==i.tail?(n=i.tail,i.rendering=n,i.tail=n.sibling,i.lastEffect=e.lastEffect,i.renderingStartTime=Fr(),n.sibling=null,e=Do.current,ur(Do,s?1&e|2:1&e),n):null;case 23:case 24:return bu(),null!==t&&null!==t.memoizedState!==(null!==e.memoizedState)&&"unstable-defer-without-hiding"!==i.mode&&(e.flags|=4),null}throw Error(a(156,e.tag))}function os(t){switch(t.tag){case 1:fr(t.type)&&mr();var e=t.flags;return 4096&e?(t.flags=-4097&e|64,t):null;case 3:if(Mo(),sr(hr),sr(cr),Go(),0!==(64&(e=t.flags)))throw Error(a(285));return t.flags=-4097&e|64,t;case 5:return Ro(t),null;case 13:return sr(Do),4096&(e=t.flags)?(t.flags=-4097&e|64,t):null;case 19:return sr(Do),null;case 4:return Mo(),null;case 10:return to(t),null;case 23:case 24:return bu(),null;default:return null}}function as(t,e){try{var n="",i=e;do{n+=V(i),i=i.return}while(i);var r=n}catch(o){r="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:r}}function ss(t,e){try{console.error(e.value)}catch(n){setTimeout((function(){throw n}))}}qa=function(t,e){for(var n=e.child;null!==n;){if(5===n.tag||6===n.tag)t.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===e)break;for(;null===n.sibling;){if(null===n.return||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Va=function(t,e,n,i){var o=t.memoizedProps;if(o!==i){t=e.stateNode,Io(Co.current);var a,s=null;switch(n){case"input":o=J(t,o),i=J(t,i),s=[];break;case"option":o=ot(t,o),i=ot(t,i),s=[];break;case"select":o=r({},o,{value:void 0}),i=r({},i,{value:void 0}),s=[];break;case"textarea":o=st(t,o),i=st(t,i),s=[];break;default:"function"!==typeof o.onClick&&"function"===typeof i.onClick&&(t.onclick=Bi)}for(h in St(n,i),n=null,o)if(!i.hasOwnProperty(h)&&o.hasOwnProperty(h)&&null!=o[h])if("style"===h){var l=o[h];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(u.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in i){var c=i[h];if(l=null!=o?o[h]:void 0,i.hasOwnProperty(h)&&c!==l&&(null!=c||null!=l))if("style"===h)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(s||(s=[]),s.push(h,n)),n=c;else"dangerouslySetInnerHTML"===h?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(s=s||[]).push(h,c)):"children"===h?"string"!==typeof c&&"number"!==typeof c||(s=s||[]).push(h,""+c):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(u.hasOwnProperty(h)?(null!=c&&"onScroll"===h&&Ci("scroll",t),s||l===c||(s=[])):"object"===typeof c&&null!==c&&c.$$typeof===D?c.toString():(s=s||[]).push(h,c))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}},Ga=function(t,e,n,i){n!==i&&(e.flags|=4)};var us="function"===typeof WeakMap?WeakMap:Map;function ls(t,e,n){(n=so(-1,n)).tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Gs||(Gs=!0,Ys=i),ss(0,e)},n}function cs(t,e,n){(n=so(-1,n)).tag=3;var i=t.type.getDerivedStateFromError;if("function"===typeof i){var r=e.value;n.payload=function(){return ss(0,e),i(r)}}var o=t.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){"function"!==typeof i&&(null===Xs?Xs=new Set([this]):Xs.add(this),ss(0,e));var t=e.stack;this.componentDidCatch(e.value,{componentStack:null!==t?t:""})}),n}var hs="function"===typeof WeakSet?WeakSet:Set;function ds(t){var e=t.ref;if(null!==e)if("function"===typeof e)try{e(null)}catch(n){Bu(t,n)}else e.current=null}function ps(t,e){switch(e.tag){case 0:case 11:case 15:case 22:return;case 1:if(256&e.flags&&null!==t){var n=t.memoizedProps,i=t.memoizedState;e=(t=e.stateNode).getSnapshotBeforeUpdate(e.elementType===e.type?n:Yr(e.type,n),i),t.__reactInternalSnapshotBeforeUpdate=e}return;case 3:return void(256&e.flags&&Wi(e.stateNode.containerInfo));case 5:case 6:case 4:case 17:return}throw Error(a(163))}function fs(t,e,n){switch(n.tag){case 0:case 11:case 15:case 22:if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{if(3===(3&t.tag)){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}if(null!==(e=null!==(e=n.updateQueue)?e.lastEffect:null)){t=e=e.next;do{var r=t;i=r.next,0!==(4&(r=r.tag))&&0!==(1&r)&&(Ru(n,t),Ou(n,t)),t=i}while(t!==e)}return;case 1:return t=n.stateNode,4&n.flags&&(null===e?t.componentDidMount():(i=n.elementType===n.type?e.memoizedProps:Yr(n.type,e.memoizedProps),t.componentDidUpdate(i,e.memoizedState,t.__reactInternalSnapshotBeforeUpdate))),void(null!==(e=n.updateQueue)&&ho(n,e,t));case 3:if(null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}ho(n,e,t)}return;case 5:return t=n.stateNode,void(null===e&&4&n.flags&&Fi(n.type,n.memoizedProps)&&t.focus());case 6:case 4:case 12:return;case 13:return void(null===n.memoizedState&&(n=n.alternate,null!==n&&(n=n.memoizedState,null!==n&&(n=n.dehydrated,null!==n&&we(n)))));case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(a(163))}function ms(t,e){for(var n=t;;){if(5===n.tag){var i=n.stateNode;if(e)"function"===typeof(i=i.style).setProperty?i.setProperty("display","none","important"):i.display="none";else{i=n.stateNode;var r=n.memoizedProps.style;r=void 0!==r&&null!==r&&r.hasOwnProperty("display")?r.display:null,i.style.display=Tt("display",r)}}else if(6===n.tag)n.stateNode.nodeValue=e?"":n.memoizedProps;else if((23!==n.tag&&24!==n.tag||null===n.memoizedState||n===t)&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}}function gs(t,e){if(Tr&&"function"===typeof Tr.onCommitFiberUnmount)try{Tr.onCommitFiberUnmount(br,e)}catch(o){}switch(e.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(t=e.updateQueue)&&null!==(t=t.lastEffect)){var n=t=t.next;do{var i=n,r=i.destroy;if(i=i.tag,void 0!==r)if(0!==(4&i))Ru(e,n);else{i=e;try{r()}catch(o){Bu(i,o)}}n=n.next}while(n!==t)}break;case 1:if(ds(e),"function"===typeof(t=e.stateNode).componentWillUnmount)try{t.props=e.memoizedProps,t.state=e.memoizedState,t.componentWillUnmount()}catch(o){Bu(e,o)}break;case 5:ds(e);break;case 4:ws(t,e)}}function _s(t){t.alternate=null,t.child=null,t.dependencies=null,t.firstEffect=null,t.lastEffect=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.return=null,t.updateQueue=null}function vs(t){return 5===t.tag||3===t.tag||4===t.tag}function ys(t){t:{for(var e=t.return;null!==e;){if(vs(e))break t;e=e.return}throw Error(a(160))}var n=e;switch(e=n.stateNode,n.tag){case 5:var i=!1;break;case 3:case 4:e=e.containerInfo,i=!0;break;default:throw Error(a(161))}16&n.flags&&(vt(e,""),n.flags&=-17);t:e:for(n=t;;){for(;null===n.sibling;){if(null===n.return||vs(n.return)){n=null;break t}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag&&18!==n.tag;){if(2&n.flags)continue e;if(null===n.child||4===n.tag)continue e;n.child.return=n,n=n.child}if(!(2&n.flags)){n=n.stateNode;break t}}i?bs(t,n,e):Ts(t,n,e)}function bs(t,e,n){var i=t.tag,r=5===i||6===i;if(r)t=r?t.stateNode:t.stateNode.instance,e?8===n.nodeType?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(8===n.nodeType?(e=n.parentNode).insertBefore(t,n):(e=n).appendChild(t),null!==(n=n._reactRootContainer)&&void 0!==n||null!==e.onclick||(e.onclick=Bi));else if(4!==i&&null!==(t=t.child))for(bs(t,e,n),t=t.sibling;null!==t;)bs(t,e,n),t=t.sibling}function Ts(t,e,n){var i=t.tag,r=5===i||6===i;if(r)t=r?t.stateNode:t.stateNode.instance,e?n.insertBefore(t,e):n.appendChild(t);else if(4!==i&&null!==(t=t.child))for(Ts(t,e,n),t=t.sibling;null!==t;)Ts(t,e,n),t=t.sibling}function ws(t,e){for(var n,i,r=e,o=!1;;){if(!o){o=r.return;t:for(;;){if(null===o)throw Error(a(160));switch(n=o.stateNode,o.tag){case 5:i=!1;break t;case 3:case 4:n=n.containerInfo,i=!0;break t}o=o.return}o=!0}if(5===r.tag||6===r.tag){t:for(var s=t,u=r,l=u;;)if(gs(s,l),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===u)break t;for(;null===l.sibling;){if(null===l.return||l.return===u)break t;l=l.return}l.sibling.return=l.return,l=l.sibling}i?(s=n,u=r.stateNode,8===s.nodeType?s.parentNode.removeChild(u):s.removeChild(u)):n.removeChild(r.stateNode)}else if(4===r.tag){if(null!==r.child){n=r.stateNode.containerInfo,i=!0,r.child.return=r,r=r.child;continue}}else if(gs(t,r),null!==r.child){r.child.return=r,r=r.child;continue}if(r===e)break;for(;null===r.sibling;){if(null===r.return||r.return===e)return;4===(r=r.return).tag&&(o=!1)}r.sibling.return=r.return,r=r.sibling}}function xs(t,e){switch(e.tag){case 0:case 11:case 14:case 15:case 22:var n=e.updateQueue;if(null!==(n=null!==n?n.lastEffect:null)){var i=n=n.next;do{3===(3&i.tag)&&(t=i.destroy,i.destroy=void 0,void 0!==t&&t()),i=i.next}while(i!==n)}return;case 1:return;case 5:if(null!=(n=e.stateNode)){i=e.memoizedProps;var r=null!==t?t.memoizedProps:i;t=e.type;var o=e.updateQueue;if(e.updateQueue=null,null!==o){for(n[Ki]=i,"input"===t&&"radio"===i.type&&null!=i.name&&et(n,i),Et(t,r),e=Et(t,i),r=0;r<o.length;r+=2){var s=o[r],u=o[r+1];"style"===s?wt(n,u):"dangerouslySetInnerHTML"===s?_t(n,u):"children"===s?vt(n,u):b(n,s,u,e)}switch(t){case"input":nt(n,i);break;case"textarea":lt(n,i);break;case"select":t=n._wrapperState.wasMultiple,n._wrapperState.wasMultiple=!!i.multiple,null!=(o=i.value)?at(n,!!i.multiple,o,!1):t!==!!i.multiple&&(null!=i.defaultValue?at(n,!!i.multiple,i.defaultValue,!0):at(n,!!i.multiple,i.multiple?[]:"",!1))}}}return;case 6:if(null===e.stateNode)throw Error(a(162));return void(e.stateNode.nodeValue=e.memoizedProps);case 3:return void((n=e.stateNode).hydrate&&(n.hydrate=!1,we(n.containerInfo)));case 12:return;case 13:return null!==e.memoizedState&&(Hs=Fr(),ms(e.child,!0)),void Ss(e);case 19:return void Ss(e);case 17:return;case 23:case 24:return void ms(e,null!==e.memoizedState)}throw Error(a(163))}function Ss(t){var e=t.updateQueue;if(null!==e){t.updateQueue=null;var n=t.stateNode;null===n&&(n=t.stateNode=new hs),e.forEach((function(e){var i=zu.bind(null,t,e);n.has(e)||(n.add(e),e.then(i,i))}))}}function Es(t,e){return null!==t&&(null===(t=t.memoizedState)||null!==t.dehydrated)&&(null!==(e=e.memoizedState)&&null===e.dehydrated)}var ks=Math.ceil,Cs=T.ReactCurrentDispatcher,Ps=T.ReactCurrentOwner,Ls=0,Is=null,As=null,Ms=0,Os=0,Rs=ar(0),Ds=0,Ns=null,Bs=0,Us=0,zs=0,Fs=0,js=null,Hs=0,Zs=1/0;function Ws(){Zs=Fr()+500}var qs,Vs=null,Gs=!1,Ys=null,Xs=null,Ks=!1,Qs=null,$s=90,Js=[],tu=[],eu=null,nu=0,iu=null,ru=-1,ou=0,au=0,su=null,uu=!1;function lu(){return 0!==(48&Ls)?Fr():-1!==ru?ru:ru=Fr()}function cu(t){if(0===(2&(t=t.mode)))return 1;if(0===(4&t))return 99===jr()?1:2;if(0===ou&&(ou=Bs),0!==Gr.transition){0!==au&&(au=null!==js?js.pendingLanes:0),t=ou;var e=4186112&~au;return 0===(e&=-e)&&(0===(e=(t=4186112&~t)&-t)&&(e=8192)),e}return t=jr(),0!==(4&Ls)&&98===t?t=Fe(12,ou):t=Fe(t=function(t){switch(t){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(t),ou),t}function hu(t,e,n){if(50<nu)throw nu=0,iu=null,Error(a(185));if(null===(t=du(t,e)))return null;Ze(t,e,n),t===Is&&(zs|=e,4===Ds&&mu(t,Ms));var i=jr();1===e?0!==(8&Ls)&&0===(48&Ls)?gu(t):(pu(t,n),0===Ls&&(Ws(),qr())):(0===(4&Ls)||98!==i&&99!==i||(null===eu?eu=new Set([t]):eu.add(t)),pu(t,n)),js=t}function du(t,e){t.lanes|=e;var n=t.alternate;for(null!==n&&(n.lanes|=e),n=t,t=t.return;null!==t;)t.childLanes|=e,null!==(n=t.alternate)&&(n.childLanes|=e),n=t,t=t.return;return 3===n.tag?n.stateNode:null}function pu(t,e){for(var n=t.callbackNode,i=t.suspendedLanes,r=t.pingedLanes,o=t.expirationTimes,s=t.pendingLanes;0<s;){var u=31-We(s),l=1<<u,c=o[u];if(-1===c){if(0===(l&i)||0!==(l&r)){c=e,Be(l);var h=Ne;o[u]=10<=h?c+250:6<=h?c+5e3:-1}}else c<=e&&(t.expiredLanes|=l);s&=~l}if(i=Ue(t,t===Is?Ms:0),e=Ne,0===i)null!==n&&(n!==Rr&&Sr(n),t.callbackNode=null,t.callbackPriority=0);else{if(null!==n){if(t.callbackPriority===e)return;n!==Rr&&Sr(n)}15===e?(n=gu.bind(null,t),null===Nr?(Nr=[n],Br=xr(Lr,Vr)):Nr.push(n),n=Rr):14===e?n=Wr(99,gu.bind(null,t)):n=Wr(n=function(t){switch(t){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(a(358,t))}}(e),fu.bind(null,t)),t.callbackPriority=e,t.callbackNode=n}}function fu(t){if(ru=-1,au=ou=0,0!==(48&Ls))throw Error(a(327));var e=t.callbackNode;if(Mu()&&t.callbackNode!==e)return null;var n=Ue(t,t===Is?Ms:0);if(0===n)return null;var i=n,r=Ls;Ls|=16;var o=xu();for(Is===t&&Ms===i||(Ws(),Tu(t,i));;)try{ku();break}catch(u){wu(t,u)}if(Jr(),Cs.current=o,Ls=r,null!==As?i=0:(Is=null,Ms=0,i=Ds),0!==(Bs&zs))Tu(t,0);else if(0!==i){if(2===i&&(Ls|=64,t.hydrate&&(t.hydrate=!1,Wi(t.containerInfo)),0!==(n=ze(t))&&(i=Su(t,n))),1===i)throw e=Ns,Tu(t,0),mu(t,n),pu(t,Fr()),e;switch(t.finishedWork=t.current.alternate,t.finishedLanes=n,i){case 0:case 1:throw Error(a(345));case 2:Lu(t);break;case 3:if(mu(t,n),(62914560&n)===n&&10<(i=Hs+500-Fr())){if(0!==Ue(t,0))break;if(((r=t.suspendedLanes)&n)!==n){lu(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Hi(Lu.bind(null,t),i);break}Lu(t);break;case 4:if(mu(t,n),(4186112&n)===n)break;for(i=t.eventTimes,r=-1;0<n;){var s=31-We(n);o=1<<s,(s=i[s])>r&&(r=s),n&=~o}if(n=r,10<(n=(120>(n=Fr()-n)?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*ks(n/1960))-n)){t.timeoutHandle=Hi(Lu.bind(null,t),n);break}Lu(t);break;case 5:Lu(t);break;default:throw Error(a(329))}}return pu(t,Fr()),t.callbackNode===e?fu.bind(null,t):null}function mu(t,e){for(e&=~Fs,e&=~zs,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-We(e),i=1<<n;t[n]=-1,e&=~i}}function gu(t){if(0!==(48&Ls))throw Error(a(327));if(Mu(),t===Is&&0!==(t.expiredLanes&Ms)){var e=Ms,n=Su(t,e);0!==(Bs&zs)&&(n=Su(t,e=Ue(t,e)))}else n=Su(t,e=Ue(t,0));if(0!==t.tag&&2===n&&(Ls|=64,t.hydrate&&(t.hydrate=!1,Wi(t.containerInfo)),0!==(e=ze(t))&&(n=Su(t,e))),1===n)throw n=Ns,Tu(t,0),mu(t,e),pu(t,Fr()),n;return t.finishedWork=t.current.alternate,t.finishedLanes=e,Lu(t),pu(t,Fr()),null}function _u(t,e){var n=Ls;Ls|=1;try{return t(e)}finally{0===(Ls=n)&&(Ws(),qr())}}function vu(t,e){var n=Ls;Ls&=-2,Ls|=8;try{return t(e)}finally{0===(Ls=n)&&(Ws(),qr())}}function yu(t,e){ur(Rs,Os),Os|=e,Bs|=e}function bu(){Os=Rs.current,sr(Rs)}function Tu(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(-1!==n&&(t.timeoutHandle=-1,Zi(n)),null!==As)for(n=As.return;null!==n;){var i=n;switch(i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mr();break;case 3:Mo(),sr(hr),sr(cr),Go();break;case 5:Ro(i);break;case 4:Mo();break;case 13:case 19:sr(Do);break;case 10:to(i);break;case 23:case 24:bu()}n=n.return}Is=t,As=Zu(t.current,null),Ms=Os=Bs=e,Ds=0,Ns=null,Fs=zs=Us=0}function wu(t,e){for(;;){var n=As;try{if(Jr(),Yo.current=La,ta){for(var i=Qo.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ta=!1}if(Ko=0,Jo=$o=Qo=null,ea=!1,Ps.current=null,null===n||null===n.return){Ds=1,Ns=e,As=null;break}t:{var o=t,a=n.return,s=n,u=e;if(e=Ms,s.flags|=2048,s.firstEffect=s.lastEffect=null,null!==u&&"object"===typeof u&&"function"===typeof u.then){var l=u;if(0===(2&s.mode)){var c=s.alternate;c?(s.updateQueue=c.updateQueue,s.memoizedState=c.memoizedState,s.lanes=c.lanes):(s.updateQueue=null,s.memoizedState=null)}var h=0!==(1&Do.current),d=a;do{var p;if(p=13===d.tag){var f=d.memoizedState;if(null!==f)p=null!==f.dehydrated;else{var m=d.memoizedProps;p=void 0!==m.fallback&&(!0!==m.unstable_avoidThisFallback||!h)}}if(p){var g=d.updateQueue;if(null===g){var _=new Set;_.add(l),d.updateQueue=_}else g.add(l);if(0===(2&d.mode)){if(d.flags|=64,s.flags|=16384,s.flags&=-2981,1===s.tag)if(null===s.alternate)s.tag=17;else{var v=so(-1,1);v.tag=2,uo(s,v)}s.lanes|=1;break t}u=void 0,s=e;var y=o.pingCache;if(null===y?(y=o.pingCache=new us,u=new Set,y.set(l,u)):void 0===(u=y.get(l))&&(u=new Set,y.set(l,u)),!u.has(s)){u.add(s);var b=Uu.bind(null,o,l,s);l.then(b,b)}d.flags|=4096,d.lanes=e;break t}d=d.return}while(null!==d);u=Error((G(s.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==Ds&&(Ds=2),u=as(u,s),d=a;do{switch(d.tag){case 3:o=u,d.flags|=4096,e&=-e,d.lanes|=e,lo(d,ls(0,o,e));break t;case 1:o=u;var T=d.type,w=d.stateNode;if(0===(64&d.flags)&&("function"===typeof T.getDerivedStateFromError||null!==w&&"function"===typeof w.componentDidCatch&&(null===Xs||!Xs.has(w)))){d.flags|=4096,e&=-e,d.lanes|=e,lo(d,cs(d,o,e));break t}}d=d.return}while(null!==d)}Pu(n)}catch(x){e=x,As===n&&null!==n&&(As=n=n.return);continue}break}}function xu(){var t=Cs.current;return Cs.current=La,null===t?La:t}function Su(t,e){var n=Ls;Ls|=16;var i=xu();for(Is===t&&Ms===e||Tu(t,e);;)try{Eu();break}catch(r){wu(t,r)}if(Jr(),Ls=n,Cs.current=i,null!==As)throw Error(a(261));return Is=null,Ms=0,Ds}function Eu(){for(;null!==As;)Cu(As)}function ku(){for(;null!==As&&!Er();)Cu(As)}function Cu(t){var e=qs(t.alternate,t,Os);t.memoizedProps=t.pendingProps,null===e?Pu(t):As=e,Ps.current=null}function Pu(t){var e=t;do{var n=e.alternate;if(t=e.return,0===(2048&e.flags)){if(null!==(n=rs(n,e,Os)))return void(As=n);if(24!==(n=e).tag&&23!==n.tag||null===n.memoizedState||0!==(1073741824&Os)||0===(4&n.mode)){for(var i=0,r=n.child;null!==r;)i|=r.lanes|r.childLanes,r=r.sibling;n.childLanes=i}null!==t&&0===(2048&t.flags)&&(null===t.firstEffect&&(t.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==t.lastEffect&&(t.lastEffect.nextEffect=e.firstEffect),t.lastEffect=e.lastEffect),1<e.flags&&(null!==t.lastEffect?t.lastEffect.nextEffect=e:t.firstEffect=e,t.lastEffect=e))}else{if(null!==(n=os(e)))return n.flags&=2047,void(As=n);null!==t&&(t.firstEffect=t.lastEffect=null,t.flags|=2048)}if(null!==(e=e.sibling))return void(As=e);As=e=t}while(null!==e);0===Ds&&(Ds=5)}function Lu(t){var e=jr();return Zr(99,Iu.bind(null,t,e)),null}function Iu(t,e){do{Mu()}while(null!==Qs);if(0!==(48&Ls))throw Error(a(327));var n=t.finishedWork;if(null===n)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(a(177));t.callbackNode=null;var i=n.lanes|n.childLanes,r=i,o=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;for(var s=t.eventTimes,u=t.expirationTimes;0<o;){var l=31-We(o),c=1<<l;r[l]=0,s[l]=-1,u[l]=-1,o&=~c}if(null!==eu&&0===(24&i)&&eu.has(t)&&eu.delete(t),t===Is&&(As=Is=null,Ms=0),1<n.flags?null!==n.lastEffect?(n.lastEffect.nextEffect=n,i=n.firstEffect):i=n:i=n.firstEffect,null!==i){if(r=Ls,Ls|=32,Ps.current=null,Ui=Xe,fi(s=pi())){if("selectionStart"in s)u={start:s.selectionStart,end:s.selectionEnd};else t:if(u=(u=s.ownerDocument)&&u.defaultView||window,(c=u.getSelection&&u.getSelection())&&0!==c.rangeCount){u=c.anchorNode,o=c.anchorOffset,l=c.focusNode,c=c.focusOffset;try{u.nodeType,l.nodeType}catch(k){u=null;break t}var h=0,d=-1,p=-1,f=0,m=0,g=s,_=null;e:for(;;){for(var v;g!==u||0!==o&&3!==g.nodeType||(d=h+o),g!==l||0!==c&&3!==g.nodeType||(p=h+c),3===g.nodeType&&(h+=g.nodeValue.length),null!==(v=g.firstChild);)_=g,g=v;for(;;){if(g===s)break e;if(_===u&&++f===o&&(d=h),_===l&&++m===c&&(p=h),null!==(v=g.nextSibling))break;_=(g=_).parentNode}g=v}u=-1===d||-1===p?null:{start:d,end:p}}else u=null;u=u||{start:0,end:0}}else u=null;zi={focusedElem:s,selectionRange:u},Xe=!1,su=null,uu=!1,Vs=i;do{try{Au()}catch(k){if(null===Vs)throw Error(a(330));Bu(Vs,k),Vs=Vs.nextEffect}}while(null!==Vs);su=null,Vs=i;do{try{for(s=t;null!==Vs;){var y=Vs.flags;if(16&y&&vt(Vs.stateNode,""),128&y){var b=Vs.alternate;if(null!==b){var T=b.ref;null!==T&&("function"===typeof T?T(null):T.current=null)}}switch(1038&y){case 2:ys(Vs),Vs.flags&=-3;break;case 6:ys(Vs),Vs.flags&=-3,xs(Vs.alternate,Vs);break;case 1024:Vs.flags&=-1025;break;case 1028:Vs.flags&=-1025,xs(Vs.alternate,Vs);break;case 4:xs(Vs.alternate,Vs);break;case 8:ws(s,u=Vs);var w=u.alternate;_s(u),null!==w&&_s(w)}Vs=Vs.nextEffect}}catch(k){if(null===Vs)throw Error(a(330));Bu(Vs,k),Vs=Vs.nextEffect}}while(null!==Vs);if(T=zi,b=pi(),y=T.focusedElem,s=T.selectionRange,b!==y&&y&&y.ownerDocument&&di(y.ownerDocument.documentElement,y)){null!==s&&fi(y)&&(b=s.start,void 0===(T=s.end)&&(T=b),"selectionStart"in y?(y.selectionStart=b,y.selectionEnd=Math.min(T,y.value.length)):(T=(b=y.ownerDocument||document)&&b.defaultView||window).getSelection&&(T=T.getSelection(),u=y.textContent.length,w=Math.min(s.start,u),s=void 0===s.end?w:Math.min(s.end,u),!T.extend&&w>s&&(u=s,s=w,w=u),u=hi(y,w),o=hi(y,s),u&&o&&(1!==T.rangeCount||T.anchorNode!==u.node||T.anchorOffset!==u.offset||T.focusNode!==o.node||T.focusOffset!==o.offset)&&((b=b.createRange()).setStart(u.node,u.offset),T.removeAllRanges(),w>s?(T.addRange(b),T.extend(o.node,o.offset)):(b.setEnd(o.node,o.offset),T.addRange(b))))),b=[];for(T=y;T=T.parentNode;)1===T.nodeType&&b.push({element:T,left:T.scrollLeft,top:T.scrollTop});for("function"===typeof y.focus&&y.focus(),y=0;y<b.length;y++)(T=b[y]).element.scrollLeft=T.left,T.element.scrollTop=T.top}Xe=!!Ui,zi=Ui=null,t.current=n,Vs=i;do{try{for(y=t;null!==Vs;){var x=Vs.flags;if(36&x&&fs(y,Vs.alternate,Vs),128&x){b=void 0;var S=Vs.ref;if(null!==S){var E=Vs.stateNode;switch(Vs.tag){case 5:b=E;break;default:b=E}"function"===typeof S?S(b):S.current=b}}Vs=Vs.nextEffect}}catch(k){if(null===Vs)throw Error(a(330));Bu(Vs,k),Vs=Vs.nextEffect}}while(null!==Vs);Vs=null,Dr(),Ls=r}else t.current=n;if(Ks)Ks=!1,Qs=t,$s=e;else for(Vs=i;null!==Vs;)e=Vs.nextEffect,Vs.nextEffect=null,8&Vs.flags&&((x=Vs).sibling=null,x.stateNode=null),Vs=e;if(0===(i=t.pendingLanes)&&(Xs=null),1===i?t===iu?nu++:(nu=0,iu=t):nu=0,n=n.stateNode,Tr&&"function"===typeof Tr.onCommitFiberRoot)try{Tr.onCommitFiberRoot(br,n,void 0,64===(64&n.current.flags))}catch(k){}if(pu(t,Fr()),Gs)throw Gs=!1,t=Ys,Ys=null,t;return 0!==(8&Ls)||qr(),null}function Au(){for(;null!==Vs;){var t=Vs.alternate;uu||null===su||(0!==(8&Vs.flags)?te(Vs,su)&&(uu=!0):13===Vs.tag&&Es(t,Vs)&&te(Vs,su)&&(uu=!0));var e=Vs.flags;0!==(256&e)&&ps(t,Vs),0===(512&e)||Ks||(Ks=!0,Wr(97,(function(){return Mu(),null}))),Vs=Vs.nextEffect}}function Mu(){if(90!==$s){var t=97<$s?97:$s;return $s=90,Zr(t,Du)}return!1}function Ou(t,e){Js.push(e,t),Ks||(Ks=!0,Wr(97,(function(){return Mu(),null})))}function Ru(t,e){tu.push(e,t),Ks||(Ks=!0,Wr(97,(function(){return Mu(),null})))}function Du(){if(null===Qs)return!1;var t=Qs;if(Qs=null,0!==(48&Ls))throw Error(a(331));var e=Ls;Ls|=32;var n=tu;tu=[];for(var i=0;i<n.length;i+=2){var r=n[i],o=n[i+1],s=r.destroy;if(r.destroy=void 0,"function"===typeof s)try{s()}catch(l){if(null===o)throw Error(a(330));Bu(o,l)}}for(n=Js,Js=[],i=0;i<n.length;i+=2){r=n[i],o=n[i+1];try{var u=r.create;r.destroy=u()}catch(l){if(null===o)throw Error(a(330));Bu(o,l)}}for(u=t.current.firstEffect;null!==u;)t=u.nextEffect,u.nextEffect=null,8&u.flags&&(u.sibling=null,u.stateNode=null),u=t;return Ls=e,qr(),!0}function Nu(t,e,n){uo(t,e=ls(0,e=as(n,e),1)),e=lu(),null!==(t=du(t,1))&&(Ze(t,1,e),pu(t,e))}function Bu(t,e){if(3===t.tag)Nu(t,t,e);else for(var n=t.return;null!==n;){if(3===n.tag){Nu(n,t,e);break}if(1===n.tag){var i=n.stateNode;if("function"===typeof n.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===Xs||!Xs.has(i))){var r=cs(n,t=as(e,t),1);if(uo(n,r),r=lu(),null!==(n=du(n,1)))Ze(n,1,r),pu(n,r);else if("function"===typeof i.componentDidCatch&&(null===Xs||!Xs.has(i)))try{i.componentDidCatch(e,t)}catch(o){}break}}n=n.return}}function Uu(t,e,n){var i=t.pingCache;null!==i&&i.delete(e),e=lu(),t.pingedLanes|=t.suspendedLanes&n,Is===t&&(Ms&n)===n&&(4===Ds||3===Ds&&(62914560&Ms)===Ms&&500>Fr()-Hs?Tu(t,0):Fs|=n),pu(t,e)}function zu(t,e){var n=t.stateNode;null!==n&&n.delete(e),0===(e=0)&&(0===(2&(e=t.mode))?e=1:0===(4&e)?e=99===jr()?1:2:(0===ou&&(ou=Bs),0===(e=je(62914560&~ou))&&(e=4194304))),n=lu(),null!==(t=du(t,e))&&(Ze(t,e,n),pu(t,n))}function Fu(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function ju(t,e,n,i){return new Fu(t,e,n,i)}function Hu(t){return!(!(t=t.prototype)||!t.isReactComponent)}function Zu(t,e){var n=t.alternate;return null===n?((n=ju(t.tag,e,t.key,t.mode)).elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.nextEffect=null,n.firstEffect=null,n.lastEffect=null),n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Wu(t,e,n,i,r,o){var s=2;if(i=t,"function"===typeof t)Hu(t)&&(s=1);else if("string"===typeof t)s=5;else t:switch(t){case S:return qu(n.children,r,o,e);case N:s=8,r|=16;break;case E:s=8,r|=1;break;case k:return(t=ju(12,n,e,8|r)).elementType=k,t.type=k,t.lanes=o,t;case I:return(t=ju(13,n,e,r)).type=I,t.elementType=I,t.lanes=o,t;case A:return(t=ju(19,n,e,r)).elementType=A,t.lanes=o,t;case B:return Vu(n,r,o,e);case U:return(t=ju(24,n,e,r)).elementType=U,t.lanes=o,t;default:if("object"===typeof t&&null!==t)switch(t.$$typeof){case C:s=10;break t;case P:s=9;break t;case L:s=11;break t;case M:s=14;break t;case O:s=16,i=null;break t;case R:s=22;break t}throw Error(a(130,null==t?t:typeof t,""))}return(e=ju(s,n,e,r)).elementType=t,e.type=i,e.lanes=o,e}function qu(t,e,n,i){return(t=ju(7,t,i,e)).lanes=n,t}function Vu(t,e,n,i){return(t=ju(23,t,i,e)).elementType=B,t.lanes=n,t}function Gu(t,e,n){return(t=ju(6,t,null,e)).lanes=n,t}function Yu(t,e,n){return(e=ju(4,null!==t.children?t.children:[],t.key,e)).lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Xu(t,e,n){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=n,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=He(0),this.expirationTimes=He(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=He(0),this.mutableSourceEagerHydrationData=null}function Ku(t,e,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==i?null:""+i,children:t,containerInfo:e,implementation:n}}function Qu(t,e,n,i){var r=e.current,o=lu(),s=cu(r);t:if(n){e:{if(Kt(n=n._reactInternals)!==n||1!==n.tag)throw Error(a(170));var u=n;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(fr(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(null!==u);throw Error(a(171))}if(1===n.tag){var l=n.type;if(fr(l)){n=_r(n,l,u);break t}}n=u}else n=lr;return null===e.context?e.context=n:e.pendingContext=n,(e=so(o,s)).payload={element:t},null!==(i=void 0===i?null:i)&&(e.callback=i),uo(r,e),hu(r,s,o),s}function $u(t){if(!(t=t.current).child)return null;switch(t.child.tag){case 5:default:return t.child.stateNode}}function Ju(t,e){if(null!==(t=t.memoizedState)&&null!==t.dehydrated){var n=t.retryLane;t.retryLane=0!==n&&n<e?n:e}}function tl(t,e){Ju(t,e),(t=t.alternate)&&Ju(t,e)}function el(t,e,n){var i=null!=n&&null!=n.hydrationOptions&&n.hydrationOptions.mutableSources||null;if(n=new Xu(t,e,null!=n&&!0===n.hydrate),e=ju(3,null,null,2===e?7:1===e?3:0),n.current=e,e.stateNode=n,oo(e),t[Qi]=n.current,Li(8===t.nodeType?t.parentNode:t),i)for(t=0;t<i.length;t++){var r=(e=i[t])._getVersion;r=r(e._source),null==n.mutableSourceEagerHydrationData?n.mutableSourceEagerHydrationData=[e,r]:n.mutableSourceEagerHydrationData.push(e,r)}this._internalRoot=n}function nl(t){return!(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType&&(8!==t.nodeType||" react-mount-point-unstable "!==t.nodeValue))}function il(t,e,n,i,r){var o=n._reactRootContainer;if(o){var a=o._internalRoot;if("function"===typeof r){var s=r;r=function(){var t=$u(a);s.call(t)}}Qu(e,a,t,r)}else{if(o=n._reactRootContainer=function(t,e){if(e||(e=!(!(e=t?9===t.nodeType?t.documentElement:t.firstChild:null)||1!==e.nodeType||!e.hasAttribute("data-reactroot"))),!e)for(var n;n=t.lastChild;)t.removeChild(n);return new el(t,0,e?{hydrate:!0}:void 0)}(n,i),a=o._internalRoot,"function"===typeof r){var u=r;r=function(){var t=$u(a);u.call(t)}}vu((function(){Qu(e,a,t,r)}))}return $u(a)}function rl(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nl(e))throw Error(a(200));return Ku(t,e,null,n)}qs=function(t,e,n){var i=e.lanes;if(null!==t)if(t.memoizedProps!==e.pendingProps||hr.current)Ra=!0;else{if(0===(n&i)){switch(Ra=!1,e.tag){case 3:Wa(e),qo();break;case 5:Oo(e);break;case 1:fr(e.type)&&vr(e);break;case 4:Ao(e,e.stateNode.containerInfo);break;case 10:i=e.memoizedProps.value;var r=e.type._context;ur(Xr,r._currentValue),r._currentValue=i;break;case 13:if(null!==e.memoizedState)return 0!==(n&e.child.childLanes)?Xa(t,e,n):(ur(Do,1&Do.current),null!==(e=ns(t,e,n))?e.sibling:null);ur(Do,1&Do.current);break;case 19:if(i=0!==(n&e.childLanes),0!==(64&t.flags)){if(i)return es(t,e,n);e.flags|=64}if(null!==(r=e.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),ur(Do,Do.current),i)break;return null;case 23:case 24:return e.lanes=0,za(t,e,n)}return ns(t,e,n)}Ra=0!==(16384&t.flags)}else Ra=!1;switch(e.lanes=0,e.tag){case 2:if(i=e.type,null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=pr(e,cr.current),no(e,n),r=ra(null,e,i,t,r,n),e.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof){if(e.tag=1,e.memoizedState=null,e.updateQueue=null,fr(i)){var o=!0;vr(e)}else o=!1;e.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,oo(e);var s=i.getDerivedStateFromProps;"function"===typeof s&&fo(e,i,s,t),r.updater=mo,e.stateNode=r,r._reactInternals=e,yo(e,i,t,n),e=Za(null,e,i,!0,o,n)}else e.tag=0,Da(null,e,r,n),e=e.child;return e;case 16:r=e.elementType;t:{switch(null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),t=e.pendingProps,r=(o=r._init)(r._payload),e.type=r,o=e.tag=function(t){if("function"===typeof t)return Hu(t)?1:0;if(void 0!==t&&null!==t){if((t=t.$$typeof)===L)return 11;if(t===M)return 14}return 2}(r),t=Yr(r,t),o){case 0:e=ja(null,e,r,t,n);break t;case 1:e=Ha(null,e,r,t,n);break t;case 11:e=Na(null,e,r,t,n);break t;case 14:e=Ba(null,e,r,Yr(r.type,t),i,n);break t}throw Error(a(306,r,""))}return e;case 0:return i=e.type,r=e.pendingProps,ja(t,e,i,r=e.elementType===i?r:Yr(i,r),n);case 1:return i=e.type,r=e.pendingProps,Ha(t,e,i,r=e.elementType===i?r:Yr(i,r),n);case 3:if(Wa(e),i=e.updateQueue,null===t||null===i)throw Error(a(282));if(i=e.pendingProps,r=null!==(r=e.memoizedState)?r.element:null,ao(t,e),co(e,i,null,n),(i=e.memoizedState.element)===r)qo(),e=ns(t,e,n);else{if((o=(r=e.stateNode).hydrate)&&(Uo=qi(e.stateNode.containerInfo.firstChild),Bo=e,o=zo=!0),o){if(null!=(t=r.mutableSourceEagerHydrationData))for(r=0;r<t.length;r+=2)(o=t[r])._workInProgressVersionPrimary=t[r+1],Vo.push(o);for(n=Eo(e,null,i,n),e.child=n;n;)n.flags=-3&n.flags|1024,n=n.sibling}else Da(t,e,i,n),qo();e=e.child}return e;case 5:return Oo(e),null===t&&Ho(e),i=e.type,r=e.pendingProps,o=null!==t?t.memoizedProps:null,s=r.children,ji(i,r)?s=null:null!==o&&ji(i,o)&&(e.flags|=16),Fa(t,e),Da(t,e,s,n),e.child;case 6:return null===t&&Ho(e),null;case 13:return Xa(t,e,n);case 4:return Ao(e,e.stateNode.containerInfo),i=e.pendingProps,null===t?e.child=So(e,null,i,n):Da(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,Na(t,e,i,r=e.elementType===i?r:Yr(i,r),n);case 7:return Da(t,e,e.pendingProps,n),e.child;case 8:case 12:return Da(t,e,e.pendingProps.children,n),e.child;case 10:t:{i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value;var u=e.type._context;if(ur(Xr,u._currentValue),u._currentValue=o,null!==s)if(u=s.value,0===(o=si(u,o)?0:0|("function"===typeof i._calculateChangedBits?i._calculateChangedBits(u,o):1073741823))){if(s.children===r.children&&!hr.current){e=ns(t,e,n);break t}}else for(null!==(u=e.child)&&(u.return=e);null!==u;){var l=u.dependencies;if(null!==l){s=u.child;for(var c=l.firstContext;null!==c;){if(c.context===i&&0!==(c.observedBits&o)){1===u.tag&&((c=so(-1,n&-n)).tag=2,uo(u,c)),u.lanes|=n,null!==(c=u.alternate)&&(c.lanes|=n),eo(u.return,n),l.lanes|=n;break}c=c.next}}else s=10===u.tag&&u.type===e.type?null:u.child;if(null!==s)s.return=u;else for(s=u;null!==s;){if(s===e){s=null;break}if(null!==(u=s.sibling)){u.return=s.return,s=u;break}s=s.return}u=s}Da(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=(o=e.pendingProps).children,no(e,n),i=i(r=io(r,o.unstable_observedBits)),e.flags|=1,Da(t,e,i,n),e.child;case 14:return o=Yr(r=e.type,e.pendingProps),Ba(t,e,r,o=Yr(r.type,o),i,n);case 15:return Ua(t,e,e.type,e.pendingProps,i,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:Yr(i,r),null!==t&&(t.alternate=null,e.alternate=null,e.flags|=2),e.tag=1,fr(i)?(t=!0,vr(e)):t=!1,no(e,n),_o(e,i,r),yo(e,i,r,n),Za(null,e,i,!0,t,n);case 19:return es(t,e,n);case 23:case 24:return za(t,e,n)}throw Error(a(156,e.tag))},el.prototype.render=function(t){Qu(t,this._internalRoot,null,null)},el.prototype.unmount=function(){var t=this._internalRoot,e=t.containerInfo;Qu(null,t,null,(function(){e[Qi]=null}))},ee=function(t){13===t.tag&&(hu(t,4,lu()),tl(t,4))},ne=function(t){13===t.tag&&(hu(t,67108864,lu()),tl(t,67108864))},ie=function(t){if(13===t.tag){var e=lu(),n=cu(t);hu(t,n,e),tl(t,n)}},re=function(t,e){return e()},Ct=function(t,e,n){switch(e){case"input":if(nt(t,n),e=n.name,"radio"===n.type&&null!=e){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=nr(i);if(!r)throw Error(a(90));Q(i),nt(i,r)}}}break;case"textarea":lt(t,n);break;case"select":null!=(e=n.value)&&at(t,!!n.multiple,e,!1)}},Ot=_u,Rt=function(t,e,n,i,r){var o=Ls;Ls|=4;try{return Zr(98,t.bind(null,e,n,i,r))}finally{0===(Ls=o)&&(Ws(),qr())}},Dt=function(){0===(49&Ls)&&(function(){if(null!==eu){var t=eu;eu=null,t.forEach((function(t){t.expiredLanes|=24&t.pendingLanes,pu(t,Fr())}))}qr()}(),Mu())},Nt=function(t,e){var n=Ls;Ls|=2;try{return t(e)}finally{0===(Ls=n)&&(Ws(),qr())}};var ol={Events:[tr,er,nr,At,Mt,Mu,{current:!1}]},al={findFiberByHostInstance:Ji,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},sl={bundleType:al.bundleType,version:al.version,rendererPackageName:al.rendererPackageName,rendererConfig:al.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return null===(t=Jt(t))?null:t.stateNode},findFiberByHostInstance:al.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ul=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ul.isDisabled&&ul.supportsFiber)try{br=ul.inject(sl),Tr=ul}catch(gt){}}e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ol,e.createPortal=rl,e.findDOMNode=function(t){if(null==t)return null;if(1===t.nodeType)return t;var e=t._reactInternals;if(void 0===e){if("function"===typeof t.render)throw Error(a(188));throw Error(a(268,Object.keys(t)))}return t=null===(t=Jt(e))?null:t.stateNode},e.flushSync=function(t,e){var n=Ls;if(0!==(48&n))return t(e);Ls|=1;try{if(t)return Zr(99,t.bind(null,e))}finally{Ls=n,qr()}},e.hydrate=function(t,e,n){if(!nl(e))throw Error(a(200));return il(null,t,e,!0,n)},e.render=function(t,e,n){if(!nl(e))throw Error(a(200));return il(null,t,e,!1,n)},e.unmountComponentAtNode=function(t){if(!nl(t))throw Error(a(40));return!!t._reactRootContainer&&(vu((function(){il(null,null,t,!1,(function(){t._reactRootContainer=null,t[Qi]=null}))})),!0)},e.unstable_batchedUpdates=_u,e.unstable_createPortal=function(t,e){return rl(t,e,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},e.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!nl(n))throw Error(a(200));if(null==t||void 0===t._reactInternals)throw Error(a(38));return il(t,e,n,!1,i)},e.version="17.0.2"},function(t,e,n){"use strict";t.exports=n(48)},function(t,e,n){"use strict";var i,r,o,a;if("object"===typeof performance&&"function"===typeof performance.now){var s=performance;e.unstable_now=function(){return s.now()}}else{var u=Date,l=u.now();e.unstable_now=function(){return u.now()-l}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var c=null,h=null,d=function t(){if(null!==c)try{var n=e.unstable_now();c(!0,n),c=null}catch(i){throw setTimeout(t,0),i}};i=function(t){null!==c?setTimeout(i,0,t):(c=t,setTimeout(d,0))},r=function(t,e){h=setTimeout(t,e)},o=function(){clearTimeout(h)},e.unstable_shouldYield=function(){return!1},a=e.unstable_forceFrameRate=function(){}}else{var p=window.setTimeout,f=window.clearTimeout;if("undefined"!==typeof console){var m=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof m&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var g=!1,_=null,v=-1,y=5,b=0;e.unstable_shouldYield=function(){return e.unstable_now()>=b},a=function(){},e.unstable_forceFrameRate=function(t){0>t||125<t?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):y=0<t?Math.floor(1e3/t):5};var T=new MessageChannel,w=T.port2;T.port1.onmessage=function(){if(null!==_){var t=e.unstable_now();b=t+y;try{_(!0,t)?w.postMessage(null):(g=!1,_=null)}catch(n){throw w.postMessage(null),n}}else g=!1},i=function(t){_=t,g||(g=!0,w.postMessage(null))},r=function(t,n){v=p((function(){t(e.unstable_now())}),n)},o=function(){f(v),v=-1}}function x(t,e){var n=t.length;t.push(e);t:for(;;){var i=n-1>>>1,r=t[i];if(!(void 0!==r&&0<k(r,e)))break t;t[i]=e,t[n]=r,n=i}}function S(t){return void 0===(t=t[0])?null:t}function E(t){var e=t[0];if(void 0!==e){var n=t.pop();if(n!==e){t[0]=n;t:for(var i=0,r=t.length;i<r;){var o=2*(i+1)-1,a=t[o],s=o+1,u=t[s];if(void 0!==a&&0>k(a,n))void 0!==u&&0>k(u,a)?(t[i]=u,t[s]=n,i=s):(t[i]=a,t[o]=n,i=o);else{if(!(void 0!==u&&0>k(u,n)))break t;t[i]=u,t[s]=n,i=s}}}return e}return null}function k(t,e){var n=t.sortIndex-e.sortIndex;return 0!==n?n:t.id-e.id}var C=[],P=[],L=1,I=null,A=3,M=!1,O=!1,R=!1;function D(t){for(var e=S(P);null!==e;){if(null===e.callback)E(P);else{if(!(e.startTime<=t))break;E(P),e.sortIndex=e.expirationTime,x(C,e)}e=S(P)}}function N(t){if(R=!1,D(t),!O)if(null!==S(C))O=!0,i(B);else{var e=S(P);null!==e&&r(N,e.startTime-t)}}function B(t,n){O=!1,R&&(R=!1,o()),M=!0;var i=A;try{for(D(n),I=S(C);null!==I&&(!(I.expirationTime>n)||t&&!e.unstable_shouldYield());){var a=I.callback;if("function"===typeof a){I.callback=null,A=I.priorityLevel;var s=a(I.expirationTime<=n);n=e.unstable_now(),"function"===typeof s?I.callback=s:I===S(C)&&E(C),D(n)}else E(C);I=S(C)}if(null!==I)var u=!0;else{var l=S(P);null!==l&&r(N,l.startTime-n),u=!1}return u}finally{I=null,A=i,M=!1}}var U=a;e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(t){t.callback=null},e.unstable_continueExecution=function(){O||M||(O=!0,i(B))},e.unstable_getCurrentPriorityLevel=function(){return A},e.unstable_getFirstCallbackNode=function(){return S(C)},e.unstable_next=function(t){switch(A){case 1:case 2:case 3:var e=3;break;default:e=A}var n=A;A=e;try{return t()}finally{A=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=U,e.unstable_runWithPriority=function(t,e){switch(t){case 1:case 2:case 3:case 4:case 5:break;default:t=3}var n=A;A=t;try{return e()}finally{A=n}},e.unstable_scheduleCallback=function(t,n,a){var s=e.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?s+a:s:a=s,t){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return t={id:L++,callback:n,priorityLevel:t,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>s?(t.sortIndex=a,x(P,t),null===S(C)&&t===S(P)&&(R?o():R=!0,r(N,a-s))):(t.sortIndex=u,x(C,t),O||M||(O=!0,i(B))),t},e.unstable_wrapCallback=function(t){var e=A;return function(){var n=A;A=e;try{return t.apply(this,arguments)}finally{A=n}}}},,function(t,e,n){"use strict";var i=n(51);function r(){}function o(){}o.resetWarningCache=r,t.exports=function(){function t(t,e,n,r,o,a){if(a!==i){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function e(){return t}t.isRequired=t;var n={array:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:o,resetWarningCache:r};return n.PropTypes=n,n}},function(t,e,n){"use strict";t.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},,function(t,e){t.exports=function(t){if(!t)return!1;var e=n.call(t);return"[object Function]"===e||"function"===typeof t&&"[object RegExp]"!==e||"undefined"!==typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},function(t,e,n){"use strict";var i=n(0);t.exports=function(t,e){return void 0===e&&(e=!1),function(n,r,o){if(n)t(n);else if(r.statusCode>=400&&r.statusCode<=599){var a=o;if(e)if(i.TextDecoder){var s=function(t){void 0===t&&(t="");return t.toLowerCase().split(";").reduce((function(t,e){var n=e.split("="),i=n[0],r=n[1];return"charset"===i.trim()?r.trim():t}),"utf-8")}(r.headers&&r.headers["content-type"]);try{a=new TextDecoder(s).decode(o)}catch(u){}}else a=String.fromCharCode.apply(null,new Uint8Array(o));t({cause:a})}else t(null,o)}}},function(t,e,n){var i=n(2),r=Object.create||function(){function t(){}return function(e){if(1!==arguments.length)throw new Error("Object.create shim only accepts one parameter.");return t.prototype=e,new t}}();function o(t,e){this.name="ParsingError",this.code=t.code,this.message=e||t.message}function a(t){function e(t,e,n,i){return 3600*(0|t)+60*(0|e)+(0|n)+(0|i)/1e3}var n=t.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return n?n[3]?e(n[1],n[2],n[3].replace(":",""),n[4]):n[1]>59?e(n[1],n[2],0,n[4]):e(0,n[1],n[2],n[4]):null}function s(){this.values=r(null)}function u(t,e,n,i){var r=i?t.split(i):[t];for(var o in r)if("string"===typeof r[o]){var a=r[o].split(n);if(2===a.length)e(a[0],a[1])}}function l(t,e,n){var i=t;function r(){var e=a(t);if(null===e)throw new o(o.Errors.BadTimeStamp,"Malformed timestamp: "+i);return t=t.replace(/^[^\sa-zA-Z-]+/,""),e}function l(){t=t.replace(/^\s+/,"")}if(l(),e.startTime=r(),l(),"--\x3e"!==t.substr(0,3))throw new o(o.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+i);t=t.substr(3),l(),e.endTime=r(),l(),function(t,e){var i=new s;u(t,(function(t,e){switch(t){case"region":for(var r=n.length-1;r>=0;r--)if(n[r].id===e){i.set(t,n[r].region);break}break;case"vertical":i.alt(t,e,["rl","lr"]);break;case"line":var o=e.split(","),a=o[0];i.integer(t,a),i.percent(t,a)&&i.set("snapToLines",!1),i.alt(t,a,["auto"]),2===o.length&&i.alt("lineAlign",o[1],["start","center","end"]);break;case"position":o=e.split(","),i.percent(t,o[0]),2===o.length&&i.alt("positionAlign",o[1],["start","center","end"]);break;case"size":i.percent(t,e);break;case"align":i.alt(t,e,["start","center","end","left","right"])}}),/:/,/\s/),e.region=i.get("region",null),e.vertical=i.get("vertical","");try{e.line=i.get("line","auto")}catch(r){}e.lineAlign=i.get("lineAlign","start"),e.snapToLines=i.get("snapToLines",!0),e.size=i.get("size",100);try{e.align=i.get("align","center")}catch(r){e.align=i.get("align","middle")}try{e.position=i.get("position","auto")}catch(r){e.position=i.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},e.align)}e.positionAlign=i.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},e.align)}(t,e)}o.prototype=r(Error.prototype),o.prototype.constructor=o,o.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}},s.prototype={set:function(t,e){this.get(t)||""===e||(this.values[t]=e)},get:function(t,e,n){return n?this.has(t)?this.values[t]:e[n]:this.has(t)?this.values[t]:e},has:function(t){return t in this.values},alt:function(t,e,n){for(var i=0;i<n.length;++i)if(e===n[i]){this.set(t,e);break}},integer:function(t,e){/^-?\d+$/.test(e)&&this.set(t,parseInt(e,10))},percent:function(t,e){return!!(e.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(e=parseFloat(e))>=0&&e<=100)&&(this.set(t,e),!0)}};var c=i.createElement&&i.createElement("textarea"),h={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},d={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},p={v:"title",lang:"lang"},f={rt:"ruby"};function m(t,e){function n(){if(!e)return null;var t,n=e.match(/^([^<]*)(<[^>]*>?)?/);return t=n[1]?n[1]:n[2],e=e.substr(t.length),t}function i(t,e){return!f[e.localName]||f[e.localName]===t.localName}function r(e,n){var i=h[e];if(!i)return null;var r=t.document.createElement(i),o=p[e];return o&&n&&(r[o]=n.trim()),r}for(var o,s,u=t.document.createElement("div"),l=u,m=[];null!==(o=n());)if("<"!==o[0])l.appendChild(t.document.createTextNode((s=o,c.innerHTML=s,s=c.textContent,c.textContent="",s)));else{if("/"===o[1]){m.length&&m[m.length-1]===o.substr(2).replace(">","")&&(m.pop(),l=l.parentNode);continue}var g,_=a(o.substr(1,o.length-2));if(_){g=t.document.createProcessingInstruction("timestamp",_),l.appendChild(g);continue}var v=o.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!v)continue;if(!(g=r(v[1],v[3])))continue;if(!i(l,g))continue;if(v[2]){var y=v[2].split(".");y.forEach((function(t){var e=/^bg_/.test(t),n=e?t.slice(3):t;if(d.hasOwnProperty(n)){var i=e?"background-color":"color",r=d[n];g.style[i]=r}})),g.className=y.join(" ")}m.push(v[1]),l.appendChild(g),l=g}return u}var g=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function _(t){for(var e=0;e<g.length;e++){var n=g[e];if(t>=n[0]&&t<=n[1])return!0}return!1}function v(t){var e=[],n="";if(!t||!t.childNodes)return"ltr";function i(t,e){for(var n=e.childNodes.length-1;n>=0;n--)t.push(e.childNodes[n])}function r(t){if(!t||!t.length)return null;var e=t.pop(),n=e.textContent||e.innerText;if(n){var o=n.match(/^.*(\n|\r)/);return o?(t.length=0,o[0]):n}return"ruby"===e.tagName?r(t):e.childNodes?(i(t,e),r(t)):void 0}for(i(e,t);n=r(e);)for(var o=0;o<n.length;o++)if(_(n.charCodeAt(o)))return"rtl";return"ltr"}function y(){}function b(t,e,n){y.call(this),this.cue=e,this.cueDiv=m(t,e.text);var i={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(i,this.cueDiv),this.div=t.document.createElement("div"),i={direction:v(this.cueDiv),writingMode:""===e.vertical?"horizontal-tb":"lr"===e.vertical?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:"middle"===e.align?"center":e.align,font:n.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(i),this.div.appendChild(this.cueDiv);var r=0;switch(e.positionAlign){case"start":r=e.position;break;case"center":r=e.position-e.size/2;break;case"end":r=e.position-e.size}""===e.vertical?this.applyStyles({left:this.formatStyle(r,"%"),width:this.formatStyle(e.size,"%")}):this.applyStyles({top:this.formatStyle(r,"%"),height:this.formatStyle(e.size,"%")}),this.move=function(t){this.applyStyles({top:this.formatStyle(t.top,"px"),bottom:this.formatStyle(t.bottom,"px"),left:this.formatStyle(t.left,"px"),right:this.formatStyle(t.right,"px"),height:this.formatStyle(t.height,"px"),width:this.formatStyle(t.width,"px")})}}function T(t){var e,n,i,r;if(t.div){n=t.div.offsetHeight,i=t.div.offsetWidth,r=t.div.offsetTop;var o=(o=t.div.childNodes)&&(o=o[0])&&o.getClientRects&&o.getClientRects();t=t.div.getBoundingClientRect(),e=o?Math.max(o[0]&&o[0].height||0,t.height/o.length):0}this.left=t.left,this.right=t.right,this.top=t.top||r,this.height=t.height||n,this.bottom=t.bottom||r+(t.height||n),this.width=t.width||i,this.lineHeight=void 0!==e?e:t.lineHeight}function w(t,e,n,i){var r=new T(e),o=e.cue,a=function(t){if("number"===typeof t.line&&(t.snapToLines||t.line>=0&&t.line<=100))return t.line;if(!t.track||!t.track.textTrackList||!t.track.textTrackList.mediaElement)return-1;for(var e=t.track,n=e.textTrackList,i=0,r=0;r<n.length&&n[r]!==e;r++)"showing"===n[r].mode&&i++;return-1*++i}(o),s=[];if(o.snapToLines){var u;switch(o.vertical){case"":s=["+y","-y"],u="height";break;case"rl":s=["+x","-x"],u="width";break;case"lr":s=["-x","+x"],u="width"}var l=r.lineHeight,c=l*Math.round(a),h=n[u]+l,d=s[0];Math.abs(c)>h&&(c=c<0?-1:1,c*=Math.ceil(h/l)*l),a<0&&(c+=""===o.vertical?n.height:n.width,s=s.reverse()),r.move(d,c)}else{var p=r.lineHeight/n.height*100;switch(o.lineAlign){case"center":a-=p/2;break;case"end":a-=p}switch(o.vertical){case"":e.applyStyles({top:e.formatStyle(a,"%")});break;case"rl":e.applyStyles({left:e.formatStyle(a,"%")});break;case"lr":e.applyStyles({right:e.formatStyle(a,"%")})}s=["+y","-x","+x","-y"],r=new T(e)}var f=function(t,e){for(var r,o=new T(t),a=1,s=0;s<e.length;s++){for(;t.overlapsOppositeAxis(n,e[s])||t.within(n)&&t.overlapsAny(i);)t.move(e[s]);if(t.within(n))return t;var u=t.intersectPercentage(n);a>u&&(r=new T(t),a=u),t=new T(o)}return r||o}(r,s);e.move(f.toCSSCompatValues(n))}function x(){}y.prototype.applyStyles=function(t,e){for(var n in e=e||this.div,t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},y.prototype.formatStyle=function(t,e){return 0===t?0:t+e},b.prototype=r(y.prototype),b.prototype.constructor=b,T.prototype.move=function(t,e){switch(e=void 0!==e?e:this.lineHeight,t){case"+x":this.left+=e,this.right+=e;break;case"-x":this.left-=e,this.right-=e;break;case"+y":this.top+=e,this.bottom+=e;break;case"-y":this.top-=e,this.bottom-=e}},T.prototype.overlaps=function(t){return this.left<t.right&&this.right>t.left&&this.top<t.bottom&&this.bottom>t.top},T.prototype.overlapsAny=function(t){for(var e=0;e<t.length;e++)if(this.overlaps(t[e]))return!0;return!1},T.prototype.within=function(t){return this.top>=t.top&&this.bottom<=t.bottom&&this.left>=t.left&&this.right<=t.right},T.prototype.overlapsOppositeAxis=function(t,e){switch(e){case"+x":return this.left<t.left;case"-x":return this.right>t.right;case"+y":return this.top<t.top;case"-y":return this.bottom>t.bottom}},T.prototype.intersectPercentage=function(t){return Math.max(0,Math.min(this.right,t.right)-Math.max(this.left,t.left))*Math.max(0,Math.min(this.bottom,t.bottom)-Math.max(this.top,t.top))/(this.height*this.width)},T.prototype.toCSSCompatValues=function(t){return{top:this.top-t.top,bottom:t.bottom-this.bottom,left:this.left-t.left,right:t.right-this.right,height:this.height,width:this.width}},T.getSimpleBoxPosition=function(t){var e=t.div?t.div.offsetHeight:t.tagName?t.offsetHeight:0,n=t.div?t.div.offsetWidth:t.tagName?t.offsetWidth:0,i=t.div?t.div.offsetTop:t.tagName?t.offsetTop:0;return{left:(t=t.div?t.div.getBoundingClientRect():t.tagName?t.getBoundingClientRect():t).left,right:t.right,top:t.top||i,height:t.height||e,bottom:t.bottom||i+(t.height||e),width:t.width||n}},x.StringDecoder=function(){return{decode:function(t){if(!t)return"";if("string"!==typeof t)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(t))}}},x.convertCueToDOMTree=function(t,e){return t&&e?m(t,e):null};x.processCues=function(t,e,n){if(!t||!e||!n)return null;for(;n.firstChild;)n.removeChild(n.firstChild);var i=t.document.createElement("div");if(i.style.position="absolute",i.style.left="0",i.style.right="0",i.style.top="0",i.style.bottom="0",i.style.margin="1.5%",n.appendChild(i),function(t){for(var e=0;e<t.length;e++)if(t[e].hasBeenReset||!t[e].displayState)return!0;return!1}(e)){var r=[],o=T.getSimpleBoxPosition(i),a={font:Math.round(.05*o.height*100)/100+"px sans-serif"};!function(){for(var n,s,u=0;u<e.length;u++)s=e[u],n=new b(t,s,a),i.appendChild(n.div),w(0,n,o,r),s.displayState=n.div,r.push(T.getSimpleBoxPosition(n))}()}else for(var s=0;s<e.length;s++)i.appendChild(e[s].displayState)},x.Parser=function(t,e,n){n||(n=e,e={}),e||(e={}),this.window=t,this.vttjs=e,this.state="INITIAL",this.buffer="",this.decoder=n||new TextDecoder("utf8"),this.regionList=[]},x.Parser.prototype={reportOrThrowError:function(t){if(!(t instanceof o))throw t;this.onparsingerror&&this.onparsingerror(t)},parse:function(t){var e=this;function n(){for(var t=e.buffer,n=0;n<t.length&&"\r"!==t[n]&&"\n"!==t[n];)++n;var i=t.substr(0,n);return"\r"===t[n]&&++n,"\n"===t[n]&&++n,e.buffer=t.substr(n),i}function i(t){t.match(/X-TIMESTAMP-MAP/)?u(t,(function(t,n){switch(t){case"X-TIMESTAMP-MAP":!function(t){var n=new s;u(t,(function(t,e){switch(t){case"MPEGT":n.integer(t+"S",e);break;case"LOCA":n.set(t+"L",a(e))}}),/[^\d]:/,/,/),e.ontimestampmap&&e.ontimestampmap({MPEGTS:n.get("MPEGTS"),LOCAL:n.get("LOCAL")})}(n)}}),/=/):u(t,(function(t,n){switch(t){case"Region":!function(t){var n=new s;if(u(t,(function(t,e){switch(t){case"id":n.set(t,e);break;case"width":n.percent(t,e);break;case"lines":n.integer(t,e);break;case"regionanchor":case"viewportanchor":var i=e.split(",");if(2!==i.length)break;var r=new s;if(r.percent("x",i[0]),r.percent("y",i[1]),!r.has("x")||!r.has("y"))break;n.set(t+"X",r.get("x")),n.set(t+"Y",r.get("y"));break;case"scroll":n.alt(t,e,["up"])}}),/=/,/\s/),n.has("id")){var i=new(e.vttjs.VTTRegion||e.window.VTTRegion);i.width=n.get("width",100),i.lines=n.get("lines",3),i.regionAnchorX=n.get("regionanchorX",0),i.regionAnchorY=n.get("regionanchorY",100),i.viewportAnchorX=n.get("viewportanchorX",0),i.viewportAnchorY=n.get("viewportanchorY",100),i.scroll=n.get("scroll",""),e.onregion&&e.onregion(i),e.regionList.push({id:n.get("id"),region:i})}}(n)}}),/:/)}t&&(e.buffer+=e.decoder.decode(t,{stream:!0}));try{var r;if("INITIAL"===e.state){if(!/\r\n|\n/.test(e.buffer))return this;var c=(r=n()).match(/^WEBVTT([ \t].*)?$/);if(!c||!c[0])throw new o(o.Errors.BadSignature);e.state="HEADER"}for(var h=!1;e.buffer;){if(!/\r\n|\n/.test(e.buffer))return this;switch(h?h=!1:r=n(),e.state){case"HEADER":/:/.test(r)?i(r):r||(e.state="ID");continue;case"NOTE":r||(e.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(r)){e.state="NOTE";break}if(!r)continue;e.cue=new(e.vttjs.VTTCue||e.window.VTTCue)(0,0,"");try{e.cue.align="center"}catch(p){e.cue.align="middle"}if(e.state="CUE",-1===r.indexOf("--\x3e")){e.cue.id=r;continue}case"CUE":try{l(r,e.cue,e.regionList)}catch(p){e.reportOrThrowError(p),e.cue=null,e.state="BADCUE";continue}e.state="CUETEXT";continue;case"CUETEXT":var d=-1!==r.indexOf("--\x3e");if(!r||d&&(h=!0)){e.oncue&&e.oncue(e.cue),e.cue=null,e.state="ID";continue}e.cue.text&&(e.cue.text+="\n"),e.cue.text+=r.replace(/\u2028/g,"\n").replace(/u2029/g,"\n");continue;case"BADCUE":r||(e.state="ID");continue}}}catch(p){e.reportOrThrowError(p),"CUETEXT"===e.state&&e.cue&&e.oncue&&e.oncue(e.cue),e.cue=null,e.state="INITIAL"===e.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var t=this;try{if(t.buffer+=t.decoder.decode(),(t.cue||"HEADER"===t.state)&&(t.buffer+="\n\n",t.parse()),"INITIAL"===t.state)throw new o(o.Errors.BadSignature)}catch(e){t.reportOrThrowError(e)}return t.onflush&&t.onflush(),this}},t.exports=x},function(t,e){var n={"":1,lr:1,rl:1},i={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function r(t){return"string"===typeof t&&(!!i[t.toLowerCase()]&&t.toLowerCase())}function o(t,e,i){this.hasBeenReset=!1;var o="",a=!1,s=t,u=e,l=i,c=null,h="",d=!0,p="auto",f="start",m="auto",g="auto",_=100,v="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return o},set:function(t){o=""+t}},pauseOnExit:{enumerable:!0,get:function(){return a},set:function(t){a=!!t}},startTime:{enumerable:!0,get:function(){return s},set:function(t){if("number"!==typeof t)throw new TypeError("Start time must be set to a number.");s=t,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return u},set:function(t){if("number"!==typeof t)throw new TypeError("End time must be set to a number.");u=t,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return l},set:function(t){l=""+t,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return c},set:function(t){c=t,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return h},set:function(t){var e=function(t){return"string"===typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===e)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");h=e,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return d},set:function(t){d=!!t,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return p},set:function(t){if("number"!==typeof t&&"auto"!==t)throw new SyntaxError("Line: an invalid number or illegal string was specified.");p=t,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return f},set:function(t){var e=r(t);e?(f=e,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return m},set:function(t){if(t<0||t>100)throw new Error("Position must be between 0 and 100.");m=t,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return g},set:function(t){var e=r(t);e?(g=e,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return _},set:function(t){if(t<0||t>100)throw new Error("Size must be between 0 and 100.");_=t,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return v},set:function(t){var e=r(t);if(!e)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");v=e,this.hasBeenReset=!0}}}),this.displayState=void 0}o.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)},t.exports=o},function(t,e){var n={"":!0,up:!0};function i(t){return"number"===typeof t&&t>=0&&t<=100}t.exports=function(){var t=100,e=3,r=0,o=100,a=0,s=100,u="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return t},set:function(e){if(!i(e))throw new Error("Width must be between 0 and 100.");t=e}},lines:{enumerable:!0,get:function(){return e},set:function(t){if("number"!==typeof t)throw new TypeError("Lines must be set to a number.");e=t}},regionAnchorY:{enumerable:!0,get:function(){return o},set:function(t){if(!i(t))throw new Error("RegionAnchorX must be between 0 and 100.");o=t}},regionAnchorX:{enumerable:!0,get:function(){return r},set:function(t){if(!i(t))throw new Error("RegionAnchorY must be between 0 and 100.");r=t}},viewportAnchorY:{enumerable:!0,get:function(){return s},set:function(t){if(!i(t))throw new Error("ViewportAnchorY must be between 0 and 100.");s=t}},viewportAnchorX:{enumerable:!0,get:function(){return a},set:function(t){if(!i(t))throw new Error("ViewportAnchorX must be between 0 and 100.");a=t}},scroll:{enumerable:!0,get:function(){return u},set:function(t){var e=function(t){return"string"===typeof t&&!!n[t.toLowerCase()]&&t.toLowerCase()}(t);!1===e?console.warn("Scroll: an invalid or illegal string was specified."):u=e}}})}},function(t,e){t.exports=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}},function(t,e,n){"use strict";(function(t){var i=n(60),r=n(61),o=n(62);function a(){return u.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(t,e){if(a()<e)throw new RangeError("Invalid typed array length");return u.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=u.prototype:(null===t&&(t=new u(e)),t.length=e),t}function u(t,e,n){if(!u.TYPED_ARRAY_SUPPORT&&!(this instanceof u))return new u(t,e,n);if("number"===typeof t){if("string"===typeof e)throw new Error("If encoding is specified then the first argument must be a string");return h(this,t)}return l(this,t,e,n)}function l(t,e,n,i){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!==typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,n,i){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(i||0))throw new RangeError("'length' is out of bounds");e=void 0===n&&void 0===i?new Uint8Array(e):void 0===i?new Uint8Array(e,n):new Uint8Array(e,n,i);u.TYPED_ARRAY_SUPPORT?(t=e).__proto__=u.prototype:t=d(t,e);return t}(t,e,n,i):"string"===typeof e?function(t,e,n){"string"===typeof n&&""!==n||(n="utf8");if(!u.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var i=0|f(e,n),r=(t=s(t,i)).write(e,n);r!==i&&(t=t.slice(0,r));return t}(t,e,n):function(t,e){if(u.isBuffer(e)){var n=0|p(e.length);return 0===(t=s(t,n)).length||e.copy(t,0,0,n),t}if(e){if("undefined"!==typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!==typeof e.length||(i=e.length)!==i?s(t,0):d(t,e);if("Buffer"===e.type&&o(e.data))return d(t,e.data)}var i;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function c(t){if("number"!==typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function h(t,e){if(c(e),t=s(t,e<0?0:0|p(e)),!u.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function d(t,e){var n=e.length<0?0:0|p(e.length);t=s(t,n);for(var i=0;i<n;i+=1)t[i]=255&e[i];return t}function p(t){if(t>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|t}function f(t,e){if(u.isBuffer(t))return t.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!==typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var i=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return j(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return H(t).length;default:if(i)return j(t).length;e=(""+e).toLowerCase(),i=!0}}function m(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,n);case"utf8":case"utf-8":return k(this,e,n);case"ascii":return P(this,e,n);case"latin1":case"binary":return L(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function g(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function _(t,e,n,i,r){if(0===t.length)return-1;if("string"===typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"===typeof e&&(e=u.from(e,i)),u.isBuffer(e))return 0===e.length?-1:v(t,e,n,i,r);if("number"===typeof e)return e&=255,u.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):v(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function v(t,e,n,i,r){var o,a=1,s=t.length,u=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;a=2,s/=2,u/=2,n/=2}function l(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}if(r){var c=-1;for(o=n;o<s;o++)if(l(t,o)===l(e,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===u)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(n+u>s&&(n=s-u),o=n;o>=0;o--){for(var h=!0,d=0;d<u;d++)if(l(t,o+d)!==l(e,d)){h=!1;break}if(h)return o}return-1}function y(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");i>o/2&&(i=o/2);for(var a=0;a<i;++a){var s=parseInt(e.substr(2*a,2),16);if(isNaN(s))return a;t[n+a]=s}return a}function b(t,e,n,i){return Z(j(e,t.length-n),t,n,i)}function T(t,e,n,i){return Z(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function w(t,e,n,i){return T(t,e,n,i)}function x(t,e,n,i){return Z(H(e),t,n,i)}function S(t,e,n,i){return Z(function(t,e){for(var n,i,r,o=[],a=0;a<t.length&&!((e-=2)<0);++a)i=(n=t.charCodeAt(a))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function E(t,e,n){return 0===e&&n===t.length?i.fromByteArray(t):i.fromByteArray(t.slice(e,n))}function k(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,a,s,u,l=t[r],c=null,h=l>239?4:l>223?3:l>191?2:1;if(r+h<=n)switch(h){case 1:l<128&&(c=l);break;case 2:128===(192&(o=t[r+1]))&&(u=(31&l)<<6|63&o)>127&&(c=u);break;case 3:o=t[r+1],a=t[r+2],128===(192&o)&&128===(192&a)&&(u=(15&l)<<12|(63&o)<<6|63&a)>2047&&(u<55296||u>57343)&&(c=u);break;case 4:o=t[r+1],a=t[r+2],s=t[r+3],128===(192&o)&&128===(192&a)&&128===(192&s)&&(u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&u<1114112&&(c=u)}null===c?(c=65533,h=1):c>65535&&(c-=65536,i.push(c>>>10&1023|55296),c=56320|1023&c),i.push(c),r+=h}return function(t){var e=t.length;if(e<=C)return String.fromCharCode.apply(String,t);var n="",i=0;for(;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=C));return n}(i)}e.Buffer=u,e.SlowBuffer=function(t){+t!=t&&(t=0);return u.alloc(+t)},e.INSPECT_MAX_BYTES=50,u.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"===typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(e){return!1}}(),e.kMaxLength=a(),u.poolSize=8192,u._augment=function(t){return t.__proto__=u.prototype,t},u.from=function(t,e,n){return l(null,t,e,n)},u.TYPED_ARRAY_SUPPORT&&(u.prototype.__proto__=Uint8Array.prototype,u.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&u[Symbol.species]===u&&Object.defineProperty(u,Symbol.species,{value:null,configurable:!0})),u.alloc=function(t,e,n){return function(t,e,n,i){return c(e),e<=0?s(t,e):void 0!==n?"string"===typeof i?s(t,e).fill(n,i):s(t,e).fill(n):s(t,e)}(null,t,e,n)},u.allocUnsafe=function(t){return h(null,t)},u.allocUnsafeSlow=function(t){return h(null,t)},u.isBuffer=function(t){return!(null==t||!t._isBuffer)},u.compare=function(t,e){if(!u.isBuffer(t)||!u.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,i=e.length,r=0,o=Math.min(n,i);r<o;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return u.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=u.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var a=t[n];if(!u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(i,r),r+=a.length}return i},u.byteLength=f,u.prototype._isBuffer=!0,u.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)g(this,e,e+1);return this},u.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},u.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},u.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?k(this,0,t):m.apply(this,arguments)},u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===u.compare(this,t)},u.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},u.prototype.compare=function(t,e,n,i,r){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var o=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),s=Math.min(o,a),l=this.slice(i,r),c=t.slice(e,n),h=0;h<s;++h)if(l[h]!==c[h]){o=l[h],a=c[h];break}return o<a?-1:a<o?1:0},u.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},u.prototype.indexOf=function(t,e,n){return _(this,t,e,n,!0)},u.prototype.lastIndexOf=function(t,e,n){return _(this,t,e,n,!1)},u.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"===typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return y(this,t,e,n);case"utf8":case"utf-8":return b(this,t,e,n);case"ascii":return T(this,t,e,n);case"latin1":case"binary":return w(this,t,e,n);case"base64":return x(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return S(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var C=4096;function P(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function L(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function I(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=F(t[o]);return r}function A(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function M(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,n,i,r,o){if(!u.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<o)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function R(t,e,n,i){e<0&&(e=65535+e+1);for(var r=0,o=Math.min(t.length-n,2);r<o;++r)t[n+r]=(e&255<<8*(i?r:1-r))>>>8*(i?r:1-r)}function D(t,e,n,i){e<0&&(e=4294967295+e+1);for(var r=0,o=Math.min(t.length-n,4);r<o;++r)t[n+r]=e>>>8*(i?r:3-r)&255}function N(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function B(t,e,n,i,o){return o||N(t,0,n,4),r.write(t,e,n,i,23,4),n+4}function U(t,e,n,i,o){return o||N(t,0,n,8),r.write(t,e,n,i,52,8),n+8}u.prototype.slice=function(t,e){var n,i=this.length;if((t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t),u.TYPED_ARRAY_SUPPORT)(n=this.subarray(t,e)).__proto__=u.prototype;else{var r=e-t;n=new u(r,void 0);for(var o=0;o<r;++o)n[o]=this[o+t]}return n},u.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},u.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},u.prototype.readUInt8=function(t,e){return e||M(t,1,this.length),this[t]},u.prototype.readUInt16LE=function(t,e){return e||M(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUInt16BE=function(t,e){return e||M(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUInt32LE=function(t,e){return e||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},u.prototype.readUInt32BE=function(t,e){return e||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},u.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||M(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},u.prototype.readInt8=function(t,e){return e||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},u.prototype.readInt16LE=function(t,e){e||M(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt16BE=function(t,e){e||M(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},u.prototype.readInt32LE=function(t,e){return e||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,e){return e||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readFloatLE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,e){return e||M(t,4,this.length),r.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,e){return e||M(t,8,this.length),r.read(this,t,!1,52,8)},u.prototype.writeUIntLE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},u.prototype.writeUIntBE=function(t,e,n,i){(t=+t,e|=0,n|=0,i)||O(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},u.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,255,0),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},u.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,65535,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):D(this,t,e,!0),e+4},u.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,4294967295,0),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var o=0,a=1,s=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===s&&0!==this[e+o-1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e|=0,!i){var r=Math.pow(2,8*n-1);O(this,t,e,n,r-1,-r)}var o=n-1,a=1,s=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===s&&0!==this[e+o+1]&&(s=1),this[e+o]=(t/a>>0)-s&255;return e+n},u.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,1,127,-128),u.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},u.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):R(this,t,e,!0),e+2},u.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,2,32767,-32768),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):R(this,t,e,!1),e+2},u.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),u.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):D(this,t,e,!0),e+4},u.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),u.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):D(this,t,e,!1),e+4},u.prototype.writeFloatLE=function(t,e,n){return B(this,t,e,!0,n)},u.prototype.writeFloatBE=function(t,e,n){return B(this,t,e,!1,n)},u.prototype.writeDoubleLE=function(t,e,n){return U(this,t,e,!0,n)},u.prototype.writeDoubleBE=function(t,e,n){return U(this,t,e,!1,n)},u.prototype.copy=function(t,e,n,i){if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r,o=i-n;if(this===t&&n<e&&e<i)for(r=o-1;r>=0;--r)t[r+e]=this[r+n];else if(o<1e3||!u.TYPED_ARRAY_SUPPORT)for(r=0;r<o;++r)t[r+e]=this[r+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},u.prototype.fill=function(t,e,n,i){if("string"===typeof t){if("string"===typeof e?(i=e,e=0,n=this.length):"string"===typeof n&&(i=n,n=this.length),1===t.length){var r=t.charCodeAt(0);r<256&&(t=r)}if(void 0!==i&&"string"!==typeof i)throw new TypeError("encoding must be a string");if("string"===typeof i&&!u.isEncoding(i))throw new TypeError("Unknown encoding: "+i)}else"number"===typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var o;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"===typeof t)for(o=e;o<n;++o)this[o]=t;else{var a=u.isBuffer(t)?t:j(new u(t,i).toString()),s=a.length;for(o=0;o<n-e;++o)this[o+e]=a[o%s]}return this};var z=/[^+\/0-9A-Za-z-_]/g;function F(t){return t<16?"0"+t.toString(16):t.toString(16)}function j(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],a=0;a<i;++a){if((n=t.charCodeAt(a))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function H(t){return i.toByteArray(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(z,"")).length<2)return"";for(;t.length%4!==0;)t+="=";return t}(t))}function Z(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}}).call(this,n(24))},function(t,e,n){"use strict";e.byteLength=function(t){var e=l(t),n=e[0],i=e[1];return 3*(n+i)/4-i},e.toByteArray=function(t){var e,n,i=l(t),a=i[0],s=i[1],u=new o(function(t,e,n){return 3*(e+n)/4-n}(0,a,s)),c=0,h=s>0?a-4:a;for(n=0;n<h;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],u[c++]=e>>16&255,u[c++]=e>>8&255,u[c++]=255&e;2===s&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,u[c++]=255&e);1===s&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,u[c++]=e>>8&255,u[c++]=255&e);return u},e.fromByteArray=function(t){for(var e,n=t.length,r=n%3,o=[],a=16383,s=0,u=n-r;s<u;s+=a)o.push(c(t,s,s+a>u?u:s+a));1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"="));return o.join("")};for(var i=[],r=[],o="undefined"!==typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,u=a.length;s<u;++s)i[s]=a[s],r[a.charCodeAt(s)]=s;function l(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function c(t,e,n){for(var r,o,a=[],s=e;s<n;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),a.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return a.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,i,r){var o,a,s=8*r-i-1,u=(1<<s)-1,l=u>>1,c=-7,h=n?r-1:0,d=n?-1:1,p=t[e+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+t[e+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=i;c>0;a=256*a+t[e+h],h+=d,c-=8);if(0===o)o=1-l;else{if(o===u)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,i),o-=l}return(p?-1:1)*a*Math.pow(2,o-i)},e.write=function(t,e,n,i,r,o){var a,s,u,l=8*o-r-1,c=(1<<l)-1,h=c>>1,d=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:o-1,f=i?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-a))<1&&(a--,u*=2),(e+=a+h>=1?d/u:d*Math.pow(2,1-h))*u>=2&&(a++,u/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(e*u-1)*Math.pow(2,r),a+=h):(s=e*Math.pow(2,h-1)*Math.pow(2,r),a=0));r>=8;t[n+p]=255&s,p+=f,s/=256,r-=8);for(a=a<<r|s,l+=r;l>0;t[n+p]=255&a,p+=f,a/=256,l-=8);t[n+p-f]|=128*m}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var i=n(15),r=n(35),o=n(64),a=n(65),s=r.DOMImplementation,u=i.NAMESPACE,l=a.ParseError,c=a.XMLReader;function h(t){this.options=t||{locator:{}}}function d(){this.cdata=!1}function p(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function f(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function m(t,e,n){return"string"==typeof t?t.substr(e,n):t.length>=e+n||e?new java.lang.String(t,e,n)+"":t}function g(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}h.prototype.parseFromString=function(t,e){var n=this.options,i=new c,r=n.domBuilder||new d,a=n.errorHandler,s=n.locator,l=n.xmlns||{},h=/\/x?html?$/.test(e),p=h?o.HTML_ENTITIES:o.XML_ENTITIES;return s&&r.setDocumentLocator(s),i.errorHandler=function(t,e,n){if(!t){if(e instanceof d)return e;t=e}var i={},r=t instanceof Function;function o(e){var o=t[e];!o&&r&&(o=2==t.length?function(n){t(e,n)}:t),i[e]=o&&function(t){o("[xmldom "+e+"]\t"+t+f(n))}||function(){}}return n=n||{},o("warning"),o("error"),o("fatalError"),i}(a,r,s),i.domBuilder=n.domBuilder||r,h&&(l[""]=u.HTML),l.xml=l.xml||u.XML,t&&"string"===typeof t?i.parse(t,l,p):i.errorHandler.error("invalid doc source"),r.doc},d.prototype={startDocument:function(){this.doc=(new s).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,n,i){var r=this.doc,o=r.createElementNS(t,n||e),a=i.length;g(this,o),this.currentElement=o,this.locator&&p(this.locator,o);for(var s=0;s<a;s++){t=i.getURI(s);var u=i.getValue(s),l=(n=i.getQName(s),r.createAttributeNS(t,n));this.locator&&p(i.getLocator(s),l),l.value=l.nodeValue=u,o.setAttributeNode(l)}},endElement:function(t,e,n){var i=this.currentElement;i.tagName;this.currentElement=i.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var n=this.doc.createProcessingInstruction(t,e);this.locator&&p(this.locator,n),g(this,n)},ignorableWhitespace:function(t,e,n){},characters:function(t,e,n){if(t=m.apply(this,arguments)){if(this.cdata)var i=this.doc.createCDATASection(t);else i=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(i):/^\s*$/.test(t)&&this.doc.appendChild(i),this.locator&&p(this.locator,i)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,n){t=m.apply(this,arguments);var i=this.doc.createComment(t);this.locator&&p(this.locator,i),g(this,i)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,n){var i=this.doc.implementation;if(i&&i.createDocumentType){var r=i.createDocumentType(t,e,n);this.locator&&p(this.locator,r),g(this,r),this.doc.doctype=r}},warning:function(t){console.warn("[xmldom warning]\t"+t,f(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,f(this.locator))},fatalError:function(t){throw new l(t,this.locator)}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,(function(t){d.prototype[t]=function(){return null}})),e.__DOMHandler=d,e.DOMParser=h,e.DOMImplementation=r.DOMImplementation,e.XMLSerializer=r.XMLSerializer},function(t,e,n){var i=n(15).freeze;e.XML_ENTITIES=i({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),e.HTML_ENTITIES=i({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"\xc0",Aacute:"\xc1",Acirc:"\xc2",Atilde:"\xc3",Auml:"\xc4",Aring:"\xc5",AElig:"\xc6",Ccedil:"\xc7",Egrave:"\xc8",Eacute:"\xc9",Ecirc:"\xca",Euml:"\xcb",Igrave:"\xcc",Iacute:"\xcd",Icirc:"\xce",Iuml:"\xcf",ETH:"\xd0",Ntilde:"\xd1",Ograve:"\xd2",Oacute:"\xd3",Ocirc:"\xd4",Otilde:"\xd5",Ouml:"\xd6",Oslash:"\xd8",Ugrave:"\xd9",Uacute:"\xda",Ucirc:"\xdb",Uuml:"\xdc",Yacute:"\xdd",THORN:"\xde",szlig:"\xdf",agrave:"\xe0",aacute:"\xe1",acirc:"\xe2",atilde:"\xe3",auml:"\xe4",aring:"\xe5",aelig:"\xe6",ccedil:"\xe7",egrave:"\xe8",eacute:"\xe9",ecirc:"\xea",euml:"\xeb",igrave:"\xec",iacute:"\xed",icirc:"\xee",iuml:"\xef",eth:"\xf0",ntilde:"\xf1",ograve:"\xf2",oacute:"\xf3",ocirc:"\xf4",otilde:"\xf5",ouml:"\xf6",oslash:"\xf8",ugrave:"\xf9",uacute:"\xfa",ucirc:"\xfb",uuml:"\xfc",yacute:"\xfd",thorn:"\xfe",yuml:"\xff",nbsp:"\xa0",iexcl:"\xa1",cent:"\xa2",pound:"\xa3",curren:"\xa4",yen:"\xa5",brvbar:"\xa6",sect:"\xa7",uml:"\xa8",copy:"\xa9",ordf:"\xaa",laquo:"\xab",not:"\xac",shy:"\xad\xad",reg:"\xae",macr:"\xaf",deg:"\xb0",plusmn:"\xb1",sup2:"\xb2",sup3:"\xb3",acute:"\xb4",micro:"\xb5",para:"\xb6",middot:"\xb7",cedil:"\xb8",sup1:"\xb9",ordm:"\xba",raquo:"\xbb",frac14:"\xbc",frac12:"\xbd",frac34:"\xbe",iquest:"\xbf",times:"\xd7",divide:"\xf7",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220b",prod:"\u220f",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221a",prop:"\u221d",infin:"\u221e",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222a",int:"\u222b",there4:"\u2234",sim:"\u223c",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22a5",sdot:"\u22c5",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039a",Lambda:"\u039b",Mu:"\u039c",Nu:"\u039d",Xi:"\u039e",Omicron:"\u039f",Pi:"\u03a0",Rho:"\u03a1",Sigma:"\u03a3",Tau:"\u03a4",Upsilon:"\u03a5",Phi:"\u03a6",Chi:"\u03a7",Psi:"\u03a8",Omega:"\u03a9",alpha:"\u03b1",beta:"\u03b2",gamma:"\u03b3",delta:"\u03b4",epsilon:"\u03b5",zeta:"\u03b6",eta:"\u03b7",theta:"\u03b8",iota:"\u03b9",kappa:"\u03ba",lambda:"\u03bb",mu:"\u03bc",nu:"\u03bd",xi:"\u03be",omicron:"\u03bf",pi:"\u03c0",rho:"\u03c1",sigmaf:"\u03c2",sigma:"\u03c3",tau:"\u03c4",upsilon:"\u03c5",phi:"\u03c6",chi:"\u03c7",psi:"\u03c8",omega:"\u03c9",thetasym:"\u03d1",upsih:"\u03d2",piv:"\u03d6",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02c6",tilde:"\u02dc",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200c",zwj:"\u200d",lrm:"\u200e",rlm:"\u200f",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201a",ldquo:"\u201c",rdquo:"\u201d",bdquo:"\u201e",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203a",oline:"\u203e",euro:"\u20ac",trade:"\u2122",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21b5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230a",rfloor:"\u230b",loz:"\u25ca",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666"}),e.entityMap=e.HTML_ENTITIES},function(t,e,n){var i=n(15).NAMESPACE,r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,o=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),a=new RegExp("^"+r.source+o.source+"*(?::"+r.source+o.source+"*)?$");function s(t,e){this.message=t,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,s)}function u(){}function l(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function c(t,e,n,r,o,a){function s(t,e,i){n.attributeNames.hasOwnProperty(t)&&a.fatalError("Attribute "+t+" redefined"),n.addValue(t,e,i)}for(var u,l=++e,c=0;;){var h=t.charAt(l);switch(h){case"=":if(1===c)u=t.slice(e,l),c=3;else{if(2!==c)throw new Error("attribute equal must after attrName");c=3}break;case"'":case'"':if(3===c||1===c){if(1===c&&(a.warning('attribute value must after "="'),u=t.slice(e,l)),e=l+1,!((l=t.indexOf(h,e))>0))throw new Error("attribute value no end '"+h+"' match");s(u,d=t.slice(e,l).replace(/&#?\w+;/g,o),e-1),c=5}else{if(4!=c)throw new Error('attribute value must after "="');s(u,d=t.slice(e,l).replace(/&#?\w+;/g,o),e),a.warning('attribute "'+u+'" missed start quot('+h+")!!"),e=l+1,c=5}break;case"/":switch(c){case 0:n.setTagName(t.slice(e,l));case 5:case 6:case 7:c=7,n.closed=!0;case 4:case 1:case 2:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return a.error("unexpected end of input"),0==c&&n.setTagName(t.slice(e,l)),l;case">":switch(c){case 0:n.setTagName(t.slice(e,l));case 5:case 6:case 7:break;case 4:case 1:"/"===(d=t.slice(e,l)).slice(-1)&&(n.closed=!0,d=d.slice(0,-1));case 2:2===c&&(d=u),4==c?(a.warning('attribute "'+d+'" missed quot(")!'),s(u,d.replace(/&#?\w+;/g,o),e)):(i.isHTML(r[""])&&d.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+d+'" missed value!! "'+d+'" instead!!'),s(d,d,e));break;case 3:throw new Error("attribute value missed!!")}return l;case"\x80":h=" ";default:if(h<=" ")switch(c){case 0:n.setTagName(t.slice(e,l)),c=6;break;case 1:u=t.slice(e,l),c=2;break;case 4:var d=t.slice(e,l).replace(/&#?\w+;/g,o);a.warning('attribute "'+d+'" missed quot(")!!'),s(u,d,e);case 5:c=6}else switch(c){case 2:n.tagName;i.isHTML(r[""])&&u.match(/^(?:disabled|checked|selected)$/i)||a.warning('attribute "'+u+'" missed value!! "'+u+'" instead2!!'),s(u,u,e),e=l,c=1;break;case 5:a.warning('attribute space is required"'+u+'"!!');case 6:c=1,e=l;break;case 3:c=4,e=l;break;case 7:throw new Error("elements closed character '/' and '>' must be connected to")}}l++}}function h(t,e,n){for(var r=t.tagName,o=null,a=t.length;a--;){var s=t[a],u=s.qName,l=s.value;if((p=u.indexOf(":"))>0)var c=s.prefix=u.slice(0,p),h=u.slice(p+1),d="xmlns"===c&&h;else h=u,c=null,d="xmlns"===u&&"";s.localName=h,!1!==d&&(null==o&&(o={},f(n,n={})),n[d]=o[d]=l,s.uri=i.XMLNS,e.startPrefixMapping(d,l))}for(a=t.length;a--;){(c=(s=t[a]).prefix)&&("xml"===c&&(s.uri=i.XML),"xmlns"!==c&&(s.uri=n[c||""]))}var p;(p=r.indexOf(":"))>0?(c=t.prefix=r.slice(0,p),h=t.localName=r.slice(p+1)):(c=null,h=t.localName=r);var m=t.uri=n[c||""];if(e.startElement(m,h,r,t),!t.closed)return t.currentNSMap=n,t.localNSMap=o,!0;if(e.endElement(m,h,r),o)for(c in o)e.endPrefixMapping(c)}function d(t,e,n,i,r){if(/^(?:script|textarea)$/i.test(n)){var o=t.indexOf("</"+n+">",e),a=t.substring(e+1,o);if(/[&<]/.test(a))return/^script$/i.test(n)?(r.characters(a,0,a.length),o):(a=a.replace(/&#?\w+;/g,i),r.characters(a,0,a.length),o)}return e+1}function p(t,e,n,i){var r=i[n];return null==r&&((r=t.lastIndexOf("</"+n+">"))<e&&(r=t.lastIndexOf("</"+n)),i[n]=r),r<e}function f(t,e){for(var n in t)e[n]=t[n]}function m(t,e,n,i){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(r=t.indexOf("--\x3e",e+4))>e?(n.comment(t,e+4,r-e-4),r+3):(i.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var r=t.indexOf("]]>",e+9);return n.startCDATA(),n.characters(t,e+9,r-e-9),n.endCDATA(),r+3}var o=function(t,e){var n,i=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;r.lastIndex=e,r.exec(t);for(;n=r.exec(t);)if(i.push(n),n[1])return i}(t,e),a=o.length;if(a>1&&/!doctype/i.test(o[0][0])){var s=o[1][0],u=!1,l=!1;a>3&&(/^public$/i.test(o[2][0])?(u=o[3][0],l=a>4&&o[4][0]):/^system$/i.test(o[2][0])&&(l=o[3][0]));var c=o[a-1];return n.startDTD(s,u,l),n.endDTD(),c.index+c[0].length}}return-1}function g(t,e,n){var i=t.indexOf("?>",e);if(i){var r=t.substring(e,i).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(r){r[0].length;return n.processingInstruction(r[1],r[2]),i+2}return-1}return-1}function _(){this.attributeNames={}}s.prototype=new Error,s.prototype.name=s.name,u.prototype={parse:function(t,e,n){var r=this.domBuilder;r.startDocument(),f(e,e={}),function(t,e,n,r,o){function a(t){if(t>65535){var e=55296+((t-=65536)>>10),n=56320+(1023&t);return String.fromCharCode(e,n)}return String.fromCharCode(t)}function u(t){var e=t.slice(1,-1);return e in n?n[e]:"#"===e.charAt(0)?a(parseInt(e.substr(1).replace("x","0x"))):(o.error("entity not found:"+t),t)}function f(e){if(e>E){var n=t.substring(E,e).replace(/&#?\w+;/g,u);w&&v(E),r.characters(n,0,e-E),E=e}}function v(e,n){for(;e>=b&&(n=T.exec(t));)y=n.index,b=y+n[0].length,w.lineNumber++;w.columnNumber=e-y+1}var y=0,b=0,T=/.*(?:\r\n?|\n)|.*$/g,w=r.locator,x=[{currentNSMap:e}],S={},E=0;for(;;){try{var k=t.indexOf("<",E);if(k<0){if(!t.substr(E).match(/^\s*$/)){var C=r.doc,P=C.createTextNode(t.substr(E));C.appendChild(P),r.currentElement=P}return}switch(k>E&&f(k),t.charAt(k+1)){case"/":var L=t.indexOf(">",k+3),I=t.substring(k+2,L).replace(/[ \t\n\r]+$/g,""),A=x.pop();L<0?(I=t.substring(k+2).replace(/[\s<].*/,""),o.error("end tag name: "+I+" is not complete:"+A.tagName),L=k+1+I.length):I.match(/\s</)&&(I=I.replace(/[\s<].*/,""),o.error("end tag name: "+I+" maybe not complete"),L=k+1+I.length);var M=A.localNSMap,O=A.tagName==I;if(O||A.tagName&&A.tagName.toLowerCase()==I.toLowerCase()){if(r.endElement(A.uri,A.localName,I),M)for(var R in M)r.endPrefixMapping(R);O||o.fatalError("end tag name: "+I+" is not match the current start tagName:"+A.tagName)}else x.push(A);L++;break;case"?":w&&v(k),L=g(t,k,r);break;case"!":w&&v(k),L=m(t,k,r,o);break;default:w&&v(k);var D=new _,N=x[x.length-1].currentNSMap,B=(L=c(t,k,D,N,u,o),D.length);if(!D.closed&&p(t,L,D.tagName,S)&&(D.closed=!0,n.nbsp||o.warning("unclosed xml attribute")),w&&B){for(var U=l(w,{}),z=0;z<B;z++){var F=D[z];v(F.offset),F.locator=l(w,{})}r.locator=U,h(D,r,N)&&x.push(D),r.locator=w}else h(D,r,N)&&x.push(D);i.isHTML(D.uri)&&!D.closed?L=d(t,L,D.tagName,u,r):L++}}catch(j){if(j instanceof s)throw j;o.error("element parse error: "+j),L=-1}L>E?E=L:f(Math.max(k,E)+1)}}(t,e,n,r,this.errorHandler),r.endDocument()}},_.prototype={setTagName:function(t){if(!a.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},addValue:function(t,e,n){if(!a.test(t))throw new Error("invalid attribute:"+t);this.attributeNames[t]=this.length,this[this.length++]={qName:t,value:e,offset:n}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},e.XMLReader=u,e.ParseError=s},function(t,e,n){},function(t,e,n){"use strict";n(23);var i=n(4),r=60103;if(e.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var o=Symbol.for;r=o("react.element"),e.Fragment=o("react.fragment")}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,u={key:!0,ref:!0,__self:!0,__source:!0};function l(t,e,n){var i,o={},l=null,c=null;for(i in void 0!==n&&(l=""+n),void 0!==e.key&&(l=""+e.key),void 0!==e.ref&&(c=e.ref),e)s.call(e,i)&&!u.hasOwnProperty(i)&&(o[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps)void 0===o[i]&&(o[i]=e[i]);return{$$typeof:r,type:t,key:l,ref:c,props:o,_owner:a.current}}e.jsx=l,e.jsxs=l},function(t,e,n){},function(t,e,n){},function(t,e,n){!function(t){"use strict";function e(t){for(var e,n,i=1,r=arguments.length;i<r;i++)for(e in n=arguments[i])t[e]=n[e];return t}var n=Object.create||function(t){return i.prototype=t,new i};function i(){}function r(t,e){var n=Array.prototype.slice;if(t.bind)return t.bind.apply(t,n.call(arguments,1));var i=n.call(arguments,2);return function(){return t.apply(e,i.length?i.concat(n.call(arguments)):arguments)}}var o=0;function a(t){return t._leaflet_id=t._leaflet_id||++o,t._leaflet_id}function s(t,e,n){var i,r,o=function(){i=!1,r&&(a.apply(n,r),r=!1)},a=function(){i?r=arguments:(t.apply(n,arguments),setTimeout(o,e),i=!0)};return a}function u(t,e,n){var i=e[1],r=e[0],o=i-r;return t===i&&n?t:((t-r)%o+o)%o+r}function l(){return!1}function c(t,e){var n=Math.pow(10,void 0===e?6:e);return Math.round(t*n)/n}function h(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function d(t){return h(t).split(/\s+/)}function p(t,e){for(var i in Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?n(t.options):{}),e)t.options[i]=e[i];return t.options}function f(t,e,n){var i=[];for(var r in t)i.push(encodeURIComponent(n?r.toUpperCase():r)+"="+encodeURIComponent(t[r]));return(e&&-1!==e.indexOf("?")?"&":"?")+i.join("&")}var m=/\{ *([\w_-]+) *\}/g;function g(t,e){return t.replace(m,(function(t,n){var i=e[n];if(void 0===i)throw new Error("No value provided for variable "+t);return"function"==typeof i&&(i=i(e)),i}))}var _=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function v(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}var y="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function b(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var T=0;function w(t){var e=+new Date,n=Math.max(0,16-(e-T));return T=e+n,window.setTimeout(t,n)}var x=window.requestAnimationFrame||b("RequestAnimationFrame")||w,S=window.cancelAnimationFrame||b("CancelAnimationFrame")||b("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,e,n){if(!n||x!==w)return x.call(window,r(t,e));t.call(e)}function k(t){t&&S.call(window,t)}var C={extend:e,create:n,bind:r,lastId:o,stamp:a,throttle:s,wrapNum:u,falseFn:l,formatNum:c,trim:h,splitWords:d,setOptions:p,getParamString:f,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:x,cancelFn:S,requestAnimFrame:E,cancelAnimFrame:k};function P(){}P.extend=function(t){function i(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()}var r=i.__super__=this.prototype,o=n(r);for(var a in(o.constructor=i).prototype=o,this)Object.prototype.hasOwnProperty.call(this,a)&&"prototype"!==a&&"__super__"!==a&&(i[a]=this[a]);return t.statics&&(e(i,t.statics),delete t.statics),t.includes&&(function(t){if("undefined"!=typeof L&&L&&L.Mixin){t=_(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}(t.includes),e.apply(null,[o].concat(t.includes)),delete t.includes),o.options&&(t.options=e(n(o.options),t.options)),e(o,t),o._initHooks=[],o.callInitHooks=function(){if(!this._initHooksCalled){r.callInitHooks&&r.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=o._initHooks.length;t<e;t++)o._initHooks[t].call(this)}},i},P.include=function(t){return e(this.prototype,t),this},P.mergeOptions=function(t){return e(this.prototype.options,t),this},P.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),n="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};var I={on:function(t,e,n){if("object"==typeof t)for(var i in t)this._on(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._on(t[r],e,n);return this},off:function(t,e,n){if(t)if("object"==typeof t)for(var i in t)this._off(i,t[i],e);else for(var r=0,o=(t=d(t)).length;r<o;r++)this._off(t[r],e,n);else delete this._events;return this},_on:function(t,e,n){this._events=this._events||{};var i=this._events[t];i||(i=[],this._events[t]=i),n===this&&(n=void 0);for(var r={fn:e,ctx:n},o=i,a=0,s=o.length;a<s;a++)if(o[a].fn===e&&o[a].ctx===n)return;o.push(r)},_off:function(t,e,n){var i,r,o;if(this._events&&(i=this._events[t]))if(e){if(n===this&&(n=void 0),i)for(r=0,o=i.length;r<o;r++){var a=i[r];if(a.ctx===n&&a.fn===e)return a.fn=l,this._firingCount&&(this._events[t]=i=i.slice()),void i.splice(r,1)}}else{for(r=0,o=i.length;r<o;r++)i[r].fn=l;delete this._events[t]}},fire:function(t,n,i){if(!this.listens(t,i))return this;var r=e({},n,{type:t,target:this,sourceTarget:n&&n.sourceTarget||this});if(this._events){var o=this._events[t];if(o){this._firingCount=this._firingCount+1||1;for(var a=0,s=o.length;a<s;a++){var u=o[a];u.fn.call(u.ctx||this,r)}this._firingCount--}}return i&&this._propagateEvent(r),this},listens:function(t,e){var n=this._events&&this._events[t];if(n&&n.length)return!0;if(e)for(var i in this._eventParents)if(this._eventParents[i].listens(t,e))return!0;return!1},once:function(t,e,n){if("object"==typeof t){for(var i in t)this.once(i,t[i],e);return this}var o=r((function(){this.off(t,e,n).off(t,o,n)}),this);return this.on(t,e,n).on(t,o,n)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[a(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[a(t)],this},_propagateEvent:function(t){for(var n in this._eventParents)this._eventParents[n].fire(t.type,e({layer:t.target,propagatedFrom:t.target},t),!0)}};I.addEventListener=I.on,I.removeEventListener=I.clearAllEventListeners=I.off,I.addOneTimeEventListener=I.once,I.fireEvent=I.fire,I.hasEventListeners=I.listens;var A=P.extend(I);function M(t,e,n){this.x=n?Math.round(t):t,this.y=n?Math.round(e):e}var O=Math.trunc||function(t){return 0<t?Math.floor(t):Math.ceil(t)};function R(t,e,n){return t instanceof M?t:_(t)?new M(t[0],t[1]):null==t?t:"object"==typeof t&&"x"in t&&"y"in t?new M(t.x,t.y):new M(t,e,n)}function D(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function N(t,e){return!t||t instanceof D?t:new D(t,e)}function B(t,e){if(t)for(var n=e?[t,e]:t,i=0,r=n.length;i<r;i++)this.extend(n[i])}function U(t,e){return t instanceof B?t:new B(t,e)}function z(t,e,n){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==n&&(this.alt=+n)}function F(t,e,n){return t instanceof z?t:_(t)&&"object"!=typeof t[0]?3===t.length?new z(t[0],t[1],t[2]):2===t.length?new z(t[0],t[1]):null:null==t?t:"object"==typeof t&&"lat"in t?new z(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new z(t,e,n)}M.prototype={clone:function(){return new M(this.x,this.y)},add:function(t){return this.clone()._add(R(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(R(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new M(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new M(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=O(this.x),this.y=O(this.y),this},distanceTo:function(t){var e=(t=R(t)).x-this.x,n=t.y-this.y;return Math.sqrt(e*e+n*n)},equals:function(t){return(t=R(t)).x===this.x&&t.y===this.y},contains:function(t){return t=R(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+c(this.x)+", "+c(this.y)+")"}},D.prototype={extend:function(t){return t=R(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new M(this.min.x,this.max.y)},getTopRight:function(){return new M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,n;return(t=("number"==typeof t[0]||t instanceof M?R:N)(t))instanceof D?(e=t.min,n=t.max):e=n=t,e.x>=this.min.x&&n.x<=this.max.x&&e.y>=this.min.y&&n.y<=this.max.y},intersects:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>=e.x&&i.x<=n.x,a=r.y>=e.y&&i.y<=n.y;return o&&a},overlaps:function(t){t=N(t);var e=this.min,n=this.max,i=t.min,r=t.max,o=r.x>e.x&&i.x<n.x,a=r.y>e.y&&i.y<n.y;return o&&a},isValid:function(){return!(!this.min||!this.max)}},B.prototype={extend:function(t){var e,n,i=this._southWest,r=this._northEast;if(t instanceof z)n=e=t;else{if(!(t instanceof B))return t?this.extend(F(t)||U(t)):this;if(e=t._southWest,n=t._northEast,!e||!n)return this}return i||r?(i.lat=Math.min(e.lat,i.lat),i.lng=Math.min(e.lng,i.lng),r.lat=Math.max(n.lat,r.lat),r.lng=Math.max(n.lng,r.lng)):(this._southWest=new z(e.lat,e.lng),this._northEast=new z(n.lat,n.lng)),this},pad:function(t){var e=this._southWest,n=this._northEast,i=Math.abs(e.lat-n.lat)*t,r=Math.abs(e.lng-n.lng)*t;return new B(new z(e.lat-i,e.lng-r),new z(n.lat+i,n.lng+r))},getCenter:function(){return new z((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new z(this.getNorth(),this.getWest())},getSouthEast:function(){return new z(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t=("number"==typeof t[0]||t instanceof z||"lat"in t?F:U)(t);var e,n,i=this._southWest,r=this._northEast;return t instanceof B?(e=t.getSouthWest(),n=t.getNorthEast()):e=n=t,e.lat>=i.lat&&n.lat<=r.lat&&e.lng>=i.lng&&n.lng<=r.lng},intersects:function(t){t=U(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>=e.lat&&i.lat<=n.lat,a=r.lng>=e.lng&&i.lng<=n.lng;return o&&a},overlaps:function(t){t=U(t);var e=this._southWest,n=this._northEast,i=t.getSouthWest(),r=t.getNorthEast(),o=r.lat>e.lat&&i.lat<n.lat,a=r.lng>e.lng&&i.lng<n.lng;return o&&a},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=U(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}};var j,H={latLngToPoint:function(t,e){var n=this.projection.project(t),i=this.scale(e);return this.transformation._transform(n,i)},pointToLatLng:function(t,e){var n=this.scale(e),i=this.transformation.untransform(t,n);return this.projection.unproject(i)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,n=this.scale(t);return new D(this.transformation.transform(e.min,n),this.transformation.transform(e.max,n))},infinite:!(z.prototype={equals:function(t,e){return!!t&&(t=F(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+c(this.lat,t)+", "+c(this.lng,t)+")"},distanceTo:function(t){return Z.distance(this,F(t))},wrap:function(){return Z.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,n=e/Math.cos(Math.PI/180*this.lat);return U([this.lat-e,this.lng-n],[this.lat+e,this.lng+n])},clone:function(){return new z(this.lat,this.lng,this.alt)}}),wrapLatLng:function(t){var e=this.wrapLng?u(t.lng,this.wrapLng,!0):t.lng;return new z(this.wrapLat?u(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),n=this.wrapLatLng(e),i=e.lat-n.lat,r=e.lng-n.lng;if(0==i&&0==r)return t;var o=t.getSouthWest(),a=t.getNorthEast();return new B(new z(o.lat-i,o.lng-r),new z(a.lat-i,a.lng-r))}},Z=e({},H,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var n=Math.PI/180,i=t.lat*n,r=e.lat*n,o=Math.sin((e.lat-t.lat)*n/2),a=Math.sin((e.lng-t.lng)*n/2),s=o*o+Math.cos(i)*Math.cos(r)*a*a,u=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*u}}),W=6378137,q={R:W,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,n=this.MAX_LATITUDE,i=Math.max(Math.min(n,t.lat),-n),r=Math.sin(i*e);return new M(this.R*t.lng*e,this.R*Math.log((1+r)/(1-r))/2)},unproject:function(t){var e=180/Math.PI;return new z((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:new D([-(j=W*Math.PI),-j],[j,j])};function V(t,e,n,i){if(_(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=n,this._d=i}function G(t,e,n,i){return new V(t,e,n,i)}V.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new M((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var Y,X=e({},Z,{code:"EPSG:3857",projection:q,transformation:G(Y=.5/(Math.PI*q.R),.5,-Y,.5)}),K=e({},X,{code:"EPSG:900913"});function Q(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function $(t,e){for(var n,i,r,o,a="",s=0,u=t.length;s<u;s++){for(n=0,i=(r=t[s]).length;n<i;n++)a+=(n?"L":"M")+(o=r[n]).x+" "+o.y;a+=e?It?"z":"x":""}return a||"M0 0"}var J=document.documentElement.style,tt="ActiveXObject"in window,et=tt&&!document.addEventListener,nt="msLaunchUri"in navigator&&!("documentMode"in document),it=Mt("webkit"),rt=Mt("android"),ot=Mt("android 2")||Mt("android 3"),at=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),st=rt&&Mt("Google")&&at<537&&!("AudioNode"in window),ut=!!window.opera,lt=!nt&&Mt("chrome"),ct=Mt("gecko")&&!it&&!ut&&!tt,ht=!lt&&Mt("safari"),dt=Mt("phantom"),pt="OTransition"in J,ft=0===navigator.platform.indexOf("Win"),mt=tt&&"transition"in J,gt="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ot,_t="MozPerspective"in J,vt=!window.L_DISABLE_3D&&(mt||gt||_t)&&!pt&&!dt,yt="undefined"!=typeof orientation||Mt("mobile"),bt=yt&&it,Tt=yt&&gt,wt=!window.PointerEvent&&window.MSPointerEvent,xt=!(!window.PointerEvent&&!wt),St=!window.L_NO_TOUCH&&(xt||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Et=yt&&ut,kt=yt&&ct,Ct=1<(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI),Pt=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",l,e),window.removeEventListener("testPassiveEventSupport",l,e)}catch(t){}return t}(),Lt=!!document.createElement("canvas").getContext,It=!(!document.createElementNS||!Q("svg").createSVGRect),At=!It&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}();function Mt(t){return 0<=navigator.userAgent.toLowerCase().indexOf(t)}var Ot={ie:tt,ielt9:et,edge:nt,webkit:it,android:rt,android23:ot,androidStock:st,opera:ut,chrome:lt,gecko:ct,safari:ht,phantom:dt,opera12:pt,win:ft,ie3d:mt,webkit3d:gt,gecko3d:_t,any3d:vt,mobile:yt,mobileWebkit:bt,mobileWebkit3d:Tt,msPointer:wt,pointer:xt,touch:St,mobileOpera:Et,mobileGecko:kt,retina:Ct,passiveEvents:Pt,canvas:Lt,svg:It,vml:At},Rt=wt?"MSPointerDown":"pointerdown",Dt=wt?"MSPointerMove":"pointermove",Nt=wt?"MSPointerUp":"pointerup",Bt=wt?"MSPointerCancel":"pointercancel",Ut={},zt=!1;function Ft(t,e,n,i){function o(t){Wt(t,s)}var a,s,u,l,c,h,d,p;function f(t){t.pointerType===(t.MSPOINTER_TYPE_MOUSE||"mouse")&&0===t.buttons||Wt(t,l)}return"touchstart"===e?(c=t,h=n,d=i,p=r((function(t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&Be(t),Wt(t,h)})),c["_leaflet_touchstart"+d]=p,c.addEventListener(Rt,p,!1),zt||(document.addEventListener(Rt,jt,!0),document.addEventListener(Dt,Ht,!0),document.addEventListener(Nt,Zt,!0),document.addEventListener(Bt,Zt,!0),zt=!0)):"touchmove"===e?(l=n,(u=t)["_leaflet_touchmove"+i]=f,u.addEventListener(Dt,f,!1)):"touchend"===e&&(s=n,(a=t)["_leaflet_touchend"+i]=o,a.addEventListener(Nt,o,!1),a.addEventListener(Bt,o,!1)),this}function jt(t){Ut[t.pointerId]=t}function Ht(t){Ut[t.pointerId]&&(Ut[t.pointerId]=t)}function Zt(t){delete Ut[t.pointerId]}function Wt(t,e){for(var n in t.touches=[],Ut)t.touches.push(Ut[n]);t.changedTouches=[t],e(t)}var qt,Vt,Gt,Yt,Xt,Kt,Qt=wt?"MSPointerDown":xt?"pointerdown":"touchstart",$t=wt?"MSPointerUp":xt?"pointerup":"touchend",Jt="_leaflet_",te=ge(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ee=ge(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ne="webkitTransition"===ee||"OTransition"===ee?ee+"End":"transitionend";function ie(t){return"string"==typeof t?document.getElementById(t):t}function re(t,e){var n,i=t.style[e]||t.currentStyle&&t.currentStyle[e];return i&&"auto"!==i||!document.defaultView||(i=(n=document.defaultView.getComputedStyle(t,null))?n[e]:null),"auto"===i?null:i}function oe(t,e,n){var i=document.createElement(t);return i.className=e||"",n&&n.appendChild(i),i}function ae(t){var e=t.parentNode;e&&e.removeChild(t)}function se(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ue(t){var e=t.parentNode;e&&e.lastChild!==t&&e.appendChild(t)}function le(t){var e=t.parentNode;e&&e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function ce(t,e){if(void 0!==t.classList)return t.classList.contains(e);var n=fe(t);return 0<n.length&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)}function he(t,e){var n;if(void 0!==t.classList)for(var i=d(e),r=0,o=i.length;r<o;r++)t.classList.add(i[r]);else ce(t,e)||pe(t,((n=fe(t))?n+" ":"")+e)}function de(t,e){void 0!==t.classList?t.classList.remove(e):pe(t,h((" "+fe(t)+" ").replace(" "+e+" "," ")))}function pe(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function fe(t){return t.correspondingElement&&(t=t.correspondingElement),void 0===t.className.baseVal?t.className:t.className.baseVal}function me(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&function(t,e){var n=!1,i="DXImageTransform.Microsoft.Alpha";try{n=t.filters.item(i)}catch(t){if(1===e)return}e=Math.round(100*e),n?(n.Enabled=100!==e,n.Opacity=e):t.style.filter+=" progid:"+i+"(opacity="+e+")"}(t,e)}function ge(t){for(var e=document.documentElement.style,n=0;n<t.length;n++)if(t[n]in e)return t[n];return!1}function _e(t,e,n){var i=e||new M(0,0);t.style[te]=(mt?"translate("+i.x+"px,"+i.y+"px)":"translate3d("+i.x+"px,"+i.y+"px,0)")+(n?" scale("+n+")":"")}function ve(t,e){t._leaflet_pos=e,vt?_e(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function ye(t){return t._leaflet_pos||new M(0,0)}function be(){Ce(window,"dragstart",Be)}function Te(){Le(window,"dragstart",Be)}function we(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(xe(),Kt=(Xt=t).style.outline,t.style.outline="none",Ce(window,"keydown",xe))}function xe(){Xt&&(Xt.style.outline=Kt,Kt=Xt=void 0,Le(window,"keydown",xe))}function Se(t){for(;!((t=t.parentNode).offsetWidth&&t.offsetHeight||t===document.body););return t}function Ee(t){var e=t.getBoundingClientRect();return{x:e.width/t.offsetWidth||1,y:e.height/t.offsetHeight||1,boundingClientRect:e}}Yt="onselectstart"in document?(Gt=function(){Ce(window,"selectstart",Be)},function(){Le(window,"selectstart",Be)}):(Vt=ge(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]),Gt=function(){var t;Vt&&(t=document.documentElement.style,qt=t[Vt],t[Vt]="none")},function(){Vt&&(document.documentElement.style[Vt]=qt,qt=void 0)});var ke={TRANSFORM:te,TRANSITION:ee,TRANSITION_END:ne,get:ie,getStyle:re,create:oe,remove:ae,empty:se,toFront:ue,toBack:le,hasClass:ce,addClass:he,removeClass:de,setClass:pe,getClass:fe,setOpacity:me,testProp:ge,setTransform:_e,setPosition:ve,getPosition:ye,disableTextSelection:Gt,enableTextSelection:Yt,disableImageDrag:be,enableImageDrag:Te,preventOutline:we,restoreOutline:xe,getSizedParentNode:Se,getScale:Ee};function Ce(t,e,n,i){if("object"==typeof e)for(var r in e)Me(t,r,e[r],n);else for(var o=0,a=(e=d(e)).length;o<a;o++)Me(t,e[o],n,i);return this}var Pe="_leaflet_events";function Le(t,e,n,i){if("object"==typeof e)for(var r in e)Oe(t,r,e[r],n);else if(e)for(var o=0,a=(e=d(e)).length;o<a;o++)Oe(t,e[o],n,i);else{for(var s in t[Pe])Oe(t,s,t[Pe][s]);delete t[Pe]}return this}function Ie(){return xt&&!nt&&!ht}var Ae={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Me(t,e,n,i){var r=e+a(n)+(i?"_"+a(i):"");if(t[Pe]&&t[Pe][r])return this;var o,s,u,l,c,h,d=function(e){return n.call(i||t,e||window.event)},p=d;function f(t){if(xt){if(!t.isPrimary)return;if("mouse"===t.pointerType)return}else if(1<t.touches.length)return;var e=Date.now(),n=e-(l||e);c=t.touches?t.touches[0]:t,h=0<n&&n<=250,l=e}function m(t){if(h&&!c.cancelBubble){if(xt){if("mouse"===t.pointerType)return;var e,n,i={};for(n in c)e=c[n],i[n]=e&&e.bind?e.bind(c):e;c=i}c.type="dblclick",c.button=0,s(c),l=null}}xt&&0===e.indexOf("touch")?Ft(t,e,d,r):St&&"dblclick"===e&&!Ie()?(s=d,h=!1,(o=t)[Jt+Qt+(u=r)]=f,o[Jt+$t+u]=m,o[Jt+"dblclick"+u]=s,o.addEventListener(Qt,f,!!Pt&&{passive:!1}),o.addEventListener($t,m,!!Pt&&{passive:!1}),o.addEventListener("dblclick",s,!1)):"addEventListener"in t?"touchstart"===e||"touchmove"===e||"wheel"===e||"mousewheel"===e?t.addEventListener(Ae[e]||e,d,!!Pt&&{passive:!1}):"mouseenter"===e||"mouseleave"===e?(d=function(e){e=e||window.event,qe(t,e)&&p(e)},t.addEventListener(Ae[e],d,!1)):t.addEventListener(e,p,!1):"attachEvent"in t&&t.attachEvent("on"+e,d),t[Pe]=t[Pe]||{},t[Pe][r]=d}function Oe(t,e,n,i){var r,o,s,u,l,c,h,d,p=e+a(n)+(i?"_"+a(i):""),f=t[Pe]&&t[Pe][p];if(!f)return this;xt&&0===e.indexOf("touch")?(d=(c=t)["_leaflet_"+(h=e)+p],"touchstart"===h?c.removeEventListener(Rt,d,!1):"touchmove"===h?c.removeEventListener(Dt,d,!1):"touchend"===h&&(c.removeEventListener(Nt,d,!1),c.removeEventListener(Bt,d,!1))):St&&"dblclick"===e&&!Ie()?(s=(r=t)[Jt+Qt+(o=p)],u=r[Jt+$t+o],l=r[Jt+"dblclick"+o],r.removeEventListener(Qt,s,!!Pt&&{passive:!1}),r.removeEventListener($t,u,!!Pt&&{passive:!1}),r.removeEventListener("dblclick",l,!1)):"removeEventListener"in t?t.removeEventListener(Ae[e]||e,f,!1):"detachEvent"in t&&t.detachEvent("on"+e,f),t[Pe][p]=null}function Re(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,We(t),this}function De(t){return Me(t,"wheel",Re),this}function Ne(t){return Ce(t,"mousedown touchstart dblclick",Re),Me(t,"click",Ze),this}function Be(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Ue(t){return Be(t),Re(t),this}function ze(t,e){if(!e)return new M(t.clientX,t.clientY);var n=Ee(e),i=n.boundingClientRect;return new M((t.clientX-i.left)/n.x-e.clientLeft,(t.clientY-i.top)/n.y-e.clientTop)}var Fe=ft&&lt?2*window.devicePixelRatio:ct?window.devicePixelRatio:1;function je(t){return nt?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/Fe:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}var He={};function Ze(t){He[t.type]=!0}function We(t){var e=He[t.type];return He[t.type]=!1,e}function qe(t,e){var n=e.relatedTarget;if(!n)return!0;try{for(;n&&n!==t;)n=n.parentNode}catch(t){return!1}return n!==t}var Ve={on:Ce,off:Le,stopPropagation:Re,disableScrollPropagation:De,disableClickPropagation:Ne,preventDefault:Be,stop:Ue,getMousePosition:ze,getWheelDelta:je,fakeStop:Ze,skipped:We,isExternalTarget:qe,addListener:Ce,removeListener:Le},Ge=A.extend({run:function(t,e,n,i){this.stop(),this._el=t,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(i||.5,.2),this._startPos=ye(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var e=new Date-this._startTime,n=1e3*this._duration;e<n?this._runFrame(this._easeOut(e/n),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var n=this._startPos.add(this._offset.multiplyBy(t));e&&n._round(),ve(this._el,n),this.fire("step")},_complete:function(){k(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ye=A.extend({options:{crs:X,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=p(this,e),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=r(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(F(e.center),e.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ee&&vt&&!Et&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ce(this._proxy,ne,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,n,i){return n=void 0===n?this._zoom:this._limitZoom(n),t=this._limitCenter(F(t),n,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i&&(void 0!==i.animate&&(i.zoom=e({animate:i.animate},i.zoom),i.pan=e({animate:i.animate,duration:i.duration},i.pan)),this._zoom!==n?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,n,i.zoom):this._tryAnimatedPan(t,i.pan))?(clearTimeout(this._sizeTimer),this):(this._resetView(t,n),this)},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(vt?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,n){var i=this.getZoomScale(e),r=this.getSize().divideBy(2),o=(t instanceof M?t:this.latLngToContainerPoint(t)).subtract(r).multiplyBy(1-1/i),a=this.containerPointToLatLng(r.add(o));return this.setView(a,e,{zoom:n})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():U(t);var n=R(e.paddingTopLeft||e.padding||[0,0]),i=R(e.paddingBottomRight||e.padding||[0,0]),r=this.getBoundsZoom(t,!1,n.add(i));if((r="number"==typeof e.maxZoom?Math.min(e.maxZoom,r):r)===1/0)return{center:t.getCenter(),zoom:r};var o=i.subtract(n).divideBy(2),a=this.project(t.getSouthWest(),r),s=this.project(t.getNorthEast(),r);return{center:this.unproject(a.add(s).divideBy(2).add(o),r),zoom:r}},fitBounds:function(t,e){if(!(t=U(t)).isValid())throw new Error("Bounds are not valid.");var n=this._getBoundsCenterZoom(t,e);return this.setView(n.center,n.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){return e=e||{},(t=R(t).round()).x||t.y?(!0===e.animate||this.getSize().contains(t)?(this._panAnim||(this._panAnim=new Ge,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate?(he(this._mapPane,"leaflet-pan-anim"),n=this._getMapPanePos().subtract(t).round(),this._panAnim.run(this._mapPane,n,e.duration||.25,e.easeLinearity)):(this._rawPanBy(t),this.fire("move").fire("moveend"))):this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this):this.fire("moveend");var n},flyTo:function(t,e,n){if(!1===(n=n||{}).animate||!vt)return this.setView(t,e,n);this._stop();var i=this.project(this.getCenter()),r=this.project(t),o=this.getSize(),a=this._zoom;t=F(t),e=void 0===e?a:e;var s=Math.max(o.x,o.y),u=s*this.getZoomScale(a,e),l=r.distanceTo(i)||1,c=1.42,h=c*c;function d(t){var e=(u*u-s*s+(t?-1:1)*h*h*l*l)/(2*(t?u:s)*h*l),n=Math.sqrt(e*e+1)-e;return n<1e-9?-18:Math.log(n)}function p(t){return(Math.exp(t)-Math.exp(-t))/2}function f(t){return(Math.exp(t)+Math.exp(-t))/2}var m=d(0);function g(t){return s*(f(m)*(p(e=m+c*t)/f(e))-p(m))/h;var e}var _=Date.now(),v=(d(1)-m)/c,y=n.duration?1e3*n.duration:1e3*v*.8;return this._moveStart(!0,n.noMoveStart),function n(){var o,u,h=(Date.now()-_)/y,d=(o=h,(1-Math.pow(1-o,1.5))*v);h<=1?(this._flyToFrame=E(n,this),this._move(this.unproject(i.add(r.subtract(i).multiplyBy(g(d)/l)),a),this.getScaleZoom(s/(u=d,s*(f(m)/f(m+c*u))),a),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}.call(this),this},flyToBounds:function(t,e){var n=this._getBoundsCenterZoom(t,e);return this.flyTo(n.center,n.zoom,e)},setMaxBounds:function(t){return(t=U(t)).isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var n=this.getCenter(),i=this._limitCenter(n,this._zoom,U(t));return n.equals(i)||this.panTo(i,e),this._enforcingBounds=!1,this},panInside:function(t,e){var n,i,r=R((e=e||{}).paddingTopLeft||e.padding||[0,0]),o=R(e.paddingBottomRight||e.padding||[0,0]),a=this.getCenter(),s=this.project(a),u=this.project(t),l=this.getPixelBounds(),c=l.getSize().divideBy(2),h=N([l.min.add(r),l.max.subtract(o)]);return h.contains(u)||(this._enforcingBounds=!0,n=s.subtract(u),i=R(u.x+n.x,u.y+n.y),(u.x<h.min.x||u.x>h.max.x)&&(i.x=s.x-n.x,0<n.x?i.x+=c.x-r.x:i.x-=c.x-o.x),(u.y<h.min.y||u.y>h.max.y)&&(i.y=s.y-n.y,0<n.y?i.y+=c.y-r.y:i.y-=c.y-o.y),this.panTo(this.unproject(i),e),this._enforcingBounds=!1),this},invalidateSize:function(t){if(!this._loaded)return this;t=e({animate:!1,pan:!0},!0===t?{animate:!0}:t);var n=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),o=n.divideBy(2).round(),a=i.divideBy(2).round(),s=o.subtract(a);return s.x||s.y?(t.animate&&t.pan?this.panBy(s):(t.pan&&this._rawPanBy(s),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(r(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:n,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=e({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var n=r(this._handleGeolocationResponse,this),i=r(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(n,i,t):navigator.geolocation.getCurrentPosition(n,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,n=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+n+"."})},_handleGeolocationResponse:function(t){var e,n=new z(t.coords.latitude,t.coords.longitude),i=n.toBounds(2*t.coords.accuracy),r=this._locateOptions;r.setView&&(e=this.getBoundsZoom(i),this.setView(n,r.maxZoom?Math.min(e,r.maxZoom):e));var o={latlng:n,bounds:i,timestamp:t.timestamp};for(var a in t.coords)"number"==typeof t.coords[a]&&(o[a]=t.coords[a]);this.fire("locationfound",o)},addHandler:function(t,e){if(!e)return this;var n=this[t]=new e(this);return this._handlers.push(n),this.options[t]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}var t;for(t in void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),ae(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(k(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload"),this._layers)this._layers[t].remove();for(t in this._panes)ae(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var n=oe("div","leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new B(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,n){t=U(t),n=R(n||[0,0]);var i=this.getZoom()||0,r=this.getMinZoom(),o=this.getMaxZoom(),a=t.getNorthWest(),s=t.getSouthEast(),u=this.getSize().subtract(n),l=N(this.project(s,i),this.project(a,i)).getSize(),c=vt?this.options.zoomSnap:1,h=u.x/l.x,d=u.y/l.y,p=e?Math.max(h,d):Math.min(h,d);return i=this.getScaleZoom(p,i),c&&(i=Math.round(i/(c/100))*(c/100),i=e?Math.ceil(i/c)*c:Math.floor(i/c)*c),Math.max(r,Math.min(o,i))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new M(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var n=this._getTopLeftPoint(t,e);return new D(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var n=this.options.crs;return e=void 0===e?this._zoom:e,n.scale(t)/n.scale(e)},getScaleZoom:function(t,e){var n=this.options.crs;e=void 0===e?this._zoom:e;var i=n.zoom(t*n.scale(e));return isNaN(i)?1/0:i},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(F(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(R(t),e)},layerPointToLatLng:function(t){var e=R(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(F(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(F(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(U(t))},distance:function(t,e){return this.options.crs.distance(F(t),F(e))},containerPointToLayerPoint:function(t){return R(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return R(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(R(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(F(t)))},mouseEventToContainerPoint:function(t){return ze(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=ie(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");Ce(e,"scroll",this._onScroll,this),this._containerId=a(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&vt,he(t,"leaflet-container"+(St?" leaflet-touch":"")+(Ct?" leaflet-retina":"")+(et?" leaflet-oldie":"")+(ht?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=re(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),ve(this._mapPane,new M(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(he(t.markerPane,"leaflet-zoom-hide"),he(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){ve(this._mapPane,new M(0,0));var n=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var i=this._zoom!==e;this._moveStart(i,!1)._move(t,e)._moveEnd(i),this.fire("viewreset"),n&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,n){void 0===e&&(e=this._zoom);var i=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(i||n&&n.pinch)&&this.fire("zoom",n),this.fire("move",n)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return k(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){ve(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={};var e=t?Le:Ce;e((this._targets[a(this._container)]=this)._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),vt&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){k(this._resizeRequest),this._resizeRequest=E((function(){this.invalidateSize({debounceMoveend:!0})}),this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var n,i=[],r="mouseout"===e||"mouseover"===e,o=t.target||t.srcElement,s=!1;o;){if((n=this._targets[a(o)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(n)){s=!0;break}if(n&&n.listens(e,!0)){if(r&&!qe(o,t))break;if(i.push(n),r)break}if(o===this._container)break;o=o.parentNode}return i.length||s||r||!qe(o,t)||(i=[this]),i},_handleDOMEvent:function(t){var e;this._loaded&&!We(t)&&("mousedown"!==(e=t.type)&&"keypress"!==e&&"keyup"!==e&&"keydown"!==e||we(t.target||t.srcElement),this._fireDOMEvent(t,e))},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,n,i){var r;if("click"===t.type&&((r=e({},t)).type="preclick",this._fireDOMEvent(r,r.type,i)),!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,n))).length){var o=i[0];"contextmenu"===n&&o.listens(n,!0)&&Be(t);var a,s={originalEvent:t};"keypress"!==t.type&&"keydown"!==t.type&&"keyup"!==t.type&&(a=o.getLatLng&&(!o._radius||o._radius<=10),s.containerPoint=a?this.latLngToContainerPoint(o.getLatLng()):this.mouseEventToContainerPoint(t),s.layerPoint=this.containerPointToLayerPoint(s.containerPoint),s.latlng=a?o.getLatLng():this.layerPointToLatLng(s.layerPoint));for(var u=0;u<i.length;u++)if(i[u].fire(n,s,!0),s.originalEvent._stopped||!1===i[u].options.bubblingMouseEvents&&-1!==v(this._mouseEvents,n))return}},_draggableMoved:function(t){return(t=t.dragging&&t.dragging.enabled()?t:this).dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return ye(this._mapPane)||new M(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var n=this.getSize()._divideBy(2);return this.project(t,e)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return this.project(t,e)._subtract(i)},_latLngBoundsToNewLayerBounds:function(t,e,n){var i=this._getNewPixelOrigin(n,e);return N([this.project(t.getSouthWest(),e)._subtract(i),this.project(t.getNorthWest(),e)._subtract(i),this.project(t.getSouthEast(),e)._subtract(i),this.project(t.getNorthEast(),e)._subtract(i)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,n){if(!n)return t;var i=this.project(t,e),r=this.getSize().divideBy(2),o=new D(i.subtract(r),i.add(r)),a=this._getBoundsOffset(o,n,e);return a.round().equals([0,0])?t:this.unproject(i.add(a),e)},_limitOffset:function(t,e){if(!e)return t;var n=this.getPixelBounds(),i=new D(n.min.add(t),n.max.add(t));return t.add(this._getBoundsOffset(i,e))},_getBoundsOffset:function(t,e,n){var i=N(this.project(e.getNorthEast(),n),this.project(e.getSouthWest(),n)),r=i.min.subtract(t.min),o=i.max.subtract(t.max);return new M(this._rebound(r.x,-o.x),this._rebound(r.y,-o.y))},_rebound:function(t,e){return 0<t+e?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),n=this.getMaxZoom(),i=vt?this.options.zoomSnap:1;return i&&(t=Math.round(t/i)*i),Math.max(e,Math.min(n,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){de(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var n=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(n))&&(this.panBy(n,e),!0)},_createAnimProxy:function(){var t=this._proxy=oe("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",(function(t){var e=te,n=this._proxy.style[e];_e(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),n===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()}),this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ae(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),e=this.getZoom();_e(this._proxy,this.project(t,e),this.getZoomScale(e,1))},_catchTransitionEnd:function(t){this._animatingZoom&&0<=t.propertyName.indexOf("transform")&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,n){if(this._animatingZoom)return!0;if(n=n||{},!this._zoomAnimated||!1===n.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var i=this.getZoomScale(e),r=this._getCenterOffset(t)._divideBy(1-1/i);return!(!0!==n.animate&&!this.getSize().contains(r))&&(E((function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)}),this),!0)},_animateZoom:function(t,e,n,i){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,he(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:i}),setTimeout(r(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&de(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),E((function(){this._moveEnd(!0)}),this))}});function Xe(t){return new Ke(t)}var Ke=P.extend({options:{position:"topright"},initialize:function(t){p(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),n=this.getPosition(),i=t._controlCorners[n];return he(e,"leaflet-control"),-1!==n.indexOf("bottom")?i.insertBefore(e,i.firstChild):i.appendChild(e),this._map.on("unload",this.remove,this),this},remove:function(){return this._map&&(ae(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null),this},_refocusOnMap:function(t){this._map&&t&&0<t.screenX&&0<t.screenY&&this._map.getContainer().focus()}});Ye.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},e="leaflet-",n=this._controlContainer=oe("div",e+"control-container",this._container);function i(i,r){var o=e+i+" "+e+r;t[i+r]=oe("div",o,n)}i("top","left"),i("top","right"),i("bottom","left"),i("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)ae(this._controlCorners[t]);ae(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Qe=Ke.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,n,i){return n<i?-1:i<n?1:0}},initialize:function(t,e,n){for(var i in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,t)this._addLayer(t[i],i);for(i in e)this._addLayer(e[i],i,!0)},onAdd:function(t){this._initLayout(),this._update(),(this._map=t).on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ke.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(a(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){he(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(he(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):de(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return de(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=oe("div",t),n=this.options.collapsed;e.setAttribute("aria-haspopup",!0),Ne(e),De(e);var i=this._section=oe("section",t+"-list");n&&(this._map.on("click",this.collapse,this),rt||Ce(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var r=this._layersLink=oe("a",t+"-toggle",e);r.href="#",r.title="Layers",St?(Ce(r,"click",Ue),Ce(r,"click",this.expand,this)):Ce(r,"focus",this.expand,this),n||this.expand(),this._baseLayersList=oe("div",t+"-base",i),this._separator=oe("div",t+"-separator",i),this._overlaysList=oe("div",t+"-overlays",i),e.appendChild(i)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&a(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,n){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:n}),this.options.sortLayers&&this._layers.sort(r((function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)}),this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;se(this._baseLayersList),se(this._overlaysList),this._layerControlInputs=[];for(var t,e,n,i=0,r=0;r<this._layers.length;r++)n=this._layers[r],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,i+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&1<i,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(a(t.target)),n=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;n&&this._map.fire(n,e)},_createRadioElement:function(t,e){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",i=document.createElement("div");return i.innerHTML=n,i.firstChild},_addItem:function(t){var e,n=document.createElement("label"),i=this._map.hasLayer(t.layer);t.overlay?((e=document.createElement("input")).type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=i):e=this._createRadioElement("leaflet-base-layers_"+a(this),i),this._layerControlInputs.push(e),e.layerId=a(t.layer),Ce(e,"click",this._onInputClick,this);var r=document.createElement("span");r.innerHTML=" "+t.name;var o=document.createElement("div");return n.appendChild(o),o.appendChild(e),o.appendChild(r),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(n),this._checkDisabledLayers(),n},_onInputClick:function(){var t,e,n=this._layerControlInputs,i=[],r=[];this._handlingClick=!0;for(var o=n.length-1;0<=o;o--)t=n[o],e=this._getLayer(t.layerId).layer,t.checked?i.push(e):t.checked||r.push(e);for(o=0;o<r.length;o++)this._map.hasLayer(r[o])&&this._map.removeLayer(r[o]);for(o=0;o<i.length;o++)this._map.hasLayer(i[o])||this._map.addLayer(i[o]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,n=this._layerControlInputs,i=this._map.getZoom(),r=n.length-1;0<=r;r--)t=n[r],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&i<e.options.minZoom||void 0!==e.options.maxZoom&&i>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),$e=Ke.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",n=oe("div",e+" leaflet-bar"),i=this.options;return this._zoomInButton=this._createButton(i.zoomInText,i.zoomInTitle,e+"-in",n,this._zoomIn),this._zoomOutButton=this._createButton(i.zoomOutText,i.zoomOutTitle,e+"-out",n,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),n},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,n,i,r){var o=oe("a",n,i);return o.innerHTML=t,o.href="#",o.title=e,o.setAttribute("role","button"),o.setAttribute("aria-label",e),Ne(o),Ce(o,"click",Ue),Ce(o,"click",r,this),Ce(o,"click",this._refocusOnMap,this),o},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";de(this._zoomInButton,e),de(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMinZoom()||he(this._zoomOutButton,e),!this._disabled&&t._zoom!==t.getMaxZoom()||he(this._zoomInButton,e)}});Ye.mergeOptions({zoomControl:!0}),Ye.addInitHook((function(){this.options.zoomControl&&(this.zoomControl=new $e,this.addControl(this.zoomControl))}));var Je=Ke.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e="leaflet-control-scale",n=oe("div",e),i=this.options;return this._addScales(i,e+"-line",n),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),n},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,n){t.metric&&(this._mScale=oe("div",e,n)),t.imperial&&(this._iScale=oe("div",e,n))},_update:function(){var t=this._map,e=t.getSize().y/2,n=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(n)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),n=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,n,e/t)},_updateImperial:function(t){var e,n,i,r=3.2808399*t;5280<r?(e=r/5280,n=this._getRoundNum(e),this._updateScale(this._iScale,n+" mi",n/e)):(i=this._getRoundNum(r),this._updateScale(this._iScale,i+" ft",i/r))},_updateScale:function(t,e,n){t.style.width=Math.round(this.options.maxWidth*n)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),n=t/e;return e*(10<=n?10:5<=n?5:3<=n?3:2<=n?2:1)}}),tn=Ke.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){p(this,t),this._attributions={}},onAdd:function(t){for(var e in(t.attributionControl=this)._container=oe("div","leaflet-control-attribution"),Ne(this._container),t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t&&(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update()),this},removeAttribution:function(t){return t&&this._attributions[t]&&(this._attributions[t]--,this._update()),this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var n=[];this.options.prefix&&n.push(this.options.prefix),t.length&&n.push(t.join(", ")),this._container.innerHTML=n.join(" | ")}}});Ye.mergeOptions({attributionControl:!0}),Ye.addInitHook((function(){this.options.attributionControl&&(new tn).addTo(this)})),Ke.Layers=Qe,Ke.Zoom=$e,Ke.Scale=Je,Ke.Attribution=tn,Xe.layers=function(t,e,n){return new Qe(t,e,n)},Xe.zoom=function(t){return new $e(t)},Xe.scale=function(t){return new Je(t)},Xe.attribution=function(t){return new tn(t)};var en=P.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled||(this._enabled=!0,this.addHooks()),this},disable:function(){return this._enabled&&(this._enabled=!1,this.removeHooks()),this},enabled:function(){return!!this._enabled}});en.addTo=function(t,e){return t.addHandler(e,this),this};var nn,rn={Events:I},on=St?"touchstart mousedown":"mousedown",an={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},sn={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},un=A.extend({options:{clickTolerance:3},initialize:function(t,e,n,i){p(this,i),this._element=t,this._dragStartTarget=e||t,this._preventOutline=n},enable:function(){this._enabled||(Ce(this._dragStartTarget,on,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(un._dragging===this&&this.finishDrag(),Le(this._dragStartTarget,on,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){var e,n;!t._simulated&&this._enabled&&(this._moved=!1,ce(this._element,"leaflet-zoom-anim")||un._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||((un._dragging=this)._preventOutline&&we(this._element),be(),Gt(),this._moving||(this.fire("down"),e=t.touches?t.touches[0]:t,n=Se(this._element),this._startPoint=new M(e.clientX,e.clientY),this._parentScale=Ee(n),Ce(document,sn[t.type],this._onMove,this),Ce(document,an[t.type],this._onUp,this))))},_onMove:function(t){var e,n;!t._simulated&&this._enabled&&(t.touches&&1<t.touches.length?this._moved=!0:((n=new M((e=t.touches&&1===t.touches.length?t.touches[0]:t).clientX,e.clientY)._subtract(this._startPoint)).x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,Be(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=ye(this._element).subtract(n),he(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),he(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,k(this._animRequest),this._lastEvent=t,this._animRequest=E(this._updatePosition,this,!0))))},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),ve(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){for(var t in de(document.body,"leaflet-dragging"),this._lastTarget&&(de(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),sn)Le(document,sn[t],this._onMove,this),Le(document,an[t],this._onUp,this);Te(),Yt(),this._moved&&this._moving&&(k(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,un._dragging=!1}});function ln(t,e){if(!e||!t.length)return t.slice();var n=e*e;return function(t,e){var n=t.length,i=new(typeof Uint8Array!=void 0+""?Uint8Array:Array)(n);i[0]=i[n-1]=1,function t(e,n,i,r,o){var a,s,u,l=0;for(s=r+1;s<=o-1;s++)l<(u=fn(e[s],e[r],e[o],!0))&&(a=s,l=u);i<l&&(n[a]=1,t(e,n,i,r,a),t(e,n,i,a,o))}(t,i,e,0,n-1);var r,o=[];for(r=0;r<n;r++)i[r]&&o.push(t[r]);return o}(t=function(t,e){for(var n=[t[0]],i=1,r=0,o=t.length;i<o;i++)(function(t,e){var n=e.x-t.x,i=e.y-t.y;return n*n+i*i})(t[i],t[r])>e&&(n.push(t[i]),r=i);return r<o-1&&n.push(t[o-1]),n}(t,n),n)}function cn(t,e,n){return Math.sqrt(fn(t,e,n,!0))}function hn(t,e,n,i,r){var o,a,s,u=i?nn:pn(t,n),l=pn(e,n);for(nn=l;;){if(!(u|l))return[t,e];if(u&l)return!1;s=pn(a=dn(t,e,o=u||l,n,r),n),o===u?(t=a,u=s):(e=a,l=s)}}function dn(t,e,n,i,r){var o,a,s=e.x-t.x,u=e.y-t.y,l=i.min,c=i.max;return 8&n?(o=t.x+s*(c.y-t.y)/u,a=c.y):4&n?(o=t.x+s*(l.y-t.y)/u,a=l.y):2&n?(o=c.x,a=t.y+u*(c.x-t.x)/s):1&n&&(o=l.x,a=t.y+u*(l.x-t.x)/s),new M(o,a,r)}function pn(t,e){var n=0;return t.x<e.min.x?n|=1:t.x>e.max.x&&(n|=2),t.y<e.min.y?n|=4:t.y>e.max.y&&(n|=8),n}function fn(t,e,n,i){var r,o=e.x,a=e.y,s=n.x-o,u=n.y-a,l=s*s+u*u;return 0<l&&(1<(r=((t.x-o)*s+(t.y-a)*u)/l)?(o=n.x,a=n.y):0<r&&(o+=s*r,a+=u*r)),s=t.x-o,u=t.y-a,i?s*s+u*u:new M(o,a)}function mn(t){return!_(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function gn(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),mn(t)}var _n={simplify:ln,pointToSegmentDistance:cn,closestPointOnSegment:function(t,e,n){return fn(t,e,n)},clipSegment:hn,_getEdgeIntersection:dn,_getBitCode:pn,_sqClosestPointOnSegment:fn,isFlat:mn,_flat:gn};function vn(t,e,n){for(var i,r,o,a,s,u,l,c=[1,4,2,8],h=0,d=t.length;h<d;h++)t[h]._code=pn(t[h],e);for(o=0;o<4;o++){for(u=c[o],i=[],h=0,r=(d=t.length)-1;h<d;r=h++)a=t[h],s=t[r],a._code&u?s._code&u||((l=dn(s,a,u,e,n))._code=pn(l,e),i.push(l)):(s._code&u&&((l=dn(s,a,u,e,n))._code=pn(l,e),i.push(l)),i.push(a));t=i}return t}var yn,bn={clipPolygon:vn},Tn={project:function(t){return new M(t.lng,t.lat)},unproject:function(t){return new z(t.y,t.x)},bounds:new D([-180,-90],[180,90])},wn={R:6378137,R_MINOR:6356752.314245179,bounds:new D([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,n=this.R,i=t.lat*e,r=this.R_MINOR/n,o=Math.sqrt(1-r*r),a=o*Math.sin(i),s=Math.tan(Math.PI/4-i/2)/Math.pow((1-a)/(1+a),o/2);return i=-n*Math.log(Math.max(s,1e-10)),new M(t.lng*e*n,i)},unproject:function(t){for(var e,n=180/Math.PI,i=this.R,r=this.R_MINOR/i,o=Math.sqrt(1-r*r),a=Math.exp(-t.y/i),s=Math.PI/2-2*Math.atan(a),u=0,l=.1;u<15&&1e-7<Math.abs(l);u++)e=o*Math.sin(s),e=Math.pow((1-e)/(1+e),o/2),s+=l=Math.PI/2-2*Math.atan(a*e)-s;return new z(s*n,t.x*n/i)}},xn={LonLat:Tn,Mercator:wn,SphericalMercator:q},Sn=e({},Z,{code:"EPSG:3395",projection:wn,transformation:G(yn=.5/(Math.PI*wn.R),.5,-yn,.5)}),En=e({},Z,{code:"EPSG:4326",projection:Tn,transformation:G(1/180,1,-1/180,.5)}),kn=e({},H,{projection:Tn,transformation:G(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var n=e.lng-t.lng,i=e.lat-t.lat;return Math.sqrt(n*n+i*i)},infinite:!0});H.Earth=Z,H.EPSG3395=Sn,H.EPSG3857=X,H.EPSG900913=K,H.EPSG4326=En,H.Simple=kn;var Cn=A.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[a(t)]=this},removeInteractiveTarget:function(t){return delete this._map._targets[a(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e,n=t.target;n.hasLayer(this)&&(this._map=n,this._zoomAnimated=n._zoomAnimated,this.getEvents&&(e=this.getEvents(),n.on(e,this),this.once("remove",(function(){n.off(e,this)}),this)),this.onAdd(n),this.getAttribution&&n.attributionControl&&n.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),n.fire("layeradd",{layer:this}))}});Ye.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=a(t);return this._layers[e]||((this._layers[e]=t)._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t)),this},removeLayer:function(t){var e=a(t);return this._layers[e]&&(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null),this},hasLayer:function(t){return!!t&&a(t)in this._layers},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},_addLayers:function(t){for(var e=0,n=(t=t?_(t)?t:[t]:[]).length;e<n;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[a(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=a(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,n=this._getZoomSpan();for(var i in this._zoomBoundLayers){var r=this._zoomBoundLayers[i].options;t=void 0===r.minZoom?t:Math.min(t,r.minZoom),e=void 0===r.maxZoom?e:Math.max(e,r.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,n!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Pn=Cn.extend({initialize:function(t,e){var n,i;if(p(this,e),this._layers={},t)for(n=0,i=t.length;n<i;n++)this.addLayer(t[n])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&("number"==typeof t?t:this.getLayerId(t))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,n,i=Array.prototype.slice.call(arguments,1);for(e in this._layers)(n=this._layers[e])[t]&&n[t].apply(n,i);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:a}),Ln=Pn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),Pn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),Pn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new B;for(var e in this._layers){var n=this._layers[e];t.extend(n.getBounds?n.getBounds():n.getLatLng())}return t}}),In=P.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){p(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var n=this._getIconUrl(t);if(!n){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var i=this._createImg(n,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(i,t),i},_setIconStyles:function(t,e){var n=this.options,i=n[e+"Size"];"number"==typeof i&&(i=[i,i]);var r=R(i),o=R("shadow"===e&&n.shadowAnchor||n.iconAnchor||r&&r.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(n.className||""),o&&(t.style.marginLeft=-o.x+"px",t.style.marginTop=-o.y+"px"),r&&(t.style.width=r.x+"px",t.style.height=r.y+"px")},_createImg:function(t,e){return(e=e||document.createElement("img")).src=t,e},_getIconUrl:function(t){return Ct&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),An=In.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return An.imagePath||(An.imagePath=this._detectIconPath()),(this.options.imagePath||An.imagePath)+In.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=oe("div","leaflet-default-icon-path",document.body),e=re(t,"background-image")||re(t,"backgroundImage");return document.body.removeChild(t),null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),Mn=en.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new un(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),he(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&de(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e,n=this._marker,i=n._map,r=this._marker.options.autoPanSpeed,o=this._marker.options.autoPanPadding,a=ye(n._icon),s=i.getPixelBounds(),u=i.getPixelOrigin(),l=N(s.min._subtract(u).add(o),s.max._subtract(u).subtract(o));l.contains(a)||(e=R((Math.max(l.max.x,a.x)-l.max.x)/(s.max.x-l.max.x)-(Math.min(l.min.x,a.x)-l.min.x)/(s.min.x-l.min.x),(Math.max(l.max.y,a.y)-l.max.y)/(s.max.y-l.max.y)-(Math.min(l.min.y,a.y)-l.min.y)/(s.min.y-l.min.y)).multiplyBy(r),i.panBy(e,{animate:!1}),this._draggable._newPos._add(e),this._draggable._startPos._add(e),ve(n._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(k(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,n=e._shadow,i=ye(e._icon),r=e._map.layerPointToLatLng(i);n&&ve(n,i),e._latlng=r,t.latlng=r,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){k(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),On=Cn.extend({options:{icon:new An,interactive:!0,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,e){p(this,e),this._latlng=F(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){var t;return this._icon&&this._map&&(t=this._map.latLngToLayerPoint(this._latlng).round(),this._setPos(t)),this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),n=t.icon.createIcon(this._icon),i=!1;n!==this._icon&&(this._icon&&this._removeIcon(),i=!0,t.title&&(n.title=t.title),"IMG"===n.tagName&&(n.alt=t.alt||"")),he(n,e),t.keyboard&&(n.tabIndex="0"),this._icon=n,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var r=t.icon.createShadow(this._shadow),o=!1;r!==this._shadow&&(this._removeShadow(),o=!0),r&&(he(r,e),r.alt=""),this._shadow=r,t.opacity<1&&this._updateOpacity(),i&&this.getPane().appendChild(this._icon),this._initInteraction(),r&&o&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),ae(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ae(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&ve(this._icon,t),this._shadow&&ve(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){var t;this.options.interactive&&(he(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Mn&&(t=this.options.draggable,this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Mn(this),t&&this.dragging.enable()))},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&me(this._icon,t),this._shadow&&me(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),Rn=Cn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return p(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),Dn=Rn.extend({options:{fill:!0,radius:10},initialize:function(t,e){p(this,e),this._latlng=F(t),this._radius=this.options.radius},setLatLng:function(t){var e=this._latlng;return this._latlng=F(t),this.redraw(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return Rn.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,n=this._clickTolerance(),i=[t+n,e+n];this._pxBounds=new D(this._point.subtract(i),this._point.add(i))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),Nn=Dn.extend({initialize:function(t,n,i){if("number"==typeof n&&(n=e({},i,{radius:n})),p(this,n),this._latlng=F(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new B(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Rn.prototype.setStyle,_project:function(){var t,e,n,i,r,o,a,s,u=this._latlng.lng,l=this._latlng.lat,c=this._map,h=c.options.crs;h.distance===Z.distance?(t=Math.PI/180,e=this._mRadius/Z.R/t,n=c.project([l+e,u]),i=c.project([l-e,u]),r=n.add(i).divideBy(2),o=c.unproject(r).lat,a=Math.acos((Math.cos(e*t)-Math.sin(l*t)*Math.sin(o*t))/(Math.cos(l*t)*Math.cos(o*t)))/t,!isNaN(a)&&0!==a||(a=e/Math.cos(Math.PI/180*l)),this._point=r.subtract(c.getPixelOrigin()),this._radius=isNaN(a)?0:r.x-c.project([o,u-a]).x,this._radiusY=r.y-n.y):(s=h.unproject(h.project(this._latlng).subtract([this._mRadius,0])),this._point=c.latLngToLayerPoint(this._latlng),this._radius=this._point.x-c.latLngToLayerPoint(s).x),this._updateBounds()}}),Bn=Rn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){p(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,n,i=1/0,r=null,o=fn,a=0,s=this._parts.length;a<s;a++)for(var u=this._parts[a],l=1,c=u.length;l<c;l++){var h=o(t,e=u[l-1],n=u[l],!0);h<i&&(i=h,r=o(t,e,n))}return r&&(r.distance=Math.sqrt(i)),r},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s=this._rings[0],u=s.length;if(!u)return null;for(e=t=0;t<u-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(i=t=0;t<u-1;t++)if(r=s[t],o=s[t+1],e<(i+=n=r.distanceTo(o)))return a=(i-e)/n,this._map.layerPointToLatLng([o.x-a*(o.x-r.x),o.y-a*(o.y-r.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=F(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new B,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return mn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],n=mn(t),i=0,r=t.length;i<r;i++)n?(e[i]=F(t[i]),this._bounds.extend(e[i])):e[i]=this._convertLatLngs(t[i]);return e},_project:function(){var t=new D;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),e=new M(t,t);this._pxBounds=new D([this._rawPxBounds.min.subtract(e),this._rawPxBounds.max.add(e)])},_projectLatlngs:function(t,e,n){var i,r,o=t[0]instanceof z,a=t.length;if(o){for(r=[],i=0;i<a;i++)r[i]=this._map.latLngToLayerPoint(t[i]),n.extend(r[i]);e.push(r)}else for(i=0;i<a;i++)this._projectLatlngs(t[i],e,n)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var e,n,i,r,o=this._parts,a=0,s=0,u=this._rings.length;a<u;a++)for(e=0,n=(r=this._rings[a]).length;e<n-1;e++)(i=hn(r[e],r[e+1],t,e,!0))&&(o[s]=o[s]||[],o[s].push(i[0]),i[1]===r[e+1]&&e!==n-2||(o[s].push(i[1]),s++))},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,n=0,i=t.length;n<i;n++)t[n]=ln(t[n],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var n,i,r,o,a,s,u=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(n=0,o=this._parts.length;n<o;n++)for(i=0,r=(a=(s=this._parts[n]).length)-1;i<a;r=i++)if((e||0!==i)&&cn(t,s[r],s[i])<=u)return!0;return!1}});Bn._flat=gn;var Un=Bn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,n,i,r,o,a,s,u,l=this._rings[0],c=l.length;if(!c)return null;for(t=o=a=s=0,e=c-1;t<c;e=t++)n=l[t],i=l[e],r=n.y*i.x-i.y*n.x,a+=(n.x+i.x)*r,s+=(n.y+i.y)*r,o+=3*r;return u=0===o?l[0]:[a/o,s/o],this._map.layerPointToLatLng(u)},_convertLatLngs:function(t){var e=Bn.prototype._convertLatLngs.call(this,t),n=e.length;return 2<=n&&e[0]instanceof z&&e[0].equals(e[n-1])&&e.pop(),e},_setLatLngs:function(t){Bn.prototype._setLatLngs.call(this,t),mn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return mn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,n=new M(e,e);if(t=new D(t.min.subtract(n),t.max.add(n)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t))if(this.options.noClip)this._parts=this._rings;else for(var i,r=0,o=this._rings.length;r<o;r++)(i=vn(this._rings[r],t,!0)).length&&this._parts.push(i)},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,n,i,r,o,a,s,u,l=!1;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(r=0,s=this._parts.length;r<s;r++)for(o=0,a=(u=(e=this._parts[r]).length)-1;o<u;a=o++)n=e[o],i=e[a],n.y>t.y!=i.y>t.y&&t.x<(i.x-n.x)*(t.y-n.y)/(i.y-n.y)+n.x&&(l=!l);return l||Bn.prototype._containsPoint.call(this,t,!0)}}),zn=Ln.extend({initialize:function(t,e){p(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,n,i,r=_(t)?t:t.features;if(r){for(e=0,n=r.length;e<n;e++)((i=r[e]).geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var o=this.options;if(o.filter&&!o.filter(t))return this;var a=Fn(t,o);return a?(a.feature=Gn(t),a.defaultOptions=a.options,this.resetStyle(a),o.onEachFeature&&o.onEachFeature(t,a),this.addLayer(a)):this},resetStyle:function(t){return void 0===t?this.eachLayer(this.resetStyle,this):(t.options=e({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer((function(e){this._setLayerStyle(e,t)}),this)},_setLayerStyle:function(t,e){t.setStyle&&("function"==typeof e&&(e=e(t.feature)),t.setStyle(e))}});function Fn(t,e){var n,i,r,o,a="Feature"===t.type?t.geometry:t,s=a?a.coordinates:null,u=[],l=e&&e.pointToLayer,c=e&&e.coordsToLatLng||Hn;if(!s&&!a)return null;switch(a.type){case"Point":return jn(l,t,n=c(s),e);case"MultiPoint":for(r=0,o=s.length;r<o;r++)n=c(s[r]),u.push(jn(l,t,n,e));return new Ln(u);case"LineString":case"MultiLineString":return i=Zn(s,"LineString"===a.type?0:1,c),new Bn(i,e);case"Polygon":case"MultiPolygon":return i=Zn(s,"Polygon"===a.type?1:2,c),new Un(i,e);case"GeometryCollection":for(r=0,o=a.geometries.length;r<o;r++){var h=Fn({geometry:a.geometries[r],type:"Feature",properties:t.properties},e);h&&u.push(h)}return new Ln(u);default:throw new Error("Invalid GeoJSON object.")}}function jn(t,e,n,i){return t?t(e,n):new On(n,i&&i.markersInheritOptions&&i)}function Hn(t){return new z(t[1],t[0],t[2])}function Zn(t,e,n){for(var i,r=[],o=0,a=t.length;o<a;o++)i=e?Zn(t[o],e-1,n):(n||Hn)(t[o]),r.push(i);return r}function Wn(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[c(t.lng,e),c(t.lat,e),c(t.alt,e)]:[c(t.lng,e),c(t.lat,e)]}function qn(t,e,n,i){for(var r=[],o=0,a=t.length;o<a;o++)r.push(e?qn(t[o],e-1,n,i):Wn(t[o],i));return!e&&n&&r.push(r[0]),r}function Vn(t,n){return t.feature?e({},t.feature,{geometry:n}):Gn(n)}function Gn(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}var Yn={toGeoJSON:function(t){return Vn(this,{type:"Point",coordinates:Wn(this.getLatLng(),t)})}};function Xn(t,e){return new zn(t,e)}On.include(Yn),Nn.include(Yn),Dn.include(Yn),Bn.include({toGeoJSON:function(t){var e=!mn(this._latlngs);return Vn(this,{type:(e?"Multi":"")+"LineString",coordinates:qn(this._latlngs,e?1:0,!1,t)})}}),Un.include({toGeoJSON:function(t){var e=!mn(this._latlngs),n=e&&!mn(this._latlngs[0]),i=qn(this._latlngs,n?2:e?1:0,!0,t);return e||(i=[i]),Vn(this,{type:(n?"Multi":"")+"Polygon",coordinates:i})}}),Pn.include({toMultiPoint:function(t){var e=[];return this.eachLayer((function(n){e.push(n.toGeoJSON(t).geometry.coordinates)})),Vn(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var n="GeometryCollection"===e,i=[];return this.eachLayer((function(e){var r,o;e.toGeoJSON&&(r=e.toGeoJSON(t),n?i.push(r.geometry):"FeatureCollection"===(o=Gn(r)).type?i.push.apply(i,o.features):i.push(o))})),n?Vn(this,{geometries:i,type:"GeometryCollection"}):{type:"FeatureCollection",features:i}}});var Kn=Xn,Qn=Cn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,n){this._url=t,this._bounds=U(e),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(he(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ae(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ue(this._image),this},bringToBack:function(){return this._map&&le(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=U(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:oe("img");he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onload=r(this.fire,this,"load"),e.onerror=r(this._overlayOnError,this,"error"),!this.options.crossOrigin&&""!==this.options.crossOrigin||(e.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t?this._url=e.src:(e.src=this._url,e.alt=this.options.alt)},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;_e(this._image,n,e)},_reset:function(){var t=this._image,e=new D(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=e.getSize();ve(t,e.min),t.style.width=n.x+"px",t.style.height=n.y+"px"},_updateOpacity:function(){me(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),$n=Qn.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:oe("video");if(he(e,"leaflet-image-layer"),this._zoomAnimated&&he(e,"leaflet-zoom-animated"),this.options.className&&he(e,this.options.className),e.onselectstart=l,e.onmousemove=l,e.onloadeddata=r(this.fire,this,"load"),t){for(var n=e.getElementsByTagName("source"),i=[],o=0;o<n.length;o++)i.push(n[o].src);this._url=0<n.length?i:[e.src]}else{_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(e.style,"objectFit")&&(e.style.objectFit="fill"),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop,e.muted=!!this.options.muted;for(var a=0;a<this._url.length;a++){var s=oe("source");s.src=this._url[a],e.appendChild(s)}}}}),Jn=Qn.extend({_initImage:function(){var t=this._image=this._url;he(t,"leaflet-image-layer"),this._zoomAnimated&&he(t,"leaflet-zoom-animated"),this.options.className&&he(t,this.options.className),t.onselectstart=l,t.onmousemove=l}}),ti=Cn.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){p(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&me(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&me(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(me(this._container,0),this._removeTimeout=setTimeout(r(ae,void 0,this._container),200)):ae(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=F(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ue(this._container),this},bringToBack:function(){return this._map&&le(this._container),this},_prepareOpen:function(t,e,n){if(e instanceof Cn||(n=e,e=t),e instanceof Ln)for(var i in t._layers){e=t._layers[i];break}if(!n)if(e.getCenter)n=e.getCenter();else{if(!e.getLatLng)throw new Error("Unable to get source layer LatLng.");n=e.getLatLng()}return this._source=e,this.update(),n},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){var t,e,n,i,r;this._map&&(t=this._map.latLngToLayerPoint(this._latlng),e=R(this.options.offset),n=this._getAnchor(),this._zoomAnimated?ve(this._container,t.add(n)):e=e.add(t).add(n),i=this._containerBottom=-e.y,r=this._containerLeft=-Math.round(this._containerWidth/2)+e.x,this._container.style.bottom=i+"px",this._container.style.left=r+"px")},_getAnchor:function(){return[0,0]}}),ei=ti.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){ti.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rn||this._source.on("preclick",Re))},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rn||this._source.off("preclick",Re))},getEvents:function(){var t=ti.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",n=this._container=oe("div",e+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=oe("div",e+"-content-wrapper",n);this._contentNode=oe("div",e+"-content",i),Ne(n),De(this._contentNode),Ce(n,"contextmenu",Re),this._tipContainer=oe("div",e+"-tip-container",n),this._tip=oe("div",e+"-tip",this._tipContainer),this.options.closeButton&&((t=this._closeButton=oe("a",e+"-close-button",n)).href="#close",t.innerHTML="&#215;",Ce(t,"click",this._onCloseButtonClick,this))},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var n=t.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),e.width=n+1+"px",e.whiteSpace="",e.height="";var i=t.offsetHeight,r=this.options.maxHeight,o="leaflet-popup-scrolled";r&&r<i?(e.height=r+"px",he(t,o)):de(t,o),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),n=this._getAnchor();ve(this._container,e.add(n))},_adjustPan:function(){var t,e,n,i,r,o,a,s,u,l,c,h;this.options.autoPan&&(this._map._panAnim&&this._map._panAnim.stop(),t=this._map,e=parseInt(re(this._container,"marginBottom"),10)||0,n=this._container.offsetHeight+e,i=this._containerWidth,(r=new M(this._containerLeft,-n-this._containerBottom))._add(ye(this._container)),o=t.layerPointToContainerPoint(r),a=R(this.options.autoPanPadding),s=R(this.options.autoPanPaddingTopLeft||a),u=R(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),h=c=0,o.x+i+u.x>l.x&&(c=o.x+i-l.x+u.x),o.x-c-s.x<0&&(c=o.x-s.x),o.y+n+u.y>l.y&&(h=o.y+n-l.y+u.y),o.y-h-s.y<0&&(h=o.y-s.y),(c||h)&&t.fire("autopanstart").panBy([c,h]))},_onCloseButtonClick:function(t){this._close(),Ue(t)},_getAnchor:function(){return R(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}});Ye.mergeOptions({closePopupOnClick:!0}),Ye.include({openPopup:function(t,e,n){return t instanceof ei||(t=new ei(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),Cn.include({bindPopup:function(t,e){return t instanceof ei?(p(t,e),(this._popup=t)._source=this):(this._popup&&!e||(this._popup=new ei(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){return this._popup&&this._map&&(e=this._popup._prepareOpen(this,t,e),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;this._popup&&this._map&&(Ue(t),e instanceof Rn?this.openPopup(t.layer||t.target,t.latlng):this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng))},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var ni=ti.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){ti.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){ti.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=ti.prototype.getEvents.call(this);return St&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=oe("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e,n=this._map,i=this._container,r=n.latLngToContainerPoint(n.getCenter()),o=n.layerPointToContainerPoint(t),a=this.options.direction,s=i.offsetWidth,u=i.offsetHeight,l=R(this.options.offset),c=this._getAnchor(),h="top"===a?(e=s/2,u):"bottom"===a?(e=s/2,0):(e="center"===a?s/2:"right"===a?0:"left"===a?s:o.x<r.x?(a="right",0):(a="left",s+2*(l.x+c.x)),u/2);t=t.subtract(R(e,h,!0)).add(l).add(c),de(i,"leaflet-tooltip-right"),de(i,"leaflet-tooltip-left"),de(i,"leaflet-tooltip-top"),de(i,"leaflet-tooltip-bottom"),he(i,"leaflet-tooltip-"+a),ve(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&me(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return R(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}});Ye.include({openTooltip:function(t,e,n){return t instanceof ni||(t=new ni(n).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),Cn.include({bindTooltip:function(t,e){return t instanceof ni?(p(t,e),(this._tooltip=t)._source=this):(this._tooltip&&!e||(this._tooltip=new ni(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){var e,n;!t&&this._tooltipHandlersAdded||(e=t?"off":"on",n={remove:this.closeTooltip,move:this._moveTooltip},this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),St&&(n.click=this._openTooltip)),this[e](n),this._tooltipHandlersAdded=!t)},openTooltip:function(t,e){return this._tooltip&&this._map&&(e=this._tooltip._prepareOpen(this,t,e),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(he(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(de(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,n,i=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),n=this._map.containerPointToLayerPoint(e),i=this._map.layerPointToLatLng(n)),this._tooltip.setLatLng(i)}});var ii=In.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e,n=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;return i.html instanceof Element?(se(n),n.appendChild(i.html)):n.innerHTML=!1!==i.html?i.html:"",i.bgPos&&(e=R(i.bgPos),n.style.backgroundPosition=-e.x+"px "+-e.y+"px"),this._setIconStyles(n,"icon"),n},createShadow:function(){return null}});In.Default=An;var ri=Cn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:yt,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){p(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),ae(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ue(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=s(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof M?t:new M(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,n=this.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._container&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!et){me(this._container,this.options.opacity);var t=+new Date,e=!1,n=!1;for(var i in this._tiles){var r,o=this._tiles[i];o.current&&o.loaded&&(r=Math.min(1,(t-o.loaded)/200),me(o.el,r),r<1?e=!0:(o.active?n=!0:this._onOpaqueTile(o),o.active=!0))}n&&!this._noPrune&&this._pruneTiles(),e&&(k(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=oe("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===t?(this._levels[n].el.style.zIndex=e-Math.abs(t-n),this._onUpdateLevel(n)):(ae(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var i=this._levels[t],r=this._map;return i||((i=this._levels[t]={}).el=oe("div","leaflet-tile-container leaflet-zoom-animated",this._container),i.el.style.zIndex=e,i.origin=r.project(r.unproject(r.getPixelOrigin()),t).round(),i.zoom=t,this._setZoomTransform(i,r.getCenter(),r.getZoom()),l(i.el.offsetWidth),this._onCreateLevel(i)),this._level=i}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var t,e,n,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)this._removeAllTiles();else{for(t in this._tiles)(n=this._tiles[t]).retain=n.current;for(t in this._tiles)(n=this._tiles[t]).current&&!n.active&&(e=n.coords,this._retainParent(e.x,e.y,e.z,e.z-5)||this._retainChildren(e.x,e.y,e.z,e.z+2));for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)ae(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new M(+r,+o);s.z=+a;var u=this._tileCoordsToKey(s),l=this._tiles[u];return l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i<a&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new M(r,o);a.z=n+1;var s=this._tileCoordsToKey(a),u=this._tiles[s];u&&u.active?u.retain=!0:(u&&u.loaded&&(u.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,n,i){var r=Math.round(e),o=(r=void 0!==this.options.maxZoom&&r>this.options.maxZoom||void 0!==this.options.minZoom&&r<this.options.minZoom?void 0:this._clampZoom(r),this.options.updateWhenZooming&&r!==this._tileZoom);i&&!o||(this._tileZoom=r,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var n in this._levels)this._setZoomTransform(this._levels[n],t,e)},_setZoomTransform:function(t,e,n){var i=this._map.getZoomScale(n,t.zoom),r=t.origin.multiplyBy(i).subtract(this._map._getNewPixelOrigin(e,n)).round();vt?_e(t.el,r,i):ve(t.el,r)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._tileSize=this.getTileSize(),i=this._tileZoom,r=this._map.getPixelWorldBounds(this._tileZoom);r&&(this._globalTileRange=this._pxBoundsToTileRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._tileZoom),r=e.project(t,this._tileZoom).floor(),o=e.getSize().divideBy(2*i);return new D(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var i=this._getTiledPixelBounds(t),r=this._pxBoundsToTileRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,u=new D(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var l in this._tiles){var c=this._tiles[l].coords;c.z===this._tileZoom&&u.contains(new M(c.x,c.y))||(this._tiles[l].current=!1)}if(1<Math.abs(n-this._tileZoom))this._setView(t,n);else{for(var h=r.min.y;h<=r.max.y;h++)for(var d=r.min.x;d<=r.max.x;d++){var p,f=new M(d,h);f.z=this._tileZoom,this._isValidTile(f)&&((p=this._tiles[this._tileCoordsToKey(f)])?p.current=!0:a.push(f))}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length){this._loading||(this._loading=!0,this.fire("loading"));var m=document.createDocumentFragment();for(d=0;d<a.length;d++)this._addTile(a[d],m);this._level.el.appendChild(m)}}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalTileRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._tileCoordsToBounds(t);return U(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,n=this.getTileSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),n=new B(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),n=new M(+e[0],+e[1]);return n.z=+e[2],n},_removeTile:function(t){var e=this._tiles[t];e&&(ae(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){he(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=l,t.onmousemove=l,et&&this.options.opacity<1&&me(t,this.options.opacity),rt&&!ot&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var n=this._getTilePos(t),i=this._tileCoordsToKey(t),o=this.createTile(this._wrapCoords(t),r(this._tileReady,this,t));this._initTile(o),this.createTile.length<2&&E(r(this._tileReady,this,t,null,o)),ve(o,n),this._tiles[i]={el:o,coords:t,current:!0},e.appendChild(o),this.fire("tileloadstart",{tile:o,coords:t})},_tileReady:function(t,e,n){e&&this.fire("tileerror",{error:e,tile:n,coords:t});var i=this._tileCoordsToKey(t);(n=this._tiles[i])&&(n.loaded=+new Date,this._map._fadeAnimated?(me(n.el,0),k(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),e||(he(n.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:n.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),et||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(r(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new M(this._wrapX?u(t.x,this._wrapX):t.x,this._wrapY?u(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new D(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),oi=ri.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,(e=p(this,e)).detectRetina&&Ct&&0<e.maxZoom&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),rt||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url===t&&void 0===e&&(e=!0),this._url=t,e||this.redraw(),this},createTile:function(t,e){var n=document.createElement("img");return Ce(n,"load",r(this._tileOnLoad,this,e,n)),Ce(n,"error",r(this._tileOnError,this,e,n)),!this.options.crossOrigin&&""!==this.options.crossOrigin||(n.crossOrigin=!0===this.options.crossOrigin?"":this.options.crossOrigin),n.alt="",n.setAttribute("role","presentation"),n.src=this.getTileUrl(t),n},getTileUrl:function(t){var n,i={r:Ct?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};return this._map&&!this._map.options.crs.infinite&&(n=this._globalTileRange.max.y-t.y,this.options.tms&&(i.y=n),i["-y"]=n),g(this._url,e(i,this.options))},_tileOnLoad:function(t,e){et?setTimeout(r(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,n){var i=this.options.errorTileUrl;i&&e.getAttribute("src")!==i&&(e.src=i),t(n,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom;return this.options.zoomReverse&&(t=e-t),t+this.options.zoomOffset},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&((e=this._tiles[t].el).onload=l,e.onerror=l,e.complete||(e.src=y,ae(e),delete this._tiles[t]))},_removeTile:function(t){var e=this._tiles[t];if(e)return st||e.el.setAttribute("src",y),ri.prototype._removeTile.call(this,t)},_tileReady:function(t,e,n){if(this._map&&(!n||n.getAttribute("src")!==y))return ri.prototype._tileReady.call(this,t,e,n)}});function ai(t,e){return new oi(t,e)}var si=oi.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,n){this._url=t;var i=e({},this.defaultWmsParams);for(var r in n)r in this.options||(i[r]=n[r]);var o=(n=p(this,n)).detectRetina&&Ct?2:1,a=this.getTileSize();i.width=a.x*o,i.height=a.y*o,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=1.3<=this._wmsVersion?"crs":"srs";this.wmsParams[e]=this._crs.code,oi.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),n=this._crs,i=N(n.project(e[0]),n.project(e[1])),r=i.min,o=i.max,a=(1.3<=this._wmsVersion&&this._crs===En?[r.y,r.x,o.y,o.x]:[r.x,r.y,o.x,o.y]).join(","),s=oi.prototype.getTileUrl.call(this,t);return s+f(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+a},setParams:function(t,n){return e(this.wmsParams,t),n||this.redraw(),this}});oi.WMS=si,ai.wms=function(t,e){return new si(t,e)};var ui=Cn.extend({options:{padding:.1,tolerance:0},initialize:function(t){p(this,t),a(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&he(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var n=this._map.getZoomScale(e,this._zoom),i=ye(this._container),r=this._map.getSize().multiplyBy(.5+this.options.padding),o=this._map.project(this._center,e),a=this._map.project(t,e).subtract(o),s=r.multiplyBy(-n).add(i).add(r).subtract(a);vt?_e(this._container,s,n):ve(this._container,s)},_reset:function(){for(var t in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),n=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new D(n,n.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),li=ui.extend({getEvents:function(){var t=ui.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){ui.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ce(t,"mousemove",this._onMouseMove,this),Ce(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ce(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){k(this._redrawRequest),delete this._ctx,ae(this._container),Le(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){for(var t in this._redrawBounds=null,this._layers)this._layers[t]._update();this._redraw()}},_update:function(){var t,e,n,i;this._map._animatingZoom&&this._bounds||(ui.prototype._update.call(this),t=this._bounds,e=this._container,n=t.getSize(),i=Ct?2:1,ve(e,t.min),e.width=i*n.x,e.height=i*n.y,e.style.width=n.x+"px",e.style.height=n.y+"px",Ct&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update"))},_reset:function(){ui.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t);var e=(this._layers[a(t)]=t)._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,n=e.next,i=e.prev;n?n.prev=i:this._drawLast=i,i?i.next=n:this._drawFirst=n,delete t._order,delete this._layers[a(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if("string"==typeof t.options.dashArray){for(var e,n=t.options.dashArray.split(/[, ]+/),i=[],r=0;r<n.length;r++){if(e=Number(n[r]),isNaN(e))return;i.push(e)}t.options._dashArray=i}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){var e;t._pxBounds&&(e=(t.options.weight||0)+1,this._redrawBounds=this._redrawBounds||new D,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e])))},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t,e=this._redrawBounds;e?(t=e.getSize(),this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)):(this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore())},_draw:function(){var t,e,n=this._redrawBounds;this._ctx.save(),n&&(e=n.getSize(),this._ctx.beginPath(),this._ctx.rect(n.min.x,n.min.y,e.x,e.y),this._ctx.clip()),this._drawing=!0;for(var i=this._drawFirst;i;i=i.next)t=i.layer,(!n||t._pxBounds&&t._pxBounds.intersects(n))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var n,i,r,o,a=t._parts,s=a.length,u=this._ctx;if(s){for(u.beginPath(),n=0;n<s;n++){for(i=0,r=a[n].length;i<r;i++)o=a[n][i],u[i?"lineTo":"moveTo"](o.x,o.y);e&&u.closePath()}this._fillStroke(u,t)}}},_updateCircle:function(t){var e,n,i,r;this._drawing&&!t._empty()&&(e=t._point,n=this._ctx,i=Math.max(Math.round(t._radius),1),1!=(r=(Math.max(Math.round(t._radiusY),1)||i)/i)&&(n.save(),n.scale(1,r)),n.beginPath(),n.arc(e.x,e.y/r,i,0,2*Math.PI,!1),1!=r&&n.restore(),this._fillStroke(n,t))},_fillStroke:function(t,e){var n=e.options;n.fill&&(t.globalAlpha=n.fillOpacity,t.fillStyle=n.fillColor||n.color,t.fill(n.fillRule||"evenodd")),n.stroke&&0!==n.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=n.opacity,t.lineWidth=n.weight,t.strokeStyle=n.color,t.lineCap=n.lineCap,t.lineJoin=n.lineJoin,t.stroke())},_onClick:function(t){for(var e,n,i=this._map.mouseEventToLayerPoint(t),r=this._drawFirst;r;r=r.next)(e=r.layer).options.interactive&&e._containsPoint(i)&&(("click"===t.type||"preclick"!==t.type)&&this._map._draggableMoved(e)||(n=e));n&&(Ze(t),this._fireEvent([n],t))},_onMouseMove:function(t){var e;!this._map||this._map.dragging.moving()||this._map._animatingZoom||(e=this._map.mouseEventToLayerPoint(t),this._handleMouseHover(t,e))},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(de(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,e){if(!this._mouseHoverThrottled){for(var n,i,o=this._drawFirst;o;o=o.next)(n=o.layer).options.interactive&&n._containsPoint(e)&&(i=n);i!==this._hoveredLayer&&(this._handleMouseOut(t),i&&(he(this._container,"leaflet-interactive"),this._fireEvent([i],t,"mouseover"),this._hoveredLayer=i)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t),this._mouseHoverThrottled=!0,setTimeout(r((function(){this._mouseHoverThrottled=!1}),this),32)}},_fireEvent:function(t,e,n){this._map._fireDOMEvent(e,n||e.type,t)},_bringToFront:function(t){var e,n,i=t._order;i&&(e=i.next,n=i.prev,e&&((e.prev=n)?n.next=e:e&&(this._drawFirst=e),i.prev=this._drawLast,(this._drawLast.next=i).next=null,this._drawLast=i,this._requestRedraw(t)))},_bringToBack:function(t){var e,n,i=t._order;i&&(e=i.next,(n=i.prev)&&((n.next=e)?e.prev=n:n&&(this._drawLast=n),i.prev=null,i.next=this._drawFirst,this._drawFirst.prev=i,this._drawFirst=i,this._requestRedraw(t)))}});function ci(t){return Lt?new li(t):null}var hi=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),di={_initContainer:function(){this._container=oe("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(ui.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=hi("shape");he(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=hi("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;ae(e),t.removeInteractiveTarget(e),delete this._layers[a(t)]},_updateStyle:function(t){var e=t._stroke,n=t._fill,i=t.options,r=t._container;r.stroked=!!i.stroke,r.filled=!!i.fill,i.stroke?(e=e||(t._stroke=hi("stroke")),r.appendChild(e),e.weight=i.weight+"px",e.color=i.color,e.opacity=i.opacity,i.dashArray?e.dashStyle=_(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=i.lineCap.replace("butt","flat"),e.joinstyle=i.lineJoin):e&&(r.removeChild(e),t._stroke=null),i.fill?(n=n||(t._fill=hi("fill")),r.appendChild(n),n.color=i.fillColor||i.color,n.opacity=i.fillOpacity):n&&(r.removeChild(n),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),n=Math.round(t._radius),i=Math.round(t._radiusY||n);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+n+","+i+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){ue(t._container)},_bringToBack:function(t){le(t._container)}},pi=At?hi:Q,fi=ui.extend({getEvents:function(){var t=ui.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=pi("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=pi("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ae(this._container),Le(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){var t,e,n;this._map._animatingZoom&&this._bounds||(ui.prototype._update.call(this),e=(t=this._bounds).getSize(),n=this._container,this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,n.setAttribute("width",e.x),n.setAttribute("height",e.y)),ve(n,t.min),n.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update"))},_initPath:function(t){var e=t._path=pi("path");t.options.className&&he(e,t.options.className),t.options.interactive&&he(e,"leaflet-interactive"),this._updateStyle(t),this._layers[a(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){ae(t._path),t.removeInteractiveTarget(t._path),delete this._layers[a(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,n=t.options;e&&(n.stroke?(e.setAttribute("stroke",n.color),e.setAttribute("stroke-opacity",n.opacity),e.setAttribute("stroke-width",n.weight),e.setAttribute("stroke-linecap",n.lineCap),e.setAttribute("stroke-linejoin",n.lineJoin),n.dashArray?e.setAttribute("stroke-dasharray",n.dashArray):e.removeAttribute("stroke-dasharray"),n.dashOffset?e.setAttribute("stroke-dashoffset",n.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),n.fill?(e.setAttribute("fill",n.fillColor||n.color),e.setAttribute("fill-opacity",n.fillOpacity),e.setAttribute("fill-rule",n.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,$(t._parts,e))},_updateCircle:function(t){var e=t._point,n=Math.max(Math.round(t._radius),1),i="a"+n+","+(Math.max(Math.round(t._radiusY),1)||n)+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-n)+","+e.y+i+2*n+",0 "+i+2*-n+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){ue(t._path)},_bringToBack:function(t){le(t._path)}});function mi(t){return It||At?new fi(t):null}At&&fi.include(di),Ye.include({getRenderer:function(t){var e=(e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer)||(this._renderer=this._createRenderer());return this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=this._createRenderer({pane:t}),this._paneRenderers[t]=e),e},_createRenderer:function(t){return this.options.preferCanvas&&ci(t)||mi(t)}});var gi=Un.extend({initialize:function(t,e){Un.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return[(t=U(t)).getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});fi.create=pi,fi.pointsToPath=$,zn.geometryToLayer=Fn,zn.coordsToLatLng=Hn,zn.coordsToLatLngs=Zn,zn.latLngToCoords=Wn,zn.latLngsToCoords=qn,zn.getFeature=Vn,zn.asFeature=Gn,Ye.mergeOptions({boxZoom:!0});var _i=en.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ce(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Le(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ae(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),Gt(),be(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ce(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=oe("div","leaflet-zoom-box",this._container),he(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new D(this._point,this._startPoint),n=e.getSize();ve(this._box,e.min),this._box.style.width=n.x+"px",this._box.style.height=n.y+"px"},_finish:function(){this._moved&&(ae(this._box),de(this._container,"leaflet-crosshair")),Yt(),Te(),Le(document,{contextmenu:Ue,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){var e;1!==t.which&&1!==t.button||(this._finish(),this._moved&&(this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(r(this._resetState,this),0),e=new B(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point)),this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})))},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Ye.addInitHook("addHandler","boxZoom",_i),Ye.mergeOptions({doubleClickZoom:!0});var vi=en.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,n=e.getZoom(),i=e.options.zoomDelta,r=t.originalEvent.shiftKey?n-i:n+i;"center"===e.options.doubleClickZoom?e.setZoom(r):e.setZoomAround(t.containerPoint,r)}});Ye.addInitHook("addHandler","doubleClickZoom",vi),Ye.mergeOptions({dragging:!0,inertia:!ot,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var yi=en.extend({addHooks:function(){var t;this._draggable||(t=this._map,this._draggable=new un(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))),he(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){de(this._map._container,"leaflet-grab"),de(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t,e=this._map;e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity?(t=U(this._map.options.maxBounds),this._offsetLimit=N(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))):this._offsetLimit=null,e.fire("movestart").fire("dragstart"),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){var e,n;this._map.options.inertia&&(e=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos,this._positions.push(n),this._times.push(e),this._prunePositions(e)),this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;1<this._positions.length&&50<t-this._times[0];)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){var t,e;this._viscosity&&this._offsetLimit&&(t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit,t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t))},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),n=this._initialWorldOffset,i=this._draggable._newPos.x,r=(i-e+n)%t+e-n,o=(i+e+n)%t-e-n,a=Math.abs(r+n)<Math.abs(o+n)?r:o;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=a},_onDragEnd:function(t){var e,n,i,r,o,a,s,u,l,c=this._map,h=c.options,d=!h.inertia||this._times.length<2;c.fire("dragend",t),d?c.fire("moveend"):(this._prunePositions(+new Date),e=this._lastPos.subtract(this._positions[0]),n=(this._lastTime-this._times[0])/1e3,i=h.easeLinearity,o=(r=e.multiplyBy(i/n)).distanceTo([0,0]),a=Math.min(h.inertiaMaxSpeed,o),s=r.multiplyBy(a/o),u=a/(h.inertiaDeceleration*i),(l=s.multiplyBy(-u/2).round()).x||l.y?(l=c._limitOffset(l,c.options.maxBounds),E((function(){c.panBy(l,{duration:u,easeLinearity:i,noMoveStart:!0,animate:!0})}))):c.fire("moveend"))}});Ye.addInitHook("addHandler","dragging",yi),Ye.mergeOptions({keyboard:!0,keyboardPanDelta:80});var bi=en.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ce(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Le(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){var t,e,n,i;this._focused||(t=document.body,e=document.documentElement,n=t.scrollTop||e.scrollTop,i=t.scrollLeft||e.scrollLeft,this._map._container.focus(),window.scrollTo(i,n))},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){for(var e=this._panKeys={},n=this.keyCodes,i=0,r=n.left.length;i<r;i++)e[n.left[i]]=[-1*t,0];for(i=0,r=n.right.length;i<r;i++)e[n.right[i]]=[t,0];for(i=0,r=n.down.length;i<r;i++)e[n.down[i]]=[0,t];for(i=0,r=n.up.length;i<r;i++)e[n.up[i]]=[0,-1*t]},_setZoomDelta:function(t){for(var e=this._zoomKeys={},n=this.keyCodes,i=0,r=n.zoomIn.length;i<r;i++)e[n.zoomIn[i]]=t;for(i=0,r=n.zoomOut.length;i<r;i++)e[n.zoomOut[i]]=-t},_addHooks:function(){Ce(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Le(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,n=t.keyCode,i=this._map;if(n in this._panKeys)i._panAnim&&i._panAnim._inProgress||(e=this._panKeys[n],t.shiftKey&&(e=R(e).multiplyBy(3)),i.panBy(e),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds));else if(n in this._zoomKeys)i.setZoom(i.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[n]);else{if(27!==n||!i._popup||!i._popup.options.closeOnEscapeKey)return;i.closePopup()}Ue(t)}}});Ye.addInitHook("addHandler","keyboard",bi),Ye.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Ti=en.extend({addHooks:function(){Ce(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Le(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=je(t),n=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(n-(new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(r(this._performZoom,this),i),Ue(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),n=this._map.options.zoomSnap||0;t._stop();var i=this._delta/(4*this._map.options.wheelPxPerZoomLevel),r=4*Math.log(2/(1+Math.exp(-Math.abs(i))))/Math.LN2,o=n?Math.ceil(r/n)*n:r,a=t._limitZoom(e+(0<this._delta?o:-o))-e;this._delta=0,this._startTime=null,a&&("center"===t.options.scrollWheelZoom?t.setZoom(e+a):t.setZoomAround(this._lastMousePos,e+a))}});Ye.addInitHook("addHandler","scrollWheelZoom",Ti),Ye.mergeOptions({tap:!0,tapTolerance:15});var wi=en.extend({addHooks:function(){Ce(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Le(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(Be(t),this._fireClick=!0,1<t.touches.length)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],n=e.target;this._startPos=this._newPos=new M(e.clientX,e.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&he(n,"leaflet-active"),this._holdTimeout=setTimeout(r((function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))}),this),1e3),this._simulateEvent("mousedown",e),Ce(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){var e,n;clearTimeout(this._holdTimeout),Le(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches&&((n=(e=t.changedTouches[0]).target)&&n.tagName&&"a"===n.tagName.toLowerCase()&&de(n,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e))},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new M(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var n=document.createEvent("MouseEvents");n._simulated=!0,e.target._simulatedClick=!0,n.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(n)}});!St||xt&&!ht||Ye.addInitHook("addHandler","tap",wi),Ye.mergeOptions({touchZoom:St&&!ot,bounceAtZoomLimits:!0});var xi=en.extend({addHooks:function(){he(this._map._container,"leaflet-touch-zoom"),Ce(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){de(this._map._container,"leaflet-touch-zoom"),Le(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e,n,i=this._map;!t.touches||2!==t.touches.length||i._animatingZoom||this._zooming||(e=i.mouseEventToContainerPoint(t.touches[0]),n=i.mouseEventToContainerPoint(t.touches[1]),this._centerPoint=i.getSize()._divideBy(2),this._startLatLng=i.containerPointToLatLng(this._centerPoint),"center"!==i.options.touchZoom&&(this._pinchStartLatLng=i.containerPointToLatLng(e.add(n)._divideBy(2))),this._startDist=e.distanceTo(n),this._startZoom=i.getZoom(),this._moved=!1,this._zooming=!0,i._stop(),Ce(document,"touchmove",this._onTouchMove,this),Ce(document,"touchend",this._onTouchEnd,this),Be(t))},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,n=e.mouseEventToContainerPoint(t.touches[0]),i=e.mouseEventToContainerPoint(t.touches[1]),o=n.distanceTo(i)/this._startDist;if(this._zoom=e.getScaleZoom(o,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&o<1||this._zoom>e.getMaxZoom()&&1<o)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1==o)return}else{var a=n._add(i)._divideBy(2)._subtract(this._centerPoint);if(1==o&&0===a.x&&0===a.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(a),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),k(this._animRequest);var s=r(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=E(s,this,!0),Be(t)}},_onTouchEnd:function(){this._moved&&this._zooming?(this._zooming=!1,k(this._animRequest),Le(document,"touchmove",this._onTouchMove,this),Le(document,"touchend",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))):this._zooming=!1}});Ye.addInitHook("addHandler","touchZoom",xi),Ye.BoxZoom=_i,Ye.DoubleClickZoom=vi,Ye.Drag=yi,Ye.Keyboard=bi,Ye.ScrollWheelZoom=Ti,Ye.Tap=wi,Ye.TouchZoom=xi,t.version="1.7.1",t.Control=Ke,t.control=Xe,t.Browser=Ot,t.Evented=A,t.Mixin=rn,t.Util=C,t.Class=P,t.Handler=en,t.extend=e,t.bind=r,t.stamp=a,t.setOptions=p,t.DomEvent=Ve,t.DomUtil=ke,t.PosAnimation=Ge,t.Draggable=un,t.LineUtil=_n,t.PolyUtil=bn,t.Point=M,t.point=R,t.Bounds=D,t.bounds=N,t.Transformation=V,t.transformation=G,t.Projection=xn,t.LatLng=z,t.latLng=F,t.LatLngBounds=B,t.latLngBounds=U,t.CRS=H,t.GeoJSON=zn,t.geoJSON=Xn,t.geoJson=Kn,t.Layer=Cn,t.LayerGroup=Pn,t.layerGroup=function(t,e){return new Pn(t,e)},t.FeatureGroup=Ln,t.featureGroup=function(t,e){return new Ln(t,e)},t.ImageOverlay=Qn,t.imageOverlay=function(t,e,n){return new Qn(t,e,n)},t.VideoOverlay=$n,t.videoOverlay=function(t,e,n){return new $n(t,e,n)},t.SVGOverlay=Jn,t.svgOverlay=function(t,e,n){return new Jn(t,e,n)},t.DivOverlay=ti,t.Popup=ei,t.popup=function(t,e){return new ei(t,e)},t.Tooltip=ni,t.tooltip=function(t,e){return new ni(t,e)},t.Icon=In,t.icon=function(t){return new In(t)},t.DivIcon=ii,t.divIcon=function(t){return new ii(t)},t.Marker=On,t.marker=function(t,e){return new On(t,e)},t.TileLayer=oi,t.tileLayer=ai,t.GridLayer=ri,t.gridLayer=function(t){return new ri(t)},t.SVG=fi,t.svg=mi,t.Renderer=ui,t.Canvas=li,t.canvas=ci,t.Path=Rn,t.CircleMarker=Dn,t.circleMarker=function(t,e){return new Dn(t,e)},t.Circle=Nn,t.circle=function(t,e,n){return new Nn(t,e,n)},t.Polyline=Bn,t.polyline=function(t,e){return new Bn(t,e)},t.Polygon=Un,t.polygon=function(t,e){return new Un(t,e)},t.Rectangle=gi,t.rectangle=function(t,e){return new gi(t,e)},t.Map=Ye,t.map=function(t,e){return new Ye(t,e)};var Si=window.L;t.noConflict=function(){return window.L=Si,this},window.L=t}(e)},function(t,e,n){!function(t,e,n){"use strict";var i="https://geocode-api.arcgis.com/arcgis/rest/services/World/GeocodeServer/",r=n.Task.extend({path:"findAddressCandidates",params:{outSr:4326,forStorage:!1,outFields:"*",maxLocations:20},setters:{address:"address",neighborhood:"neighborhood",city:"city",subregion:"subregion",region:"region",postal:"postal",country:"country",text:"singleLine",category:"category",token:"token",apikey:"apikey",key:"magicKey",fields:"outFields",forStorage:"forStorage",maxLocations:"maxLocations",countries:"sourceCountry"},initialize:function(t){(t=t||{}).url=t.url||i,n.Task.prototype.initialize.call(this,t)},within:function(t){return t=e.latLngBounds(t),this.params.searchExtent=n.Util.boundsToExtent(t),this},nearby:function(t,n){return t=e.latLng(t),this.params.location=t.lng+","+t.lat,n&&(this.params.distance=Math.min(Math.max(n,2e3),5e4)),this},run:function(t,e){return this.options.token&&(this.params.token=this.options.token),this.options.apikey&&(this.params.token=this.options.apikey),this.options.customParam&&(this.params[this.options.customParam]=this.params.singleLine,delete this.params.singleLine),this.request((function(n,i){var r=this._processGeocoderResponse;r=n?void 0:r(i),t.call(e,n,{results:r},i)}),this)},_processGeocoderResponse:function(t){for(var i=[],r=0;r<t.candidates.length;r++){var o,a=t.candidates[r];a.extent&&(o=n.Util.extentToBounds(a.extent)),i.push({text:a.address,bounds:o,score:a.score,latlng:e.latLng(a.location.y,a.location.x),properties:a.attributes})}return i}});function o(t){return new r(t)}var a=n.Task.extend({path:"reverseGeocode",params:{outSR:4326,returnIntersection:!1},setters:{distance:"distance",language:"langCode",intersection:"returnIntersection"},initialize:function(t){(t=t||{}).url=t.url||i,n.Task.prototype.initialize.call(this,t)},latlng:function(t){return t=e.latLng(t),this.params.location=t.lng+","+t.lat,this},run:function(t,n){return this.request((function(i,r){var o=i?void 0:{latlng:e.latLng(r.location.y,r.location.x),address:r.address};t.call(n,i,o,r)}),this)}});function s(t){return new a(t)}var u=n.Task.extend({path:"suggest",params:{},setters:{text:"text",category:"category",countries:"countryCode",maxSuggestions:"maxSuggestions"},initialize:function(t){(t=t||{}).url||(t.url=i,t.supportsSuggest=!0),n.Task.prototype.initialize.call(this,t)},within:function(t){var i=(t=e.latLngBounds(t)).getCenter(),r=t.getNorthWest();return this.params.location=i.lng+","+i.lat,this.params.distance=Math.min(Math.max(i.distanceTo(r),2e3),5e4),this.params.searchExtent=n.Util.boundsToExtent(t),this},nearby:function(t,n){return t=e.latLng(t),this.params.location=t.lng+","+t.lat,n&&(this.params.distance=Math.min(Math.max(n,2e3),5e4)),this},run:function(t,e){if(this.options.supportsSuggest)return this.request((function(n,i){t.call(e,n,i,i)}),this);console.warn("this geocoding service does not support asking for suggestions")}});function l(t){return new u(t)}var c=n.Service.extend({initialize:function(t){(t=t||{}).apikey&&(t.token=t.apikey),t.url?(n.Service.prototype.initialize.call(this,t),this._confirmSuggestSupport()):(t.url=i,t.supportsSuggest=!0,n.Service.prototype.initialize.call(this,t))},geocode:function(){return o(this)},reverse:function(){return s(this)},suggest:function(){return l(this)},_confirmSuggestSupport:function(){this.metadata((function(t,e){t||(e.capabilities&&-1<e.capabilities.indexOf("Suggest")?this.options.supportsSuggest=!0:this.options.supportsSuggest=!1,this.options.customParam=e.singleLineAddressField.name)}),this)}}),h=e.Evented.extend({options:{zoomToResult:!0,useMapBounds:12,searchBounds:null},initialize:function(t,n){if(e.Util.setOptions(this,n),this._control=t,!n||!n.providers||!n.providers.length)throw new Error("You must specify at least one provider");this._providers=n.providers},_geocode:function(t,n,i){var r,o=0,a=[],s=e.Util.bind((function(e,n){o--,e||(n&&(a=a.concat(n)),o<=0&&(r=this._boundsFromResults(a),this.fire("results",{results:a,bounds:r,latlng:r?r.getCenter():void 0,text:t},!0),this.options.zoomToResult&&r&&this._control._map.fitBounds(r),this.fire("load")))}),this);if(n)o++,i.results(t,n,this._searchBounds(),s);else for(var u=0;u<this._providers.length;u++)o++,this._providers[u].results(t,n,this._searchBounds(),s)},_suggest:function(t){var n=this._providers.length,i=0,r=e.Util.bind((function(t,r){return e.Util.bind((function(e,o){if(n-=1,i+=o.length,e)return this._control._clearProviderSuggestions(r),void this._control._finalizeSuggestions(n,i);if(o.length)for(var a=0;a<o.length;a++)o[a].provider=r;else this._control._renderSuggestions(o);r._lastRender!==t&&this._control._clearProviderSuggestions(r),o.length&&this._control._input.value===t&&(r._lastRender=t,this._control._renderSuggestions(o)),this._control._finalizeSuggestions(n,i)}),this)}),this);this._pendingSuggestions=[];for(var o=0;o<this._providers.length;o++){var a=(a=this._providers[o]).suggestions(t,this._searchBounds(),r(t,a));this._pendingSuggestions.push(a)}},_searchBounds:function(){return null!==this.options.searchBounds?this.options.searchBounds:!1!==this.options.useMapBounds&&(!0===this.options.useMapBounds||this.options.useMapBounds<=this._control._map.getZoom())?this._control._map.getBounds():null},_boundsFromResults:function(t){if(t.length){for(var n=e.latLngBounds([0,0],[0,0]),i=[],r=[],o=t.length-1;0<=o;o--){var a=t[o];r.push(a.latlng),a.bounds&&a.bounds.isValid()&&!a.bounds.equals(n)&&i.push(a.bounds)}for(var s=e.latLngBounds(r),u=0;u<i.length;u++)s.extend(i[u]);return s}},_getAttribution:function(){for(var t=[],e=this._providers,n=0;n<e.length;n++)e[n].options.attribution&&t.push(e[n].options.attribution);return t.join(", ")}});function d(t,e){return new h(t,e)}var p=c.extend({options:{label:"Places and Addresses",maxResults:5},suggestions:function(t,e,n){return t=this.suggest().text(t),e&&t.within(e),this.options.nearby&&t.nearby(this.options.nearby),this.options.countries&&t.countries(this.options.countries),this.options.categories&&t.category(this.options.categories),t.maxSuggestions(this.options.maxResults),t.run((function(t,e,i){var r=[];if(!t)for(;i.suggestions.length&&r.length<=this.options.maxResults-1;){var o=i.suggestions.shift();o.isCollection||r.push({text:o.text,unformattedText:o.text,magicKey:o.magicKey})}n(t,r)}),this)},results:function(t,e,n,i){return t=this.geocode().text(t),e&&t.key(e),t.maxLocations(this.options.maxResults),n&&t.within(n),this.options.forStorage&&t.forStorage(!0),this.options.nearby&&t.nearby(this.options.nearby),this.options.countries&&t.countries(this.options.countries),this.options.categories&&t.category(this.options.categories),t.run((function(t,e){i(t,e.results)}),this)}});function f(t){return new p(t)}var m=e.Control.extend({includes:e.Evented.prototype,options:{position:"topleft",collapseAfterResult:!0,expanded:!1,allowMultipleResults:!0,placeholder:"Search for places or addresses",title:"Location Search"},initialize:function(t){e.Util.setOptions(this,t),t&&t.providers&&t.providers.length||((t=t||{}).providers=[f()]),this._geosearchCore=d(this,t),this._geosearchCore._providers=t.providers,this._geosearchCore.addEventParent(this);for(var n=0;n<this._geosearchCore._providers.length;n++)this._geosearchCore._providers[n].addEventParent(this);this._geosearchCore._pendingSuggestions=[],e.Control.prototype.initialize.call(this,t)},_renderSuggestions:function(t){var n,i,r;0<t.length&&(this._suggestions.style.display="block");for(var o=[],a=0;a<t.length;a++){var s=t[a];if(!r&&1<this._geosearchCore._providers.length&&n!==s.provider.options.label&&((r=e.DomUtil.create("div","geocoder-control-header",s.provider._contentsElement)).textContent=s.provider.options.label,r.innerText=s.provider.options.label,n=s.provider.options.label),i=i||e.DomUtil.create("ul","geocoder-control-list",s.provider._contentsElement),-1===o.indexOf(s.text)){var u=e.DomUtil.create("li","geocoder-control-suggestion",i);u.innerHTML=s.text,u.provider=s.provider,u["data-magic-key"]=s.magicKey,u.unformattedText=s.unformattedText}else for(var l=0;l<i.childNodes.length;l++)i.childNodes[l].innerHTML===s.text&&(i.childNodes[l]["data-magic-key"]+=","+s.magicKey);o.push(s.text)}-1<this.getPosition().indexOf("top")&&(this._suggestions.style.maxHeight=this._map.getSize().y-this._suggestions.offsetTop-this._wrapper.offsetTop-10+"px"),-1<this.getPosition().indexOf("bottom")&&this._setSuggestionsBottomPosition()},_setSuggestionsBottomPosition:function(){this._suggestions.style.maxHeight=this._map.getSize().y-this._map._controlCorners[this.getPosition()].offsetHeight-this._wrapper.offsetHeight+"px",this._suggestions.style.top=-this._suggestions.offsetHeight-this._wrapper.offsetHeight+20+"px"},_boundsFromResults:function(t){if(t.length){for(var n=e.latLngBounds([0,0],[0,0]),i=[],r=[],o=t.length-1;0<=o;o--){var a=t[o];r.push(a.latlng),a.bounds&&a.bounds.isValid()&&!a.bounds.equals(n)&&i.push(a.bounds)}for(var s=e.latLngBounds(r),u=0;u<i.length;u++)s.extend(i[u]);return s}},clear:function(){this._clearAllSuggestions(),this.options.collapseAfterResult&&(this._input.value="",this._lastValue="",this._input.placeholder="",e.DomUtil.removeClass(this._wrapper,"geocoder-control-expanded")),!this._map.scrollWheelZoom.enabled()&&this._map.options.scrollWheelZoom&&this._map.scrollWheelZoom.enable()},_clearAllSuggestions:function(){this._suggestions.style.display="none";for(var t=0;t<this.options.providers.length;t++)this._clearProviderSuggestions(this.options.providers[t])},_clearProviderSuggestions:function(t){t._contentsElement.innerHTML=""},_finalizeSuggestions:function(t,n){t||(e.DomUtil.removeClass(this._input,"geocoder-control-loading"),-1<this.getPosition().indexOf("bottom")&&this._setSuggestionsBottomPosition(),n||this._clearAllSuggestions())},_setupClick:function(){e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded"),this._input.focus()},disable:function(){this._input.disabled=!0,e.DomUtil.addClass(this._input,"geocoder-control-input-disabled"),e.DomEvent.removeListener(this._wrapper,"click",this._setupClick,this)},enable:function(){this._input.disabled=!1,e.DomUtil.removeClass(this._input,"geocoder-control-input-disabled"),e.DomEvent.addListener(this._wrapper,"click",this._setupClick,this)},getAttribution:function(){for(var t=[],e=0;e<this._providers.length;e++)this._providers[e].options.attribution&&t.push(this._providers[e].options.attribution);return t.join(", ")},geocodeSuggestion:function(t){(t=t.target||t.srcElement).classList.contains("geocoder-control-suggestions")||t.classList.contains("geocoder-control-header")||(t.classList.length<1&&(t=t.parentNode),this._geosearchCore._geocode(t.unformattedText,t["data-magic-key"],t.provider),this.clear())},onAdd:function(t){n.Util.setEsriAttribution(t),this._map=t,this._wrapper=e.DomUtil.create("div","geocoder-control"),this._input=e.DomUtil.create("input","geocoder-control-input leaflet-bar",this._wrapper),this._input.title=this.options.title,this.options.expanded&&(e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded"),this._input.placeholder=this.options.placeholder),this._suggestions=e.DomUtil.create("div","geocoder-control-suggestions leaflet-bar",this._wrapper);for(var i=0;i<this.options.providers.length;i++)this.options.providers[i]._contentsElement=e.DomUtil.create("div",null,this._suggestions);var r=this._geosearchCore._getAttribution();return t.attributionControl&&t.attributionControl.addAttribution(r),e.DomEvent.addListener(this._input,"focus",(function(t){this._input.placeholder=this.options.placeholder,e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded")}),this),e.DomEvent.addListener(this._wrapper,"click",this._setupClick,this),e.DomEvent.addListener(this._suggestions,"mousedown",this.geocodeSuggestion,this),e.DomEvent.addListener(this._input,"blur",(function(t){this.clear()}),this),e.DomEvent.addListener(this._input,"keydown",(function(t){var n=(t.target||t.srcElement).value;e.DomUtil.addClass(this._wrapper,"geocoder-control-expanded");for(var i,r=this._suggestions.querySelectorAll(".geocoder-control-suggestion"),o=this._suggestions.querySelectorAll(".geocoder-control-selected")[0],a=0;a<r.length;a++)if(r[a]===o){i=a;break}switch(t.keyCode){case 13:o?(this._input.value=o.innerText,this._geosearchCore._geocode(o.unformattedText,o["data-magic-key"],o.provider),this.clear()):this.options.allowMultipleResults&&2<=n.length?(this._geosearchCore._geocode(this._input.value,void 0),this.clear()):1===r.length?(e.DomUtil.addClass(r[0],"geocoder-control-selected"),this._geosearchCore._geocode(r[0].innerHTML,r[0]["data-magic-key"],r[0].provider)):(this.clear(),this._input.blur()),e.DomEvent.preventDefault(t);break;case 38:o&&e.DomUtil.removeClass(o,"geocoder-control-selected");var s=r[i-1];o&&s?e.DomUtil.addClass(s,"geocoder-control-selected"):e.DomUtil.addClass(r[r.length-1],"geocoder-control-selected"),e.DomEvent.preventDefault(t);break;case 40:o&&e.DomUtil.removeClass(o,"geocoder-control-selected"),s=r[i+1],o&&s?e.DomUtil.addClass(s,"geocoder-control-selected"):e.DomUtil.addClass(r[0],"geocoder-control-selected"),e.DomEvent.preventDefault(t);break;default:for(var u=0;u<this._geosearchCore._pendingSuggestions.length;u++){var l=this._geosearchCore._pendingSuggestions[u];l&&l.abort&&!l.id&&l.abort()}}}),this),e.DomEvent.addListener(this._input,"keyup",e.Util.throttle((function(t){var n=t.which||t.keyCode;if((t=(t.target||t.srcElement).value).length<2)return this._lastValue=this._input.value,this._clearAllSuggestions(),void e.DomUtil.removeClass(this._input,"geocoder-control-loading");27!==n?13!==n&&38!==n&&40!==n&&this._input.value!==this._lastValue&&(this._lastValue=this._input.value,e.DomUtil.addClass(this._input,"geocoder-control-loading"),this._geosearchCore._suggest(t)):this._clearAllSuggestions()}),50,this),this),e.DomEvent.disableClickPropagation(this._wrapper),e.DomEvent.addListener(this._suggestions,"mouseover",(function(e){t.scrollWheelZoom.enabled()&&t.options.scrollWheelZoom&&t.scrollWheelZoom.disable()})),e.DomEvent.addListener(this._suggestions,"mouseout",(function(e){!t.scrollWheelZoom.enabled()&&t.options.scrollWheelZoom&&t.scrollWheelZoom.enable()})),this._geosearchCore.on("load",(function(t){e.DomUtil.removeClass(this._input,"geocoder-control-loading"),this.clear(),this._input.blur()}),this),this._wrapper}}),g=n.FeatureLayerService.extend({options:{label:"Feature Layer",maxResults:5,bufferRadius:1e3,searchMode:"contain",formatSuggestion:function(t){return t.properties[this.options.searchFields[0]]}},initialize:function(t){t.apikey&&(t.token=t.apikey),n.FeatureLayerService.prototype.initialize.call(this,t),"string"==typeof this.options.searchFields&&(this.options.searchFields=[this.options.searchFields]),this._suggestionsQuery=this.query(),this._resultsQuery=this.query()},suggestions:function(t,e,n){return t=this._suggestionsQuery.where(this._buildQuery(t)).returnGeometry(!1),e&&t.intersects(e),this.options.idField&&t.fields([this.options.idField].concat(this.options.searchFields)),t.run((function(t,e,i){if(t)n(t,[]);else{this.options.idField=i.objectIdFieldName;for(var r=[],o=e.features.length-1;0<=o;o--){var a=e.features[o];r.push({text:this.options.formatSuggestion.call(this,a),unformattedText:a.properties[this.options.searchFields[0]],magicKey:a.id})}n(t,r.slice(0,this.options.maxResults))}}),this)},results:function(t,n,i,r){var o=this._resultsQuery;return n?(delete o.params.where,o.featureIds([n])):o.where(this._buildQuery(t)),i&&o.within(i),o.run(e.Util.bind((function(t,e){for(var n=[],i=0;i<e.features.length;i++){var o,a=e.features[i];a&&(a={latlng:(o=this._featureBounds(a)).getCenter(),bounds:o,text:this.options.formatSuggestion.call(this,a),properties:a.properties,geojson:a},n.push(a),delete this._resultsQuery.params.objectIds)}r(t,n)}),this))},orderBy:function(t,e){this._suggestionsQuery.orderBy(t,e)},_buildQuery:function(t){for(var e=[],n=this.options.searchFields.length-1;0<=n;n--){var i='upper("'+this.options.searchFields[n]+'")';if("contain"===this.options.searchMode)e.push(i+" LIKE upper('%"+t+"%')");else if("startWith"===this.options.searchMode)e.push(i+" LIKE upper('"+t+"%')");else if("endWith"===this.options.searchMode)e.push(i+" LIKE upper('%"+t+"')");else{if("strict"!==this.options.searchMode)throw new Error('L.esri.Geocoding.featureLayerProvider: Invalid parameter for "searchMode". Use one of "contain", "startWith", "endWith", or "strict"');e.push(i+" LIKE upper('"+t+"')")}}return this.options.where?this.options.where+" AND ("+e.join(" OR ")+")":e.join(" OR ")},_featureBounds:function(t){var n=e.geoJson(t);if("Point"!==t.geometry.type)return n.getBounds();var i=n.getBounds().getCenter();return t=this.options.bufferRadius/40075017*360/Math.cos(180/Math.PI*i.lat),n=this.options.bufferRadius/40075017*360,e.latLngBounds([i.lat-n,i.lng-t],[i.lat+n,i.lng+t])}}),_=n.MapService.extend({options:{layers:[0],label:"Map Service",bufferRadius:1e3,maxResults:5,formatSuggestion:function(t){return t.properties[t.displayFieldName]+" <small>"+t.layerName+"</small>"}},initialize:function(t){t.apikey&&(t.token=t.apikey),n.MapService.prototype.initialize.call(this,t),this._getIdFields()},suggestions:function(t,e,n){return this.find().text(t).fields(this.options.searchFields).returnGeometry(!1).layers(this.options.layers).run((function(t,e,i){var r=[];if(!t){var o=Math.min(this.options.maxResults,e.features.length);i.results=i.results.reverse();for(var a=0;a<o;a++){var s=e.features[a],u=i.results[a],l=u.layerId,c=this._idFields[l];s.layerId=l,s.layerName=this._layerNames[l],s.displayFieldName=this._displayFields[l],c&&r.push({text:this.options.formatSuggestion.call(this,s),unformattedText:s.properties[s.displayFieldName],magicKey:u.attributes[c]+":"+l})}}n(t,r.reverse())}),this)},results:function(t,e,n,i){var r,o,a=[];return(e&&!e.includes(",")?(r=e.split(":")[0],o=e.split(":")[1],this.query().layer(o).featureIds(r)):this.find().text(t).fields(this.options.searchFields).layers(this.options.layers)).run((function(t,e,n){if(!t){n.results&&(n.results=n.results.reverse());for(var r=0;r<e.features.length;r++){var s,u=e.features[r];o=o||n.results[r].layerId,u&&void 0!==o&&(s=this._featureBounds(u),u.layerId=o,u.layerName=this._layerNames[o],u.displayFieldName=this._displayFields[o],u={latlng:s.getCenter(),bounds:s,text:this.options.formatSuggestion.call(this,u),properties:u.properties,geojson:u},a.push(u))}}i(t,a.reverse())}),this)},_featureBounds:function(t){var n=e.geoJson(t);if("Point"!==t.geometry.type)return n.getBounds();var i=n.getBounds().getCenter();return t=this.options.bufferRadius/40075017*360/Math.cos(180/Math.PI*i.lat),n=this.options.bufferRadius/40075017*360,e.latLngBounds([i.lat-n,i.lng-t],[i.lat+n,i.lng+t])},_layerMetadataCallback:function(t){return e.Util.bind((function(e,n){if(!e){this._displayFields[t]=n.displayField,this._layerNames[t]=n.name;for(var i=0;i<n.fields.length;i++){var r=n.fields[i];if("esriFieldTypeOID"===r.type){this._idFields[t]=r.name;break}}}}),this)},_getIdFields:function(){this._idFields={},this._displayFields={},this._layerNames={};for(var t=0;t<this.options.layers.length;t++){var e=this.options.layers[t];this.get(e,{},this._layerMetadataCallback(e))}}}),v=c.extend({options:{label:"Geocode Server",maxResults:5},suggestions:function(t,e,n){return this.options.supportsSuggest?(t=this.suggest().text(t),e&&t.within(e),t.run((function(t,e,i){var r=[];if(!t)for(;i.suggestions.length&&r.length<=this.options.maxResults-1;){var o=i.suggestions.shift();o.isCollection||r.push({text:o.text,unformattedText:o.text,magicKey:o.magicKey})}n(t,r)}),this)):(n(void 0,[]),!1)},results:function(t,e,n,i){return t=this.geocode().text(t),e&&t.key(e),t.maxLocations(this.options.maxResults),n&&t.within(n),t.run((function(t,e){i(t,e.results)}),this)}});t.ArcgisOnlineProvider=p,t.FeatureLayerProvider=g,t.Geocode=r,t.GeocodeService=c,t.GeocodeServiceProvider=v,t.Geosearch=m,t.GeosearchCore=h,t.MapServiceProvider=_,t.ReverseGeocode=a,t.Suggest=u,t.VERSION="3.1.1",t.WorldGeocodingServiceUrl=i,t.arcgisOnlineProvider=f,t.featureLayerProvider=function(t){return new g(t)},t.geocode=o,t.geocodeService=function(t){return new c(t)},t.geocodeServiceProvider=function(t){return new v(t)},t.geosearch=function(t){return new m(t)},t.geosearchCore=d,t.mapServiceProvider=function(t){return new _(t)},t.reverseGeocode=s,t.suggest=l,Object.defineProperty(t,"__esModule",{value:!0})}(e,n(1),n(72))},function(t,e,n){"use strict";n.r(e),n.d(e,"VERSION",(function(){return Ut})),n.d(e,"Support",(function(){return a})),n.d(e,"options",(function(){return s})),n.d(e,"Util",(function(){return G})),n.d(e,"get",(function(){return g})),n.d(e,"post",(function(){return d})),n.d(e,"request",(function(){return f})),n.d(e,"Task",(function(){return Y})),n.d(e,"task",(function(){return X})),n.d(e,"Query",(function(){return K})),n.d(e,"query",(function(){return Q})),n.d(e,"Find",(function(){return J})),n.d(e,"find",(function(){return tt})),n.d(e,"Identify",(function(){return nt})),n.d(e,"identify",(function(){return it})),n.d(e,"IdentifyFeatures",(function(){return rt})),n.d(e,"identifyFeatures",(function(){return ot})),n.d(e,"IdentifyImage",(function(){return st})),n.d(e,"identifyImage",(function(){return ut})),n.d(e,"Service",(function(){return ct})),n.d(e,"service",(function(){return ht})),n.d(e,"MapService",(function(){return dt})),n.d(e,"mapService",(function(){return pt})),n.d(e,"ImageService",(function(){return mt})),n.d(e,"imageService",(function(){return gt})),n.d(e,"FeatureLayerService",(function(){return vt})),n.d(e,"featureLayerService",(function(){return yt})),n.d(e,"BasemapLayer",(function(){return wt})),n.d(e,"basemapLayer",(function(){return xt})),n.d(e,"TiledMapLayer",(function(){return St})),n.d(e,"tiledMapLayer",(function(){return Et})),n.d(e,"RasterLayer",(function(){return Ct})),n.d(e,"ImageMapLayer",(function(){return Pt})),n.d(e,"imageMapLayer",(function(){return Lt})),n.d(e,"DynamicMapLayer",(function(){return It})),n.d(e,"dynamicMapLayer",(function(){return At})),n.d(e,"FeatureManager",(function(){return Dt})),n.d(e,"FeatureLayer",(function(){return Nt})),n.d(e,"featureLayer",(function(){return Bt}));var i=n(43),r=window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest,o=""===document.documentElement.style.pointerEvents,a={cors:r,pointerEvents:o},s={attributionWidthOffset:55},u=n(1),l=0;function c(t){var e="";for(var n in t.f=t.f||"json",t)if(t.hasOwnProperty(n)){var i,r=t[n],o=Object.prototype.toString.call(r);e.length&&(e+="&"),i="[object Array]"===o?"[object Object]"===Object.prototype.toString.call(r[0])?JSON.stringify(r):r.join(","):"[object Object]"===o?JSON.stringify(r):"[object Date]"===o?r.valueOf():r,e+=encodeURIComponent(n)+"="+encodeURIComponent(i)}return e}function h(t,e){var n=new window.XMLHttpRequest;return n.onerror=function(i){n.onreadystatechange=u.Util.falseFn,t.call(e,{error:{code:500,message:"XMLHttpRequest error"}},null)},n.onreadystatechange=function(){var i,r;if(4===n.readyState){try{i=JSON.parse(n.responseText)}catch(o){i=null,r={code:500,message:"Could not parse response as JSON. This could also be caused by a CORS or XMLHttpRequest error."}}!r&&i.error&&(r=i.error,i=null),n.onerror=u.Util.falseFn,t.call(e,r,i)}},n.ontimeout=function(){this.onerror()},n}function d(t,e,n,i){var r=h(n,i);return r.open("POST",t),"undefined"!==typeof i&&null!==i&&"undefined"!==typeof i.options&&(r.timeout=i.options.timeout),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.send(c(e)),r}function p(t,e,n,i){var r=h(n,i);return r.open("GET",t+"?"+c(e),!0),"undefined"!==typeof i&&null!==i&&"undefined"!==typeof i.options&&(r.timeout=i.options.timeout,i.options.withCredentials&&(r.withCredentials=!0)),r.send(null),r}function f(t,e,n,i){var r=c(e),o=h(n,i),s=(t+"?"+r).length;if(s<=2e3&&a.cors?o.open("GET",t+"?"+r):s>2e3&&a.cors&&(o.open("POST",t),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8")),"undefined"!==typeof i&&null!==i&&"undefined"!==typeof i.options&&(o.timeout=i.options.timeout,i.options.withCredentials&&(o.withCredentials=!0)),s<=2e3&&a.cors)o.send(null);else{if(!(s>2e3&&a.cors))return s<=2e3&&!a.cors?m(t,e,n,i):void _("a request to "+t+" was longer then 2000 characters and this browser cannot make a cross-domain post request. Please use a proxy http://esri.github.io/esri-leaflet/api-reference/request.html");o.send(r)}return o}function m(t,e,n,i){window._EsriLeafletCallbacks=window._EsriLeafletCallbacks||{};var r="c"+l;e.callback="window._EsriLeafletCallbacks."+r,window._EsriLeafletCallbacks[r]=function(t){if(!0!==window._EsriLeafletCallbacks[r]){var e,o=Object.prototype.toString.call(t);"[object Object]"!==o&&"[object Array]"!==o&&(e={error:{code:500,message:"Expected array or object as JSONP response"}},t=null),!e&&t.error&&(e=t,t=null),n.call(i,e,t),window._EsriLeafletCallbacks[r]=!0}};var o=u.DomUtil.create("script",null,document.body);return o.type="text/javascript",o.src=t+"?"+c(e),o.id=r,o.onerror=function(t){if(t&&!0!==window._EsriLeafletCallbacks[r]){n.call(i,{error:{code:500,message:"An unknown error occurred"}}),window._EsriLeafletCallbacks[r]=!0}},u.DomUtil.addClass(o,"esri-leaflet-jsonp"),l++,{id:r,url:o.src,abort:function(){window._EsriLeafletCallbacks._callback[r]({code:0,message:"Request aborted."})}}}var g=a.cors?p:m;function _(){console&&console.warn&&console.warn.apply(console,arguments)}g.CORS=p,g.JSONP=m;var v={request:f,get:g,post:d},y=function(t,e,n,i){var r=(i[0]-n[0])*(t[1]-n[1])-(i[1]-n[1])*(t[0]-n[0]),o=(e[0]-t[0])*(t[1]-n[1])-(e[1]-t[1])*(t[0]-n[0]),a=(i[1]-n[1])*(e[0]-t[0])-(i[0]-n[0])*(e[1]-t[1]);if(0!==a){var s=r/a,u=o/a;if(s>=0&&s<=1&&u>=0&&u<=1)return!0}return!1},b=function(t,e){for(var n=0;n<t.length-1;n++)for(var i=0;i<e.length-1;i++)if(y(t[n],t[n+1],e[i],e[i+1]))return!0;return!1},T=function(t){return function(t,e){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t},w=function(t){for(var e,n=0,i=0,r=t.length,o=t[i];i<r-1;i++)n+=((e=t[i+1])[0]-o[0])*(e[1]+o[1]),o=e;return n>=0},x=function(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},S=function(t,e){var n=b(t,e),i=function(t,e){for(var n=!1,i=-1,r=t.length,o=r-1;++i<r;o=i)(t[i][1]<=e[1]&&e[1]<t[o][1]||t[o][1]<=e[1]&&e[1]<t[i][1])&&e[0]<(t[o][0]-t[i][0])*(e[1]-t[i][1])/(t[o][1]-t[i][1])+t[i][0]&&(n=!n);return n}(t,e[0]);return!(n||!i)},E=function t(e,n){var i={};if(e.features){i.type="FeatureCollection",i.features=[];for(var r=0;r<e.features.length;r++)i.features.push(t(e.features[r],n))}if("number"===typeof e.x&&"number"===typeof e.y&&(i.type="Point",i.coordinates=[e.x,e.y],"number"===typeof e.z&&i.coordinates.push(e.z)),e.points&&(i.type="MultiPoint",i.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(i.type="LineString",i.coordinates=e.paths[0].slice(0)):(i.type="MultiLineString",i.coordinates=e.paths.slice(0))),e.rings&&(i=function(t){for(var e,n,i,r=[],o=[],a=0;a<t.length;a++){var s=T(t[a].slice(0));if(!(s.length<4))if(w(s)){var u=[s.slice().reverse()];r.push(u)}else o.push(s.slice().reverse())}for(var l=[];o.length;){i=o.pop();var c=!1;for(e=r.length-1;e>=0;e--)if(n=r[e][0],S(n,i)){r[e].push(i),c=!0;break}c||l.push(i)}for(;l.length;){i=l.pop();var h=!1;for(e=r.length-1;e>=0;e--)if(n=r[e][0],b(n,i)){r[e].push(i),h=!0;break}h||r.push([i.reverse()])}return 1===r.length?{type:"Polygon",coordinates:r[0]}:{type:"MultiPolygon",coordinates:r}}(e.rings.slice(0))),"number"===typeof e.xmin&&"number"===typeof e.ymin&&"number"===typeof e.xmax&&"number"===typeof e.ymax&&(i.type="Polygon",i.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.geometry||e.attributes)&&(i.type="Feature",i.geometry=e.geometry?t(e.geometry):null,i.properties=e.attributes?x(e.attributes):null,e.attributes))try{i.id=function(t,e){for(var n=e?[e,"OBJECTID","FID"]:["OBJECTID","FID"],i=0;i<n.length;i++){var r=n[i];if(r in t&&("string"===typeof t[r]||"number"===typeof t[r]))return t[r]}throw Error("No valid id attribute found")}(e.attributes,n)}catch(o){}return JSON.stringify(i.geometry)===JSON.stringify({})&&(i.geometry=null),e.spatialReference&&e.spatialReference.wkid&&4326!==e.spatialReference.wkid&&console.warn("Object converted in non-standard crs - "+JSON.stringify(e.spatialReference)),i},k=function(t){var e=[],n=t.slice(0),i=T(n.shift().slice(0));if(i.length>=4){w(i)||i.reverse(),e.push(i);for(var r=0;r<n.length;r++){var o=T(n[r].slice(0));o.length>=4&&(w(o)&&o.reverse(),e.push(o))}}return e},C=function t(e,n){n=n||"OBJECTID";var i,r={wkid:4326},o={};switch(e.type){case"Point":o.x=e.coordinates[0],o.y=e.coordinates[1],e.coordinates[2]&&(o.z=e.coordinates[2]),o.spatialReference=r;break;case"MultiPoint":o.points=e.coordinates.slice(0),e.coordinates[0][2]&&(o.hasZ=!0),o.spatialReference=r;break;case"LineString":o.paths=[e.coordinates.slice(0)],e.coordinates[0][2]&&(o.hasZ=!0),o.spatialReference=r;break;case"MultiLineString":o.paths=e.coordinates.slice(0),e.coordinates[0][0][2]&&(o.hasZ=!0),o.spatialReference=r;break;case"Polygon":o.rings=k(e.coordinates.slice(0)),e.coordinates[0][0][2]&&(o.hasZ=!0),o.spatialReference=r;break;case"MultiPolygon":o.rings=function(t){for(var e=[],n=0;n<t.length;n++)for(var i=k(t[n]),r=i.length-1;r>=0;r--){var o=i[r].slice(0);e.push(o)}return e}(e.coordinates.slice(0)),e.coordinates[0][0][0][2]&&(o.hasZ=!0),o.spatialReference=r;break;case"Feature":e.geometry&&(o.geometry=t(e.geometry,n)),o.attributes=e.properties?x(e.properties):{},e.id&&(o.attributes[n]=e.id);break;case"FeatureCollection":for(o=[],i=0;i<e.features.length;i++)o.push(t(e.features[i],n));break;case"GeometryCollection":for(o=[],i=0;i<e.geometries.length;i++)o.push(t(e.geometries[i],n))}return o},P='<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>';function L(t,e){return C(t,e)}function I(t,e){return E(t,e)}function A(t){if("NaN"!==t.xmin&&"NaN"!==t.ymin&&"NaN"!==t.xmax&&"NaN"!==t.ymax){var e=Object(u.latLng)(t.ymin,t.xmin),n=Object(u.latLng)(t.ymax,t.xmax);return Object(u.latLngBounds)(e,n)}return null}function M(t){return{xmin:(t=Object(u.latLngBounds)(t)).getSouthWest().lng,ymin:t.getSouthWest().lat,xmax:t.getNorthEast().lng,ymax:t.getNorthEast().lat,spatialReference:{wkid:4326}}}var O=/^(OBJECTID|FID|OID|ID)$/i;function R(t){var e;if(t.objectIdFieldName)e=t.objectIdFieldName;else if(t.fields){for(var n=0;n<=t.fields.length-1;n++)if("esriFieldTypeOID"===t.fields[n].type){e=t.fields[n].name;break}if(!e)for(n=0;n<=t.fields.length-1;n++)if(t.fields[n].name.match(O)){e=t.fields[n].name;break}}return e}function D(t){for(var e in t.attributes)if(e.match(O))return e}function N(t,e){var n,i=t.features||t.results,r=i&&i.length;n=e||R(t);var o={type:"FeatureCollection",features:[]};if(r)for(var a=i.length-1;a>=0;a--){var s=I(i[a],n||D(i[a]));o.features.push(s)}return o}function B(t){return"/"!==(t=u.Util.trim(t))[t.length-1]&&(t+="/"),t}function U(t){if(-1!==t.url.indexOf("?")){t.requestParams=t.requestParams||{};var e=t.url.substring(t.url.indexOf("?")+1);t.url=t.url.split("?")[0],t.requestParams=JSON.parse('{"'+decodeURI(e).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')}return t.url=B(t.url.split("?")[0]),t}function z(t){return/^(?!.*utility\.arcgis\.com).*\.arcgis\.com.*FeatureServer/i.test(t)}function F(t){var e;switch(t){case"Point":e="esriGeometryPoint";break;case"MultiPoint":e="esriGeometryMultipoint";break;case"LineString":case"MultiLineString":e="esriGeometryPolyline";break;case"Polygon":case"MultiPolygon":e="esriGeometryPolygon"}return e}function j(t){return t.getSize().x-s.attributionWidthOffset+"px"}function H(t){if(t.attributionControl){if(t.attributionControl._esriAttributionLayerCount||(t.attributionControl._esriAttributionLayerCount=0),0===t.attributionControl._esriAttributionLayerCount){if(!t.attributionControl._esriAttributionAddedOnce){var e=document.createElement("style");e.type="text/css",e.innerHTML=".esri-truncated-attribution:hover {white-space: normal;}",document.getElementsByTagName("head")[0].appendChild(e);var n=document.createElement("style");n.type="text/css",n.innerHTML=".esri-truncated-attribution {vertical-align: -3px;white-space: nowrap;overflow: hidden;text-overflow: ellipsis;display: inline-block;transition: 0s white-space;transition-delay: 1s;max-width: "+j(t)+";}",document.getElementsByTagName("head")[0].appendChild(n),t.on("resize",(function(e){t.attributionControl&&(t.attributionControl._container.style.maxWidth=j(e.target))})),t.attributionControl._esriAttributionAddedOnce=!0}t.attributionControl.setPrefix(P+' | Powered by <a href="https://www.esri.com">Esri</a>'),u.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution:hover"),u.DomUtil.addClass(t.attributionControl._container,"esri-truncated-attribution")}t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount+1}}function Z(t){t.attributionControl&&(t.attributionControl._esriAttributionLayerCount&&1===t.attributionControl._esriAttributionLayerCount&&(t.attributionControl.setPrefix(P),u.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution:hover"),u.DomUtil.removeClass(t.attributionControl._container,"esri-truncated-attribution")),t.attributionControl._esriAttributionLayerCount=t.attributionControl._esriAttributionLayerCount-1)}function W(t){var e={geometry:null,geometryType:null};return t instanceof u.LatLngBounds?(e.geometry=M(t),e.geometryType="esriGeometryEnvelope",e):(t.getLatLng&&(t=t.getLatLng()),t instanceof u.LatLng&&(t={type:"Point",coordinates:[t.lng,t.lat]}),t instanceof u.GeoJSON&&(t=t.getLayers()[0].feature.geometry,e.geometry=L(t),e.geometryType=F(t.type)),t.toGeoJSON&&(t=t.toGeoJSON()),"Feature"===t.type&&(t=t.geometry),"Point"===t.type||"LineString"===t.type||"Polygon"===t.type||"MultiPolygon"===t.type?(e.geometry=L(t),e.geometryType=F(t.type),e):void _("invalid geometry passed to spatial query. Should be L.LatLng, L.LatLngBounds, L.Marker or a GeoJSON Point, Line, Polygon or MultiPolygon object"))}function q(t,e){a.cors&&f(t,{},u.Util.bind((function(t,n){if(!t){e._esriAttributions=[];for(var i=0;i<n.contributors.length;i++)for(var r=n.contributors[i],o=0;o<r.coverageAreas.length;o++){var a=r.coverageAreas[o],s=Object(u.latLng)(a.bbox[0],a.bbox[1]),l=Object(u.latLng)(a.bbox[2],a.bbox[3]);e._esriAttributions.push({attribution:r.attribution,score:a.score,bounds:Object(u.latLngBounds)(s,l),minZoom:a.zoomMin,maxZoom:a.zoomMax})}e._esriAttributions.sort((function(t,e){return e.score-t.score})),V({target:e})}}),this))}function V(t){var e=t.target,n=e._esriAttributions;if(e&&e.attributionControl){var i=e.attributionControl._container.querySelector(".esri-dynamic-attribution");if(i&&n){for(var r="",o=e.getBounds(),a=Object(u.latLngBounds)(o.getSouthWest().wrap(),o.getNorthEast().wrap()),s=e.getZoom(),l=0;l<n.length;l++){var c=n[l],h=c.attribution;!r.match(h)&&c.bounds.intersects(a)&&s>=c.minZoom&&s<=c.maxZoom&&(r+=", "+h)}r=r.substr(2),i.innerHTML=r,i.style.maxWidth=j(e),e.fire("attributionupdated",{attribution:r})}}}var G={warn:_,cleanUrl:B,getUrlParams:U,isArcgisOnline:z,geojsonTypeToArcGIS:F,responseToFeatureCollection:N,geojsonToArcGIS:L,arcgisToGeoJSON:I,boundsToExtent:M,extentToBounds:A,calcAttributionWidth:j,setEsriAttribution:H,_setGeometry:W,_getAttributionData:q,_updateMapAttribution:V,_findIdAttributeFromFeature:D,_findIdAttributeFromResponse:R},Y=u.Class.extend({options:{proxy:!1,useCors:r},generateSetter:function(t,e){return u.Util.bind((function(e){return this.params[t]=e,this}),e)},initialize:function(t){if(t.request&&t.options?(this._service=t,u.Util.setOptions(this,t.options)):(u.Util.setOptions(this,t),this.options.url=B(t.url)),this.params=u.Util.extend({},this.params||{}),this.setters)for(var e in this.setters){var n=this.setters[e];this[e]=this.generateSetter(n,this)}},token:function(t){return this._service?this._service.authenticate(t):this.params.token=t,this},apikey:function(t){return this.token(t)},format:function(t){return this.params.returnUnformattedValues=!t,this},request:function(t,e){return this.options.requestParams&&u.Util.extend(this.params,this.options.requestParams),this._service?this._service.request(this.path,this.params,t,e):this._request("request",this.path,this.params,t,e)},_request:function(t,e,n,i,r){var o=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?v[t](o,n,i,r):v.get.JSONP(o,n,i,r)}});function X(t){return t=U(t),new Y(t)}var K=Y.extend({setters:{offset:"resultOffset",limit:"resultRecordCount",fields:"outFields",precision:"geometryPrecision",featureIds:"objectIds",returnGeometry:"returnGeometry",returnM:"returnM",transform:"datumTransformation",token:"token"},path:"query",params:{returnGeometry:!0,where:"1=1",outSR:4326,outFields:"*"},within:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelContains",this},intersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIntersects",this},contains:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelWithin",this},crosses:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelCrosses",this},touches:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelTouches",this},overlaps:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelOverlaps",this},bboxIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelEnvelopeIntersects",this},indexIntersects:function(t){return this._setGeometryParams(t),this.params.spatialRel="esriSpatialRelIndexIntersects",this},nearby:function(t,e){return t=Object(u.latLng)(t),this.params.geometry=[t.lng,t.lat],this.params.geometryType="esriGeometryPoint",this.params.spatialRel="esriSpatialRelIntersects",this.params.units="esriSRUnit_Meter",this.params.distance=e,this.params.inSR=4326,this},where:function(t){return this.params.where=t,this},between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},orderBy:function(t,e){return e=e||"ASC",this.params.orderByFields=this.params.orderByFields?this.params.orderByFields+",":"",this.params.orderByFields+=[t,e].join(" "),this},run:function(t,e){return this._cleanParams(),this.options.isModern||z(this.options.url)&&void 0===this.options.isModern?(this.params.f="geojson",this.request((function(n,i){this._trapSQLerrors(n),t.call(e,n,i,i)}),this)):this.request((function(n,i){this._trapSQLerrors(n),t.call(e,n,i&&N(i),i)}),this)},count:function(t,e){return this._cleanParams(),this.params.returnCountOnly=!0,this.request((function(e,n){t.call(this,e,n&&n.count,n)}),e)},ids:function(t,e){return this._cleanParams(),this.params.returnIdsOnly=!0,this.request((function(e,n){t.call(this,e,n&&n.objectIds,n)}),e)},bounds:function(t,e){return this._cleanParams(),this.params.returnExtentOnly=!0,this.request((function(n,i){i&&i.extent&&A(i.extent)?t.call(e,n,A(i.extent),i):(n={message:"Invalid Bounds"},t.call(e,n,null,i))}),e)},distinct:function(){return this.params.returnGeometry=!1,this.params.returnDistinctValues=!0,this},pixelSize:function(t){var e=Object(u.point)(t);return this.params.pixelSize=[e.x,e.y],this},layer:function(t){return this.path=t+"/query",this},_trapSQLerrors:function(t){t&&"400"===t.code&&_("one common syntax error in query requests is encasing string values in double quotes instead of single quotes")},_cleanParams:function(){delete this.params.returnIdsOnly,delete this.params.returnExtentOnly,delete this.params.returnCountOnly},_setGeometryParams:function(t){this.params.inSR=4326;var e=W(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});function Q(t){return new K(t)}var $=Q,J=Y.extend({setters:{contains:"contains",text:"searchText",fields:"searchFields",spatialReference:"sr",sr:"sr",layers:"layers",returnGeometry:"returnGeometry",maxAllowableOffset:"maxAllowableOffset",precision:"geometryPrecision",dynamicLayers:"dynamicLayers",returnZ:"returnZ",returnM:"returnM",gdbVersion:"gdbVersion",token:"token"},path:"find",params:{sr:4326,contains:!0,returnGeometry:!0,returnZ:!0,returnM:!1},layerDefs:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(t,e){return this.request((function(n,i){t.call(e,n,i&&N(i),i)}),e)}});function tt(t){return new J(t)}var et=tt,nt=Y.extend({path:"identify",between:function(t,e){return this.params.time=[t.valueOf(),e.valueOf()],this}});function it(t){return new nt(t)}var rt=nt.extend({setters:{layers:"layers",precision:"geometryPrecision",tolerance:"tolerance",returnGeometry:"returnGeometry"},params:{sr:4326,layers:"all",tolerance:3,returnGeometry:!0},on:function(t){var e=M(t.getBounds()),n=t.getSize();return this.params.imageDisplay=[n.x,n.y,96],this.params.mapExtent=[e.xmin,e.ymin,e.xmax,e.ymax],this},at:function(t){return 2===t.length&&(t=Object(u.latLng)(t)),this._setGeometryParams(t),this},layerDef:function(t,e){return this.params.layerDefs=this.params.layerDefs?this.params.layerDefs+";":"",this.params.layerDefs+=[t,e].join(":"),this},simplify:function(t,e){var n=Math.abs(t.getBounds().getWest()-t.getBounds().getEast());return this.params.maxAllowableOffset=n/t.getSize().y*e,this},run:function(t,e){return this.request((function(n,i){if(n)t.call(e,n,void 0,i);else{var r=N(i);i.results=i.results.reverse();for(var o=0;o<r.features.length;o++){r.features[o].layerId=i.results[o].layerId}t.call(e,void 0,r,i)}}))},_setGeometryParams:function(t){var e=W(t);this.params.geometry=e.geometry,this.params.geometryType=e.geometryType}});function ot(t){return new rt(t)}var at=ot,st=nt.extend({setters:{setMosaicRule:"mosaicRule",setRenderingRule:"renderingRule",setPixelSize:"pixelSize",returnCatalogItems:"returnCatalogItems",returnGeometry:"returnGeometry"},params:{returnGeometry:!1},at:function(t){return t=Object(u.latLng)(t),this.params.geometry=JSON.stringify({x:t.lng,y:t.lat,spatialReference:{wkid:4326}}),this.params.geometryType="esriGeometryPoint",this},getMosaicRule:function(){return this.params.mosaicRule},getRenderingRule:function(){return this.params.renderingRule},getPixelSize:function(){return this.params.pixelSize},run:function(t,e){return this.request((function(n,i){t.call(e,n,i&&this._responseToGeoJSON(i),i)}),this)},_responseToGeoJSON:function(t){var e=t.location,n=t.catalogItems,i=t.catalogItemVisibilities,r={pixel:{type:"Feature",geometry:{type:"Point",coordinates:[e.x,e.y]},crs:{type:"EPSG",properties:{code:e.spatialReference.wkid}},properties:{OBJECTID:t.objectId,name:t.name,value:t.value},id:t.objectId}};if(t.properties&&t.properties.Values&&(r.pixel.properties.values=t.properties.Values),n&&n.features&&(r.catalogItems=N(n),i&&i.length===r.catalogItems.features.length))for(var o=i.length-1;o>=0;o--)r.catalogItems.features[o].properties.catalogItemVisibility=i[o];return r}});function ut(t){return new st(t)}var lt=ut,ct=u.Evented.extend({options:{proxy:!1,useCors:r,timeout:0},initialize:function(t){t=t||{},this._requestQueue=[],this._authenticating=!1,u.Util.setOptions(this,t),this.options.url=B(this.options.url)},get:function(t,e,n,i){return this._request("get",t,e,n,i)},post:function(t,e,n,i){return this._request("post",t,e,n,i)},request:function(t,e,n,i){return this._request("request",t,e,n,i)},metadata:function(t,e){return this._request("get","",{},t,e)},authenticate:function(t){return this._authenticating=!1,this.options.token=t,this._runQueue(),this},getTimeout:function(){return this.options.timeout},setTimeout:function(t){this.options.timeout=t},_request:function(t,e,n,i,r){this.fire("requeststart",{url:this.options.url+e,params:n,method:t},!0);var o=this._createServiceCallback(t,e,n,i,r);if(this.options.token&&(n.token=this.options.token),this.options.requestParams&&u.Util.extend(n,this.options.requestParams),!this._authenticating){var a=this.options.proxy?this.options.proxy+"?"+this.options.url+e:this.options.url+e;return"get"!==t&&"request"!==t||this.options.useCors?v[t](a,n,o,r):v.get.JSONP(a,n,o,r)}this._requestQueue.push([t,e,n,i,r])},_createServiceCallback:function(t,e,n,i,r){return u.Util.bind((function(o,a){!o||499!==o.code&&498!==o.code||(this._authenticating=!0,this._requestQueue.push([t,e,n,i,r]),this.fire("authenticationrequired",{authenticate:u.Util.bind(this.authenticate,this)},!0),o.authenticate=u.Util.bind(this.authenticate,this)),i.call(r,o,a),o?this.fire("requesterror",{url:this.options.url+e,params:n,message:o.message,code:o.code,method:t},!0):this.fire("requestsuccess",{url:this.options.url+e,params:n,response:a,method:t},!0),this.fire("requestend",{url:this.options.url+e,params:n,method:t},!0)}),this)},_runQueue:function(){for(var t=this._requestQueue.length-1;t>=0;t--){var e=this._requestQueue[t];this[e.shift()].apply(this,e)}this._requestQueue=[]}});function ht(t){return t=U(t),new ct(t)}var dt=ct.extend({identify:function(){return at(this)},find:function(){return et(this)},query:function(){return $(this)}});function pt(t){return new dt(t)}var ft=pt,mt=ct.extend({query:function(){return $(this)},identify:function(){return lt(this)}});function gt(t){return new mt(t)}var _t=gt,vt=ct.extend({options:{idAttribute:"OBJECTID"},query:function(){return $(this)},addFeature:function(t,e,n){this.addFeatures(t,e,n)},addFeatures:function(t,e,n){for(var i=t.features?t.features:[t],r=i.length-1;r>=0;r--)delete i[r].id;return t=L(t),t=i.length>1?t:[t],this.post("addFeatures",{features:t},(function(t,i){var r=i&&i.addResults?i.addResults.length>1?i.addResults:i.addResults[0]:void 0;e&&e.call(n,t||i.addResults[0].error,r)}),n)},updateFeature:function(t,e,n){this.updateFeatures(t,e,n)},updateFeatures:function(t,e,n){var i=t.features?t.features:[t];return t=L(t,this.options.idAttribute),t=i.length>1?t:[t],this.post("updateFeatures",{features:t},(function(t,i){var r=i&&i.updateResults?i.updateResults.length>1?i.updateResults:i.updateResults[0]:void 0;e&&e.call(n,t||i.updateResults[0].error,r)}),n)},deleteFeature:function(t,e,n){this.deleteFeatures(t,e,n)},deleteFeatures:function(t,e,n){return this.post("deleteFeatures",{objectIds:t},(function(t,i){var r=i&&i.deleteResults?i.deleteResults.length>1?i.deleteResults:i.deleteResults[0]:void 0;e&&e.call(n,t||i.deleteResults[0].error,r)}),n)}});function yt(t){return new vt(t)}var bt=yt,Tt="https:"!==window.location.protocol?"http:":"https:",wt=u.TileLayer.extend({statics:{TILES:{Streets:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Street_Map"}},Topographic:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/World_Topo_Map"}},Oceans:{urlTemplate:Tt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"USGS, NOAA",attributionUrl:"https://static.arcgis.com/attribution/Ocean_Basemap"}},OceansLabels:{urlTemplate:Tt+"//{s}.arcgisonline.com/arcgis/rest/services/Ocean/World_Ocean_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},NationalGeographic:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"National Geographic, DeLorme, HERE, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, increment P Corp."}},DarkGray:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},DarkGrayLabels:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},Gray:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],attribution:"HERE, DeLorme, MapmyIndia, &copy; OpenStreetMap contributors"}},GrayLabels:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Reference/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:16,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},Imagery:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],attribution:"DigitalGlobe, GeoEye, i-cubed, USDA, USGS, AEX, Getmapping, Aerogrid, IGN, IGP, swisstopo, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}},ImageryLabels:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},ImageryTransportation:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Transportation/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},ShadedRelief:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Shaded_Relief/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS"}},ShadedReliefLabels:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Boundaries_and_Places_Alternate/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:12,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},Terrain:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],attribution:"USGS, NOAA"}},TerrainLabels:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/Reference/World_Reference_Overlay/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:13,subdomains:["server","services"],pane:o?"esri-labels":"tilePane",attribution:""}},USATopo:{urlTemplate:Tt+"//{s}.arcgisonline.com/ArcGIS/rest/services/USA_Topo_Maps/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:15,subdomains:["server","services"],attribution:"USGS, National Geographic Society, i-cubed"}},ImageryClarity:{urlTemplate:Tt+"//clarity.maptiles.arcgis.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community"}},Physical:{urlTemplate:Tt+"//{s}.arcgisonline.com/arcgis/rest/services/World_Physical_Map/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:8,subdomains:["server","services"],attribution:"U.S. National Park Service"}},ImageryFirefly:{urlTemplate:Tt+"//fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}",options:{minZoom:1,maxZoom:19,attribution:"Esri, DigitalGlobe, GeoEye, Earthstar Geographics, CNES/Airbus DS, USDA, USGS, AeroGRID, IGN, and the GIS User Community",attributionUrl:"https://static.arcgis.com/attribution/World_Imagery"}}}},initialize:function(t,e){var n;if("object"===typeof t&&t.urlTemplate&&t.options)n=t;else{if("string"!==typeof t||!wt.TILES[t])throw new Error('L.esri.BasemapLayer: Invalid parameter. Use one of "Streets", "Topographic", "Oceans", "OceansLabels", "NationalGeographic", "Physical", "Gray", "GrayLabels", "DarkGray", "DarkGrayLabels", "Imagery", "ImageryLabels", "ImageryTransportation", "ImageryClarity", "ImageryFirefly", ShadedRelief", "ShadedReliefLabels", "Terrain", "TerrainLabels" or "USATopo"');n=wt.TILES[t]}var i=u.Util.extend(n.options,e);u.Util.setOptions(this,i),this.options.ignoreDeprecationWarning||console.warn("WARNING: L.esri.BasemapLayer uses data services that are in mature support and are not being updated. Please use L.esri.Vector.vectorBasemapLayer instead. More info: https://esriurl.com/esri-leaflet-basemap"),this.options.token&&-1===n.urlTemplate.indexOf("token=")&&(n.urlTemplate+="?token="+this.options.token),this.options.proxy&&(n.urlTemplate=this.options.proxy+"?"+n.urlTemplate),u.TileLayer.prototype.initialize.call(this,n.urlTemplate,i)},onAdd:function(t){H(t),"esri-labels"===this.options.pane&&this._initPane(),this.options.attributionUrl&&q((this.options.proxy?this.options.proxy+"?":"")+this.options.attributionUrl,t),t.on("moveend",V),u.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){Z(t),t.off("moveend",V),u.TileLayer.prototype.onRemove.call(this,t)},_initPane:function(){if(!this._map.getPane(this.options.pane)){var t=this._map.createPane(this.options.pane);t.style.pointerEvents="none",t.style.zIndex=500}},getAttribution:function(){if(this.options.attribution)var t='<span class="esri-dynamic-attribution">'+this.options.attribution+"</span>";return t}});function xt(t,e){return new wt(t,e)}var St=u.TileLayer.extend({options:{zoomOffsetAllowance:.1,errorTileUrl:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEABAMAAACuXLVVAAAAA1BMVEUzNDVszlHHAAAAAXRSTlMAQObYZgAAAAlwSFlzAAAAAAAAAAAB6mUWpAAAADZJREFUeJztwQEBAAAAgiD/r25IQAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA7waBAAABw08RwAAAAABJRU5ErkJggg=="},statics:{MercatorZoomLevels:{0:156543.033928,1:78271.5169639999,2:39135.7584820001,3:19567.8792409999,4:9783.93962049996,5:4891.96981024998,6:2445.98490512499,7:1222.99245256249,8:611.49622628138,9:305.748113140558,10:152.874056570411,11:76.4370282850732,12:38.2185141425366,13:19.1092570712683,14:9.55462853563415,15:4.77731426794937,16:2.38865713397468,17:1.19432856685505,18:.597164283559817,19:.298582141647617,20:.14929107082381,21:.07464553541191,22:.0373227677059525,23:.0186613838529763}},initialize:function(t){t=U(t=u.Util.setOptions(this,t)),this.tileUrl=(t.proxy?t.proxy+"?":"")+t.url+"tile/{z}/{y}/{x}"+(t.requestParams&&Object.keys(t.requestParams).length>0?u.Util.getParamString(t.requestParams):""),-1!==t.url.indexOf("{s}")&&t.subdomains&&(t.url=t.url.replace("{s}",t.subdomains[0])),this.service=ft(t),this.service.addEventParent(this),new RegExp(/tiles.arcgis(online)?\.com/g).test(t.url)&&(this.tileUrl=this.tileUrl.replace("://tiles","://tiles{s}"),t.subdomains=["1","2","3","4"]),this.options.token&&(this.tileUrl+="?token="+this.options.token),u.TileLayer.prototype.initialize.call(this,this.tileUrl,t)},getTileUrl:function(t){var e=this._getZoomForUrl();return u.Util.template(this.tileUrl,u.Util.extend({s:this._getSubdomain(t),x:t.x,y:t.y,z:this._lodMap&&this._lodMap[e]?this._lodMap[e]:e},this.options))},createTile:function(t,e){var n=document.createElement("img");return u.DomEvent.on(n,"load",u.Util.bind(this._tileOnLoad,this,e,n)),u.DomEvent.on(n,"error",u.Util.bind(this._tileOnError,this,e,n)),this.options.crossOrigin&&(n.crossOrigin=""),n.alt="",!this._lodMap||this._lodMap&&this._lodMap[this._getZoomForUrl()]?n.src=this.getTileUrl(t):this.once("lodmap",(function(){n.src=this.getTileUrl(t)}),this),n},onAdd:function(t){H(t),this._lodMap||this.metadata((function(e,n){if(!e&&n.spatialReference){var i=n.spatialReference.latestWkid||n.spatialReference.wkid;if(!this.options.attribution&&t.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,t.attributionControl.addAttribution(this.getAttribution())),t.options.crs!==u.CRS.EPSG3857||102100!==i&&3857!==i)t.options.crs&&t.options.crs.code&&t.options.crs.code.indexOf(i)>-1||_("L.esri.TiledMapLayer is using a non-mercator spatial reference. Support may be available through Proj4Leaflet http://esri.github.io/esri-leaflet/examples/non-mercator-projection.html");else{this._lodMap={};for(var r=n.tileInfo.lods,o=St.MercatorZoomLevels,a=0;a<r.length;a++){var s=r[a];for(var l in o){var c=o[l];if(this._withinPercentage(s.resolution,c,this.options.zoomOffsetAllowance)){this._lodMap[l]=s.level;break}}}this.fire("lodmap")}}}),this),u.TileLayer.prototype.onAdd.call(this,t)},onRemove:function(t){Z(t),u.TileLayer.prototype.onRemove.call(this,t)},metadata:function(t,e){return this.service.metadata(t,e),this},identify:function(){return this.service.identify()},find:function(){return this.service.find()},query:function(){return this.service.query()},authenticate:function(t){var e="?token="+t;return this.tileUrl=this.options.token?this.tileUrl.replace(/\?token=(.+)/g,e):this.tileUrl+e,this.options.token=t,this.service.authenticate(t),this},_withinPercentage:function(t,e,n){return Math.abs(t/e-1)<n}});function Et(t,e){return new St(t,e)}var kt=u.ImageOverlay.extend({onAdd:function(t){this._topLeft=t.getPixelBounds().min,u.ImageOverlay.prototype.onAdd.call(this,t)},_reset:function(){this._map.options.crs===u.CRS.EPSG3857?u.ImageOverlay.prototype._reset.call(this):u.DomUtil.setPosition(this._image,this._topLeft.subtract(this._map.getPixelOrigin()))}}),Ct=u.Layer.extend({options:{opacity:1,position:"front",f:"image",useCors:r,attribution:null,interactive:!1,alt:""},onAdd:function(t){H(t),this.options.zIndex&&(this.options.position=null),this._update=u.Util.throttle(this._update,this.options.updateInterval,this),t.on("moveend",this._update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this._update(),this._popup&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this.metadata((function(e,n){!e&&!this.options.attribution&&t.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}),this)},onRemove:function(t){Z(t),this._currentImage&&this._map.removeLayer(this._currentImage),this._popup&&(this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._map.off("moveend",this._update,this)},bindPopup:function(t,e){return this._shouldRenderPopup=!1,this._lastClick=!1,this._popup=Object(u.popup)(e),this._popupFunction=t,this._map&&(this._map.on("click",this._getPopupData,this),this._map.on("dblclick",this._resetPopupState,this)),this},unbindPopup:function(){return this._map&&(this._map.closePopup(this._popup),this._map.off("click",this._getPopupData,this),this._map.off("dblclick",this._resetPopupState,this)),this._popup=!1,this},bringToFront:function(){return this.options.position="front",this._currentImage&&(this._currentImage.bringToFront(),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this.options.position="back",this._currentImage&&(this._currentImage.bringToBack(),this._setAutoZIndex(Math.min)),this},setZIndex:function(t){return this.options.zIndex=t,this._currentImage&&this._currentImage.setZIndex(t),this},_setAutoZIndex:function(t){if(this._currentImage){for(var e,n=this._currentImage.getPane().children,i=-t(-1/0,1/0),r=0,o=n.length;r<o;r++)e=n[r].style.zIndex,n[r]!==this._currentImage._image&&e&&(i=t(i,+e));isFinite(i)&&(this.options.zIndex=i+t(-1,1),this.setZIndex(this.options.zIndex))}},getAttribution:function(){return this.options.attribution},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e){return this.options.from=t,this.options.to=e,this._update(),this},metadata:function(t,e){return this.service.metadata(t,e),this},authenticate:function(t){return this.service.authenticate(t),this},redraw:function(){this._update()},_renderImage:function(t,e,n){if(this._map){if(n&&(t="data:"+n+";base64,"+t),!t)return;var i=new kt(t,e,{opacity:0,crossOrigin:this.options.withCredentials?"use-credentials":this.options.useCors,alt:this.options.alt,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function t(n){if(i.off("error",t,this),this._map){var r=n.target,o=this._currentImage;r._bounds.equals(e)&&r._bounds.equals(this._map.getBounds())?(this._currentImage=r,"front"===this.options.position?this.bringToFront():"back"===this.options.position&&this.bringToBack(),this.options.zIndex&&this.setZIndex(this.options.zIndex),this._map&&this._currentImage._map?this._currentImage.setOpacity(this.options.opacity):this._currentImage._map.removeLayer(this._currentImage),o&&this._map&&this._map.removeLayer(o),o&&o._map&&o._map.removeLayer(o)):this._map.removeLayer(r)}this.fire("load",{bounds:e})};i.once("error",(function(){this._map.removeLayer(i),this.fire("error"),i.off("load",r,this)}),this),i.once("load",r,this)}},_update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(!this._animatingZoom&&(!this._map._panTransition||!this._map._panTransition._inProgress))if(t>this.options.maxZoom||t<this.options.minZoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var n=this._buildExportParams();u.Util.extend(n,this.options.requestParams),n?(this._requestExport(n,e),this.fire("loading",{bounds:e})):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_renderPopup:function(t,e,n,i){if(t=Object(u.latLng)(t),this._shouldRenderPopup&&this._lastClick.equals(t)){var r=this._popupFunction(e,n,i);r&&this._popup.setLatLng(t).setContent(r).openOn(this._map)}},_resetPopupState:function(t){this._shouldRenderPopup=!1,this._lastClick=t.latlng},_calculateBbox:function(){var t=this._map.getPixelBounds(),e=this._map.unproject(t.getBottomLeft()),n=this._map.unproject(t.getTopRight()),i=this._map.options.crs.project(n),r=this._map.options.crs.project(e),o=Object(u.bounds)(i,r);return[o.getBottomLeft().x,o.getBottomLeft().y,o.getTopRight().x,o.getTopRight().y].join(",")},_calculateImageSize:function(){var t=this._map.getPixelBounds(),e=this._map.getSize(),n=this._map.unproject(t.getBottomLeft()),i=this._map.unproject(t.getTopRight()),r=this._map.latLngToLayerPoint(i).y,o=this._map.latLngToLayerPoint(n).y;return(r>0||o<e.y)&&(e.y=o-r),e.x+","+e.y}}),Pt=Ct.extend({options:{updateInterval:150,format:"jpgpng",transparent:!0,f:"image"},query:function(){return this.service.query()},identify:function(){return this.service.identify()},initialize:function(t){t=U(t),this.service=_t(t),this.service.addEventParent(this),u.Util.setOptions(this,t)},setPixelType:function(t){return this.options.pixelType=t,this._update(),this},getPixelType:function(){return this.options.pixelType},setBandIds:function(t){return u.Util.isArray(t)?this.options.bandIds=t.join(","):this.options.bandIds=t.toString(),this._update(),this},getBandIds:function(){return this.options.bandIds},setNoData:function(t,e){return u.Util.isArray(t)?this.options.noData=t.join(","):this.options.noData=t.toString(),e&&(this.options.noDataInterpretation=e),this._update(),this},getNoData:function(){return this.options.noData},getNoDataInterpretation:function(){return this.options.noDataInterpretation},setRenderingRule:function(t){this.options.renderingRule=t,this._update()},getRenderingRule:function(){return this.options.renderingRule},setMosaicRule:function(t){this.options.mosaicRule=t,this._update()},getMosaicRule:function(){return this.options.mosaicRule},_getPopupData:function(t){var e=u.Util.bind((function(e,n,i){e||setTimeout(u.Util.bind((function(){this._renderPopup(t.latlng,e,n,i)}),this),300)}),this),n=this.identify().at(t.latlng);this.options.mosaicRule&&n.setMosaicRule(this.options.mosaicRule),n.run(e),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};return this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.options.pixelType&&(e.pixelType=this.options.pixelType),this.options.interpolation&&(e.interpolation=this.options.interpolation),this.options.compressionQuality&&(e.compressionQuality=this.options.compressionQuality),this.options.bandIds&&(e.bandIds=this.options.bandIds),(0===this.options.noData||this.options.noData)&&(e.noData=this.options.noData),this.options.noDataInterpretation&&(e.noDataInterpretation=this.options.noDataInterpretation),this.service.options.token&&(e.token=this.service.options.token),this.options.renderingRule&&(e.renderingRule=JSON.stringify(this.options.renderingRule)),this.options.mosaicRule&&(e.mosaicRule=JSON.stringify(this.options.mosaicRule)),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("exportImage",t,(function(t,n){t||(this.options.token&&(n.href+="?token="+this.options.token),this.options.proxy&&(n.href=this.options.proxy+"?"+n.href),this._renderImage(n.href,e))}),this);else{t.f="image";var n=this.options.url+"exportImage"+u.Util.getParamString(t);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,e)}}});function Lt(t,e){return new Pt(t,e)}var It=Ct.extend({options:{updateInterval:150,layers:!1,layerDefs:!1,timeOptions:!1,format:"png32",transparent:!0,f:"json"},initialize:function(t){t=U(t),this.service=ft(t),this.service.addEventParent(this),u.Util.setOptions(this,t)},getDynamicLayers:function(){return this.options.dynamicLayers},setDynamicLayers:function(t){return this.options.dynamicLayers=t,this._update(),this},getLayers:function(){return this.options.layers},setLayers:function(t){return this.options.layers=t,this._update(),this},getLayerDefs:function(){return this.options.layerDefs},setLayerDefs:function(t){return this.options.layerDefs=t,this._update(),this},getTimeOptions:function(){return this.options.timeOptions},setTimeOptions:function(t){return this.options.timeOptions=t,this._update(),this},query:function(){return this.service.query()},identify:function(){return this.service.identify()},find:function(){return this.service.find()},_getPopupData:function(t){var e,n=u.Util.bind((function(e,n,i){e||setTimeout(u.Util.bind((function(){this._renderPopup(t.latlng,e,n,i)}),this),300)}),this);if((e=this.options.popup?this.options.popup.on(this._map).at(t.latlng):this.identify().on(this._map).at(t.latlng)).params.maxAllowableOffset||e.simplify(this._map,.5),this.options.popup&&this.options.popup.params&&this.options.popup.params.layers||(this.options.layers?e.layers("visible:"+this.options.layers.join(",")):e.layers("visible")),this.options.layerDefs&&"string"!==typeof this.options.layerDefs&&!e.params.layerDefs)for(var i in this.options.layerDefs)this.options.layerDefs.hasOwnProperty(i)&&e.layerDef(i,this.options.layerDefs[i]);e.run(n),this._shouldRenderPopup=!0,this._lastClick=t.latlng},_buildExportParams:function(){var t=parseInt(this._map.options.crs.code.split(":")[1],10),e={bbox:this._calculateBbox(),size:this._calculateImageSize(),dpi:96,format:this.options.format,transparent:this.options.transparent,bboxSR:t,imageSR:t};if(this.options.dynamicLayers&&(e.dynamicLayers=this.options.dynamicLayers),this.options.layers){if(0===this.options.layers.length)return;e.layers="show:"+this.options.layers.join(",")}return this.options.layerDefs&&(e.layerDefs="string"===typeof this.options.layerDefs?this.options.layerDefs:JSON.stringify(this.options.layerDefs)),this.options.timeOptions&&(e.timeOptions=JSON.stringify(this.options.timeOptions)),this.options.from&&this.options.to&&(e.time=this.options.from.valueOf()+","+this.options.to.valueOf()),this.service.options.token&&(e.token=this.service.options.token),this.options.proxy&&(e.proxy=this.options.proxy),this.options.disableCache&&(e._ts=Date.now()),e},_requestExport:function(t,e){if("json"===this.options.f)this.service.request("export",t,(function(t,n){t||(this.options.token&&n.href&&(n.href+="?token="+this.options.token),this.options.proxy&&n.href&&(n.href=this.options.proxy+"?"+n.href),n.href?this._renderImage(n.href,e):this._renderImage(n.imageData,e,n.contentType))}),this);else{t.f="image";var n=this.options.url+"export"+u.Util.getParamString(t);this.options.proxy&&(n=this.options.proxy+"?"+n),this._renderImage(n,e)}}});function At(t,e){return new It(t,e)}var Mt=u.Layer.extend({options:{cellSize:512,updateWhenIdle:u.Browser.mobile,updateInterval:150,noWrap:!1,keepBuffer:1.5},initialize:function(t){u.Util.setOptions(this,t)},onAdd:function(t){this._cells={},this._activeCells={},this._resetView(),this._update()},onRemove:function(t){this._removeAllCells(),this._cellZoom=void 0},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllCells(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=u.Util.throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),t},createCell:function(){return document.createElement("div")},removeCell:function(){},reuseCell:function(){},cellLeave:function(){},cellEnter:function(){},getCellSize:function(){var t=this.options.cellSize;return t instanceof u.Point?t:new u.Point(t,t)},_pruneCells:function(){if(this._map){var t,e;for(t in this._cells)(e=this._cells[t]).retain=e.current;for(t in this._cells)if((e=this._cells[t]).current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._cells)this._cells[t].retain||this._removeCell(t)}},_removeAllCells:function(){for(var t in this._cells)this._removeCell(t)},_invalidateAll:function(){this._removeAllCells(),this._cellZoom=void 0},_retainParent:function(t,e,n,i){var r=Math.floor(t/2),o=Math.floor(e/2),a=n-1,s=new u.Point(+r,+o);s.z=+a;var l=this._cellCoordsToKey(s),c=this._cells[l];return c&&c.active?(c.retain=!0,!0):(c&&c.loaded&&(c.retain=!0),a>i&&this._retainParent(r,o,a,i))},_retainChildren:function(t,e,n,i){for(var r=2*t;r<2*t+2;r++)for(var o=2*e;o<2*e+2;o++){var a=new u.Point(r,o);a.z=n+1;var s=this._cellCoordsToKey(a),l=this._cells[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),n+1<i&&this._retainChildren(r,o,n+1,i))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);e||this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_setView:function(t,e,n,i){var r=Math.round(e);i||(this._cellZoom=r,this._abortLoading&&this._abortLoading(),this._resetGrid(),void 0!==r&&this._update(t),n||this._pruneCells(),this._noPrune=!!n)},_resetGrid:function(){var t=this._map,e=t.options.crs,n=this._cellSize=this.getCellSize(),i=this._cellZoom,r=this._map.getPixelWorldBounds(this._cellZoom);r&&(this._globalCellRange=this._pxBoundsToCellRange(r)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],i).x/n.x),Math.ceil(t.project([0,e.wrapLng[1]],i).x/n.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],i).y/n.x),Math.ceil(t.project([e.wrapLat[1],0],i).y/n.y)]},_onMoveEnd:function(t){t&&(t.pinch||t.flyTo)||!this._map||this._map._animatingZoom||this._update()},_getCelldPixelBounds:function(t){var e=this._map,n=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),i=e.getZoomScale(n,this._cellZoom),r=e.project(t,this._cellZoom).floor(),o=e.getSize().divideBy(2*i);return new u.Bounds(r.subtract(o),r.add(o))},_update:function(t){var e=this._map;if(e){var n=Math.round(e.getZoom());void 0===t&&(t=e.getCenter());var i=this._getCelldPixelBounds(t),r=this._pxBoundsToCellRange(i),o=r.getCenter(),a=[],s=this.options.keepBuffer,l=new u.Bounds(r.getBottomLeft().subtract([s,-s]),r.getTopRight().add([s,-s]));if(!(isFinite(r.min.x)&&isFinite(r.min.y)&&isFinite(r.max.x)&&isFinite(r.max.y)))throw new Error("Attempted to load an infinite number of cells");for(var c in this._cells){var h=this._cells[c].coords;h.z===this._cellZoom&&l.contains(new u.Point(h.x,h.y))||(this._cells[c].current=!1)}if(Math.abs(n-this._cellZoom)>1)this._setView(t,n);else{for(var d=r.min.y;d<=r.max.y;d++)for(var p=r.min.x;p<=r.max.x;p++){var f=new u.Point(p,d);if(f.z=this._cellZoom,this._isValidCell(f)){var m=this._cells[this._cellCoordsToKey(f)];m?m.current=!0:a.push(f)}}if(a.sort((function(t,e){return t.distanceTo(o)-e.distanceTo(o)})),0!==a.length)for(this._loading||(this._loading=!0),p=0;p<a.length;p++){var g=this._cellCoordsToKey(a[p]),_=this._keyToCellCoords(g);this._activeCells[_]?this._reuseCell(a[p]):this._createCell(a[p])}}}},_isValidCell:function(t){var e=this._map.options.crs;if(!e.infinite){var n=this._globalCellRange;if(!e.wrapLng&&(t.x<n.min.x||t.x>n.max.x)||!e.wrapLat&&(t.y<n.min.y||t.y>n.max.y))return!1}if(!this.options.bounds)return!0;var i=this._cellCoordsToBounds(t);return Object(u.toLatLngBounds)(this.options.bounds).overlaps(i)},_keyToBounds:function(t){return this._cellCoordsToBounds(this._keyToCellCoords(t))},_cellCoordsToNwSe:function(t){var e=this._map,n=this.getCellSize(),i=t.scaleBy(n),r=i.add(n);return[e.unproject(i,t.z),e.unproject(r,t.z)]},_cellCoordsToBounds:function(t){var e=this._cellCoordsToNwSe(t),n=new u.LatLngBounds(e[0],e[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_cellCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToCellCoords:function(t){var e=t.split(":"),n=new u.Point(+e[0],+e[1]);return n.z=+e[2],n},_removeCell:function(t){var e=this._cells[t];if(e){var n=this._keyToCellCoords(t),i=this._wrapCoords(n),r=this._cellCoordsToBounds(this._wrapCoords(n));e.current=!1,delete this._cells[t],this._activeCells[t]=e,this.cellLeave(r,i,t),this.fire("cellleave",{key:t,coords:i,bounds:r})}},_reuseCell:function(t){var e=this._cellCoordsToKey(t);this._cells[e]=this._activeCells[e],this._cells[e].current=!0;var n=this._wrapCoords(t),i=this._cellCoordsToBounds(this._wrapCoords(t));this.cellEnter(i,n,e),this.fire("cellenter",{key:e,coords:n,bounds:i})},_createCell:function(t){var e=this._cellCoordsToKey(t),n=this._wrapCoords(t),i=this._cellCoordsToBounds(this._wrapCoords(t));this.createCell(i,n,e),this.fire("cellcreate",{key:e,coords:n,bounds:i}),this._cells[e]={coords:t,current:!0},u.Util.requestAnimFrame(this._pruneCells,this)},_cellReady:function(t,e,n){var i=this._cellCoordsToKey(t);(n=this._cells[i])&&(n.loaded=+new Date,n.active=!0)},_getCellPos:function(t){return t.scaleBy(this.getCellSize())},_wrapCoords:function(t){var e=new u.Point(this._wrapX?u.Util.wrapNum(t.x,this._wrapX):t.x,this._wrapY?u.Util.wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToCellRange:function(t){var e=this.getCellSize();return new u.Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))}});function Ot(t){this.values=[].concat(t||[])}Ot.prototype.query=function(t){var e=this.getIndex(t);return this.values[e]},Ot.prototype.getIndex=function(t){this.dirty&&this.sort();for(var e,n,i=0,r=this.values.length-1;i<=r;)if(e=(i+r)/2|0,+(n=this.values[Math.round(e)]).value<+t)i=e+1;else{if(!(+n.value>+t))return e;r=e-1}return Math.abs(~r)},Ot.prototype.between=function(t,e){var n=this.getIndex(t),i=this.getIndex(e);if(0===n&&0===i)return[];for(;this.values[n-1]&&this.values[n-1].value===t;)n--;for(;this.values[i+1]&&this.values[i+1].value===e;)i++;return this.values[i]&&this.values[i].value===e&&this.values[i+1]&&i++,this.values.slice(n,i)},Ot.prototype.insert=function(t){return this.values.splice(this.getIndex(t.value),0,t),this},Ot.prototype.bulkAdd=function(t,e){return this.values=this.values.concat([].concat(t||[])),e?this.sort():this.dirty=!0,this},Ot.prototype.sort=function(){return this.values.sort((function(t,e){return+e.value-+t.value})).reverse(),this.dirty=!1,this};var Rt=Ot,Dt=Mt.extend({options:{attribution:null,where:"1=1",fields:["*"],from:!1,to:!1,timeField:!1,timeFilterMode:"server",simplifyFactor:0,precision:6,fetchAllFeatures:!1},initialize:function(t){if(Mt.prototype.initialize.call(this,t),t=U(t),t=u.Util.setOptions(this,t),this.service=bt(t),this.service.addEventParent(this),"*"!==this.options.fields[0]){for(var e=!1,n=0;n<this.options.fields.length;n++)this.options.fields[n].match(/^(OBJECTID|FID|OID|ID)$/i)&&(e=!0);!1===e&&_("no known esriFieldTypeOID field detected in fields Array.  Please add an attribute field containing unique IDs to ensure the layer can be drawn correctly.")}this.options.timeField.start&&this.options.timeField.end?(this._startTimeIndex=new Rt,this._endTimeIndex=new Rt):this.options.timeField&&(this._timeIndex=new Rt),this._cache={},this._currentSnapshot=[],this._activeRequests=0},onAdd:function(t){return H(t),this.service.metadata((function(e,n){if(!e){var i=n.supportedQueryFormats,r=!1;(!1===this.service.options.isModern||this.options.fetchAllFeatures)&&(r=!0),!r&&i&&-1!==i.indexOf("geoJSON")&&(this.service.options.isModern=!0),n.objectIdField&&(this.service.options.idAttribute=n.objectIdField),!this.options.attribution&&t.attributionControl&&n.copyrightText&&(this.options.attribution=n.copyrightText,t.attributionControl.addAttribution(this.getAttribution()))}}),this),t.on("zoomend",this._handleZoomChange,this),Mt.prototype.onAdd.call(this,t)},onRemove:function(t){return Z(t),t.off("zoomend",this._handleZoomChange,this),Mt.prototype.onRemove.call(this,t)},getAttribution:function(){return this.options.attribution},createCell:function(t,e){this._visibleZoom()&&this._requestFeatures(t,e)},_requestFeatures:function(t,e,n,i){this._activeRequests++,i=i||0;var r=this.options.where;return 1===this._activeRequests&&this.fire("loading",{bounds:t},!0),this._buildQuery(t,i).run((function(o,a,s){s&&s.exceededTransferLimit&&this.fire("drawlimitexceeded"),this.options.where===r&&(!o&&a&&a.features.length&&u.Util.requestAnimFrame(u.Util.bind((function(){this._addFeatures(a.features,e),this._postProcessFeatures(t)}),this)),o||!a||a.features.length||this._postProcessFeatures(t),o&&this._postProcessFeatures(t),n&&n.call(this,o,a),s&&(s.exceededTransferLimit||s.properties&&s.properties.exceededTransferLimit)&&this.options.fetchAllFeatures&&this._requestFeatures(t,e,n,i+a.features.length))}),this)},_postProcessFeatures:function(t){this._activeRequests--,this._activeRequests<=0&&this.fire("load",{bounds:t})},_cacheKey:function(t){return t.z+":"+t.x+":"+t.y},_addFeatures:function(t,e){if(e){var n=this._cacheKey(e);this._cache[n]=this._cache[n]||[]}for(var i=t.length-1;i>=0;i--){var r=t[i].id;-1===this._currentSnapshot.indexOf(r)&&this._currentSnapshot.push(r),"undefined"!==typeof n&&-1===this._cache[n].indexOf(r)&&this._cache[n].push(r)}this.options.timeField&&this._buildTimeIndexes(t),this.createLayers(t)},_buildQuery:function(t,e){var n=this.service.query().intersects(t).where(this.options.where).fields(this.options.fields).precision(this.options.precision);return this.options.fetchAllFeatures&&!isNaN(parseInt(e))&&(n=n.offset(e)),n.params.resultType="tile",this.options.requestParams&&u.Util.extend(n.params,this.options.requestParams),this.options.simplifyFactor&&n.simplify(this._map,this.options.simplifyFactor),"server"===this.options.timeFilterMode&&this.options.from&&this.options.to&&n.between(this.options.from,this.options.to),n},setWhere:function(t,e,n){this.options.where=t&&t.length?t:"1=1";for(var i=[],r=[],o=0,a=null,s=u.Util.bind((function(s,l){if(s&&(a=s),l)for(var c=l.features.length-1;c>=0;c--)r.push(l.features[c].id);--o<=0&&this._visibleZoom()&&t===this.options.where&&(this._currentSnapshot=r,u.Util.requestAnimFrame(u.Util.bind((function(){this.removeLayers(i),this.addLayers(r),e&&e.call(n,a)}),this)))}),this),l=this._currentSnapshot.length-1;l>=0;l--)i.push(this._currentSnapshot[l]);for(var c in this._cache={},this._cells){o++;var h=this._keyToCellCoords(c),d=this._cellCoordsToBounds(h);this._requestFeatures(d,h,s)}return this},getWhere:function(){return this.options.where},getTimeRange:function(){return[this.options.from,this.options.to]},setTimeRange:function(t,e,n,i){var r=this.options.from,o=this.options.to,a=0,s=null,l=u.Util.bind((function(u){u&&(s=u),this._filterExistingFeatures(r,o,t,e),a--,n&&a<=0&&n.call(i,s)}),this);if(this.options.from=t,this.options.to=e,this._filterExistingFeatures(r,o,t,e),"server"===this.options.timeFilterMode)for(var c in this._cells){a++;var h=this._keyToCellCoords(c),d=this._cellCoordsToBounds(h);this._requestFeatures(d,h,l)}return this},refresh:function(){this.setWhere(this.options.where)},_filterExistingFeatures:function(t,e,n,i){var r=t&&e?this._getFeaturesInTimeRange(t,e):this._currentSnapshot,o=this._getFeaturesInTimeRange(n,i);if(o.indexOf)for(var a=0;a<o.length;a++){var s=r.indexOf(o[a]);s>=0&&r.splice(s,1)}u.Util.requestAnimFrame(u.Util.bind((function(){this.removeLayers(r),this.addLayers(o)}),this))},_getFeaturesInTimeRange:function(t,e){var n,i=[];if(this.options.timeField.start&&this.options.timeField.end){var r=this._startTimeIndex.between(t,e),o=this._endTimeIndex.between(t,e);n=r.concat(o)}else{if(!this._timeIndex)return _("You must set timeField in the layer constructor in order to manipulate the start and end time filter."),[];n=this._timeIndex.between(t,e)}for(var a=n.length-1;a>=0;a--)i.push(n[a].id);return i},_buildTimeIndexes:function(t){var e,n;if(this.options.timeField.start&&this.options.timeField.end){var i=[],r=[];for(e=t.length-1;e>=0;e--)n=t[e],i.push({id:n.id,value:new Date(n.properties[this.options.timeField.start])}),r.push({id:n.id,value:new Date(n.properties[this.options.timeField.end])});this._startTimeIndex.bulkAdd(i),this._endTimeIndex.bulkAdd(r)}else{var o=[];for(e=t.length-1;e>=0;e--)n=t[e],o.push({id:n.id,value:new Date(n.properties[this.options.timeField])});this._timeIndex.bulkAdd(o)}},_featureWithinTimeRange:function(t){if(!this.options.from||!this.options.to)return!0;var e=+this.options.from.valueOf(),n=+this.options.to.valueOf();if("string"===typeof this.options.timeField){var i=+t.properties[this.options.timeField];return i>=e&&i<=n}if(this.options.timeField.start&&this.options.timeField.end){var r=+t.properties[this.options.timeField.start],o=+t.properties[this.options.timeField.end];return r>=e&&r<=n||o>=e&&o<=n||r<=e&&o>=n}},_visibleZoom:function(){if(!this._map)return!1;var t=this._map.getZoom();return!(t>this.options.maxZoom||t<this.options.minZoom)},_handleZoomChange:function(){if(this._visibleZoom())for(var t in this._cells){var e=this._cells[t].coords,n=this._cacheKey(e);this._cache[n]&&this.addLayers(this._cache[n])}else this.removeLayers(this._currentSnapshot)},authenticate:function(t){return this.service.authenticate(t),this},metadata:function(t,e){return this.service.metadata(t,e),this},query:function(){return this.service.query()},_getMetadata:function(t){this._metadata?t(undefined,this._metadata):this.metadata(u.Util.bind((function(e,n){this._metadata=n,t(e,this._metadata)}),this))},addFeature:function(t,e,n){this.addFeatures(t,e,n)},addFeatures:function(t,e,n){this._getMetadata(u.Util.bind((function(i,r){if(i)e&&e.call(this,i,null);else{var o=t.features?t.features:[t];this.service.addFeatures(t,u.Util.bind((function(t,i){if(!t){for(var a=o.length-1;a>=0;a--)o[a].properties[r.objectIdField]=o.length>1?i[a].objectId:i.objectId,o[a].id=o.length>1?i[a].objectId:i.objectId;this._addFeatures(o)}e&&e.call(n,t,i)}),this))}}),this))},updateFeature:function(t,e,n){this.updateFeatures(t,e,n)},updateFeatures:function(t,e,n){var i=t.features?t.features:[t];this.service.updateFeatures(t,(function(t,r){if(!t){for(var o=i.length-1;o>=0;o--)this.removeLayers([i[o].id],!0);this._addFeatures(i)}e&&e.call(n,t,r)}),this)},deleteFeature:function(t,e,n){this.deleteFeatures(t,e,n)},deleteFeatures:function(t,e,n){return this.service.deleteFeatures(t,(function(t,i){var r=i.length?i:[i];if(!t&&r.length>0)for(var o=r.length-1;o>=0;o--)this.removeLayers([r[o].objectId],!0);e&&e.call(n,t,i)}),this)}}),Nt=Dt.extend({options:{cacheLayers:!0},initialize:function(t){t.apikey&&(t.token=t.apikey),Dt.prototype.initialize.call(this,t),this._originalStyle=this.options.style,this._layers={}},onRemove:function(t){for(var e in this._layers)t.removeLayer(this._layers[e]),this.fire("removefeature",{feature:this._layers[e].feature,permanent:!1},!0);return Dt.prototype.onRemove.call(this,t)},createNewLayer:function(t){var e=u.GeoJSON.geometryToLayer(t,this.options);return e&&(e.defaultOptions=e.options),e},_updateLayer:function(t,e){var n=[],i=this.options.coordsToLatLng||u.GeoJSON.coordsToLatLng;switch(e.properties&&(t.feature.properties=e.properties),e.geometry.type){case"Point":n=u.GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(n);break;case"LineString":n=u.GeoJSON.coordsToLatLngs(e.geometry.coordinates,0,i),t.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=u.GeoJSON.coordsToLatLngs(e.geometry.coordinates,1,i),t.setLatLngs(n);break;case"MultiPolygon":n=u.GeoJSON.coordsToLatLngs(e.geometry.coordinates,2,i),t.setLatLngs(n)}},createLayers:function(t){for(var e=t.length-1;e>=0;e--){var n,i=t[e],r=this._layers[i.id];!this._visibleZoom()||!r||this._map.hasLayer(r)||this.options.timeField&&!this._featureWithinTimeRange(i)||(this._map.addLayer(r),this.fire("addfeature",{feature:r.feature},!0)),r&&this.options.simplifyFactor>0&&(r.setLatLngs||r.setLatLng)&&this._updateLayer(r,i),r||((n=this.createNewLayer(i))?(n.feature=i,n.addEventParent(this),this.options.onEachFeature&&this.options.onEachFeature(n.feature,n),this._layers[n.feature.id]=n,this.setFeatureStyle(n.feature.id,this.options.style),this.fire("createfeature",{feature:n.feature},!0),this._visibleZoom()&&(!this.options.timeField||this.options.timeField&&this._featureWithinTimeRange(i))&&this._map.addLayer(n)):_("invalid GeoJSON encountered"))}},addLayers:function(t){for(var e=t.length-1;e>=0;e--){var n=this._layers[t[e]];!n||this.options.timeField&&!this._featureWithinTimeRange(n.feature)||this._map.addLayer(n)}},removeLayers:function(t,e){for(var n=t.length-1;n>=0;n--){var i=t[n],r=this._layers[i];r&&(this.fire("removefeature",{feature:r.feature,permanent:e},!0),this._map.removeLayer(r)),r&&e&&delete this._layers[i]}},cellEnter:function(t,e){this._visibleZoom()&&!this._zooming&&this._map&&u.Util.requestAnimFrame(u.Util.bind((function(){var t=this._cacheKey(e),n=this._cellCoordsToKey(e),i=this._cache[t];this._activeCells[n]&&i&&this.addLayers(i)}),this))},cellLeave:function(t,e){this._zooming||u.Util.requestAnimFrame(u.Util.bind((function(){if(this._map){var t=this._cacheKey(e),n=this._cellCoordsToKey(e),i=this._cache[t],r=this._map.getBounds();if(!this._activeCells[n]&&i){for(var o=!0,a=0;a<i.length;a++){var s=this._layers[i[a]];s&&s.getBounds&&r.intersects(s.getBounds())&&(o=!1)}o&&this.removeLayers(i,!this.options.cacheLayers),!this.options.cacheLayers&&o&&(delete this._cache[t],delete this._cells[n],delete this._activeCells[n])}}}),this))},resetStyle:function(){return this.options.style=this._originalStyle,this.eachFeature((function(t){this.resetFeatureStyle(t.feature.id)}),this),this},setStyle:function(t){return this.options.style=t,this.eachFeature((function(e){this.setFeatureStyle(e.feature.id,t)}),this),this},resetFeatureStyle:function(t){var e=this._layers[t],n=this._originalStyle||u.Path.prototype.options;return e&&(u.Util.extend(e.options,e.defaultOptions),this.setFeatureStyle(t,n)),this},setFeatureStyle:function(t,e){var n=this._layers[t];return"function"===typeof e&&(e=e(n.feature)),n.setStyle&&n.setStyle(e),this},eachActiveFeature:function(t,e){if(this._map){var n=this._map.getBounds();for(var i in this._layers)-1!==this._currentSnapshot.indexOf(this._layers[i].feature.id)&&("function"===typeof this._layers[i].getLatLng&&n.contains(this._layers[i].getLatLng())||"function"===typeof this._layers[i].getBounds&&n.intersects(this._layers[i].getBounds()))&&t.call(e,this._layers[i])}return this},eachFeature:function(t,e){for(var n in this._layers)t.call(e,this._layers[n]);return this},getFeature:function(t){return this._layers[t]},bringToBack:function(){this.eachFeature((function(t){t.bringToBack&&t.bringToBack()}))},bringToFront:function(){this.eachFeature((function(t){t.bringToFront&&t.bringToFront()}))},redraw:function(t){return t&&this._redraw(t),this},_redraw:function(t){var e=this._layers[t],n=e.feature;if(e&&e.setIcon&&this.options.pointToLayer&&this.options.pointToLayer){var i=this.options.pointToLayer(n,Object(u.latLng)(n.geometry.coordinates[1],n.geometry.coordinates[0])).options.icon;e.setIcon(i)}if(e&&e.setStyle&&this.options.pointToLayer){var r=this.options.pointToLayer(n,Object(u.latLng)(n.geometry.coordinates[1],n.geometry.coordinates[0])).options;this.setFeatureStyle(n.id,r)}e&&e.setStyle&&this.options.style&&this.resetStyle(n.id)}});function Bt(t){return new Nt(t)}var Ut=i.version},,function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(8);n(4);function r(){return Object(i.c)().map}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n(21),r=n(13),o=n(8),a=n(1),s=n(4),u=n.n(s);function l(){return(l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function c(t){var e=t.children,n=t.className,c=t.id,h=t.placeholder,d=t.style,p=t.whenCreated,f=Object(i.a)(t,["children","className","id","placeholder","style","whenCreated"]),m=Object(s.useRef)(null),g=function(t,e){var n=Object(s.useState)(null),i=Object(r.a)(n,2),o=i[0],u=i[1];return Object(s.useEffect)((function(){if(null!==t.current&&null===o){var n=new a.Map(t.current,e);null!=e.center&&null!=e.zoom?n.setView(e.center,e.zoom):null!=e.bounds&&n.fitBounds(e.bounds,e.boundsOptions),null!=e.whenReady&&n.whenReady(e.whenReady),u(n)}}),[t,o,e]),o}(m,f),_=Object(s.useRef)(!1);Object(s.useEffect)((function(){null!=g&&!1===_.current&&null!=p&&(_.current=!0,p(g))}),[g,p]);var v=Object(s.useState)({className:n,id:c,style:d}),y=Object(r.a)(v,1)[0],b=Object(s.useMemo)((function(){return g?{__version:o.a,map:g}:null}),[g]),T=b?u.a.createElement(o.b,{value:b},e):null!==h&&void 0!==h?h:null;return u.a.createElement("div",l({},y,{ref:m}),T)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return m}));var i=n(21),r=(n(13),n(4)),o=(n(12),n(8));function a(t){function e(e,n){var i=t(e).current.instance;return Object(r.useImperativeHandle)(n,(function(){return i})),null}return Object(r.forwardRef)(e)}function s(t,e){return null==e?function(e,n){return Object(r.useRef)(t(e,n))}:function(n,i){var o=Object(r.useRef)(t(n,i)),a=Object(r.useRef)(n),s=o.current.instance;return Object(r.useEffect)((function(){a.current!==n&&(e(s,n,a.current),a.current=n)}),[s,n,i]),o}}function u(t,e){var n=Object(r.useRef)(e);Object(r.useEffect)((function(){e!==n.current&&null!=t.attributionControl&&(null!=n.current&&t.attributionControl.removeAttribution(n.current),null!=e&&t.attributionControl.addAttribution(e)),n.current=e}),[t,e])}function l(t,e){var n=Object(r.useRef)();Object(r.useEffect)((function(){return null!=e&&t.instance.on(e),n.current=e,function(){null!=n.current&&t.instance.off(n.current),n.current=null}}),[t,e])}var c=n(11);function h(t,e){var n,i=null!==(n=t.pane)&&void 0!==n?n:e.pane;return i?Object(c.a)(Object(c.a)({},t),{},{pane:i}):t}function d(t,e){Object(r.useEffect)((function(){var n;return(null!==(n=e.layerContainer)&&void 0!==n?n:e.map).addLayer(t.instance),function(){var n;null==(n=e.layerContainer)||n.removeLayer(t.instance),e.map.removeLayer(t.instance)}}),[e,t])}function p(t){return function(e){var n=Object(o.c)(),i=t(h(e,n),n);return u(n.map,e.attribution),l(i.current,e.eventHandlers),d(i.current,n),i}}var f=n(1),m=a(p(s((function(t,e){var n=t.url,r=Object(i.a)(t,["url"]);return{instance:new f.TileLayer(n,h(r,e)),context:e}}),(function(t,e,n){var i=e.opacity,r=e.zIndex;null!=i&&i!==n.opacity&&t.setOpacity(i),null!=r&&r!==n.zIndex&&t.setZIndex(r)}))))}]]);
//# sourceMappingURL=2.2576970e.chunk.js.map